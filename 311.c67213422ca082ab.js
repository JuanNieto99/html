"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[311],{311:(ne,h,r)=>{r.r(h),r.d(h,{RolesModule:()=>k});var f=r(6814),l=r(95),v=r(4670),c=r(5219),T=r(3519),b=r.n(T),e=r(4946),A=r(5619),U=r(7398),N=r(4444),R=r(9862);let x=(()=>{class i{constructor(t){this.httpClient=t,this.dataSubject=new A.X([]),this.data=this.dataSubject.asObservable(),this.baseUrl=N.D.url,this.endpointCrear="/rolCrear",this.endpointRolListar="/rolListar",this.endpointRolesMostrar="/rolMostrar",this.endpointRolActualizar="/rolActualizar",this.endpointRolEliminar="/rolEliminar"}getRoles(t){return this.httpClient.post(`${this.baseUrl+this.endpointRolListar}?per_page=${t}`,{id:"",nombre:"",descripcion:"",estado:""})}CreateRoles(t){return this.httpClient.post(`${this.baseUrl+this.endpointCrear}`,t)}getRolesById(t){return this.httpClient.get(`${this.baseUrl+this.endpointRolesMostrar}/${t}`).pipe((0,U.U)(o=>o))}updateRoles(t){return this.httpClient.post(`${this.baseUrl+this.endpointRolActualizar}`,t)}deleteRoles(t){return this.httpClient.post(`${this.baseUrl+this.endpointRolEliminar}`,{id:t})}refresRolesData(){this.getRoles(30).subscribe(t=>{console.log(t.data),this.dataSubject.next(t.data)},t=>{console.log("Error: ",t)})}static#e=this.\u0275fac=function(o){return new(o||i)(e.LFG(R.eN))};static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var w=r(5379),S=r(1455),m=r(4104),g=r(7213),y=r(5817),I=r(2656),d=r(8027),u=r(707),Z=r(4480),C=r(3714);function E(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"div",33)(1,"h5",34),e._uU(2,"Lista de Roles"),e.qZA(),e.TgZ(3,"span",35),e._UZ(4,"i",36),e.TgZ(5,"input",37),e.NdJ("input",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.onGlobalFilter(s.dt,n))}),e.qZA()()()}}function J(i,p){1&i&&(e.TgZ(0,"tr")(1,"th",38),e._UZ(2,"p-tableHeaderCheckbox"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Nombre"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Descripci\xf3n"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Acciones"),e.qZA()())}function Y(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._UZ(2,"p-tableCheckbox",39),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td",40)(8,"p-button",41),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.getRol(s.id))}),e.qZA(),e._UZ(9,"p-confirmDialog"),e.TgZ(10,"p-button",42),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.confirmDelete(s.id))}),e.qZA()()()}if(2&i){const t=p.$implicit,o=e.oxw();e.xp6(2),e.Q6J("value",o.roles),e.xp6(2),e.Oqu(t.nombre),e.xp6(2),e.Oqu(t.descripcion)}}function M(i,p){if(1&i&&e._UZ(0,"input",43),2&i){const t=e.oxw();e.s9C("placeholder",t.rolesData.nombre)}}function D(i,p){if(1&i&&e._UZ(0,"textarea",44),2&i){const t=e.oxw();e.s9C("placeholder",t.rolesData.descripcion)}}const B=function(){return{"min-width":"50rem"}},F=function(){return["usuario","email","superadmin","estado"]},P=function(){return[10,20,30]},z=function(){return{width:"50vw"}},$=function(){return{width:"500px"}};let j=(()=>{class i{constructor(t,o,n,s,a,W,ee,te,oe,ie,re,le){this.rolesService=t,this.permissionsService=o,this.hotelsService=n,this.confirmationService=s,this.toastModule=a,this.dialogModule=W,this.messageService=ee,this.usersService=te,this.breadcrumbService=oe,this.tableModule=ie,this.buttonModule=re,this.cdRef=le,this.crearRol=!1,this.editarRol=!1,this.formNewR=new l.cw({nombre:new l.NI("",l.kI.required),descripcion:new l.NI("",l.kI.required),estado:new l.NI("",l.kI.required)}),this.formEditR=new l.cw({nombre:new l.NI("",l.kI.required),descripcion:new l.NI("",l.kI.required),estado:new l.NI("",l.kI.required),id:new l.NI("",l.kI.required)})}ngOnInit(){this.getAllRoles(),this.rolesService.data.subscribe(t=>{this.roles=t,console.log(this.roles)})}createRol(){const t=this.formNewR.value;this.formNewR.reset(),this.rolesService.CreateRoles(t).subscribe(o=>{console.log(o),this.messageService.add({severity:"info",summary:"Confirmaci\xf3n Exitosa",detail:"Rol creado.",sticky:!0,life:200}),this.crearRol=!1,this.rolesService.refresRolesData()},o=>{console.log("Error:",o)})}getAllRoles(){this.rolesService.getRoles(30).subscribe(t=>{this.roles=t.data,this.totalRoles=t.total,console.log(this.roles)},t=>{console.log("Error: ",t)})}getRol(t){this.rolesService.getRolesById(t).subscribe(o=>{this.rolesData=o,this.formEditR.get("nombre").setValue(o.nombre),this.formEditR.get("descripcion").setValue(o.descripcion),this.editarRol=!0})}updateRoles(){this.formEditR.get("id").setValue(this.rolesData.id);const t=this.formEditR.value;console.log(t),this.rolesService.updateRoles(t).subscribe(o=>{console.log(o),this.editarRol=!1,this.messageService.add({severity:"info",summary:"Confirmaci\xf3n Exitosa",detail:"Rol actualizado.",sticky:!0,life:200}),this.rolesService.refresRolesData()},o=>{console.log("Error:",o)})}confirmDelete(t){console.log(t),b().fire({title:"\xbfEstas Seguro que deseas eliminar el Rol?",text:"Ten cuidado esta acci\xf3n no se prodr\xe1 reversar",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, Confirmar",cancelButtonText:"Cancelar"}).then(o=>{o.isConfirmed&&(this.rolesService.deleteRoles(t).subscribe(n=>{console.log(n),this.rolesService.refresRolesData()}),b().fire({title:"Confirmaci\xf3n",text:"El Rol ha sido eliminado.",icon:"success"}))})}modalNewP(){this.crearRol=!0}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(x),e.Y36(w.q),e.Y36(S.s),e.Y36(c.YP),e.Y36(m.EV),e.Y36(g.S),e.Y36(c.ez),e.Y36(y.f),e.Y36(I.p),e.Y36(d.U$),e.Y36(u.hJ),e.Y36(e.sBO))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-permisssions"]],features:[e._Bn([c.YP,c.ez])],decls:58,vars:26,consts:[[1,"surface-section","px-4","py-5","md:px-6","lg:px-8"],[1,"flex","align-items-start","flex-column","lg:justify-content-between","lg:flex-row"],[1,"font-medium","text-3xl","text-900"],[1,"flex","align-items-center","text-700","flex-wrap"],[1,"mr-5","flex","align-items-center","mt-3"],[1,"pi","pi-users","mr-2"],[1,"mt-3","lg:mt-0"],["pButton","","pRipple","","label","Crear","icon","pi pi-user-plus",1,"p-button-outlined","mr-2",3,"click"],["pButton","","pRipple","","label","Exportar","icon","pi pi-check"],[1,"grid","mt-3"],[1,"col-12"],[1,"card","px-3","py-3"],["responsiveLayout","scroll","currentPageReportTemplate","Mostrando {first} de {totalRecords} Permisos","selectionMode","multiple","dataKey","hotel",3,"value","tableStyle","rows","globalFilterFields","paginator","rowsPerPageOptions","showCurrentPageReport","rowHover"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","Crear un Permiso",3,"visible","modal","draggable","resizable","visibleChange"],[3,"formGroup","ngSubmit"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-4"],["type","text","placeholder","Auditar","pInputText","","formControlName","nombre",1,"w-full","mb-3","border-round-3xl"],["type","text","placeholder","aut","pInputText","","formControlName","descripcion",1,"w-full","mb-3","border-round-3xl"],["htmlFor","state"],["formControlName","estado",1,"w-full","mb-3","border-round-3xl","selects-main"],["value","1"],["value","2"],[1,"field","col-12","md:col-12"],["pButton","","pRipple","","label","Crear Rol","icon","pi pi-user","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl"],["header","Editar Rol","modal","modal",3,"visible","visibleChange","onVisibleChange"],[1,"field","col-12","md:col-6"],["type","text","pInputText","","class","w-full mb-3 border-round-3xl","formControlName","nombre",3,"placeholder",4,"ngIf"],["pInputText","","class","w-full mb-3 border-round-3xl","formControlName","descripcion",3,"placeholder",4,"ngIf"],["pButton","","pRipple","","label","Editar Permiso","icon","pi pi-user","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar...",1,"w-full","sm:w-auto",3,"input"],[2,"width","3rem"],[3,"value"],[1,"flex","gap-2"],["icon","pi pi-user-edit","severity","info",3,"click"],["icon","pi pi-trash","severity","danger",3,"click"],["type","text","pInputText","","formControlName","nombre",1,"w-full","mb-3","border-round-3xl",3,"placeholder"],["pInputText","","formControlName","descripcion",1,"w-full","mb-3","border-round-3xl",3,"placeholder"]],template:function(o,n){1&o&&(e._UZ(0,"p-toast"),e.TgZ(1,"div",0)(2,"div",1)(3,"div")(4,"div",2),e._uU(5,"Roles"),e.qZA(),e.TgZ(6,"div",3)(7,"div",4),e._UZ(8,"i",5),e.TgZ(9,"span"),e._uU(10,"Roles Creados"),e.qZA()()()(),e.TgZ(11,"div",6)(12,"button",7),e.NdJ("click",function(){return n.modalNewP()}),e.qZA(),e._UZ(13,"button",8),e.qZA()()(),e.TgZ(14,"div",9)(15,"div",10)(16,"div",11)(17,"p-table",12),e.YNc(18,E,6,0,"ng-template",13),e.YNc(19,J,9,0,"ng-template",14),e.YNc(20,Y,11,3,"ng-template",15),e.qZA()()()(),e.TgZ(21,"p-dialog",16),e.NdJ("visibleChange",function(a){return n.crearRol=a}),e.TgZ(22,"div",10)(23,"h5"),e._uU(24,"Completa el formulario"),e.qZA(),e.TgZ(25,"form",17),e.NdJ("ngSubmit",function(){return n.createRol()}),e.TgZ(26,"div",18)(27,"div",19)(28,"label"),e._uU(29,"Nombre del Rol"),e.qZA(),e._UZ(30,"input",20),e.qZA(),e.TgZ(31,"div",19)(32,"label"),e._uU(33,"Descripcion"),e.qZA(),e._UZ(34,"input",21),e.qZA(),e.TgZ(35,"div",19)(36,"label",22),e._uU(37,"Rol"),e.qZA(),e.TgZ(38,"select",23)(39,"option",24),e._uU(40,"Activo"),e.qZA(),e.TgZ(41,"option",25),e._uU(42,"Inactivo"),e.qZA()()(),e.TgZ(43,"div",26),e._UZ(44,"button",27),e.qZA()()()()(),e.TgZ(45,"p-dialog",28),e.NdJ("visibleChange",function(a){return n.editarRol=a})("onVisibleChange",function(){return n.editarRol=!n.editarRol}),e.TgZ(46,"form",17),e.NdJ("ngSubmit",function(){return n.updateRoles()}),e.TgZ(47,"div",18)(48,"div",29)(49,"label"),e._uU(50,"Nombre del Permiso"),e.qZA(),e.YNc(51,M,1,1,"input",30),e.qZA(),e.TgZ(52,"div",26)(53,"label"),e._uU(54,"Descripcion"),e.qZA(),e.YNc(55,D,1,1,"textarea",31),e.qZA(),e.TgZ(56,"div",26),e._UZ(57,"button",32),e.qZA()()()()),2&o&&(e.xp6(17),e.Q6J("value",n.roles)("tableStyle",e.DdM(21,B))("rows",10)("globalFilterFields",e.DdM(22,F))("paginator",!0)("rowsPerPageOptions",e.DdM(23,P))("showCurrentPageReport",!0)("rowHover",!0),e.xp6(4),e.Akn(e.DdM(24,z)),e.Q6J("visible",n.crearRol)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(4),e.Q6J("formGroup",n.formNewR),e.xp6(20),e.Akn(e.DdM(25,$)),e.Q6J("visible",n.editarRol),e.xp6(1),e.Q6J("formGroup",n.formEditR),e.xp6(5),e.Q6J("ngIf",n.editarRol),e.xp6(4),e.Q6J("ngIf",n.editarRol))},dependencies:[f.O5,d.iA,c.jx,d.UA,d.Mo,u.Hq,u.zx,l._Y,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.JL,Z.H,m.FN,C.o,g.V,l.sg,l.u],encapsulation:2})}return i})(),q=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=e.oAB({type:i});static#o=this.\u0275inj=e.cJS({imports:[v.Bz.forChild([{path:"",component:j}]),v.Bz]})}return i})();var V=r(6068),O=r(6340),G=r(6022),H=r(6218),L=r(2352),Q=r(1865),K=r(354),X=r(8712),_=r(5722);let k=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=e.oAB({type:i});static#o=this.\u0275inj=e.cJS({providers:[{provide:R.TP,useClass:X.n,multi:!0},x],imports:[f.ez,q,d.U$,V.O,l.u5,u.hJ,Z.T,m.EV,O.V,G.Xt,C.j,H.A,L.kW,Q.cc,K.L$,g.S,_.ii.forRoot(),l.UX]})}return i})()}}]);