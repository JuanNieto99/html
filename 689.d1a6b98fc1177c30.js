"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[689],{9689:(He,v,a)=>{a.r(v),a.d(v,{ClientesModule:()=>Ge});var Z=a(6814),l=a(95),b=a(9664),S=a(6068),_=a(707),T=a(4480),Y=a(4104),y=a(6340),M=a(6022),q=a(3714),A=a(6218),x=a(2160),D=a(1865),$=a(354),U=a(7213),E=a(9862),P=a(8712),k=a(5722),f=a(8672),F=a(1712),I=a(86),V=a(3519),u=a.n(V),h=a(2791),e=a(4946),B=a(5619),L=a(7398),O=a(6306),R=a(4444);let J=(()=>{class i{constructor(t){this.httpClient=t,this.dataSubject=new B.X([]),this.endpointListar="/clientesListar",this.endpointClienteGet="/clienteEditar/",this.endpointClienteCreate="/clientesCrear",this.endpointClienteUpdate="/clientesActualizar",this.endpointEliminar="/clientesEliminar",this.endpointCountry="/paisListar",this.endpointState="/departamentoPaisListar",this.endpointCity="/ciudadDepartamentoListar",this.data=this.dataSubject.asObservable(),this.baseUrl=R.D.url}getAll(t,n="",o=1){return this.httpClient.post(`${this.baseUrl+this.endpointListar}?per_page=${t}&page=${o}&search=${n}`,{})}getClientes(t){return this.httpClient.get(`${this.baseUrl+this.endpointClienteGet+t}`)}createClientes(t){return this.httpClient.post(`${this.baseUrl+this.endpointClienteCreate}`,t)}updateClientes(t){return this.httpClient.post(`${this.baseUrl+this.endpointClienteUpdate}`,t)}deleteClientes(t){return this.httpClient.post(`${this.baseUrl+this.endpointEliminar}`,t)}getCountries(){return this.httpClient.post(`${this.baseUrl+this.endpointCountry}`,{id:""}).pipe((0,L.U)(n=>n&&n.data&&Array.isArray(n.data)?n.data:[]),(0,O.K)(n=>(console.log("Error:",n),[])))}getStates(t){return this.httpClient.post(`${this.baseUrl+this.endpointState}`,{id:t})}getCities(t){return this.httpClient.post(`${this.baseUrl+this.endpointCity}`,{id:t})}static#e=this.\u0275fac=function(n){return new(n||i)(e.LFG(E.eN))};static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var z=a(5219),N=a(1532);function G(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.openModal())}),e.qZA()}}function H(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",44)(1,"h5",45),e._uU(2,"Lista de Clientes"),e.qZA(),e.TgZ(3,"span",46)(4,"form",47)(5,"div",48)(6,"input",49),e.NdJ("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.searchInput())}),e.qZA(),e.TgZ(7,"button",50),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.search(o.dt))}),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("formGroup",t.formSearch)}}function j(i,r){1&i&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Nombre"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Correo"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Hotel"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Tel\xe9fono"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Tipo de Documento"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Documento"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Acciones"),e.qZA()())}function K(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"p-button",54),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,s=e.oxw();return e.KtG(s.editClientes(o.id))}),e.qZA()}}function X(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"p-button",55),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,s=e.oxw();return e.KtG(s.confirmDelete(o.id))}),e.qZA()}}function W(i,r){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td",51),e.YNc(14,K,1,0,"p-button",52),e._UZ(15,"p-confirmDialog"),e.YNc(16,X,1,0,"p-button",53),e.qZA()()),2&i){const t=r.$implicit,n=e.oxw();e.xp6(2),e.AsE("",t.nombres," ",null==t?null:t.apellidos,""),e.xp6(2),e.Oqu(t.correo),e.xp6(2),e.Oqu(t.hotel.nombre),e.xp6(2),e.Oqu(t.telefono),e.xp6(2),e.Oqu(t.tipo_documento.nombre),e.xp6(2),e.Oqu(t.numero_documento),e.xp6(2),e.Q6J("ngIf",n.permisoActualizar),e.xp6(2),e.Q6J("ngIf",n.permisoEliminar)}}function ee(i,r){1&i&&(e.TgZ(0,"tr")(1,"td",56),e._uU(2,"Cargando informacion porfavor espere ..."),e.qZA()())}function te(i,r){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}function ie(i,r){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}function oe(i,r){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}function ne(i,r){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}function re(i,r){if(1&i&&(e.TgZ(0,"div",24)(1,"label"),e._uU(2,"Apellidos"),e.qZA(),e._UZ(3,"input",58),e.YNc(4,ne,2,0,"div",26),e.qZA()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",t.formCreateClientes.get("apellidos").hasError("required"))}}function le(i,r){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}function se(i,r){if(1&i&&(e.TgZ(0,"div",24)(1,"label"),e._uU(2,"Fecha de Nacimiento"),e.qZA(),e._UZ(3,"p-calendar",59),e.YNc(4,le,2,0,"div",26),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("showIcon",!0),e.xp6(1),e.Q6J("ngIf",t.formCreateClientes.get("fecha_nacimiento").hasError("required"))}}function ae(i,r){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}function de(i,r){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}function pe(i,r){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}function ue(i,r){if(1&i&&(e.TgZ(0,"div",24)(1,"label"),e._uU(2,"Genero"),e.qZA(),e._UZ(3,"p-dropdown",60),e.YNc(4,pe,2,0,"div",26),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("options",t.genero),e.xp6(1),e.Q6J("ngIf",t.formCreateClientes.get("genero").hasError("required"))}}function ce(i,r){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}function me(i,r){if(1&i&&(e.TgZ(0,"div",24)(1,"label"),e._uU(2,"Estado civil"),e.qZA(),e._UZ(3,"p-dropdown",61),e.YNc(4,ce,2,0,"div",26),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("options",t.estadoCivil),e.xp6(1),e.Q6J("ngIf",t.formCreateClientes.get("estado_civil").hasError("required"))}}function ge(i,r){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}function Ce(i,r){if(1&i&&(e.TgZ(0,"div",24)(1,"label"),e._uU(2,"Nivel de Estudios"),e.qZA(),e._UZ(3,"p-dropdown",62),e.YNc(4,ge,2,0,"div",26),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("options",t.nivelEstudio),e.xp6(1),e.Q6J("ngIf",t.formCreateClientes.get("nivel_estudio").hasError("required"))}}function _e(i,r){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}function fe(i,r){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}function he(i,r){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}function ve(i,r){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}function Ze(i,r){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}function be(i,r){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}function Te(i,r){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}function qe(i,r){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}function Ae(i,r){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}function xe(i,r){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}function Ue(i,r){if(1&i&&(e.TgZ(0,"div",24)(1,"label"),e._uU(2,"Apellidos"),e.qZA(),e._UZ(3,"input",58),e.YNc(4,xe,2,0,"div",26),e.qZA()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",t.formEditClientes.get("apellidos").hasError("required"))}}function Ee(i,r){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}function Ie(i,r){if(1&i&&(e.TgZ(0,"div",24)(1,"label"),e._uU(2,"Fecha de Nacimiento"),e.qZA(),e._UZ(3,"p-calendar",59),e.YNc(4,Ee,2,0,"div",26),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("showIcon",!0),e.xp6(1),e.Q6J("ngIf",t.formEditClientes.get("fecha_nacimiento").hasError("required"))}}function Je(i,r){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}function Ne(i,r){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}function we(i,r){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}function Qe(i,r){if(1&i&&(e.TgZ(0,"div",24)(1,"label"),e._uU(2,"Genero"),e.qZA(),e._UZ(3,"p-dropdown",60),e.YNc(4,we,2,0,"div",26),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("options",t.genero),e.xp6(1),e.Q6J("ngIf",t.formEditClientes.get("genero").hasError("required"))}}function Se(i,r){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}function Ye(i,r){if(1&i&&(e.TgZ(0,"div",24)(1,"label"),e._uU(2,"Estado civil"),e.qZA(),e._UZ(3,"p-dropdown",61),e.YNc(4,Se,2,0,"div",26),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("options",t.estadoCivil),e.xp6(1),e.Q6J("ngIf",t.formEditClientes.get("estado_civil").hasError("required"))}}function ye(i,r){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}function Me(i,r){if(1&i&&(e.TgZ(0,"div",24)(1,"label"),e._uU(2,"Nivel de Estudios"),e.qZA(),e._UZ(3,"p-dropdown",62),e.YNc(4,ye,2,0,"div",26),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("options",t.nivelEstudio),e.xp6(1),e.Q6J("ngIf",t.formEditClientes.get("nivel_estudio").hasError("required"))}}function De(i,r){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}function $e(i,r){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}function Pe(i,r){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}function ke(i,r){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}function Fe(i,r){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}function Ve(i,r){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}const Be=function(){return{"min-width":"50rem"}},Le=function(){return["nombre","medida","precio","cantidad","inventario","acciones"]},w=function(){return{width:"50vw"}},c=function(){return{standalone:!0}};let Oe=(()=>{class i{ngOnInit(){this.buildForm(),this.getIndex(),this.visibleModalClientes=!1,this.clientesService.getCountries().subscribe(t=>{this.countries$=t}),this.clientesService.getStates(12).subscribe(t=>{this.states$=t},t=>{console.log("Error:",t)}),this.clientesService.getCities(1).subscribe(t=>{this.cities$=t},t=>{console.log("Error:",t)})}constructor(t,n,o){this.clientesService=t,this.FB=n,this.spinner=o,this.permisoCrear=h.e.hasPermission(["administracion.clientes.crear"]),this.permisoActualizar=h.e.hasPermission(["administracion.clientes.actualizar"]),this.permisoEliminar=h.e.hasPermission(["administracion.clientes.eliminar"]),this.loadingTable=!1,this.visibleModalClientes=!0,this.visibleModalClientesEditar=!1,this.idEditando=0,this.visibleServicio=!0,this.visibleServicioEditar=!0,this.countries$=[],this.states$=[],this.cities$=[],this.pageCount=10,this.pageActual=1,this.ultimaPage=1,this.disablePageLeft=!1,this.disablePageRight=!1,this.registrosContar=0,this.first=0,this.rows=8}getIndex(t="",n=this.pageCount,o=1){this.spinner.show(),this.loadingTable=!0,this.clientesService.getAll(n,t,o).subscribe(s=>{this.loadingTable=!1,this.clientesData=s.data,this.ultimaPage=s.last_page,this.registrosContar=s.total,this.ultimaPage=s.last_page,s.total>n&&(this.disablePageRight=!0),this.validatePage(),this.spinner.hide()},s=>{console.log("Error: ",s)})}buildForm(){console.log("Building form..."),this.formSearch=this.FB.group({search:["",[]]}),this.formCreateClientes=this.FB.group({hotel_id:["",[l.kI.required]],nombres:["",[l.kI.required]],apellidos:["",[l.kI.required]],tipo_documento:["",[l.kI.required]],numero_documento:["",[l.kI.required]],genero:["",[l.kI.required]],estado_civil:["",[l.kI.required]],ciudad_id:["",[l.kI.required]],barrio_residencia:["",[l.kI.required]],telefono:["",[l.kI.required]],celular:["",[l.kI.required]],fecha_nacimiento:["",[l.kI.required]],nivel_estudio:["",[l.kI.required]],tipo:["",[l.kI.required]],correo:["",[l.kI.required,l.kI.email]],observacion:["",[l.kI.required]]}),this.formEditClientes=this.FB.group({hotel_id:["",[l.kI.required]],nombres:["",[l.kI.required]],apellidos:["",[l.kI.required]],tipo_documento:["",[l.kI.required]],numero_documento:["",[l.kI.required]],genero:["",[l.kI.required]],estado_civil:["",[l.kI.required]],ciudad_id:["",[l.kI.required]],barrio_residencia:["",[l.kI.required]],telefono:["",[l.kI.required]],celular:["",[l.kI.required]],fecha_nacimiento:["",[l.kI.required]],nivel_estudio:["",[l.kI.required]],tipo:["",[l.kI.required]],correo:["",[l.kI.required,l.kI.email]],observacion:["",[l.kI.required]]})}openModal(){this.onCreate()}onCreate(){this.formCreateClientes.reset(),this.clientesService.getClientes(0).subscribe(t=>{this.hotel=t.hotel,this.ciudad=t.ciudad_id,this.nombres=t.nombres,this.apellidos=t.apellidos,this.tipoDocumento=t.tipo_documento,this.numeroDocumento=t.numero_documento,this.genero=t.genero,this.estadoCivil=t.estado_civil,this.barrio=t.barrio_residencia,this.fechaNacimiento=t.fecha_nacimiento,this.nivelEstudio=t.nivel_estudio,this.correo=t.correo,this.tipo=t.tipo,this.observacion=t.observacion,this.visibleModalClientes=!0},t=>{console.log("Error: ",t)})}submitCreate(){if(this.formCreateClientes.valid){const t=this.formatDate(this.formCreateClientes.get("fecha_nacimiento").value);this.formCreateClientes.get("fecha_nacimiento").setValue(t),this.newClientes(),console.log("exito formulario submit crear")}else this.formCreateClientes.markAllAsTouched(),console.log("Formulario inv\xe1lido")}formatDate(t){const n=new Date(t);return`${n.getFullYear()}-${("0"+(n.getMonth()+1)).slice(-2)}-${("0"+n.getDate()).slice(-2)} ${("0"+n.getHours()).slice(-2)}:${("0"+n.getMinutes()).slice(-2)}:${("0"+n.getSeconds()).slice(-2)}`}newClientes(){this.formCreateClientes.get("ciudad_id").setValue(this.selectedCity?this.selectedCity.id:null),this.spinner.show();let t=this.formCreateClientes.value;t.hotel_id=t.hotel_id.id,t.ciudad_id=t.ciudad_id.id,t.tipo=t.tipo.id,t.tipo_documento=t.tipo_documento.id,t.estado=1,2!=t.tipo?(t.genero=t.genero.id,t.estado_civil=t.estado_civil.id,t.apellidos=t.apellidos,t.fecha_nacimiento=t.fecha_nacimiento,t.nivel_estudio=t.nivel_estudio.id):(t.genero=0,t.estado_civil=0,delete t.apellidos,delete t.fecha_nacimiento,t.nivel_estudio=0),console.log(t),this.clientesService.createClientes(t).subscribe(n=>{this.spinner.hide(),this.visibleModalClientes=!1,"success"==n.code?(u().fire({title:"Exito",text:"Cliente creado exitosamente.",icon:"success"}),this.getIndex()):u().fire({title:"Error",text:"Error al crear el cliente.",icon:"error"})},n=>{console.log("Error:",n)})}editClientes(t){this.idEditando=t,this.spinner.show(),this.clientesService.getClientes(t).subscribe(n=>{this.spinner.hide(),this.hotel=n.hotel,this.estadoCivil=n.estado_civil,this.genero=n.genero,this.nivelEstudio=n.nivel_estudio,this.tipoDocumento=n.tipo_documento,this.tipo=n.tipo;const o=n.cliente;let s=null,d=null,m=null,g=null,C=null,Q=null;this.hotel.forEach(p=>{p.id==o.hotel&&(s=p)}),this.estadoCivil.forEach(p=>{p.id==o.estado_civil_id&&(d=p)}),this.genero.forEach(p=>{p.id==o.genero&&(m=p)}),this.nivelEstudio.forEach(p=>{p.id==o.nivel_studio_id&&(g=p)}),this.tipoDocumento.forEach(p=>{p.id==o.tipo_documento_id&&(C=p)}),this.tipo.forEach(p=>{p.id==o.tipo&&(Q=p)}),setTimeout(()=>{this.formEditClientes.patchValue({hotel_id:s,nombres:o.nombres,apellidos:o.apellidos,tipo_documento:C,numero_documento:o.numero_documento,genero:m,estado_civil:d,ciudad_id:o.ciudad_id,barrio_residencia:o.barrio_residencia,telefono:o.telefono,celular:o.celular,fecha_nacimiento:new Date(o.fecha_nacimiento),nivel_estudio:g,tipo:Q,correo:o.correo,observacion:o.observacion}),this.onChangeTipoClienteEditar(),this.visibleModalClientesEditar=!0},1)},n=>{console.log("Error: ",n)})}updateClientes(){this.spinner.show();let t=this.formEditClientes.value;t.hotel_id=t.hotel_id.id,t.estado_civil=t.estado_civil.id,t.genero=t.genero.id,t.nivel_estudio=t.nivel_estudio.id,t.tipo_documento=t.tipo_documento.id,t.tipo=t.tipo.id,t.ciudad_id=Number(t.ciudad_id.id),t.estado=1,t.id=this.idEditando,2!=t.tipo?(t.genero=t.genero.id,t.estado_civil=t.estado_civil.id,t.fecha_nacimiento=this.formatDate(new Date(t.fecha_nacimiento).toISOString()),t.nivel_estudio=t.nivel_estudio.id):(t.genero=3,t.estado_civil=9,delete t.apellidos,delete t.fecha_nacimiento,t.nivel_estudio=8);const n=new FormData;for(const o in t)t.hasOwnProperty(o)&&n.append(o,t[o]);this.clientesService.updateClientes(n).subscribe(o=>{this.spinner.hide(),this.visibleModalClientesEditar=!1,"success"==o.code?(u().fire({title:"Exito",text:"Cliente actualizado exitosamente.",icon:"success"}),this.getIndex()):u().fire({title:"Error",text:"Error al actualizar el cliente.",icon:"error"})},o=>{console.log("Error: ",o)})}submitUpdate(){this.formEditClientes.valid&&this.updateClientes()}confirmDelete(t){u().fire({title:"\xbfEstas seguro que deseas eliminar este cliente?",text:"Ten cuidado esta acci\xf3n no se prodr\xe1 reversar",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, Confirmar",cancelButtonText:"Cancelar"}).then(n=>{n.isConfirmed&&(this.spinner.show(),this.clientesService.deleteClientes({id:t}).subscribe(o=>{this.spinner.hide(),"success"==o.code?(u().fire({title:"Exito",text:"Cliente eliminado exitosamente.",icon:"success"}),this.getIndex()):u().fire({title:"Error",text:"Error al eliminar el cliente.",icon:"error"})},o=>{console.log("Error: ",o)}))})}onChangeTipoClienteCrear(){let t=this.formCreateClientes.get("tipo").value;1==t.id&&(this.visibleServicio=!0,this.formCreateClientes.get("apellidos").enable(),this.formCreateClientes.get("fecha_nacimiento").enable(),this.formCreateClientes.get("estado_civil").enable(),this.formCreateClientes.get("genero").enable(),this.formCreateClientes.get("nivel_estudio").enable(),this.formCreateClientes.get("apellidos").setValue(null),this.formCreateClientes.get("fecha_nacimiento").setValue(null),this.formCreateClientes.get("estado_civil").setValue(null),this.formCreateClientes.get("genero").setValue(null),this.formCreateClientes.get("nivel_estudio").setValue(null)),2==t.id&&(this.visibleServicio=!1,this.formCreateClientes.get("apellidos").disable(),this.formCreateClientes.get("fecha_nacimiento").disable(),this.formCreateClientes.get("estado_civil").disable(),this.formCreateClientes.get("genero").disable(),this.formCreateClientes.get("nivel_estudio").disable(),this.formCreateClientes.get("apellidos").setValue(0),this.formCreateClientes.get("fecha_nacimiento").setValue(0),this.formCreateClientes.get("estado_civil").setValue(0),this.formCreateClientes.get("genero").setValue(0),this.formCreateClientes.get("nivel_estudio").setValue(0))}onChangeTipoClienteEditar(){let t=this.formEditClientes.get("tipo").value;1==t.id&&(this.visibleServicioEditar=!0,this.formCreateClientes.get("apellidos").enable(),this.formCreateClientes.get("fecha_nacimiento").enable(),this.formCreateClientes.get("estado_civil").enable(),this.formCreateClientes.get("genero").enable(),this.formCreateClientes.get("nivel_estudio").enable(),this.formCreateClientes.get("apellidos").setValue(this.editarData?.apellidos),this.formCreateClientes.get("fecha_nacimiento").setValue(this.editarData?.fecha_nacimiento),this.formCreateClientes.get("estado_civil").setValue(this.editarData?.estado_civil),this.formCreateClientes.get("genero").setValue(this.editarData?.genero),this.formCreateClientes.get("nivel_estudio").setValue(this.editarData?.nivel_estudio)),2==t.id&&(this.visibleServicioEditar=!1,this.formCreateClientes.get("apellidos").disable(),this.formCreateClientes.get("fecha_nacimiento").disable(),this.formCreateClientes.get("estado_civil").disable(),this.formCreateClientes.get("genero").disable(),this.formCreateClientes.get("nivel_estudio").disable(),this.formCreateClientes.get("apellidos").setValue(0),this.formCreateClientes.get("fecha_nacimiento").setValue(0),this.formCreateClientes.get("estado_civil").setValue(0),this.formCreateClientes.get("genero").setValue(0),this.formCreateClientes.get("nivel_estudio").setValue(0))}getCountries(){this.clientesService.getCountries().subscribe(t=>{this.countries$=t})}getStates(){this.clientesService.getStates(this.selectedCountry).subscribe(t=>{this.states$=t})}getCities(){this.clientesService.getCities(this.selectedState).subscribe(t=>{this.cities$=t})}searchInput(){let t=this.formSearch.get("search").value;""==t&&this.getIndex(t)}search(t){let n=this.formSearch.get("search").value;this.getIndex(n)}onPage(t){this.pageCount=t.rows,this.getIndex("",this.pageCount)}onPageChange(t){this.first=t.first,this.rows=t.rows}leftTable(){this.pageActual=this.pageActual-1,this.getIndex("",this.pageCount,this.pageActual),this.validatePage()}rightTable(){this.pageActual=this.pageActual+1,this.getIndex("",this.pageCount,this.pageActual),this.validatePage()}validatePage(){1==this.pageActual&&(this.disablePageLeft=!1),this.pageActual>1&&(this.disablePageLeft=!0),this.ultimaPage==this.pageActual&&(this.disablePageRight=!1),this.ultimaPage>this.pageActual&&(this.disablePageRight=!0)}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(J),e.Y36(l.qu),e.Y36(f.t2))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-clientes"]],decls:174,vars:84,consts:[["type","ball-scale-multiple"],[1,"surface-section","px-4","py-5","md:px-6","lg:px-8"],[1,"flex","align-items-start","flex-column","lg:justify-content-between","lg:flex-row"],[1,"font-medium","text-3xl","text-900"],[1,"flex","align-items-center","text-700","flex-wrap"],[1,"mr-5","flex","align-items-center","mt-3"],[1,"mt-3","lg:mt-0"],["pButton","","pRipple","","label","Crear","class","p-button-outlined mr-2","icon","",3,"click",4,"ngIf"],[1,"grid","mt-3"],[1,"col-12"],[1,"card","px-3","py-3"],["responsiveLayout","scroll","selectionMode","multiple","dataKey","usuario",3,"value","tableStyle","loading","rows","globalFilterFields","rowHover","onPage"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","loadingbody"],[2,"text-align","center"],[1,"p-buttonset"],["pButton","","pRipple","","label","","icon","pi pi-arrow-left",3,"disabled","click"],["pButton","","pRipple","",3,"label"],["pButton","","pRipple","","label","","icon","pi pi-arrow-right",3,"disabled","click"],["header","Crear Cliente",3,"visible","modal","draggable","resizable","visibleChange"],[3,"formGroup","ngSubmit"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-6"],["optionLabel","nombre","formControlName","hotel_id",3,"options"],["style","color: red;",4,"ngIf"],["optionLabel","nombre","formControlName","tipo",3,"options","onChange"],["type","text","pInputText","","formControlName","nombres",1,"w-full","mb-3","border-round-3xl"],["class","field col-12 md:col-6",4,"ngIf"],["optionLabel","nombre","formControlName","tipo_documento",3,"options"],["type","string","pInputText","","formControlName","numero_documento",1,"w-full","mb-3","border-round-3xl"],["optionLabel","nombre",3,"options","ngModel","ngModelOptions","ngModelChange","onChange"],["optionLabel","nombre","formControlName","ciudad_id",3,"options"],["type","text","pInputText","","formControlName","barrio_residencia",1,"w-full","mb-3","border-round-3xl"],["type","string","pInputText","","formControlName","telefono",1,"w-full","mb-3","border-round-3xl"],["type","string","pInputText","","formControlName","celular",1,"w-full","mb-3","border-round-3xl"],["type","text","pInputText","","formControlName","correo",1,"w-full","mb-3","border-round-3xl"],[1,"field","col-12","md:col-12"],["formControlName","observacion","pInputTextarea","","required","","rows","3","cols","20"],["pButton","","pRipple","","label","Crear Cliente","icon","","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl"],["header","Editar Cliente",3,"visible","modal","draggable","resizable","visibleChange"],["pButton","","pRipple","","label","Editar Cliente","icon","","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl"],["pButton","","pRipple","","label","Crear","icon","",1,"p-button-outlined","mr-2",3,"click"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[3,"formGroup"],[1,"p-inputgroup"],["formControlName","search","pInputText","","type","text","placeholder","Buscar...",1,"w-full","sm:w-auto",3,"input"],["type","button","pButton","","pRipple","",1,"pi","pi-search",3,"click"],[1,"flex","gap-2"],["icon","pi pi-user-edit","severity","info",3,"click",4,"ngIf"],["icon","pi pi-trash","severity","danger",3,"click",4,"ngIf"],["icon","pi pi-user-edit","severity","info",3,"click"],["icon","pi pi-trash","severity","danger",3,"click"],["colspan","8"],[2,"color","red"],["type","text","pInputText","","formControlName","apellidos",1,"w-full","mb-3","border-round-3xl"],["formControlName","fecha_nacimiento",1,"w-full","mb-3","border-round-3xl",3,"showIcon"],["optionLabel","nombre","formControlName","genero",3,"options"],["optionLabel","nombre","formControlName","estado_civil",3,"options"],["optionLabel","nombre","formControlName","nivel_estudio",3,"options"]],template:function(n,o){1&n&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div")(4,"div",3),e._uU(5,"Clientes"),e.qZA(),e.TgZ(6,"div",4),e._UZ(7,"div",5),e.qZA()(),e.TgZ(8,"div",6),e.YNc(9,G,1,0,"button",7),e.qZA()()(),e.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"p-table",11),e.NdJ("onPage",function(d){return o.onPage(d)}),e.YNc(14,H,8,1,"ng-template",12),e.YNc(15,j,15,0,"ng-template",13),e.YNc(16,W,17,9,"ng-template",14),e.YNc(17,ee,3,0,"ng-template",15),e.qZA(),e._UZ(18,"br"),e.TgZ(19,"div",16)(20,"span",17)(21,"button",18),e.NdJ("click",function(){return o.leftTable()}),e.qZA(),e._UZ(22,"button",19),e.TgZ(23,"button",20),e.NdJ("click",function(){return o.rightTable()}),e.qZA()()()()()(),e.TgZ(24,"p-dialog",21),e.NdJ("visibleChange",function(d){return o.visibleModalClientes=d}),e.TgZ(25,"div",9)(26,"form",22),e.NdJ("ngSubmit",function(){return o.submitCreate()}),e.TgZ(27,"div",23)(28,"div",24)(29,"label"),e._uU(30,"Hotel"),e.qZA(),e._UZ(31,"p-dropdown",25),e.YNc(32,te,2,0,"div",26),e.qZA(),e.TgZ(33,"div",24)(34,"label"),e._uU(35,"Tipo de Persona"),e.qZA(),e.TgZ(36,"p-dropdown",27),e.NdJ("onChange",function(){return o.onChangeTipoClienteCrear()}),e.qZA(),e.YNc(37,ie,2,0,"div",26),e.qZA(),e.TgZ(38,"div",24)(39,"label"),e._uU(40,"Nombres"),e.qZA(),e._UZ(41,"input",28),e.YNc(42,oe,2,0,"div",26),e.qZA(),e.YNc(43,re,5,1,"div",29),e.YNc(44,se,5,2,"div",29),e.TgZ(45,"div",24)(46,"label"),e._uU(47,"Tipo Documento"),e.qZA(),e._UZ(48,"p-dropdown",30),e.YNc(49,ae,2,0,"div",26),e.qZA(),e.TgZ(50,"div",24)(51,"label"),e._uU(52,"N\xfamero Documento"),e.qZA(),e._UZ(53,"input",31),e.YNc(54,de,2,0,"div",26),e.qZA(),e.YNc(55,ue,5,2,"div",29),e.YNc(56,me,5,2,"div",29),e.YNc(57,Ce,5,2,"div",29),e.TgZ(58,"div",24)(59,"label"),e._uU(60,"Pa\xeds"),e.qZA(),e.TgZ(61,"p-dropdown",32),e.NdJ("ngModelChange",function(d){return o.selectedCountry=d})("onChange",function(){return o.getStates()}),e.qZA()(),e.TgZ(62,"div",24)(63,"label"),e._uU(64,"Departamento"),e.qZA(),e.TgZ(65,"p-dropdown",32),e.NdJ("ngModelChange",function(d){return o.selectedState=d})("onChange",function(){return o.getCities()}),e.qZA()(),e.TgZ(66,"div",24)(67,"label"),e._uU(68,"Ciudad"),e.qZA(),e._UZ(69,"p-dropdown",33),e.YNc(70,_e,2,0,"div",26),e.qZA(),e.TgZ(71,"div",24)(72,"label"),e._uU(73,"Barrio"),e.qZA(),e._UZ(74,"input",34),e.YNc(75,fe,2,0,"div",26),e.qZA(),e.TgZ(76,"div",24)(77,"label"),e._uU(78,"Telefono"),e.qZA(),e._UZ(79,"input",35),e.YNc(80,he,2,0,"div",26),e.qZA(),e.TgZ(81,"div",24)(82,"label"),e._uU(83,"Celular"),e.qZA(),e._UZ(84,"input",36),e.YNc(85,ve,2,0,"div",26),e.qZA(),e.TgZ(86,"div",24)(87,"label"),e._uU(88,"Correo"),e.qZA(),e._UZ(89,"input",37),e.YNc(90,Ze,2,0,"div",26),e.qZA(),e.TgZ(91,"div",38)(92,"label"),e._uU(93,"Observaci\xf3n"),e.qZA(),e._UZ(94,"textarea",39),e.YNc(95,be,2,0,"div",26),e.qZA(),e.TgZ(96,"div",38),e._UZ(97,"button",40),e.qZA()(),e._UZ(98,"br"),e.qZA()()(),e.TgZ(99,"p-dialog",41),e.NdJ("visibleChange",function(d){return o.visibleModalClientesEditar=d}),e.TgZ(100,"div",9)(101,"form",22),e.NdJ("ngSubmit",function(){return o.updateClientes()}),e.TgZ(102,"div",23)(103,"div",24)(104,"label"),e._uU(105,"Hotel"),e.qZA(),e._UZ(106,"p-dropdown",25),e.YNc(107,Te,2,0,"div",26),e.qZA(),e.TgZ(108,"div",24)(109,"label"),e._uU(110,"Tipo de Persona"),e.qZA(),e.TgZ(111,"p-dropdown",27),e.NdJ("onChange",function(){return o.onChangeTipoClienteEditar()}),e.qZA(),e.YNc(112,qe,2,0,"div",26),e.qZA(),e.TgZ(113,"div",24)(114,"label"),e._uU(115,"Nombres"),e.qZA(),e._UZ(116,"input",28),e.YNc(117,Ae,2,0,"div",26),e.qZA(),e.YNc(118,Ue,5,1,"div",29),e.YNc(119,Ie,5,2,"div",29),e.TgZ(120,"div",24)(121,"label"),e._uU(122,"Tipo Documento"),e.qZA(),e._UZ(123,"p-dropdown",30),e.YNc(124,Je,2,0,"div",26),e.qZA(),e.TgZ(125,"div",24)(126,"label"),e._uU(127,"N\xfamero Documento"),e.qZA(),e._UZ(128,"input",31),e.YNc(129,Ne,2,0,"div",26),e.qZA(),e.YNc(130,Qe,5,2,"div",29),e.YNc(131,Ye,5,2,"div",29),e.YNc(132,Me,5,2,"div",29),e.TgZ(133,"div",24)(134,"label"),e._uU(135,"Pa\xeds"),e.qZA(),e.TgZ(136,"p-dropdown",32),e.NdJ("ngModelChange",function(d){return o.selectedCountry=d})("onChange",function(){return o.getStates()}),e.qZA()(),e.TgZ(137,"div",24)(138,"label"),e._uU(139,"Departamento"),e.qZA(),e.TgZ(140,"p-dropdown",32),e.NdJ("ngModelChange",function(d){return o.selectedState=d})("onChange",function(){return o.getCities()}),e.qZA()(),e.TgZ(141,"div",24)(142,"label"),e._uU(143,"Ciudad"),e.qZA(),e._UZ(144,"p-dropdown",33),e.YNc(145,De,2,0,"div",26),e.qZA(),e.TgZ(146,"div",24)(147,"label"),e._uU(148,"Barrio"),e.qZA(),e._UZ(149,"input",34),e.YNc(150,$e,2,0,"div",26),e.qZA(),e.TgZ(151,"div",24)(152,"label"),e._uU(153,"Telefono"),e.qZA(),e._UZ(154,"input",35),e.YNc(155,Pe,2,0,"div",26),e.qZA(),e.TgZ(156,"div",24)(157,"label"),e._uU(158,"Celular"),e.qZA(),e._UZ(159,"input",36),e.YNc(160,ke,2,0,"div",26),e.qZA(),e.TgZ(161,"div",24)(162,"label"),e._uU(163,"Correo"),e.qZA(),e._UZ(164,"input",37),e.YNc(165,Fe,2,0,"div",26),e.qZA(),e.TgZ(166,"div",38)(167,"label"),e._uU(168,"Observaci\xf3n"),e.qZA(),e._UZ(169,"textarea",39),e.YNc(170,Ve,2,0,"div",26),e.qZA(),e.TgZ(171,"div",38),e._UZ(172,"button",42),e.qZA()(),e._UZ(173,"br"),e.qZA()()()),2&n&&(e.xp6(9),e.Q6J("ngIf",o.permisoCrear),e.xp6(4),e.Q6J("value",o.clientesData)("tableStyle",e.DdM(76,Be))("loading",o.loadingTable)("rows",8)("globalFilterFields",e.DdM(77,Le))("rowHover",!0),e.xp6(8),e.Q6J("disabled",!o.disablePageLeft),e.xp6(1),e.Q6J("label",o.pageActual),e.xp6(1),e.Q6J("disabled",!o.disablePageRight),e.xp6(1),e.Akn(e.DdM(78,w)),e.Q6J("visible",o.visibleModalClientes)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(2),e.Q6J("formGroup",o.formCreateClientes),e.xp6(5),e.Q6J("options",o.hotel),e.xp6(1),e.Q6J("ngIf",o.formCreateClientes.get("hotel_id").hasError("required")),e.xp6(4),e.Q6J("options",o.tipo),e.xp6(1),e.Q6J("ngIf",o.formCreateClientes.get("tipo").hasError("required")),e.xp6(5),e.Q6J("ngIf",o.formCreateClientes.get("nombres").hasError("required")),e.xp6(1),e.Q6J("ngIf",o.visibleServicio),e.xp6(1),e.Q6J("ngIf",o.visibleServicio),e.xp6(4),e.Q6J("options",o.tipoDocumento),e.xp6(1),e.Q6J("ngIf",o.formCreateClientes.get("tipo_documento").hasError("required")),e.xp6(5),e.Q6J("ngIf",o.formCreateClientes.get("numero_documento").hasError("required")),e.xp6(1),e.Q6J("ngIf",o.visibleServicio),e.xp6(1),e.Q6J("ngIf",o.visibleServicio),e.xp6(1),e.Q6J("ngIf",o.visibleServicio),e.xp6(4),e.Q6J("options",o.countries$)("ngModel",o.selectedCountry)("ngModelOptions",e.DdM(79,c)),e.xp6(4),e.Q6J("options",o.states$)("ngModel",o.selectedState)("ngModelOptions",e.DdM(80,c)),e.xp6(4),e.Q6J("options",o.cities$),e.xp6(1),e.Q6J("ngIf",o.formCreateClientes.get("ciudad_id").hasError("required")),e.xp6(5),e.Q6J("ngIf",o.formCreateClientes.get("barrio_residencia").hasError("required")),e.xp6(5),e.Q6J("ngIf",o.formCreateClientes.get("telefono").hasError("required")),e.xp6(5),e.Q6J("ngIf",o.formCreateClientes.get("celular").hasError("required")),e.xp6(5),e.Q6J("ngIf",o.formCreateClientes.get("correo").hasError("required")),e.xp6(5),e.Q6J("ngIf",o.formCreateClientes.get("observacion").hasError("required")),e.xp6(4),e.Akn(e.DdM(81,w)),e.Q6J("visible",o.visibleModalClientesEditar)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(2),e.Q6J("formGroup",o.formEditClientes),e.xp6(5),e.Q6J("options",o.hotel),e.xp6(1),e.Q6J("ngIf",o.formEditClientes.get("hotel_id").hasError("required")),e.xp6(4),e.Q6J("options",o.tipo),e.xp6(1),e.Q6J("ngIf",o.formEditClientes.get("tipo").hasError("required")),e.xp6(5),e.Q6J("ngIf",o.formEditClientes.get("nombres").hasError("required")),e.xp6(1),e.Q6J("ngIf",o.visibleServicioEditar),e.xp6(1),e.Q6J("ngIf",o.visibleServicioEditar),e.xp6(4),e.Q6J("options",o.tipoDocumento),e.xp6(1),e.Q6J("ngIf",o.formEditClientes.get("tipo_documento").hasError("required")),e.xp6(5),e.Q6J("ngIf",o.formEditClientes.get("numero_documento").hasError("required")),e.xp6(1),e.Q6J("ngIf",o.visibleServicioEditar),e.xp6(1),e.Q6J("ngIf",o.visibleServicioEditar),e.xp6(1),e.Q6J("ngIf",o.visibleServicioEditar),e.xp6(4),e.Q6J("options",o.countries$)("ngModel",o.selectedCountry)("ngModelOptions",e.DdM(82,c)),e.xp6(4),e.Q6J("options",o.states$)("ngModel",o.selectedState)("ngModelOptions",e.DdM(83,c)),e.xp6(4),e.Q6J("options",o.cities$),e.xp6(1),e.Q6J("ngIf",o.formEditClientes.get("ciudad_id").hasError("required")),e.xp6(5),e.Q6J("ngIf",o.formEditClientes.get("barrio_residencia").hasError("required")),e.xp6(5),e.Q6J("ngIf",o.formEditClientes.get("telefono").hasError("required")),e.xp6(5),e.Q6J("ngIf",o.formEditClientes.get("celular").hasError("required")),e.xp6(5),e.Q6J("ngIf",o.formEditClientes.get("correo").hasError("required")),e.xp6(5),e.Q6J("ngIf",o.formEditClientes.get("observacion").hasError("required")))},dependencies:[Z.O5,b.iA,z.jx,_.Hq,_.zx,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.On,T.H,q.o,A.g,x.Lt,U.V,l.sg,l.u,f.Ro,N.f],styles:["svg[_ngcontent-%COMP%]{width:45%}"]})}return i})();var Re=a(2506);let ze=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#i=this.\u0275inj=e.cJS({imports:[I.Bz.forChild([{path:"",component:Oe,canActivate:[Re.a],data:{permissions:["administracion.clientes"]}}]),I.Bz]})}return i})(),Ge=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#i=this.\u0275inj=e.cJS({providers:[{provide:E.TP,useClass:P.n,multi:!0},J],imports:[Z.ez,ze,b.U$,S.O,l.u5,_.hJ,T.T,Y.EV,y.V,M.Xt,q.j,A.A,x.kW,D.cc,$.L$,U.S,k.ii.forRoot(),l.UX,f.ef,F.U,N._8]})}return i})()}}]);