"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[617],{8725:(F,f,o)=>{o.d(f,{R:()=>we});var e=o(4946),s=o(95),b=o(3519),_=o.n(b),C=o(2791),T=o(2574),h=o(8672),g=o(86),M=o(6814),p=o(9664),c=o(5219),v=o(707),E=o(4480),J=o(3714),N=o(6218),P=o(2160),Q=o(7213),w=o(1532);function O(n,r){1&n&&e._UZ(0,"ngx-spinner",26)}function S(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.openModal())}),e.qZA()}}function A(n,r){if(1&n&&(e.TgZ(0,"div",27)(1,"div",28)(2,"div")(3,"div",29),e._uU(4,"Clientes"),e.qZA(),e.TgZ(5,"div",30),e._UZ(6,"div",31),e.qZA()(),e.TgZ(7,"div",32),e.YNc(8,S,1,0,"button",33),e.qZA()()()),2&n){const t=e.oxw();e.xp6(8),e.Q6J("ngIf",t.permisoCrear)}}function Y(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",47)(1,"h5",48),e._uU(2,"Lista de Clientes"),e.qZA(),e.TgZ(3,"span",49)(4,"form",50)(5,"div",51)(6,"input",52),e.NdJ("input",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.searchInput())}),e.qZA(),e.TgZ(7,"button",53),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.search(i.dt))}),e.qZA()()()()()}if(2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("formGroup",t.formSearch)}}function y(n,r){1&n&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Nombre"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Correo"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Hotel"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Tel\xe9fono"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Tipo de Documento"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Documento"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Acciones"),e.qZA()())}function Z(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"p-button",57),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,a=e.oxw(2);return e.KtG(a.editClientes(i.id))}),e.qZA()}}function H(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"p-button",58),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,a=e.oxw(2);return e.KtG(a.confirmDelete(i.id))}),e.qZA()}}function L(n,r){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td",54),e.YNc(14,Z,1,0,"p-button",55),e._UZ(15,"p-confirmDialog"),e.YNc(16,H,1,0,"p-button",56),e.qZA()()),2&n){const t=r.$implicit,l=e.oxw(2);e.xp6(2),e.AsE("",t.nombres," ",null==t?null:t.apellidos,""),e.xp6(2),e.Oqu(t.correo),e.xp6(2),e.Oqu(t.hotel.nombre),e.xp6(2),e.Oqu(t.telefono),e.xp6(2),e.Oqu(t.tipo_documento.nombre),e.xp6(2),e.Oqu(t.numero_documento),e.xp6(2),e.Q6J("ngIf",l.permisoActualizar),e.xp6(2),e.Q6J("ngIf",l.permisoEliminar)}}function B(n,r){1&n&&(e.TgZ(0,"tr")(1,"td",59),e._uU(2,"Cargando informacion porfavor espere ..."),e.qZA()())}const R=function(){return{"min-width":"50rem"}},$=function(){return["nombre","medida","precio","cantidad","inventario","acciones"]};function m(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",35)(1,"div",4)(2,"div",36)(3,"p-table",37),e.NdJ("onPage",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.onPage(i))}),e.YNc(4,Y,8,1,"ng-template",38),e.YNc(5,y,15,0,"ng-template",39),e.YNc(6,L,17,9,"ng-template",40),e.YNc(7,B,3,0,"ng-template",41),e.qZA(),e._UZ(8,"br"),e.TgZ(9,"div",42)(10,"span",43)(11,"button",44),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.leftTable())}),e.qZA(),e._UZ(12,"button",45),e.TgZ(13,"button",46),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.rightTable())}),e.qZA()()()()()()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("value",t.clientesData)("tableStyle",e.DdM(9,R))("loading",t.loadingTable)("rows",8)("globalFilterFields",e.DdM(10,$))("rowHover",!0),e.xp6(8),e.Q6J("disabled",!t.disablePageLeft),e.xp6(1),e.Q6J("label",t.pageActual),e.xp6(1),e.Q6J("disabled",!t.disablePageRight)}}function G(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1,"Campo requerido"),e.qZA())}function K(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1,"Campo requerido"),e.qZA())}function x(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1,"Campo requerido"),e.qZA())}function k(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1,"Campo requerido"),e.qZA())}function z(n,r){if(1&n&&(e.TgZ(0,"div",7)(1,"label"),e._uU(2,"Apellidos"),e.qZA(),e._UZ(3,"input",61),e.YNc(4,k,2,0,"div",9),e.qZA()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",t.formCreateClientes.get("apellidos").hasError("required"))}}function j(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1,"Campo requerido"),e.qZA())}function X(n,r){if(1&n&&(e.TgZ(0,"div",7)(1,"label"),e._uU(2,"Fecha de Nacimiento"),e.qZA(),e._UZ(3,"p-calendar",62),e.YNc(4,j,2,0,"div",9),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("showIcon",!0),e.xp6(1),e.Q6J("ngIf",t.formCreateClientes.get("fecha_nacimiento").hasError("required"))}}function ee(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1,"Campo requerido"),e.qZA())}function te(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1,"Campo requerido"),e.qZA())}function ie(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1,"Campo requerido"),e.qZA())}function ne(n,r){if(1&n&&(e.TgZ(0,"div",7)(1,"label"),e._uU(2,"Genero"),e.qZA(),e._UZ(3,"p-dropdown",63),e.YNc(4,ie,2,0,"div",9),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("options",t.genero),e.xp6(1),e.Q6J("ngIf",t.formCreateClientes.get("genero").hasError("required"))}}function oe(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1,"Campo requerido"),e.qZA())}function re(n,r){if(1&n&&(e.TgZ(0,"div",7)(1,"label"),e._uU(2,"Estado civil"),e.qZA(),e._UZ(3,"p-dropdown",64),e.YNc(4,oe,2,0,"div",9),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("options",t.estadoCivil),e.xp6(1),e.Q6J("ngIf",t.formCreateClientes.get("estado_civil").hasError("required"))}}function le(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1,"Campo requerido"),e.qZA())}function se(n,r){if(1&n&&(e.TgZ(0,"div",7)(1,"label"),e._uU(2,"Nivel de Estudios"),e.qZA(),e._UZ(3,"p-dropdown",65),e.YNc(4,le,2,0,"div",9),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("options",t.nivelEstudio),e.xp6(1),e.Q6J("ngIf",t.formCreateClientes.get("nivel_estudio").hasError("required"))}}function ae(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1,"Campo requerido"),e.qZA())}function de(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1,"Campo requerido"),e.qZA())}function pe(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1,"Campo requerido"),e.qZA())}function ce(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1,"Campo requerido"),e.qZA())}function ue(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1,"Campo requerido"),e.qZA())}function _e(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1,"Campo requerido"),e.qZA())}function me(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1,"Campo requerido"),e.qZA())}function ge(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1,"Campo requerido"),e.qZA())}function Ce(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1,"Campo requerido"),e.qZA())}function fe(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1,"Campo requerido"),e.qZA())}function he(n,r){if(1&n&&(e.TgZ(0,"div",7)(1,"label"),e._uU(2,"Apellidos"),e.qZA(),e._UZ(3,"input",61),e.YNc(4,fe,2,0,"div",9),e.qZA()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",t.formEditClientes.get("apellidos").hasError("required"))}}function ve(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1,"Campo requerido"),e.qZA())}function Ze(n,r){if(1&n&&(e.TgZ(0,"div",7)(1,"label"),e._uU(2,"Fecha de Nacimiento"),e.qZA(),e._UZ(3,"p-calendar",62),e.YNc(4,ve,2,0,"div",9),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("showIcon",!0),e.xp6(1),e.Q6J("ngIf",t.formEditClientes.get("fecha_nacimiento").hasError("required"))}}function be(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1,"Campo requerido"),e.qZA())}function Te(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1,"Campo requerido"),e.qZA())}function Ee(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1,"Campo requerido"),e.qZA())}function xe(n,r){if(1&n&&(e.TgZ(0,"div",7)(1,"label"),e._uU(2,"Genero"),e.qZA(),e._UZ(3,"p-dropdown",63),e.YNc(4,Ee,2,0,"div",9),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("options",t.genero),e.xp6(1),e.Q6J("ngIf",t.formEditClientes.get("genero").hasError("required"))}}function Ae(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1,"Campo requerido"),e.qZA())}function qe(n,r){if(1&n&&(e.TgZ(0,"div",7)(1,"label"),e._uU(2,"Estado civil"),e.qZA(),e._UZ(3,"p-dropdown",64),e.YNc(4,Ae,2,0,"div",9),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("options",t.estadoCivil),e.xp6(1),e.Q6J("ngIf",t.formEditClientes.get("estado_civil").hasError("required"))}}function Ue(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1,"Campo requerido"),e.qZA())}function Ie(n,r){if(1&n&&(e.TgZ(0,"div",7)(1,"label"),e._uU(2,"Nivel de Estudios"),e.qZA(),e._UZ(3,"p-dropdown",65),e.YNc(4,Ue,2,0,"div",9),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("options",t.nivelEstudio),e.xp6(1),e.Q6J("ngIf",t.formEditClientes.get("nivel_estudio").hasError("required"))}}function De(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1,"Campo requerido"),e.qZA())}function Me(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1,"Campo requerido"),e.qZA())}function Je(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1,"Campo requerido"),e.qZA())}function Ne(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1,"Campo requerido"),e.qZA())}function Pe(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1,"Campo requerido"),e.qZA())}function Qe(n,r){1&n&&(e.TgZ(0,"div",60),e._uU(1,"Campo requerido"),e.qZA())}const V=function(){return{width:"50vw"}},q=function(){return{standalone:!0}};let we=(()=>{class n{ngOnInit(){this.buildForm(),this.vieneDeHabitaciones&&(this.spinner.hide(),this.onCreate()),this.getIndex(),this.visibleModalClientes=!1,this.clientesService.getCountries().subscribe(t=>{this.countries$=t}),this.clientesService.getStates(12).subscribe(t=>{this.states$=t},t=>{console.log("Error:",t)}),this.clientesService.getCities(1).subscribe(t=>{this.cities$=t},t=>{console.log("Error:",t)})}constructor(t,l,i,a){this.clientesService=t,this.FB=l,this.spinner=i,this.router=a,this.permisoCrear=C.e.hasPermission(["administracion.clientes.crear"]),this.permisoActualizar=C.e.hasPermission(["administracion.clientes.actualizar"]),this.permisoEliminar=C.e.hasPermission(["administracion.clientes.eliminar"]),this.loadingTable=!1,this.visibleModalClientes=!0,this.visibleModalClientesEditar=!1,this.idEditando=0,this.visibleServicio=!0,this.visibleServicioEditar=!0,this.countries$=[],this.states$=[],this.cities$=[],this.pageCount=10,this.pageActual=1,this.ultimaPage=1,this.disablePageLeft=!1,this.disablePageRight=!1,this.registrosContar=0,this.first=0,this.rows=8,this.clienteCreado=new e.vpe,this.eventoEmitido=!1}getIndex(t="",l=this.pageCount,i=1){this.spinner.show(),this.loadingTable=!0,this.clientesService.getAll(l,t,i).subscribe(a=>{this.loadingTable=!1,this.clientesData=a.data,this.ultimaPage=a.last_page,this.registrosContar=a.total,this.ultimaPage=a.last_page,a.total>l&&(this.disablePageRight=!0),this.validatePage(),this.spinner.hide()},a=>{console.log("Error: ",a)})}buildForm(){this.formSearch=this.FB.group({search:["",[]]}),this.formCreateClientes=this.FB.group({hotel_id:["",[s.kI.required]],nombres:["",[s.kI.required]],apellidos:["",[s.kI.required]],tipo_documento:["",[s.kI.required]],numero_documento:["",[s.kI.required]],genero:["",[s.kI.required]],estado_civil:["",[s.kI.required]],ciudad_id:["",[s.kI.required]],barrio_residencia:["",[s.kI.required]],telefono:["",[s.kI.required]],celular:["",[s.kI.required]],fecha_nacimiento:["",[s.kI.required]],nivel_estudio:["",[s.kI.required]],tipo:["",[s.kI.required]],correo:["",[s.kI.required,s.kI.email]],observacion:["",[]]}),this.formEditClientes=this.FB.group({hotel_id:["",[s.kI.required]],nombres:["",[s.kI.required]],apellidos:["",[s.kI.required]],tipo_documento:["",[s.kI.required]],numero_documento:["",[s.kI.required]],genero:["",[s.kI.required]],estado_civil:["",[s.kI.required]],ciudad_id:["",[s.kI.required]],barrio_residencia:["",[s.kI.required]],telefono:["",[s.kI.required]],celular:["",[s.kI.required]],fecha_nacimiento:["",[s.kI.required]],nivel_estudio:["",[s.kI.required]],tipo:["",[s.kI.required]],correo:["",[s.kI.required,s.kI.email]],observacion:["",[]]})}openModal(){this.onCreate()}cerrarModalCrear(){this.vieneDeHabitaciones&&this.vieneDeHabitaciones&&!this.eventoEmitido&&this.clienteCreado.emit(!1)}onCreate(){this.formCreateClientes.reset(),this.clientesService.getClientes(0).subscribe(t=>{this.hotel=t.hotel,this.ciudad=t.ciudad_id,this.nombres=t.nombres,this.apellidos=t.apellidos,this.tipoDocumento=t.tipo_documento,this.numeroDocumento=t.numero_documento,this.genero=t.genero,this.estadoCivil=t.estado_civil,this.barrio=t.barrio_residencia,this.fechaNacimiento=t.fecha_nacimiento,this.nivelEstudio=t.nivel_estudio,this.correo=t.correo,this.tipo=t.tipo,this.observacion=t.observacion,this.visibleModalClientes=!0},t=>{console.log("Error: ",t)})}submitCreate(){if(this.formCreateClientes.valid){const t=this.formatDate(this.formCreateClientes.get("fecha_nacimiento").value);this.formCreateClientes.get("fecha_nacimiento").setValue(t),this.newClientes(),console.log("exito formulario submit crear")}else this.formCreateClientes.markAllAsTouched(),console.log("Formulario inv\xe1lido")}formatDate(t){const l=new Date(t);return`${l.getFullYear()}-${("0"+(l.getMonth()+1)).slice(-2)}-${("0"+l.getDate()).slice(-2)} ${("0"+l.getHours()).slice(-2)}:${("0"+l.getMinutes()).slice(-2)}:${("0"+l.getSeconds()).slice(-2)}`}newClientes(){this.formCreateClientes.get("ciudad_id").setValue(this.selectedCity?this.selectedCity.id:null),this.spinner.show();let t=this.formCreateClientes.value;t.hotel_id=t.hotel_id.id,t.ciudad_id=t.ciudad_id.id,t.tipo=t.tipo.id,t.tipo_documento=t.tipo_documento.id,t.estado=1,2!=t.tipo?(t.genero=t.genero.id,t.estado_civil=t.estado_civil.id,t.apellidos=t.apellidos,t.fecha_nacimiento=t.fecha_nacimiento,t.nivel_estudio=t.nivel_estudio.id):(t.genero=0,t.estado_civil=0,delete t.apellidos,delete t.fecha_nacimiento,t.nivel_estudio=0),this.clientesService.createClientes(t).subscribe(l=>{this.spinner.hide(),this.eventoEmitido=!0,this.visibleModalClientes=!1,"success"==l.code?_().fire({title:"Exito",text:"Cliente creado exitosamente.",icon:"success",timer:1500,showConfirmButton:!1}).then(()=>{this.vieneDeHabitaciones?this.clienteCreado.emit(!0):this.getIndex()}):_().fire({title:"Error",text:"Error al crear el cliente.",icon:"error"})},l=>{console.log("Error:",l)})}editClientes(t){this.idEditando=t,this.spinner.show(),this.clientesService.getClientes(t).subscribe(l=>{this.spinner.hide(),this.hotel=l.hotel,this.estadoCivil=l.estado_civil,this.genero=l.genero,this.nivelEstudio=l.nivel_estudio,this.tipoDocumento=l.tipo_documento,this.tipo=l.tipo;const i=l.cliente;this.editarData=l.cliente;let a=null,d=null,U=null,I=null,D=null,W=null;this.hotel.forEach(u=>{u.id==i.hotel_id&&(a=u)}),this.estadoCivil.forEach(u=>{u.id==i.estado_civil_id&&(d=u)}),this.genero.forEach(u=>{u.id==i.genero_id&&(U=u)}),this.nivelEstudio.forEach(u=>{u.id==i.nivel_studio_id&&(I=u)}),this.tipoDocumento.forEach(u=>{u.id==i.tipo_documento_id&&(D=u)}),this.tipo.forEach(u=>{u.id==i.tipo&&(W=u)}),setTimeout(()=>{this.formEditClientes.patchValue({hotel_id:a,nombres:i.nombres,apellidos:i.apellidos,tipo_documento:D,numero_documento:i.numero_documento,genero:U,estado_civil:d,ciudad_id:i.ciudad_id,barrio_residencia:i.barrio_residencia,telefono:i.telefono,celular:i.celular,fecha_nacimiento:new Date(i.fecha_nacimiento),nivel_estudio:I,tipo:W,correo:i.correo,observacion:i.observacion}),this.onChangeTipoClienteEditar(),this.visibleModalClientesEditar=!0},1)},l=>{console.log("Error: ",l)})}updateClientes(){this.spinner.show();let t=this.formEditClientes.value;t.hotel_id=t.hotel_id.id,t.tipo_documento=t.tipo_documento.id,t.tipo=t.tipo.id,t.ciudad_id=Number(t.ciudad_id.id),t.estado=1,t.id=this.idEditando,2!=t.tipo?(t.genero=t.genero.id,t.estado_civil=t.estado_civil.id,t.fecha_nacimiento=this.formatDate(new Date(t.fecha_nacimiento).toISOString()),t.nivel_estudio=t.nivel_estudio.id):(t.genero=3,t.estado_civil=9,delete t.apellidos,delete t.fecha_nacimiento,t.nivel_estudio=8);const l=new FormData;for(const i in t)t.hasOwnProperty(i)&&l.append(i,t[i]);this.clientesService.updateClientes(l).subscribe(i=>{this.spinner.hide(),this.visibleModalClientesEditar=!1,"success"==i.code?(_().fire({title:"Exito",text:"Cliente actualizado exitosamente.",icon:"success"}),this.getIndex()):_().fire({title:"Error",text:"Error al actualizar el cliente.",icon:"error"})},i=>{console.log("Error: ",i)})}submitUpdate(){setTimeout(()=>{console.log("z",this.formEditClientes.value)}),this.formEditClientes.valid&&this.updateClientes()}confirmDelete(t){_().fire({title:"\xbfEstas seguro que deseas eliminar este cliente?",text:"Ten cuidado esta acci\xf3n no se prodr\xe1 reversar",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, Confirmar",cancelButtonText:"Cancelar"}).then(l=>{l.isConfirmed&&(this.spinner.show(),this.clientesService.deleteClientes({id:t}).subscribe(i=>{this.spinner.hide(),"success"==i.code?(_().fire({title:"Exito",text:"Cliente eliminado exitosamente.",icon:"success"}),this.getIndex()):_().fire({title:"Error",text:"Error al eliminar el cliente.",icon:"error"})},i=>{console.log("Error: ",i)}))})}onChangeTipoClienteCrear(){let t=this.formCreateClientes.get("tipo").value;1==t.id&&(this.visibleServicio=!0,this.formCreateClientes.get("apellidos").enable(),this.formCreateClientes.get("fecha_nacimiento").enable(),this.formCreateClientes.get("estado_civil").enable(),this.formCreateClientes.get("genero").enable(),this.formCreateClientes.get("nivel_estudio").enable(),this.formCreateClientes.get("apellidos").setValue(null),this.formCreateClientes.get("fecha_nacimiento").setValue(null),this.formCreateClientes.get("estado_civil").setValue(null),this.formCreateClientes.get("genero").setValue(null),this.formCreateClientes.get("nivel_estudio").setValue(null)),2==t.id&&(this.visibleServicio=!1,this.formCreateClientes.get("apellidos").disable(),this.formCreateClientes.get("fecha_nacimiento").disable(),this.formCreateClientes.get("estado_civil").disable(),this.formCreateClientes.get("genero").disable(),this.formCreateClientes.get("nivel_estudio").disable(),this.formCreateClientes.get("apellidos").setValue(0),this.formCreateClientes.get("fecha_nacimiento").setValue(0),this.formCreateClientes.get("estado_civil").setValue(0),this.formCreateClientes.get("genero").setValue(0),this.formCreateClientes.get("nivel_estudio").setValue(0))}onChangeTipoClienteEditar(){let t=this.formEditClientes.get("tipo").value;if(1==t.id){this.visibleServicioEditar=!0,this.formEditClientes.get("apellidos").enable(),this.formEditClientes.get("fecha_nacimiento").enable(),this.formEditClientes.get("estado_civil").enable(),this.formEditClientes.get("genero").enable(),this.formEditClientes.get("nivel_estudio").enable();let l=[],i=[],a=[];this.estadoCivil.forEach(d=>{d.id==this.editarData.estado_civil_id&&(l=d)}),this.genero.forEach(d=>{d.id==this.editarData.genero_id&&(i=d)}),this.nivelEstudio.forEach(d=>{d.id==this.editarData.nivel_studio_id&&(a=d)}),this.formEditClientes.get("apellidos").setValue(this.editarData?.apellidos),this.formEditClientes.get("fecha_nacimiento").setValue(new Date(this.editarData?.fecha_nacimiento)),this.formEditClientes.get("estado_civil").setValue(l),this.formEditClientes.get("genero").setValue(i),this.formEditClientes.get("nivel_estudio").setValue(a)}2==t.id&&(this.visibleServicioEditar=!1,this.formEditClientes.get("apellidos").disable(),this.formEditClientes.get("fecha_nacimiento").disable(),this.formEditClientes.get("estado_civil").disable(),this.formEditClientes.get("genero").disable(),this.formEditClientes.get("nivel_estudio").disable(),this.formEditClientes.get("apellidos").setValue(0),this.formEditClientes.get("fecha_nacimiento").setValue(0),this.formEditClientes.get("estado_civil").setValue(0),this.formEditClientes.get("genero").setValue(0),this.formEditClientes.get("nivel_estudio").setValue(0))}getCountries(){this.clientesService.getCountries().subscribe(t=>{this.countries$=t})}getStates(){this.clientesService.getStates(this.selectedCountry).subscribe(t=>{this.states$=t})}getCities(){this.clientesService.getCities(this.selectedState).subscribe(t=>{this.cities$=t})}searchInput(){let t=this.formSearch.get("search").value;""==t&&this.getIndex(t)}search(t){let l=this.formSearch.get("search").value;this.getIndex(l)}onPage(t){this.pageCount=t.rows,this.getIndex("",this.pageCount)}onPageChange(t){this.first=t.first,this.rows=t.rows}leftTable(){this.pageActual=this.pageActual-1,this.getIndex("",this.pageCount,this.pageActual),this.validatePage()}rightTable(){this.pageActual=this.pageActual+1,this.getIndex("",this.pageCount,this.pageActual),this.validatePage()}validatePage(){1==this.pageActual&&(this.disablePageLeft=!1),this.pageActual>1&&(this.disablePageLeft=!0),this.ultimaPage==this.pageActual&&(this.disablePageRight=!1),this.ultimaPage>this.pageActual&&(this.disablePageRight=!0)}static#e=this.\u0275fac=function(l){return new(l||n)(e.Y36(T.Y),e.Y36(s.qu),e.Y36(h.t2),e.Y36(g.F0))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-clientes"]],inputs:{vieneDeHabitaciones:"vieneDeHabitaciones"},outputs:{clienteCreado:"clienteCreado"},decls:153,vars:77,consts:[["type","ball-scale-multiple",4,"ngIf"],["class","surface-section px-4 py-5 md:px-6 lg:px-8",4,"ngIf"],["class","grid mt-3",4,"ngIf"],["header","Crear Cliente",3,"visible","modal","draggable","resizable","visibleChange","onHide"],[1,"col-12"],[3,"formGroup","ngSubmit"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-6"],["optionLabel","nombre","formControlName","hotel_id",3,"options"],["style","color: red;",4,"ngIf"],["optionLabel","nombre","formControlName","tipo",3,"options","onChange"],["type","text","pInputText","","formControlName","nombres",1,"w-full","mb-3","border-round-3xl"],["class","field col-12 md:col-6",4,"ngIf"],["optionLabel","nombre","formControlName","tipo_documento",3,"options"],["type","string","pInputText","","formControlName","numero_documento",1,"w-full","mb-3","border-round-3xl"],["optionLabel","nombre",3,"options","ngModel","ngModelOptions","ngModelChange","onChange"],["optionLabel","nombre","formControlName","ciudad_id",3,"options"],["type","text","pInputText","","formControlName","barrio_residencia",1,"w-full","mb-3","border-round-3xl"],["type","string","pInputText","","formControlName","telefono",1,"w-full","mb-3","border-round-3xl"],["type","string","pInputText","","formControlName","celular",1,"w-full","mb-3","border-round-3xl"],["type","text","pInputText","","formControlName","correo",1,"w-full","mb-3","border-round-3xl"],[1,"field","col-12","md:col-12"],["formControlName","observacion","pInputTextarea","","rows","3","cols","20"],["pButton","","pRipple","","label","Crear Cliente","icon","","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl",3,"disabled"],["header","Editar Cliente",3,"visible","modal","draggable","resizable","visibleChange"],["pButton","","pRipple","","label","Editar Cliente","icon","","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl",3,"disabled"],["type","ball-scale-multiple"],[1,"surface-section","px-4","py-5","md:px-6","lg:px-8"],[1,"flex","align-items-start","flex-column","lg:justify-content-between","lg:flex-row"],[1,"font-medium","text-3xl","text-900"],[1,"flex","align-items-center","text-700","flex-wrap"],[1,"mr-5","flex","align-items-center","mt-3"],[1,"mt-3","lg:mt-0"],["pButton","","pRipple","","label","Crear","class","p-button-outlined mr-2","icon","",3,"click",4,"ngIf"],["pButton","","pRipple","","label","Crear","icon","",1,"p-button-outlined","mr-2",3,"click"],[1,"grid","mt-3"],[1,"card","px-3","py-3"],["responsiveLayout","scroll","selectionMode","multiple","dataKey","usuario",3,"value","tableStyle","loading","rows","globalFilterFields","rowHover","onPage"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","loadingbody"],[2,"text-align","center"],[1,"p-buttonset"],["pButton","","pRipple","","label","","icon","pi pi-arrow-left",3,"disabled","click"],["pButton","","pRipple","",3,"label"],["pButton","","pRipple","","label","","icon","pi pi-arrow-right",3,"disabled","click"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[3,"formGroup"],[1,"p-inputgroup"],["formControlName","search","pInputText","","type","text","placeholder","Buscar...",1,"w-full","sm:w-auto",3,"input"],["type","button","pButton","","pRipple","",1,"pi","pi-search",3,"click"],[1,"flex","gap-2"],["icon","pi pi-pencil","severity","info",3,"click",4,"ngIf"],["icon","pi pi-trash","severity","danger",3,"click",4,"ngIf"],["icon","pi pi-pencil","severity","info",3,"click"],["icon","pi pi-trash","severity","danger",3,"click"],["colspan","8"],[2,"color","red"],["type","text","pInputText","","formControlName","apellidos",1,"w-full","mb-3","border-round-3xl"],["formControlName","fecha_nacimiento",1,"w-full","mb-3","border-round-3xl",3,"showIcon"],["optionLabel","nombre","formControlName","genero",3,"options"],["optionLabel","nombre","formControlName","estado_civil",3,"options"],["optionLabel","nombre","formControlName","nivel_estudio",3,"options"]],template:function(l,i){1&l&&(e.YNc(0,O,1,0,"ngx-spinner",0),e.YNc(1,A,9,1,"div",1),e.YNc(2,m,14,11,"div",2),e.TgZ(3,"p-dialog",3),e.NdJ("visibleChange",function(d){return i.visibleModalClientes=d})("onHide",function(){return i.cerrarModalCrear()}),e.TgZ(4,"div",4)(5,"form",5),e.NdJ("ngSubmit",function(){return i.submitCreate()}),e.TgZ(6,"div",6)(7,"div",7)(8,"label"),e._uU(9,"Hotel"),e.qZA(),e._UZ(10,"p-dropdown",8),e.YNc(11,G,2,0,"div",9),e.qZA(),e.TgZ(12,"div",7)(13,"label"),e._uU(14,"Tipo de Persona"),e.qZA(),e.TgZ(15,"p-dropdown",10),e.NdJ("onChange",function(){return i.onChangeTipoClienteCrear()}),e.qZA(),e.YNc(16,K,2,0,"div",9),e.qZA(),e.TgZ(17,"div",7)(18,"label"),e._uU(19,"Nombres"),e.qZA(),e._UZ(20,"input",11),e.YNc(21,x,2,0,"div",9),e.qZA(),e.YNc(22,z,5,1,"div",12),e.YNc(23,X,5,2,"div",12),e.TgZ(24,"div",7)(25,"label"),e._uU(26,"Tipo Documento"),e.qZA(),e._UZ(27,"p-dropdown",13),e.YNc(28,ee,2,0,"div",9),e.qZA(),e.TgZ(29,"div",7)(30,"label"),e._uU(31,"N\xfamero Documento"),e.qZA(),e._UZ(32,"input",14),e.YNc(33,te,2,0,"div",9),e.qZA(),e.YNc(34,ne,5,2,"div",12),e.YNc(35,re,5,2,"div",12),e.YNc(36,se,5,2,"div",12),e.TgZ(37,"div",7)(38,"label"),e._uU(39,"Pa\xeds"),e.qZA(),e.TgZ(40,"p-dropdown",15),e.NdJ("ngModelChange",function(d){return i.selectedCountry=d})("onChange",function(){return i.getStates()}),e.qZA()(),e.TgZ(41,"div",7)(42,"label"),e._uU(43,"Departamento"),e.qZA(),e.TgZ(44,"p-dropdown",15),e.NdJ("ngModelChange",function(d){return i.selectedState=d})("onChange",function(){return i.getCities()}),e.qZA()(),e.TgZ(45,"div",7)(46,"label"),e._uU(47,"Ciudad"),e.qZA(),e._UZ(48,"p-dropdown",16),e.YNc(49,ae,2,0,"div",9),e.qZA(),e.TgZ(50,"div",7)(51,"label"),e._uU(52,"Barrio"),e.qZA(),e._UZ(53,"input",17),e.YNc(54,de,2,0,"div",9),e.qZA(),e.TgZ(55,"div",7)(56,"label"),e._uU(57,"Telefono"),e.qZA(),e._UZ(58,"input",18),e.YNc(59,pe,2,0,"div",9),e.qZA(),e.TgZ(60,"div",7)(61,"label"),e._uU(62,"Celular"),e.qZA(),e._UZ(63,"input",19),e.YNc(64,ce,2,0,"div",9),e.qZA(),e.TgZ(65,"div",7)(66,"label"),e._uU(67,"Correo"),e.qZA(),e._UZ(68,"input",20),e.YNc(69,ue,2,0,"div",9),e.qZA(),e.TgZ(70,"div",21)(71,"label"),e._uU(72,"Observaci\xf3n"),e.qZA(),e._UZ(73,"textarea",22),e.YNc(74,_e,2,0,"div",9),e.qZA(),e.TgZ(75,"div",21),e._UZ(76,"button",23),e.qZA()(),e._UZ(77,"br"),e.qZA()()(),e.TgZ(78,"p-dialog",24),e.NdJ("visibleChange",function(d){return i.visibleModalClientesEditar=d}),e.TgZ(79,"div",4)(80,"form",5),e.NdJ("ngSubmit",function(){return i.submitUpdate()}),e.TgZ(81,"div",6)(82,"div",7)(83,"label"),e._uU(84,"Hotel"),e.qZA(),e._UZ(85,"p-dropdown",8),e.YNc(86,me,2,0,"div",9),e.qZA(),e.TgZ(87,"div",7)(88,"label"),e._uU(89,"Tipo de Persona"),e.qZA(),e.TgZ(90,"p-dropdown",10),e.NdJ("onChange",function(){return i.onChangeTipoClienteEditar()}),e.qZA(),e.YNc(91,ge,2,0,"div",9),e.qZA(),e.TgZ(92,"div",7)(93,"label"),e._uU(94,"Nombres"),e.qZA(),e._UZ(95,"input",11),e.YNc(96,Ce,2,0,"div",9),e.qZA(),e.YNc(97,he,5,1,"div",12),e.YNc(98,Ze,5,2,"div",12),e.TgZ(99,"div",7)(100,"label"),e._uU(101,"Tipo Documento"),e.qZA(),e._UZ(102,"p-dropdown",13),e.YNc(103,be,2,0,"div",9),e.qZA(),e.TgZ(104,"div",7)(105,"label"),e._uU(106,"N\xfamero Documento"),e.qZA(),e._UZ(107,"input",14),e.YNc(108,Te,2,0,"div",9),e.qZA(),e.YNc(109,xe,5,2,"div",12),e.YNc(110,qe,5,2,"div",12),e.YNc(111,Ie,5,2,"div",12),e.TgZ(112,"div",7)(113,"label"),e._uU(114,"Pa\xeds"),e.qZA(),e.TgZ(115,"p-dropdown",15),e.NdJ("ngModelChange",function(d){return i.selectedCountry=d})("onChange",function(){return i.getStates()}),e.qZA()(),e.TgZ(116,"div",7)(117,"label"),e._uU(118,"Departamento"),e.qZA(),e.TgZ(119,"p-dropdown",15),e.NdJ("ngModelChange",function(d){return i.selectedState=d})("onChange",function(){return i.getCities()}),e.qZA()(),e.TgZ(120,"div",7)(121,"label"),e._uU(122,"Ciudad"),e.qZA(),e._UZ(123,"p-dropdown",16),e.YNc(124,De,2,0,"div",9),e.qZA(),e.TgZ(125,"div",7)(126,"label"),e._uU(127,"Barrio"),e.qZA(),e._UZ(128,"input",17),e.YNc(129,Me,2,0,"div",9),e.qZA(),e.TgZ(130,"div",7)(131,"label"),e._uU(132,"Telefono"),e.qZA(),e._UZ(133,"input",18),e.YNc(134,Je,2,0,"div",9),e.qZA(),e.TgZ(135,"div",7)(136,"label"),e._uU(137,"Celular"),e.qZA(),e._UZ(138,"input",19),e.YNc(139,Ne,2,0,"div",9),e.qZA(),e.TgZ(140,"div",7)(141,"label"),e._uU(142,"Correo"),e.qZA(),e._UZ(143,"input",20),e.YNc(144,Pe,2,0,"div",9),e.qZA(),e.TgZ(145,"div",21)(146,"label"),e._uU(147,"Observaci\xf3n"),e.qZA(),e._UZ(148,"textarea",22),e.YNc(149,Qe,2,0,"div",9),e.qZA(),e.TgZ(150,"div",21),e._UZ(151,"button",25),e.qZA()(),e._UZ(152,"br"),e.qZA()()()),2&l&&(e.Q6J("ngIf",!i.vieneDeHabitaciones),e.xp6(1),e.Q6J("ngIf",!i.vieneDeHabitaciones),e.xp6(1),e.Q6J("ngIf",!i.vieneDeHabitaciones),e.xp6(1),e.Akn(e.DdM(71,V)),e.Q6J("visible",i.visibleModalClientes)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(2),e.Q6J("formGroup",i.formCreateClientes),e.xp6(5),e.Q6J("options",i.hotel),e.xp6(1),e.Q6J("ngIf",i.formCreateClientes.get("hotel_id").hasError("required")),e.xp6(4),e.Q6J("options",i.tipo),e.xp6(1),e.Q6J("ngIf",i.formCreateClientes.get("tipo").hasError("required")),e.xp6(5),e.Q6J("ngIf",i.formCreateClientes.get("nombres").hasError("required")),e.xp6(1),e.Q6J("ngIf",i.visibleServicio),e.xp6(1),e.Q6J("ngIf",i.visibleServicio),e.xp6(4),e.Q6J("options",i.tipoDocumento),e.xp6(1),e.Q6J("ngIf",i.formCreateClientes.get("tipo_documento").hasError("required")),e.xp6(5),e.Q6J("ngIf",i.formCreateClientes.get("numero_documento").hasError("required")),e.xp6(1),e.Q6J("ngIf",i.visibleServicio),e.xp6(1),e.Q6J("ngIf",i.visibleServicio),e.xp6(1),e.Q6J("ngIf",i.visibleServicio),e.xp6(4),e.Q6J("options",i.countries$)("ngModel",i.selectedCountry)("ngModelOptions",e.DdM(72,q)),e.xp6(4),e.Q6J("options",i.states$)("ngModel",i.selectedState)("ngModelOptions",e.DdM(73,q)),e.xp6(4),e.Q6J("options",i.cities$),e.xp6(1),e.Q6J("ngIf",i.formCreateClientes.get("ciudad_id").hasError("required")),e.xp6(5),e.Q6J("ngIf",i.formCreateClientes.get("barrio_residencia").hasError("required")),e.xp6(5),e.Q6J("ngIf",i.formCreateClientes.get("telefono").hasError("required")),e.xp6(5),e.Q6J("ngIf",i.formCreateClientes.get("celular").hasError("required")),e.xp6(5),e.Q6J("ngIf",i.formCreateClientes.get("correo").hasError("required")),e.xp6(5),e.Q6J("ngIf",i.formCreateClientes.get("observacion").hasError("required")),e.xp6(2),e.Q6J("disabled",i.formCreateClientes.invalid),e.xp6(2),e.Akn(e.DdM(74,V)),e.Q6J("visible",i.visibleModalClientesEditar)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(2),e.Q6J("formGroup",i.formEditClientes),e.xp6(5),e.Q6J("options",i.hotel),e.xp6(1),e.Q6J("ngIf",i.formEditClientes.get("hotel_id").hasError("required")),e.xp6(4),e.Q6J("options",i.tipo),e.xp6(1),e.Q6J("ngIf",i.formEditClientes.get("tipo").hasError("required")),e.xp6(5),e.Q6J("ngIf",i.formEditClientes.get("nombres").hasError("required")),e.xp6(1),e.Q6J("ngIf",i.visibleServicioEditar),e.xp6(1),e.Q6J("ngIf",i.visibleServicioEditar),e.xp6(4),e.Q6J("options",i.tipoDocumento),e.xp6(1),e.Q6J("ngIf",i.formEditClientes.get("tipo_documento").hasError("required")),e.xp6(5),e.Q6J("ngIf",i.formEditClientes.get("numero_documento").hasError("required")),e.xp6(1),e.Q6J("ngIf",i.visibleServicioEditar),e.xp6(1),e.Q6J("ngIf",i.visibleServicioEditar),e.xp6(1),e.Q6J("ngIf",i.visibleServicioEditar),e.xp6(4),e.Q6J("options",i.countries$)("ngModel",i.selectedCountry)("ngModelOptions",e.DdM(75,q)),e.xp6(4),e.Q6J("options",i.states$)("ngModel",i.selectedState)("ngModelOptions",e.DdM(76,q)),e.xp6(4),e.Q6J("options",i.cities$),e.xp6(1),e.Q6J("ngIf",i.formEditClientes.get("ciudad_id").hasError("required")),e.xp6(5),e.Q6J("ngIf",i.formEditClientes.get("barrio_residencia").hasError("required")),e.xp6(5),e.Q6J("ngIf",i.formEditClientes.get("telefono").hasError("required")),e.xp6(5),e.Q6J("ngIf",i.formEditClientes.get("celular").hasError("required")),e.xp6(5),e.Q6J("ngIf",i.formEditClientes.get("correo").hasError("required")),e.xp6(5),e.Q6J("ngIf",i.formEditClientes.get("observacion").hasError("required")),e.xp6(2),e.Q6J("disabled",i.formEditClientes.invalid))},dependencies:[M.O5,p.iA,c.jx,v.Hq,v.zx,s._Y,s.Fj,s.JJ,s.JL,s.On,E.H,J.o,N.g,P.Lt,Q.V,s.sg,s.u,h.Ro,w.f],styles:["svg[_ngcontent-%COMP%]{width:45%}"]})}return n})()},5617:(F,f,o)=>{o.r(f),o.d(f,{ClientesModule:()=>$});var e=o(6814),s=o(95),b=o(9664),_=o(6068),C=o(707),T=o(4480),h=o(4104),g=o(6340),M=o(6022),p=o(3714),c=o(6218),v=o(2160),E=o(1865),J=o(354),N=o(7213),P=o(9862),Q=o(8712),w=o(5722),O=o(8672),S=o(1712),A=o(86),Y=o(8725),y=o(2506),Z=o(4946);let L=(()=>{class m{static#e=this.\u0275fac=function(x){return new(x||m)};static#t=this.\u0275mod=Z.oAB({type:m});static#i=this.\u0275inj=Z.cJS({imports:[A.Bz.forChild([{path:"",component:Y.R,canActivate:[y.a],data:{permissions:["administracion.clientes"]}}]),A.Bz]})}return m})();var B=o(2574),R=o(1532);let $=(()=>{class m{static#e=this.\u0275fac=function(x){return new(x||m)};static#t=this.\u0275mod=Z.oAB({type:m});static#i=this.\u0275inj=Z.cJS({providers:[{provide:P.TP,useClass:Q.n,multi:!0},B.Y],imports:[e.ez,L,b.U$,_.O,s.u5,C.hJ,T.T,h.EV,g.V,M.Xt,p.j,c.A,v.kW,E.cc,J.L$,N.S,w.ii.forRoot(),s.UX,O.ef,S.U,R._8]})}return m})()},2574:(F,f,o)=>{o.d(f,{Y:()=>h});var e=o(5619),s=o(7398),b=o(6306),_=o(4444),C=o(4946),T=o(9862);let h=(()=>{class g{constructor(p){this.httpClient=p,this.dataSubject=new e.X([]),this.endpointListar="/clientesListar",this.endpointClienteGet="/clienteEditar/",this.endpointClienteCreate="/clientesCrear",this.endpointClienteUpdate="/clientesActualizar",this.endpointEliminar="/clientesEliminar",this.endpointCountry="/paisListar",this.endpointState="/departamentoPaisListar",this.endpointCity="/ciudadDepartamentoListar",this.data=this.dataSubject.asObservable(),this.baseUrl=_.D.url}getAll(p,c="",v=1){return this.httpClient.post(`${this.baseUrl+this.endpointListar}?per_page=${p}&page=${v}&search=${c}`,{})}getClientes(p){return this.httpClient.get(`${this.baseUrl+this.endpointClienteGet+p}`)}createClientes(p){return this.httpClient.post(`${this.baseUrl+this.endpointClienteCreate}`,p)}updateClientes(p){return this.httpClient.post(`${this.baseUrl+this.endpointClienteUpdate}`,p)}deleteClientes(p){return this.httpClient.post(`${this.baseUrl+this.endpointEliminar}`,p)}getCountries(){return this.httpClient.post(`${this.baseUrl+this.endpointCountry}`,{id:""}).pipe((0,s.U)(c=>c&&c.data&&Array.isArray(c.data)?c.data:[]),(0,b.K)(c=>(console.log("Error:",c),[])))}getStates(p){return this.httpClient.post(`${this.baseUrl+this.endpointState}`,{id:p})}getCities(p){return this.httpClient.post(`${this.baseUrl+this.endpointCity}`,{id:p})}static#e=this.\u0275fac=function(c){return new(c||g)(C.LFG(T.eN))};static#t=this.\u0275prov=C.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()}}]);