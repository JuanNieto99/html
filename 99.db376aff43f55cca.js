"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[99],{4099:(mt,b,r)=>{r.r(b),r.d(b,{PermissionsModule:()=>et});var P=r(177),a=r(4341),v=r(3091),p=r(5779),R=r(8032),u=r.n(R),d=r(5989),t=r(540),F=r(4412),G=r(6354),y=r(306),C=r(1626);let x=(()=>{class n{constructor(e){this.httpClient=e,this.dataSubject=new F.t([]),this.data=this.dataSubject.asObservable(),this.baseUrl=y.T.url,this.endpointCrear="/permisoCrear",this.endpointPListar="/permisoListar",this.endpointPMostrar="/permisoMostrar",this.endpointPActualizar="/permisoActualizar",this.endpointPEliminar="/permisoEliminar"}getPermissions(e,i="",s=1){return this.httpClient.post(`${this.baseUrl+this.endpointPListar}?per_page=${e}&page=${s}&search=${i}`,{})}CreatePermissions(e){return this.httpClient.post(`${this.baseUrl+this.endpointCrear}`,e)}getPermissionById(e){return this.httpClient.get(`${this.baseUrl+this.endpointPMostrar}/${e}`).pipe((0,G.T)(i=>i))}updatePermissions(e){return this.httpClient.post(`${this.baseUrl+this.endpointPActualizar}`,e)}deletePermissions(e){return this.httpClient.post(`${this.baseUrl+this.endpointPEliminar}`,{id:e})}refresPermissionData(){this.getPermissions(30).subscribe(e=>{this.dataSubject.next(e.data)},e=>{console.log("Error: ",e)})}static{this.\u0275fac=function(i){return new(i||n)(t.KVO(C.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var k=r(6554),j=r(3192),h=r(9998),g=r(1570),$=r(5589),N=r(1550),f=r(3386),c=r(1141),T=r(563),E=r(2242);function S(n,l){if(1&n){const e=t.RV6();t.j41(0,"button",30),t.bIt("click",function(){t.eBV(e);const s=t.XpG();return t.Njj(s.modalNewP())}),t.k0s()}}function w(n,l){if(1&n){const e=t.RV6();t.j41(0,"div",31),t.nrm(1,"span"),t.j41(2,"span",32)(3,"form",33)(4,"div",34)(5,"input",35),t.bIt("keyup.enter",function(s){t.eBV(e);const o=t.XpG();return t.Njj(o.buscarPorTecla(s))})("input",function(){t.eBV(e);const s=t.XpG();return t.Njj(s.searchInput())}),t.k0s(),t.j41(6,"button",36),t.bIt("click",function(){t.eBV(e);const s=t.XpG();return t.Njj(s.search())}),t.k0s()()()()()}if(2&n){const e=t.XpG();t.R7$(3),t.Y8G("formGroup",e.formSearch)}}function B(n,l){1&n&&(t.j41(0,"tr")(1,"th",37),t.EFF(2,"Nombre"),t.k0s(),t.j41(3,"th",37),t.EFF(4,"C\xf3digo"),t.k0s(),t.j41(5,"th"),t.EFF(6,"Descripci\xf3n"),t.k0s(),t.j41(7,"th"),t.EFF(8,"Acciones"),t.k0s()())}function X(n,l){if(1&n){const e=t.RV6();t.j41(0,"p-button",41),t.bIt("click",function(){t.eBV(e);const s=t.XpG().$implicit,o=t.XpG();return t.Njj(o.getPermission(s.id))}),t.k0s()}}function A(n,l){if(1&n){const e=t.RV6();t.j41(0,"p-button",42),t.bIt("click",function(){t.eBV(e);const s=t.XpG().$implicit,o=t.XpG();return t.Njj(o.confirmDelete(s.id))}),t.k0s()}}function D(n,l){if(1&n&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td",38),t.DNE(8,X,1,0,"p-button",39),t.nrm(9,"p-confirmDialog"),t.DNE(10,A,1,0,"p-button",40),t.k0s()()),2&n){const e=l.$implicit,i=t.XpG();t.R7$(2),t.JRh(e.nombre),t.R7$(2),t.JRh(e.codigo),t.R7$(2),t.JRh(e.descripcion),t.R7$(2),t.Y8G("ngIf",i.permisoActualizar),t.R7$(2),t.Y8G("ngIf",i.permisoEliminar)}}function M(n,l){if(1&n&&t.nrm(0,"input",43),2&n){const e=t.XpG();t.Y8G("value",e.permissionData.nombre)}}function U(n,l){if(1&n&&t.nrm(0,"input",44),2&n){const e=t.XpG();t.Y8G("value",e.permissionData.codigo)}}const V=function(){return{"min-width":"50rem"}},Y=function(){return["nombre","medida","precio","cantidad","inventario","acciones"]},I=function(){return{width:"95vw"}};let _=(()=>{class n{constructor(e,i,s,o,m,it,st,nt,rt,ot,at,lt){this.permissionsService=e,this.spinner=i,this.hotelsService=s,this.confirmationService=o,this.toastModule=m,this.dialogModule=it,this.messageService=st,this.usersService=nt,this.breadcrumbService=rt,this.tableModule=ot,this.buttonModule=at,this.cdRef=lt,this.permisoCrear=d.u.hasPermission(["administracion.permisos.crear"]),this.permisoActualizar=d.u.hasPermission(["administracion.permisos.actualizar"]),this.permisoEliminar=d.u.hasPermission(["administracion.permisos.eliminar"]),this.editarH=!1,this.crearH=!1,this.pageCount=10,this.editarPermit=!1,this.crearPermit=!1,this.pageActual=1,this.ultimaPage=1,this.disablePageLeft=!1,this.disablePageRight=!1,this.registrosContar=0,this.loadingTable=!1,this.formSearch=new a.gE({search:new a.MJ("",[])}),this.formNewP=new a.gE({nombre:new a.MJ("",a.k0.required),codigo:new a.MJ("",a.k0.required),descripcion:new a.MJ("",[])}),this.formEditP=new a.gE({nombre:new a.MJ("",a.k0.required),codigo:new a.MJ("",a.k0.required),id:new a.MJ("",[])})}ngOnInit(){this.getIndex(),this.permissionsService.data.subscribe(e=>{this.permission=e})}createPermission(){const e=this.formNewP.value;this.formNewP.reset(),this.permissionsService.CreatePermissions(e).subscribe(i=>{this.crearPermit=!1,u().fire({title:"Confirmaci\xf3n",text:"El Permiso ha sido creado.",icon:"success",timer:2e3,showConfirmButton:!1}),this.getIndex()},i=>{console.log("Error:",i)})}getIndex(e="",i=this.pageCount,s=1){this.spinner.show(),this.loadingTable=!0,this.permissionsService.getPermissions(i,e,s).subscribe(o=>{this.loadingTable=!1,this.permission=o.data,this.totalPermission=o.total,this.ultimaPage=o.last_page,this.registrosContar=o.total,this.ultimaPage=o.last_page,o.total>i&&(this.disablePageRight=!0),this.validatePage(),this.spinner.hide()},o=>{console.log("Error: ",o)})}getPermission(e){this.permissionsService.getPermissionById(e).subscribe(i=>{this.permissionData=i,this.formEditP.get("nombre").setValue(i.nombre),this.formEditP.get("codigo").setValue(i.codigo),this.formEditP.get("codigo").disable(),this.formEditP.get("id").setValue(i.id),this.editarPermit=!0})}updatePermission(){this.formEditP.get("id").setValue(this.permissionData.id),this.permissionsService.updatePermissions(this.formEditP.value).subscribe(i=>{this.editarPermit=!1,this.permissionsService.refresPermissionData()},i=>{console.log("Error:",i)})}confirmDelete(e){u().fire({title:"\xbfEstas Seguro que deseas eliminar el Permiso?",text:"Ten cuidado esta acci\xf3n no se prodr\xe1 reversar",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, Confirmar",cancelButtonText:"Cancelar"}).then(i=>{i.isConfirmed&&(this.permissionsService.deletePermissions(e).subscribe(s=>{this.permissionsService.refresPermissionData()}),u().fire({title:"Confirmaci\xf3n",text:"El Permiso ha sido eliminado.",icon:"success"}))})}modalNewP(){this.crearPermit=!0}searchInput(){let e=this.formSearch.get("search").value;this.pageActual=1,""==e&&this.getIndex(e)}search(){let e=this.formSearch.get("search").value;this.getIndex(e)}onPage(e){this.pageCount=e.rows,this.getIndex("",this.pageCount)}leftTable(){this.pageActual=this.pageActual-1,this.getIndex("",this.pageCount,this.pageActual),this.validatePage()}rightTable(){this.pageActual=this.pageActual+1,this.getIndex("",this.pageCount,this.pageActual),this.validatePage()}validatePage(){1==this.pageActual&&(this.disablePageLeft=!1),this.pageActual>1&&(this.disablePageLeft=!0),this.ultimaPage==this.pageActual&&(this.disablePageRight=!1),this.ultimaPage>this.pageActual&&(this.disablePageRight=!0)}buscarPorTecla(e){"Enter"==e.code&&this.search()}static{this.\u0275fac=function(i){return new(i||n)(t.rXU(x),t.rXU(k.ex),t.rXU(j.p),t.rXU(p.td),t.rXU(h.MB),t.rXU(g.P),t.rXU(p.bg),t.rXU($.g),t.rXU(N.b),t.rXU(f.bG),t.rXU(c.tm),t.rXU(t.gRc))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-permisssions"]],features:[t.Jv_([p.td,p.bg])],decls:52,vars:31,consts:[[1,"surface-section","px-4","py-5","md:px-6","lg:px-8"],[1,"flex","align-items-start","flex-column","lg:justify-content-between","lg:flex-row"],[1,"font-medium","text-3xl","text-900"],[1,"mt-3","lg:mt-0"],["pButton","","pRipple","","label","Crear","class","p-button-outlined mr-2",3,"click",4,"ngIf"],[1,"grid","mt-3"],[1,"col-12"],[1,"card","px-3","py-3"],["responsiveLayout","scroll","selectionMode","multiple","dataKey","usuario",3,"value","tableStyle","loading","rows","globalFilterFields","rowHover","onPage"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[2,"text-align","center"],[1,"p-buttonset"],["pButton","","pRipple","","label","","icon","pi pi-arrow-left",3,"disabled","click"],["pButton","","pRipple","",3,"label"],["pButton","","pRipple","","label","","icon","pi pi-arrow-right",3,"disabled","click"],["header","Crear un Permiso",3,"visible","modal","draggable","resizable","visibleChange"],[3,"formGroup","ngSubmit"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-4"],["type","text","placeholder","Auditar","pInputText","","formControlName","nombre",1,"w-full","mb-3","border-round-3xl"],["type","text","placeholder","aut","pInputText","","formControlName","codigo",1,"w-full","mb-3","border-round-3xl"],["type","text","pInputText","","formControlName","descripcion",1,"w-full","mb-3","border-round-3xl"],[1,"field","col-12","md:col-12"],["pButton","","pRipple","","label","Crear Permiso","icon","pi pi-user","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl",3,"disabled"],["header","Editar permisos","modal","modal",3,"visible","draggable","resizable","visibleChange","onVisibleChange"],["type","text","pInputText","","class","w-full mb-3 border-round-3xl","formControlName","nombre",3,"value",4,"ngIf"],["type","text","pInputText","","class","w-full mb-3 border-round-3xl","formControlName","codigo",3,"value",4,"ngIf"],["pButton","","pRipple","","label","Editar Permiso","icon","pi pi-user","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl",3,"disabled"],["pButton","","pRipple","","label","Crear",1,"p-button-outlined","mr-2",3,"click"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[3,"formGroup"],[1,"p-inputgroup"],["formControlName","search","pInputText","","type","text","placeholder","Buscar...",1,"w-full","sm:w-auto",3,"keyup.enter","input"],["type","button","pButton","","pRipple","",1,"pi","pi-search",3,"click"],[2,"width","20%"],[1,"flex","gap-2"],["icon","pi pi-pencil","severity","info",3,"click",4,"ngIf"],["icon","pi pi-trash","severity","danger",3,"click",4,"ngIf"],["icon","pi pi-pencil","severity","info",3,"click"],["icon","pi pi-trash","severity","danger",3,"click"],["type","text","pInputText","","formControlName","nombre",1,"w-full","mb-3","border-round-3xl",3,"value"],["type","text","pInputText","","formControlName","codigo",1,"w-full","mb-3","border-round-3xl",3,"value"]],template:function(i,s){1&i&&(t.nrm(0,"p-toast"),t.j41(1,"div",0)(2,"div",1)(3,"div")(4,"div",2),t.EFF(5,"Permisos"),t.k0s()(),t.j41(6,"div",3),t.DNE(7,S,1,0,"button",4),t.k0s()()(),t.j41(8,"div",5)(9,"div",6)(10,"div",7)(11,"p-table",8),t.bIt("onPage",function(m){return s.onPage(m)}),t.DNE(12,w,7,1,"ng-template",9),t.DNE(13,B,9,0,"ng-template",10),t.DNE(14,D,11,5,"ng-template",11),t.k0s(),t.nrm(15,"br"),t.j41(16,"div",12)(17,"span",13)(18,"button",14),t.bIt("click",function(){return s.leftTable()}),t.k0s(),t.nrm(19,"button",15),t.j41(20,"button",16),t.bIt("click",function(){return s.rightTable()}),t.k0s()()()()()(),t.j41(21,"p-dialog",17),t.bIt("visibleChange",function(m){return s.crearPermit=m}),t.j41(22,"div",6)(23,"form",18),t.bIt("ngSubmit",function(){return s.createPermission()}),t.j41(24,"div",19)(25,"div",20)(26,"label"),t.EFF(27,"Nombre del permiso"),t.k0s(),t.nrm(28,"input",21),t.k0s(),t.j41(29,"div",20)(30,"label"),t.EFF(31,"C\xf3digo"),t.k0s(),t.nrm(32,"input",22),t.k0s(),t.j41(33,"div",20)(34,"label"),t.EFF(35,"Descripci\xf3n"),t.k0s(),t.nrm(36,"input",23),t.k0s(),t.j41(37,"div",24),t.nrm(38,"button",25),t.k0s()()()()(),t.j41(39,"p-dialog",26),t.bIt("visibleChange",function(m){return s.editarPermit=m})("onVisibleChange",function(){return s.editarPermit=!s.editarPermit}),t.j41(40,"form",18),t.bIt("ngSubmit",function(){return s.updatePermission()}),t.j41(41,"div",19)(42,"div",20)(43,"label"),t.EFF(44,"Nombre del permiso"),t.k0s(),t.DNE(45,M,1,1,"input",27),t.k0s(),t.j41(46,"div",20)(47,"label"),t.EFF(48,"C\xf3digo"),t.k0s(),t.DNE(49,U,1,1,"input",28),t.k0s(),t.j41(50,"div",24),t.nrm(51,"button",29),t.k0s()()()()),2&i&&(t.R7$(7),t.Y8G("ngIf",s.permisoCrear),t.R7$(4),t.Y8G("value",s.permission)("tableStyle",t.lJ4(27,V))("loading",s.loadingTable)("rows",8)("globalFilterFields",t.lJ4(28,Y))("rowHover",!0),t.R7$(7),t.Y8G("disabled",!s.disablePageLeft),t.R7$(1),t.Y8G("label",s.pageActual),t.R7$(1),t.Y8G("disabled",!s.disablePageRight),t.R7$(1),t.Aen(t.lJ4(29,I)),t.Y8G("visible",s.crearPermit)("modal",!0)("draggable",!1)("resizable",!1),t.R7$(2),t.Y8G("formGroup",s.formNewP),t.R7$(15),t.Y8G("disabled",s.formNewP.invalid),t.R7$(1),t.Aen(t.lJ4(30,I)),t.Y8G("visible",s.editarPermit)("draggable",!1)("resizable",!1),t.R7$(1),t.Y8G("formGroup",s.formEditP),t.R7$(5),t.Y8G("ngIf",s.editarPermit),t.R7$(4),t.Y8G("ngIf",s.editarPermit),t.R7$(2),t.Y8G("disabled",s.formEditP.invalid))},dependencies:[P.bT,f.XI,p.Ei,c._f,c.$n,a.qT,a.me,a.BC,a.cb,T.n,h.y8,E.S,g.l,a.j4,a.JD],encapsulation:2})}}return n})();var J=r(1765);let z=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[v.iI.forChild([{path:"",component:_,canActivate:[J.q],data:{permissions:["administracion.permisos"]}}]),v.iI]})}}return n})();var L=r(5493),H=r(1830),O=r(4714),K=r(1305),Z=r(9883),Q=r(494),W=r(981),q=r(635),tt=r(4058);let et=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({providers:[{provide:C.a7,useClass:q.R,multi:!0},x,j.p],imports:[P.MD,z,f.bG,L.e,a.YN,c.tm,T.Z,h.MB,H.m,O.wZ,E.u,K.f,Z.kr,Q.Ko,W.O3,g.P,tt.RZ.forRoot(),a.X1]})}}return n})()}}]);