"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[595],{5595:(O,U,s)=>{s.r(U),s.d(U,{SaleModule:()=>Ft});var v=s(6814),i=s(95),A=s(9664),D=s(6068),y=s(707),I=s(4480),E=s(4104),q=s(6340),J=s(6022),M=s(3714),k=s(6218),g=s(2160),P=s(1865),T=s(354),Z=s(7213),b=s(9862),N=s(8712),u=s(5722),C=s(8672),p=s(1712),_=s(3514),r=s(4444),t=s(4946);let x=(()=>{class n{constructor(e){this.httpClient=e,this.baseUrl=r.D.url,this.endpointListar="/ventasListar",this.endpointProductsGet="/getDatosVentasCrear",this.endpointVentasCrear="/crearVenta",this.endpointVentasDelete="/eliminarVenta"}getAll(e,a="",o=1){const l={headers:new b.WM({"Content-Type":"application/json"})};return this.httpClient.post(`${this.baseUrl+this.endpointListar}?per_page=${e}&page=${o}&search=${a}`,l)}deleteSale(e){return this.httpClient.post(`${this.baseUrl+this.endpointVentasDelete}`,e)}getDatosVentasCrear(){return this.httpClient.get(`${this.baseUrl+this.endpointProductsGet}`)}createVentas(e){return this.httpClient.post(`${this.baseUrl+this.endpointVentasCrear}`,e)}static#t=this.\u0275fac=function(a){return new(a||n)(t.LFG(b.eN))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var h=s(228),L=s(3519),w=s.n(L),Y=s(3859),K=s(6401),F=s(5219);function z(n,d){if(1&n){const e=t.EpF();t.TgZ(0,"div",21),t._UZ(1,"span"),t.TgZ(2,"span",22)(3,"form",23)(4,"div",24)(5,"input",25),t.NdJ("keyup.enter",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.buscarPorTecla(o))})("input",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.searchInput())}),t.qZA(),t.TgZ(6,"button",26),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.search())}),t.qZA()()()()()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("formGroup",e.formSearch)}}function W(n,d){1&n&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Hotel"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Recibo interno"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Usuario"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Total"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Subtotal"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Estado"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Acciones"),t.qZA()())}function X(n,d){if(1&n){const e=t.EpF();t.TgZ(0,"p-button",31),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,l=t.oxw();return t.KtG(l.confirmAbrirPdf(o.id))}),t.qZA()}}function tt(n,d){if(1&n){const e=t.EpF();t.TgZ(0,"p-button",32),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,l=t.oxw();return t.KtG(l.confirmDelete(o.id))}),t.qZA()}}function et(n,d){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td",27),t.YNc(14,X,1,0,"p-button",28),t.YNc(15,tt,1,0,"p-button",29),t.TgZ(16,"button",30),t._uU(17,"."),t.qZA()()()),2&n){const e=d.$implicit,a=t.oxw();t.xp6(2),t.Oqu(e.hotel.nombre),t.xp6(2),t.Oqu(e.secuencia_interna),t.xp6(2),t.Oqu(e.usuario.usuario),t.xp6(2),t.Oqu(e.total),t.xp6(2),t.Oqu(e.subtotal),t.xp6(2),t.Oqu(a.getEstado(e.estado_id)),t.xp6(2),t.Q6J("ngIf",0!==e.estado_id),t.xp6(1),t.Q6J("ngIf",0!==e.estado_id||a.permisoEliminar)}}function ot(n,d){1&n&&(t.TgZ(0,"tr")(1,"td",33),t._uU(2,"Cargando informacion porfavor espere ..."),t.qZA()())}const it=function(){return{"min-width":"50rem"}},nt=function(){return["nombre","Hotel","acciones"]};let at=(()=>{class n{constructor(e,a,o,l,c,f){this.FB=e,this.spinner=a,this.SaleService=o,this.router=l,this.layoutService=c,this.appComponent=f,this.loadingTable=!1,this.pageCount=10,this.pageActual=1,this.ultimaPage=1,this.disablePageLeft=!1,this.disablePageRight=!1,this.first=0,this.rows=8}ngOnInit(){this.buildForm(),this.getIndex(),this.baseUrl=r.D.url,this.token=this.appComponent.getToken()}buildForm(){this.formSearch=this.FB.group({search:["",[]]})}redirectToCrearVenta(){this.router.navigate(["dashboard/dashboardSell/sale-detail"])}getEstado(e){switch(e){case 1:return"Activa";case 0:return"Anulada";default:return"Desconocido"}}getIndex(e="",a=this.pageCount,o=1){this.spinner.show(),this.loadingTable=!0,this.SaleService.getAll(a,e,o).subscribe(l=>{this.loadingTable=!1,this.salesData=l.data,this.countRegisters=l.total,this.ultimaPage=l.last_page,l.total>a&&(this.disablePageRight=!0),this.validatePage(),this.spinner.hide()},l=>{console.log("Error: ",l),this.spinner.hide()})}confirmDelete(e){w().fire({title:"\xbfEstas seguro que deseas anular esta venta?",text:"Ten cuidado esta acci\xf3n no se prodr\xe1 reversar",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, Confirmar",cancelButtonText:"Cancelar"}).then(a=>{a.isConfirmed&&(this.spinner.show(),this.SaleService.deleteSale({id:e}).subscribe(o=>{this.spinner.hide(),"success"==o.code?(w().fire({title:"Exito",text:"Venta anulada exitosamente.",icon:"success"}),this.getIndex(),this.layoutService.reloadComponent()):w().fire({title:"Error",text:"Error al anular la venta.",icon:"error"})},o=>{console.log("Error: ",o)}))})}onPage(e){this.pageCount=e.rows,this.getIndex("",this.pageCount)}searchInput(){let e=this.formSearch.get("search").value;this.pageActual=1,""==e&&this.getIndex(e)}buscarPorTecla(e){"Enter"==e.code&&this.search()}search(){let e=this.formSearch.get("search").value;this.getIndex(e)}onPageChange(e){this.first=e.first,this.rows=e.rows}leftTable(){this.pageActual=this.pageActual-1,this.getIndex("",this.pageCount,this.pageActual),this.validatePage()}rightTable(){this.pageActual=this.pageActual+1,this.getIndex("",this.pageCount,this.pageActual),this.validatePage()}validatePage(){1==this.pageActual&&(this.disablePageLeft=!1),this.pageActual>1&&(this.disablePageLeft=!0),this.ultimaPage==this.pageActual&&(this.disablePageRight=!1),this.ultimaPage>this.pageActual&&(this.disablePageRight=!0)}confirmAbrirPdf(e){console.log(e),window.open(this.baseUrl+"/ventasPdf/"+e+"?token="+this.token,"_blank")}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(i.qu),t.Y36(C.t2),t.Y36(x),t.Y36(h.F0),t.Y36(Y.P),t.Y36(K.y))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-sale"]],decls:24,vars:11,consts:[["type","ball-scale-multiple"],[1,"surface-section","px-4","py-5","md:px-6","lg:px-8"],[1,"flex","align-items-start","flex-column","lg:justify-content-between","lg:flex-row"],[1,"font-medium","text-3xl","text-900"],[1,"flex","align-items-center","text-700","flex-wrap"],[1,"mr-5","flex","align-items-center","mt-3"],[1,"mt-3","lg:mt-0"],["pButton","","pRipple","","label","Crear","icon","",1,"p-button-outlined","mr-2",3,"click"],[1,"grid","mt-3"],[1,"col-12"],[1,"card","px-3","py-3"],["responsiveLayout","scroll","selectionMode","multiple","dataKey","usuario",3,"value","tableStyle","loading","rows","globalFilterFields","rowHover","onPage"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","loadingbody"],[2,"text-align","center"],[1,"p-buttonset"],["pButton","","pRipple","","label","","icon","pi pi-arrow-left",3,"disabled","click"],["pButton","","pRipple","",3,"label"],["pButton","","pRipple","","label","","icon","pi pi-arrow-right",3,"disabled","click"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[3,"formGroup"],[1,"p-inputgroup"],["formControlName","search","pInputText","","type","text","placeholder","Buscar...",1,"w-full","sm:w-auto",3,"keyup.enter","input"],["type","button","pButton","","pRipple","",1,"pi","pi-search",3,"click"],[1,"flex","gap-1"],["icon","pi pi-file-pdf","severity","danger",3,"click",4,"ngIf"],["icon","pi pi-trash","severity","danger",3,"click",4,"ngIf"],["disabled","",2,"visibility","hidden"],["icon","pi pi-file-pdf","severity","danger",3,"click"],["icon","pi pi-trash","severity","danger",3,"click"],["colspan","8"]],template:function(a,o){1&a&&(t._UZ(0,"ngx-spinner",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div")(4,"div",3),t._uU(5,"Ventas"),t.qZA(),t.TgZ(6,"div",4),t._UZ(7,"div",5),t.qZA()(),t.TgZ(8,"div",6)(9,"button",7),t.NdJ("click",function(){return o.redirectToCrearVenta()}),t.qZA()()()(),t.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"p-table",11),t.NdJ("onPage",function(c){return o.onPage(c)}),t.YNc(14,z,7,1,"ng-template",12),t.YNc(15,W,15,0,"ng-template",13),t.YNc(16,et,18,8,"ng-template",14),t.YNc(17,ot,3,0,"ng-template",15),t.qZA(),t._UZ(18,"br"),t.TgZ(19,"div",16)(20,"span",17)(21,"button",18),t.NdJ("click",function(){return o.leftTable()}),t.qZA(),t._UZ(22,"button",19),t.TgZ(23,"button",20),t.NdJ("click",function(){return o.rightTable()}),t.qZA()()()()()()),2&a&&(t.xp6(13),t.Q6J("value",o.salesData)("tableStyle",t.DdM(9,it))("loading",o.loadingTable)("rows",8)("globalFilterFields",t.DdM(10,nt))("rowHover",!0),t.xp6(8),t.Q6J("disabled",!o.disablePageLeft),t.xp6(1),t.Q6J("label",o.pageActual),t.xp6(1),t.Q6J("disabled",!o.disablePageRight))},dependencies:[v.O5,A.iA,F.jx,y.Hq,y.zx,i._Y,i.Fj,i.JJ,i.JL,I.H,M.o,i.sg,i.u,C.Ro]})}return n})();var B=s(2506),$=s(4055),V=s(6263),st=s(8725),j=s(7161);function lt(n,d){if(1&n&&(t.TgZ(0,"div",56)(1,"span",57),t._uU(2),t.qZA()()),2&n){const e=d.$implicit;t.xp6(2),t.lnq(" ",e.numero_documento," ",e.nombres," ",e.apellidos,"")}}function rt(n,d){if(1&n){const e=t.EpF();t.TgZ(0,"button",58),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.crearCliente())}),t.qZA()}}function ct(n,d){1&n&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Categor\xeda"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Total"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Acci\xf3n"),t.qZA()())}function pt(n,d){if(1&n){const e=t.EpF();t.TgZ(0,"td")(1,"button",61),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,l=t.oxw();return t.KtG(l.modals(o.nombre))}),t.qZA()()}}function dt(n,d){1&n&&t._UZ(0,"td")}function ut(n,d){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"number"),t.qZA(),t.YNc(6,pt,2,0,"td",59),t.YNc(7,dt,1,0,"ng-template",null,60,t.W1O),t.qZA()),2&n){const e=d.$implicit,a=t.MAs(8);t.xp6(2),t.Oqu(e.nombre),t.xp6(2),t.hij("$",t.lcZ(5,4,e.total),""),t.xp6(2),t.Q6J("ngIf",e.accion)("ngIfElse",a)}}function gt(n,d){1&n&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Nombre"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Precio"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Impuesto"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Cantidad"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Total"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Acciones"),t.qZA()())}function mt(n,d){1&n&&(t.TgZ(0,"span",64),t._uU(1,"*"),t.qZA())}function _t(n,d){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"number"),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"number"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.YNc(12,mt,2,0,"span",62),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"number"),t.qZA(),t.TgZ(16,"td")(17,"p-button",63),t.NdJ("click",function(){const l=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.eliminarProducto(l))}),t.qZA()()()}if(2&n){const e=d.$implicit;t.xp6(2),t.Oqu(t.lcZ(3,6,e.nombre)),t.xp6(3),t.hij("$",t.lcZ(6,8,e.subtotal),""),t.xp6(3),t.hij("$",t.lcZ(9,10,e.impuestos),""),t.xp6(3),t.Oqu(e.cantidad),t.xp6(1),t.Q6J("ngIf",e.stockModificado),t.xp6(2),t.hij("$",t.lcZ(15,12,e.total),"")}}function ft(n,d){1&n&&(t.TgZ(0,"tr")(1,"td",68)(2,"span"),t._uU(3,"*"),t.qZA(),t._uU(4," El stock de estos productos ha sido actualizado. "),t.qZA()())}function ht(n,d){if(1&n&&(t.TgZ(0,"tr")(1,"td",65),t._uU(2,"Totales:"),t.qZA(),t.TgZ(3,"td",65),t._uU(4),t.ALo(5,"number"),t.qZA(),t.TgZ(6,"td",66),t._uU(7),t.ALo(8,"number"),t.qZA(),t.TgZ(9,"td",66),t._uU(10),t.ALo(11,"number"),t.qZA()(),t.YNc(12,ft,5,0,"tr",67)),2&n){const e=t.oxw();t.xp6(4),t.hij(" $",t.lcZ(5,4,e.totalProductos-e.totalProductosImpuestos),""),t.xp6(3),t.hij(" $",t.lcZ(8,6,e.totalProductosImpuestos),""),t.xp6(3),t.hij(" $",t.lcZ(11,8,e.totalProductos),""),t.xp6(2),t.Q6J("ngIf",e.stockProductoModificado&&e.productosAgregados.length>0)}}function vt(n,d){1&n&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Nombre"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Precio"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Impuesto"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Cantidad"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Total"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Acciones"),t.qZA()())}function xt(n,d){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"number"),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"number"),t.qZA(),t.TgZ(14,"td")(15,"p-button",63),t.NdJ("click",function(){const l=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.eliminarReceta(l))}),t.qZA()()()}if(2&n){const e=d.$implicit;t.xp6(2),t.Oqu(t.lcZ(3,5,e.nombre)),t.xp6(3),t.hij("$",t.lcZ(6,7,e.subtotal),""),t.xp6(3),t.hij("$",e.impuestos,""),t.xp6(2),t.Oqu(e.cantidad),t.xp6(2),t.hij("$",t.lcZ(13,9,e.total),"")}}function Tt(n,d){if(1&n&&(t.TgZ(0,"tr")(1,"td",65),t._uU(2,"Totales:"),t.qZA(),t.TgZ(3,"td",65),t._uU(4),t.ALo(5,"number"),t.qZA(),t.TgZ(6,"td",66),t._uU(7),t.ALo(8,"number"),t.qZA(),t.TgZ(9,"td",65),t._uU(10),t.ALo(11,"number"),t.qZA(),t.TgZ(12,"td"),t._uU(13,"\xa0"),t.qZA()()),2&n){const e=t.oxw();t.xp6(4),t.hij(" $",t.lcZ(5,3,e.totalRecetas-e.totalRecetasImpuestos),""),t.xp6(3),t.hij(" $",t.lcZ(8,5,e.totalRecetasImpuestos),""),t.xp6(3),t.hij(" $",t.lcZ(11,7,e.totalRecetas),"")}}function Ct(n,d){if(1&n&&(t.TgZ(0,"div",69)(1,"span",57),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"div"),t._UZ(5,"p-tag",70),t.ALo(6,"number"),t._UZ(7,"p-tag",70),t.qZA()()),2&n){const e=d.$implicit;t.xp6(2),t.Oqu(t.lcZ(3,3,e.nombre)),t.xp6(3),t.MGl("value","$",t.lcZ(6,5,e.precioTotal),""),t.xp6(2),t.MGl("value","Stock: ",1==e.sin_limite_cantidad?e.stockActual:"Ilimitado","")}}function Zt(n,d){1&n&&(t.TgZ(0,"span",72),t._uU(1,"Producto es requerido."),t.qZA())}function bt(n,d){if(1&n&&(t.TgZ(0,"div",71),t.YNc(1,Zt,2,0,"span",34),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.formProducto.get("producto_id").hasError("required"))}}function At(n,d){1&n&&(t.TgZ(0,"div",72),t._uU(1,"Campo requerido"),t.qZA())}function yt(n,d){1&n&&(t.TgZ(0,"div",73),t._uU(1,"La cantidad excede el stock disponible."),t.qZA())}function It(n,d){if(1&n&&(t.TgZ(0,"div",69)(1,"span",57),t._uU(2),t.qZA(),t._UZ(3,"p-tag",70),t.ALo(4,"number"),t.qZA()),2&n){const e=d.$implicit;t.xp6(2),t.Oqu(e.nombre),t.xp6(1),t.MGl("value","$",t.lcZ(4,2,e.precioTotal),"")}}function Pt(n,d){1&n&&(t.TgZ(0,"span",72),t._uU(1,"Receta es requerida."),t.qZA())}function Mt(n,d){if(1&n&&(t.TgZ(0,"div",71),t.YNc(1,Pt,2,0,"span",34),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.formReceta.get("receta_id").hasError("required"))}}function St(n,d){1&n&&(t.TgZ(0,"div",72),t._uU(1,"Campo requerido"),t.qZA())}function Ut(n,d){1&n&&(t.TgZ(0,"div",74),t._uU(1,"La cantidad excede el stock disponible."),t.qZA())}function Dt(n,d){if(1&n&&(t.TgZ(0,"div",56)(1,"span",57),t._uU(2),t.qZA()()),2&n){const e=d.$implicit;t.xp6(2),t.Oqu(e.nombre)}}function qt(n,d){1&n&&(t.TgZ(0,"div",72),t._uU(1,"Campo requerido"),t.qZA())}function wt(n,d){if(1&n){const e=t.EpF();t.TgZ(0,"div",81)(1,"p-button",82),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().index,l=t.oxw();return t.KtG(l.eliminarMetodoPago(o))}),t.qZA()()}}function Et(n,d){if(1&n){const e=t.EpF();t.TgZ(0,"div",75)(1,"div",76)(2,"label"),t._uU(3,"M\xe9todo de Pago"),t.qZA(),t._UZ(4,"input",77),t.qZA(),t.TgZ(5,"div",78)(6,"label"),t._uU(7,"Valor"),t.qZA(),t.TgZ(8,"input",79),t.NdJ("blur",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.calcularTotalMetodosPago())}),t.qZA(),t.YNc(9,qt,2,0,"div",34),t.qZA(),t.YNc(10,wt,2,0,"div",80),t.qZA()}if(2&n){const e=d.$implicit,a=d.index,o=t.oxw();t.Q6J("formGroupName",a),t.xp6(9),t.Q6J("ngIf",e.get("valor").hasError("required")),t.xp6(1),t.Q6J("ngIf",o.metodosPago.controls.length>1)}}function Jt(n,d){1&n&&(t.TgZ(0,"div",83),t._UZ(1,"p-message",84),t.qZA())}function kt(n,d){if(1&n){const e=t.EpF();t.TgZ(0,"app-clientes",85,86),t.NdJ("clienteCreado",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.handleClienteCreado(o))}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("vieneDeHabitaciones",e.creandoCliente)}}const Nt=function(){return{"min-width":"20rem"}},H=function(){return{"min-width":"35rem"}},G=function(){return{width:"60vw"}},Rt=function(){return{width:"50vw"}};let Ot=(()=>{class n{constructor(e,a,o,l,c){this.FB=e,this.spinner=a,this.saleService=o,this.router=l,this.layoutService=c,this.loadingTable=!1,this.clienteData=[],this.validacionStock=!1,this.productosAgregados=[],this.recetasAgregadas=[],this.totalProductos=0,this.totalProductosImpuestos=0,this.totalRecetas=0,this.totalRecetasImpuestos=0,this.totalImpuestos=0,this.subtotal=0,this.total=0,this.totales=[{nombre:"Productos/Servicios",total:this.totalProductos-this.totalProductosImpuestos,accion:!0},{nombre:"Recetas",total:this.totalRecetas-this.totalRecetasImpuestos,accion:!0},{nombre:"Impuestos",total:this.totalImpuestos},{nombre:"Subtotal",total:this.subtotal},{nombre:"Total",total:this.total}],this.recetasData=[],this.displayModalRecipes=!1,this.productsData=[],this.displayModalProducts=!1,this.dataMetodosPago=[],this.displayModalMetodosPago=!1,this.montoSinRedondear=0,this.excedente=0,this.activarRedondear=!1,this.stockProductoModificado=!1,this.creandoCliente=!1,this.totalMetodosPago=0,this.buildForm()}ngOnInit(){this.spinner.hide(),this.buildForm(),this.loadData()}buildForm(){this.formCliente=this.FB.group({cliente_id:[null,[]]}),this.formProducto=this.FB.group({producto_id:[null,i.kI.required],cantidad:[1,[i.kI.required,i.kI.min(1)]]}),this.formReceta=this.FB.group({receta_id:[null,i.kI.required],cantidad:[1,[i.kI.required,i.kI.min(1)]]}),this.formMetodoPago=this.FB.group({metodos_pago:this.FB.array([]),cambio:[0,i.kI.required]}),this.agregarMetodoPago({value:{id:1,nombre:"Efectivo"}})}crearCliente(){this.creandoCliente=!0}handleClienteCreado(e){this.creandoCliente=!1,e&&this.loadData()}get metodosPago(){return this.formMetodoPago.get("metodos_pago")}agregarMetodoPago(e){if(this.metodosPago.controls.find(o=>o.get("metodo_pago_id").value===e.value.id))return;const a=this.FB.group({metodo_pago_id:[e.value.id,i.kI.required],valor:[null,[i.kI.required,i.kI.min(1)]],nombre:[e.value.nombre]});a.get("nombre").disable(),this.metodosPago.push(a)}eliminarMetodoPago(e){this.metodosPago.removeAt(e)}calcularTotalMetodosPago(){this.totalMetodosPago=0,this.metodosPago.controls.forEach(e=>{let a=e.get("valor").value;isNaN(a)&&(a=0),this.totalMetodosPago+=a})}submitFactura(){this.formMetodoPago.valid&&(this.displayModalMetodosPago=!1,this.calcularTotales())}loadData(){this.spinner.show(),this.saleService.getDatosVentasCrear().subscribe(e=>{function a(o){const l=parseFloat(o.precio);let c=0;return o.impuestos.forEach(f=>{const m=l*(Number(f.impuesto.porcentaje)/100);c+=m}),l+c}this.spinner.hide(),this.productsData=e.productos.map(o=>({...o,precioTotal:a(o),tipo_servicio_id:1===o.tipo_producto?1:2,stockModificado:!1})),this.recetasData=e.recetas.map(o=>({...o,precioTotal:a(o),tipo_servicio_id:4})),this.clienteData=e.clientes,this.dataMetodosPago=e.metodosPago},e=>{console.error(e)})}agregarProductos(){const e=this.formProducto.get("producto_id").value,a=this.formProducto.get("cantidad").value,o=parseFloat(e.precio),l=o*e.impuestos_total/100,c=(o+l)*a,f={...e,cantidad:Number(a),subtotal:o,total:c,stockModificado:!1,impuestos:l};if(this.productosAgregados.some(m=>m.id===f.id)){const m=this.productosAgregados.findIndex(S=>S.id===f.id);this.productosAgregados[m].cantidad+=f.cantidad,this.productosAgregados[m].total+=f.total}else this.productosAgregados.push(f);this.productsData.find(m=>m.id===f.id).stockActual-=a,this.stockProductoModificado=this.productosAgregados.some(m=>1==m.stockModificado),this.calcularTotales(),this.displayModalProducts=!1,this.formProducto.reset()}validarStock(e){if("producto"==e&&this.formProducto.valid){const a=this.formProducto.get("producto_id").value,o=this.formProducto.get("cantidad").value;this.validacionStock=a.stockActual<o&&1==a.sin_limite_cantidad}}eliminarProducto(e){const a=this.productosAgregados.indexOf(e);a>-1&&(this.productosAgregados.splice(a,1),this.productsData.find(o=>o.id===e.id).stockActual+=e.cantidad),this.stockProductoModificado=this.productosAgregados.some(o=>1==o.stockModificado),this.calcularTotales()}agregarRecetas(){const e=this.formReceta.get("receta_id").value,a=this.formReceta.get("cantidad").value,o=parseFloat(e.precio),l=o*e.impuestos_total/100,c=(o+l)*a,f={...e,cantidad:a,subtotal:o,total:c,impuestos:l};if(this.recetasAgregadas.some(m=>m.id===f.id)){const m=this.recetasAgregadas.findIndex(S=>S.id===f.id);this.recetasAgregadas[m].total+=f.total,this.recetasAgregadas[m].cantidad+=f.cantidad}else this.recetasAgregadas.push(f);this.calcularTotales(),this.displayModalRecipes=!1,this.formReceta.reset()}eliminarReceta(e){const a=this.recetasAgregadas.findIndex(o=>o.id===e.id);-1!==a?this.recetasAgregadas.splice(a,1):console.error(`No se encontr\xf3 la receta con id ${e.id} en recetasAgregadas`),this.calcularTotales()}calcularTotales(){this.totalProductos=this.productosAgregados.reduce((a,o)=>a+o.total,0),this.totalProductosImpuestos=this.productosAgregados.reduce((a,o)=>a+o.impuestos*o.cantidad,0),this.totalRecetas=this.recetasAgregadas.reduce((a,o)=>a+o.total,0),this.totalRecetasImpuestos=this.recetasAgregadas.reduce((a,o)=>a+o.impuestos*o.cantidad,0),this.totalImpuestos=this.totalProductosImpuestos+this.totalRecetasImpuestos,this.subtotal=this.totalProductos-this.totalProductosImpuestos+(this.totalRecetas-this.totalRecetasImpuestos),this.total=this.subtotal+this.totalImpuestos,this.totales=[{nombre:"Productos/Servicios",total:this.totalProductos-this.totalProductosImpuestos,accion:!0},{nombre:"Recetas",total:this.totalRecetas-this.totalRecetasImpuestos,accion:!0},{nombre:"Impuestos",total:this.totalImpuestos},{nombre:"Subtotal",total:this.subtotal},{nombre:"Total",total:this.total}],this.activarRedondear?(this.montoSinRedondear=this.total,this.total=function e(a){let o=a%50,l=0;return o>0&&(l=50-o),a+l}(this.total),this.excedente=this.total-this.montoSinRedondear,this.totales[4]={nombre:"Total sin redondear",total:this.montoSinRedondear},this.totales.push({nombre:"Excedente",total:this.excedente}),this.totales.push({nombre:"Total",total:this.total})):(this.excedente=0,this.totales=this.totales.filter(a=>"Total sin redondear"!==a.nombre||"Excedente"!==a.nombre))}modals(e){switch(e){case"Productos/Servicios":this.formProducto.reset(),this.displayModalProducts=!0,this.validacionStock=!1;break;case"Recetas":this.formReceta.reset(),this.displayModalRecipes=!0,this.validacionStock=!1;break;case"Pagar":this.displayModalMetodosPago=!0}}crearVenta(){this.spinner.show();const e=[...this.productosAgregados,...this.recetasAgregadas];if(!Array.isArray(e))return this.spinner.hide(),void w().fire({title:"Error",text:"Hubo un error al preparar los detalles de la venta.",icon:"error"});let a={cliente_id:this.formCliente.get("cliente_id").value?parseInt(this.formCliente.get("cliente_id").value[0].id):null,total:this.total,subtotal:this.subtotal,excedente:this.excedente,total_impuestos:this.totalImpuestos,estado_id:1};const o=new FormData;for(const c in a)a.hasOwnProperty(c)&&o.append(c,a[c]);e.forEach((c,f)=>{c.consumo_id=c.id,c.valor_consumo=c.subtotal,c.tipo_consumo=c.tipo_servicio_id,c.valor_impuesto=c.impuestos||0;for(const m in c)c.hasOwnProperty(m)&&o.append(`detalles_venta[${f}][${m}]`,c[m])}),this.formMetodoPago.get("metodos_pago").value.forEach((c,f)=>{for(const m in c)c.hasOwnProperty(m)&&o.append(`metodos_pago[${f}][${m}]`,c[m])}),this.saleService.createVentas(o).subscribe(c=>{this.spinner.hide(),c.venta?(this.formCliente.reset(),this.productosAgregados=[],this.recetasAgregadas=[],this.calcularTotales(),w().fire({title:"Exito",text:"Venta creada exitosamente.",icon:"success"}).then(()=>{this.router.navigate(["/dashboard/dashboardSell"])}),this.layoutService.reloadComponent()):"warning"===c.code?w().fire({title:"Advertencia",text:c.msm,icon:"warning"}):w().fire({title:"Error",text:"Error al crear la venta.",icon:"error"})},c=>{if(400===c.status&&c.error.error.startsWith("Stock insuficiente")){this.spinner.hide(),w().fire({title:"Advertencia",text:c.error.error,icon:"warning"});const f=c.error.productos_sin_stock;this.stockProductoModificado=!0,f.forEach(m=>{const S=this.productsData.find(Q=>Q.id===m.id),R=this.productosAgregados.find(Q=>Q.consumo_id===m.id);S&&(S.stockActual=0),R&&(R.cantidad=m.stockActual,R.total=S.precioTotal*R.cantidad,R.stockModificado=!0),this.calcularTotales()})}else this.spinner.hide(),console.error("Error:",c)})}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(i.qu),t.Y36(C.t2),t.Y36(x),t.Y36(h.F0),t.Y36(Y.P))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-sale-detail"]],decls:119,vars:71,consts:[["type","ball-scale-multiple"],[1,"surface-section","px-4","py-5","md:px-6","lg:px-8"],[1,"flex","align-items-center","flex-column","lg:flex-row"],["pButton","","pRipple","","label","","icon","pi pi-arrow-left",1,"p-button-outlined","mr-4",3,"routerLink"],[1,"font-medium","text-3xl","text-900"],[1,"card","mt-3",2,"margin-bottom","14px"],[1,"p-fluid"],[1,"col-12",2,"display","flex","justify-content","space-between","align-items","center","width","100%"],[1,"col-6",2,"display","flex","flex-direction","column",3,"formGroup"],["for","cliente",2,"font-size","large","margin-bottom","15px"],["formControlName","cliente_id","selectionLimit","1","optionLabel","nombres","placeholder","Buscar hu\xe9sped","display","chip","emptyMessage","Cargando hu\xe9spedes...",1,"multiselect-custom",3,"options"],["pTemplate","item"],["pTemplate","footer"],[1,"col-6",2,"display","flex","flex-direction","column","align-items","flex-end","justify-content","flex-end"],[2,"display","flex","flex-direction","row","gap","30px"],[1,"font-medium","text-3xl","text-500"],[1,"flex-grow-1","text-right",2,"margin-top","20px"],["pButton","","pRipple","","label","Pagar","icon","",1,"p-button","mr-2",3,"disabled","click"],[1,"grid"],[1,"col-12"],[1,"card",2,"padding","30px","margin-top","0"],[1,"col-12","lg:col-5"],["responsiveLayout","scroll",3,"value","tableStyle","rows"],["pTemplate","header"],["pTemplate","body"],[1,"col-7"],[2,"padding","10px"],["header","Agregar Producto/Servicio",3,"visible","modal","draggable","resizable","visibleChange"],[3,"formGroup","ngSubmit"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-6","md:col-6"],["formControlName","producto_id","placeholder","Buscar Producto/Servicio","optionLabel","nombre","emptyMessage","Cargando productos...",1,"dropdown-custom",3,"options","onChange"],["style","margin-top: 14px;",4,"ngIf"],["type","number","min","1","formControlName","cantidad","placeholder","Cantidad","pInputText","",1,"w-full","mb-3","border-round-3xl",3,"input"],["style","color: red;",4,"ngIf"],["style","color: orangered;",4,"ngIf"],[1,"field","col-12","md:col-12"],["pButton","","pRipple","","label","Agregar Producto","icon","pi pi-fw","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl",3,"disabled"],["header","Agregar Receta",3,"visible","modal","draggable","resizable","visibleChange"],["formControlName","receta_id","placeholder","Buscar Receta","optionLabel","nombre","emptyMessage","Cargando recetas...",1,"dropdown-custom",3,"options"],["type","number","min","1","formControlName","cantidad","placeholder","Cantidad","pInputText","",1,"w-full","mb-3","border-round-3xl"],["class","field col-12","style","color: red;",4,"ngIf"],["pButton","","pRipple","","label","Agregar Receta","icon","pi pi-fw","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl",3,"disabled"],["header","Facturar",3,"visible","modal","draggable","resizable","visibleChange"],["formArrayName","metodos_pago",1,"p-fluid","p-formgrid","grid"],[1,"field","col-12"],[1,"font-medium","text-2xl","text-500","text-center"],["optionLabel","nombre","emptyMessage","Cargando m\xe9todos de pago...","placeholder","Buscar M\xe9todo de Pago",1,"dropdown-custom",3,"options","autoDisplayFirst","onChange"],["class","grid",3,"formGroupName",4,"ngFor","ngForOf"],["class","col-6","style","padding: 0; margin-top: 15px;",4,"ngIf"],[1,"flex",2,"justify-content","space-between"],[1,"flex","align-items-center",2,"gap","10px"],[1,"flex","flex-column","justify-end",2,"justify-content","end","align-items","end"],[1,"font-medium","text-2xl","text-500","text-right"],["pButton","","pRipple","","icon","",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl",3,"label","disabled","click"],[3,"vieneDeHabitaciones","clienteCreado",4,"ngIf"],[1,"flex","align-items-center"],[1,"ml-2"],["pButton","","pRipple","","label","Registrar nuevo hu\xe9sped","type","button","icon","pi pi-plus",1,"w-full","bg-blue","boder-blue","mb-5","border-round-3xl",3,"click"],[4,"ngIf","ngIfElse"],["emptyTd",""],["pButton","","pRipple","","icon","pi pi-plus",1,"p-button",3,"click"],["style","color: orangered; font-size: xx-large;",4,"ngIf"],["icon","pi pi-trash","severity","danger",3,"click"],[2,"color","orangered","font-size","xx-large"],["colspan","1"],["colspan","2"],[4,"ngIf"],["colspan","6",2,"color","orangered"],[1,"flex","align-items-center",2,"display","flex","justify-content","space-between"],[1,"padding",3,"value"],[2,"margin-top","14px"],[2,"color","red"],[2,"color","orangered"],[1,"field","col-12",2,"color","red"],[1,"grid",3,"formGroupName"],[1,"col-6","md:col-5"],["type","text","min","1","formControlName","nombre","placeholder","Metodo de pago","pInputText","","disabled","",1,"w-full","mb-3","border-round-3xl"],[1,"col-4","md:col-5"],["type","number","min","1","formControlName","valor","placeholder","Valor","pInputText","",1,"w-full","mb-3","border-round-3xl",3,"blur"],["class","col-2 mt-4 eliminar-metodo-pago",4,"ngIf"],[1,"col-2","mt-4","eliminar-metodo-pago"],["pRipple","","type","button","icon","pi pi-trash","severity","danger",3,"click"],[1,"col-6",2,"padding","0","margin-top","15px"],["severity","error","text","El total ingresado no es igual al total a pagar"],[3,"vieneDeHabitaciones","clienteCreado"],["clientes",""]],template:function(a,o){1&a&&(t._UZ(0,"ngx-spinner",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div"),t._UZ(4,"button",3),t.qZA(),t.TgZ(5,"div")(6,"div",4),t._uU(7,"Crear venta"),t.qZA()()()(),t.TgZ(8,"div",5)(9,"p-toolbar",6)(10,"div",7)(11,"div",8)(12,"label",9),t._uU(13,"Hu\xe9sped"),t.qZA(),t.TgZ(14,"p-multiSelect",10),t.YNc(15,lt,3,3,"ng-template",11),t.YNc(16,rt,1,0,"ng-template",12),t.qZA()(),t.TgZ(17,"div",13)(18,"div",14)(19,"div",15),t._uU(20),t.ALo(21,"number"),t.qZA()(),t.TgZ(22,"div",16)(23,"button",17),t.NdJ("click",function(){return o.modals("Pagar")}),t.qZA()()()()()(),t.TgZ(24,"div",18)(25,"div",19)(26,"div",20)(27,"h3"),t._uU(28,"Detalles de venta"),t.qZA(),t.TgZ(29,"div",18)(30,"div",21)(31,"p-table",22),t.YNc(32,ct,7,0,"ng-template",23),t.YNc(33,ut,9,6,"ng-template",24),t.qZA()(),t.TgZ(34,"div",25)(35,"div",26)(36,"h5"),t._uU(37,"Productos/Servicios"),t.qZA(),t.TgZ(38,"p-table",22),t.YNc(39,gt,13,0,"ng-template",23),t.YNc(40,_t,18,14,"ng-template",24),t.YNc(41,ht,13,10,"ng-template",12),t.qZA()(),t._UZ(42,"hr"),t.TgZ(43,"div",26)(44,"h5"),t._uU(45,"Recetas"),t.qZA(),t.TgZ(46,"p-table",22),t.YNc(47,vt,13,0,"ng-template",23),t.YNc(48,xt,16,11,"ng-template",24),t.YNc(49,Tt,14,9,"ng-template",12),t.qZA()()()()()()(),t.TgZ(50,"p-dialog",27),t.NdJ("visibleChange",function(c){return o.displayModalProducts=c}),t.TgZ(51,"div",19)(52,"form",28),t.NdJ("ngSubmit",function(){return o.agregarProductos()}),t.TgZ(53,"div",29)(54,"div",30)(55,"label"),t._uU(56,"Producto/Servicio"),t.qZA(),t.TgZ(57,"p-dropdown",31),t.NdJ("onChange",function(){return o.validarStock("producto")}),t.YNc(58,Ct,8,7,"ng-template",11),t.qZA(),t.YNc(59,bt,2,1,"div",32),t.qZA(),t.TgZ(60,"div",30)(61,"label"),t._uU(62,"Cantidad"),t.qZA(),t.TgZ(63,"input",33),t.NdJ("input",function(){return o.validarStock("producto")}),t.qZA(),t.YNc(64,At,2,0,"div",34),t.YNc(65,yt,2,0,"div",35),t.qZA(),t.TgZ(66,"div",36),t._UZ(67,"button",37),t.qZA()(),t._UZ(68,"br"),t.qZA()()(),t.TgZ(69,"p-dialog",38),t.NdJ("visibleChange",function(c){return o.displayModalRecipes=c}),t.TgZ(70,"div",19)(71,"form",28),t.NdJ("ngSubmit",function(){return o.agregarRecetas()}),t.TgZ(72,"div",29)(73,"div",30)(74,"label"),t._uU(75,"Receta"),t.qZA(),t.TgZ(76,"p-dropdown",39),t.YNc(77,It,5,4,"ng-template",11),t.qZA(),t.YNc(78,Mt,2,1,"div",32),t.qZA(),t.TgZ(79,"div",30)(80,"label"),t._uU(81,"Cantidad"),t.qZA(),t._UZ(82,"input",40),t.YNc(83,St,2,0,"div",34),t.YNc(84,Ut,2,0,"div",41),t.qZA(),t.TgZ(85,"div",36),t._UZ(86,"button",42),t.qZA()(),t._UZ(87,"br"),t.qZA()()(),t.TgZ(88,"p-dialog",43),t.NdJ("visibleChange",function(c){return o.displayModalMetodosPago=c}),t.TgZ(89,"div",19)(90,"form",28),t.NdJ("ngSubmit",function(){return o.submitFactura()}),t.TgZ(91,"div",44)(92,"div",45)(93,"div",46),t._uU(94),t.ALo(95,"number"),t.qZA()(),t.TgZ(96,"div",45)(97,"label"),t._uU(98,"Agregar m\xe9todo de pago"),t.qZA(),t.TgZ(99,"p-dropdown",47),t.NdJ("onChange",function(c){return o.agregarMetodoPago(c)}),t.YNc(100,Dt,3,1,"ng-template",11),t.qZA()(),t.TgZ(101,"div",45),t.YNc(102,Et,11,3,"div",48),t.YNc(103,Jt,2,0,"div",49),t._UZ(104,"hr"),t.TgZ(105,"div",50)(106,"div",51),t._UZ(107,"span"),t.qZA(),t.TgZ(108,"div",52)(109,"div",53),t._uU(110),t.ALo(111,"number"),t.qZA(),t.TgZ(112,"div",53),t._uU(113),t.ALo(114,"number"),t.ALo(115,"number"),t.qZA()()()()(),t.TgZ(116,"div",45)(117,"button",54),t.NdJ("click",function(){return o.crearVenta()}),t.qZA()()()()(),t.YNc(118,kt,2,1,"app-clientes",55)),2&a&&(t.xp6(4),t.Q6J("routerLink","/dashboard/dashboardSell"),t.xp6(7),t.Q6J("formGroup",o.formCliente),t.xp6(3),t.Q6J("options",o.clienteData),t.xp6(6),t.hij("Total: $",t.lcZ(21,55,o.total),""),t.xp6(3),t.Q6J("disabled",o.total<1),t.xp6(8),t.Q6J("value",o.totales)("tableStyle",t.DdM(65,Nt))("rows",8),t.xp6(7),t.Q6J("value",o.productosAgregados)("tableStyle",t.DdM(66,H))("rows",5),t.xp6(8),t.Q6J("value",o.recetasAgregadas)("tableStyle",t.DdM(67,H))("rows",5),t.xp6(4),t.Akn(t.DdM(68,G)),t.Q6J("visible",o.displayModalProducts)("modal",!0)("draggable",!1)("resizable",!1),t.xp6(2),t.Q6J("formGroup",o.formProducto),t.xp6(5),t.Q6J("options",o.productsData),t.xp6(2),t.Q6J("ngIf",o.formProducto.get("producto_id").errors&&(o.formProducto.get("producto_id").dirty||o.formProducto.get("producto_id").touched)),t.xp6(5),t.Q6J("ngIf",o.formProducto.get("cantidad").hasError("required")),t.xp6(1),t.Q6J("ngIf",o.validacionStock),t.xp6(2),t.Q6J("disabled",o.formProducto.invalid||o.validacionStock),t.xp6(2),t.Akn(t.DdM(69,G)),t.Q6J("visible",o.displayModalRecipes)("modal",!0)("draggable",!1)("resizable",!1),t.xp6(2),t.Q6J("formGroup",o.formReceta),t.xp6(5),t.Q6J("options",o.recetasData),t.xp6(2),t.Q6J("ngIf",o.formReceta.get("receta_id").errors&&(o.formReceta.get("receta_id").dirty||o.formReceta.get("receta_id").touched)),t.xp6(5),t.Q6J("ngIf",o.formReceta.get("cantidad").hasError("required")),t.xp6(1),t.Q6J("ngIf",o.validacionStock),t.xp6(2),t.Q6J("disabled",o.formReceta.invalid),t.xp6(2),t.Akn(t.DdM(70,Rt)),t.Q6J("visible",o.displayModalMetodosPago)("modal",!0)("draggable",!1)("resizable",!1),t.xp6(2),t.Q6J("formGroup",o.formMetodoPago),t.xp6(4),t.hij("Total a pagar: $",t.lcZ(95,57,o.total),""),t.xp6(5),t.Q6J("options",o.dataMetodosPago)("autoDisplayFirst",!1),t.xp6(3),t.Q6J("ngForOf",o.metodosPago.controls),t.xp6(1),t.Q6J("ngIf",o.totalMetodosPago!=o.total),t.xp6(7),t.hij("Total ingresado: $",t.lcZ(111,59,o.totalMetodosPago),""),t.xp6(3),t.hij("Pendiente: $",o.total-o.totalMetodosPago>0?t.lcZ(114,61,o.total-o.totalMetodosPago):t.lcZ(115,63,0),""),t.xp6(4),t.Q6J("label","Pagar")("disabled",o.totalMetodosPago!=o.total||0===o.total||o.formMetodoPago.invalid),t.xp6(1),t.Q6J("ngIf",o.creandoCliente))},dependencies:[v.sg,v.O5,h.rH,A.iA,F.jx,y.Hq,y.zx,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.qQ,I.H,q.o,M.o,g.Lt,Z.V,i.sg,i.u,i.x0,i.CE,C.Ro,$.NU,V.V,st.R,j.q,v.JJ,v.rS],styles:['@charset "UTF-8";.flex[_ngcontent-%COMP%]{display:flex;align-items:center}.flex-grow-1[_ngcontent-%COMP%]{flex-grow:1}.text-right[_ngcontent-%COMP%]{text-align:right}.mr-2[_ngcontent-%COMP%]{margin-right:2rem}.multiselect-custom[_ngcontent-%COMP%]{width:100%!important}.padding[_ngcontent-%COMP%]{padding:1%}']})}return n})(),Qt=(()=>{class n{static#t=this.\u0275fac=function(a){return new(a||n)};static#e=this.\u0275mod=t.oAB({type:n});static#o=this.\u0275inj=t.cJS({imports:[h.Bz.forChild([{path:"",component:at,canActivate:[B.a],data:{permissions:["dashboard.venta"]}},{path:"sale-detail",component:Ot,canActivate:[B.a],data:{permissions:["dashboard.venta"]}}]),h.Bz]})}return n})();var Lt=s(2169),Yt=s(5617);let Ft=(()=>{class n{static#t=this.\u0275fac=function(a){return new(a||n)};static#e=this.\u0275mod=t.oAB({type:n});static#o=this.\u0275inj=t.cJS({providers:[{provide:b.TP,useClass:N.n,multi:!0},x],imports:[v.ez,Qt,A.U$,D.O,i.u5,y.hJ,I.T,E.EV,q.V,J.Xt,M.j,k.A,g.kW,P.cc,T.L$,Z.S,u.ii.forRoot(),i.UX,C.ef,p.U,_.dp,$.q4,Lt.o,V.W,Yt.ClientesModule,j.O]})}return n})()},2169:(O,U,s)=>{s.d(U,{o:()=>C});var v=s(6814),i=s(4946),A=s(5219),D=s(8468);let C=(()=>{class p{static \u0275fac=function(t){return new(t||p)};static \u0275mod=i.oAB({type:p});static \u0275inj=i.cJS({imports:[v.ez,D.x,A.m8,A.m8]})}return p})()},7161:(O,U,s)=>{s.d(U,{O:()=>N,q:()=>b});var v=s(6814),i=s(4946),A=s(2591),D=s(2736),y=s(3823),I=s(8468);function E(u,C){1&u&&i._UZ(0,"CheckIcon",4),2&u&&i.Q6J("styleClass","p-inline-message-icon")}function q(u,C){1&u&&i._UZ(0,"InfoCircleIcon",4),2&u&&i.Q6J("styleClass","p-inline-message-icon")}function J(u,C){1&u&&i._UZ(0,"TimesCircleIcon",4),2&u&&i.Q6J("styleClass","p-inline-message-icon")}function M(u,C){1&u&&i._UZ(0,"ExclamationTriangleIcon",4),2&u&&i.Q6J("styleClass","p-inline-message-icon")}function k(u,C){if(1&u&&i._UZ(0,"span",6),2&u){const p=i.oxw(2);i.Q6J("innerHTML",p.text,i.oJD)}}function g(u,C){if(1&u&&(i.TgZ(0,"div"),i.YNc(1,k,1,1,"span",5),i.qZA()),2&u){const p=i.oxw();i.xp6(1),i.Q6J("ngIf",!p.escape)}}function P(u,C){if(1&u&&(i.TgZ(0,"span",8),i._uU(1),i.qZA()),2&u){const p=i.oxw(2);i.xp6(1),i.Oqu(p.text)}}function T(u,C){if(1&u&&i.YNc(0,P,2,1,"span",7),2&u){const p=i.oxw();i.Q6J("ngIf",p.escape)}}const Z=function(u,C,p,_,r){return{"p-inline-message-info":u,"p-inline-message-warn":C,"p-inline-message-error":p,"p-inline-message-success":_,"p-inline-message-icon-only":r}};let b=(()=>{class u{severity;text;escape=!0;style;styleClass;get icon(){return this.severity&&this.severity.trim()?this.severity:"info"}static \u0275fac=function(_){return new(_||u)};static \u0275cmp=i.Xpm({type:u,selectors:[["p-message"]],hostAttrs:[1,"p-element"],inputs:{severity:"severity",text:"text",escape:"escape",style:"style",styleClass:"styleClass"},decls:8,vars:16,consts:[["aria-live","polite",1,"p-inline-message","p-component","p-inline-message",3,"ngStyle","ngClass"],[3,"styleClass",4,"ngIf"],[4,"ngIf","ngIfElse"],["escapeOut",""],[3,"styleClass"],["class","p-inline-message-text",3,"innerHTML",4,"ngIf"],[1,"p-inline-message-text",3,"innerHTML"],["class","p-inline-message-text",4,"ngIf"],[1,"p-inline-message-text"]],template:function(_,r){if(1&_&&(i.TgZ(0,"div",0),i.YNc(1,E,1,1,"CheckIcon",1),i.YNc(2,q,1,1,"InfoCircleIcon",1),i.YNc(3,J,1,1,"TimesCircleIcon",1),i.YNc(4,M,1,1,"ExclamationTriangleIcon",1),i.YNc(5,g,2,1,"div",2),i.YNc(6,T,1,1,"ng-template",null,3,i.W1O),i.qZA()),2&_){const t=i.MAs(7);i.Tol(r.styleClass),i.Q6J("ngStyle",r.style)("ngClass",i.qbA(10,Z,"info"===r.severity,"warn"===r.severity,"error"===r.severity,"success"===r.severity,null==r.text)),i.xp6(1),i.Q6J("ngIf","success"===r.icon),i.xp6(1),i.Q6J("ngIf","info"===r.icon),i.xp6(1),i.Q6J("ngIf","error"===r.icon),i.xp6(1),i.Q6J("ngIf","warn"===r.icon),i.xp6(1),i.Q6J("ngIf",!r.escape)("ngIfElse",t)}},dependencies:function(){return[v.mk,v.O5,v.PC,A.n,y.u,I.x,D.L]},styles:[".p-inline-message{display:inline-flex;align-items:center;justify-content:center;vertical-align:top}.p-inline-message-icon-only .p-inline-message-text{visibility:hidden;width:0}.p-fluid .p-inline-message{display:flex}\n"],encapsulation:2,changeDetection:0})}return u})(),N=(()=>{class u{static \u0275fac=function(_){return new(_||u)};static \u0275mod=i.oAB({type:u});static \u0275inj=i.cJS({imports:[v.ez,A.n,y.u,I.x,D.L]})}return u})()},6263:(O,U,s)=>{s.d(U,{V:()=>M,W:()=>k});var v=s(6814),i=s(4946),A=s(5219);function D(g,P){if(1&g&&i._UZ(0,"span",5),2&g){const T=i.oxw(2);i.Q6J("ngClass",T.icon)}}function y(g,P){if(1&g&&(i.ynx(0),i.YNc(1,D,1,1,"span",4),i.BQk()),2&g){const T=i.oxw();i.xp6(1),i.Q6J("ngIf",T.icon)}}function I(g,P){}function E(g,P){1&g&&i.YNc(0,I,0,0,"ng-template")}function q(g,P){if(1&g&&(i.TgZ(0,"span",6),i.YNc(1,E,1,0,null,7),i.qZA()),2&g){const T=i.oxw();i.xp6(1),i.Q6J("ngTemplateOutlet",T.iconTemplate)}}const J=["*"];let M=(()=>{class g{style;styleClass;severity;value;icon;rounded;templates;iconTemplate;ngAfterContentInit(){this.templates?.forEach(T=>{"icon"===T.getType()&&(this.iconTemplate=T.template)})}containerClass(){return{"p-tag p-component":!0,"p-tag-info":"info"===this.severity,"p-tag-success":"success"===this.severity,"p-tag-warning":"warning"===this.severity,"p-tag-danger":"danger"===this.severity,"p-tag-rounded":this.rounded}}static \u0275fac=function(Z){return new(Z||g)};static \u0275cmp=i.Xpm({type:g,selectors:[["p-tag"]],contentQueries:function(Z,b,N){if(1&Z&&i.Suo(N,A.jx,4),2&Z){let u;i.iGM(u=i.CRH())&&(b.templates=u)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",severity:"severity",value:"value",icon:"icon",rounded:"rounded"},ngContentSelectors:J,decls:6,vars:7,consts:[[3,"ngClass","ngStyle"],[4,"ngIf"],["class","p-tag-icon",4,"ngIf"],[1,"p-tag-value"],["class","p-tag-icon",3,"ngClass",4,"ngIf"],[1,"p-tag-icon",3,"ngClass"],[1,"p-tag-icon"],[4,"ngTemplateOutlet"]],template:function(Z,b){1&Z&&(i.F$t(),i.TgZ(0,"span",0),i.Hsn(1),i.YNc(2,y,2,1,"ng-container",1),i.YNc(3,q,2,1,"span",2),i.TgZ(4,"span",3),i._uU(5),i.qZA()()),2&Z&&(i.Tol(b.styleClass),i.Q6J("ngClass",b.containerClass())("ngStyle",b.style),i.xp6(2),i.Q6J("ngIf",!b.iconTemplate),i.xp6(1),i.Q6J("ngIf",b.iconTemplate),i.xp6(2),i.Oqu(b.value))},dependencies:[v.mk,v.O5,v.tP,v.PC],styles:[".p-tag{display:inline-flex;align-items:center;justify-content:center}.p-tag-icon,.p-tag-value,.p-tag-icon.pi{line-height:1.5}.p-tag.p-tag-rounded{border-radius:10rem}\n"],encapsulation:2,changeDetection:0})}return g})(),k=(()=>{class g{static \u0275fac=function(Z){return new(Z||g)};static \u0275mod=i.oAB({type:g});static \u0275inj=i.cJS({imports:[v.ez,A.m8,A.m8]})}return g})()}}]);