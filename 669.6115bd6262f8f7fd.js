"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[669],{7669:(X,g,r)=>{r.r(g),r.d(g,{TypeRoomsModule:()=>V});var f=r(6814),s=r(95),d=r(8027),x=r(6068),c=r(707),T=r(4480),A=r(4104),U=r(6340),E=r(6022),b=r(3714),_=r(6218),v=r(2352),w=r(1865),M=r(354),y=r(7213),u=r(9862),J=r(8712),N=r(5722),h=r(8672),q=r(1712),R=r(4670),F=r(3519),m=r.n(F),e=r(4946),H=r(4444);let C=(()=>{class o{constructor(t){this.httpClient=t,this.baseUrl=H.D.url,this.endpointListar="/tipoHabitacionListar",this.endpointTypeRoomGet="/tipoHabitacionEditar/",this.endpointTypeRoomUpdate="/tipoHabitacionActualizar/",this.endpointTypeRoomCreate="/tipoHabitacionCrear",this.endpointDelete="/tipoHabitacionEliminar/"}getTypeRoom(t){return this.httpClient.get(`${this.baseUrl+this.endpointTypeRoomGet+t}`)}getAll(t,n=""){const i={headers:new u.WM({"Content-Type":"application/json"})};return this.httpClient.post(`${this.baseUrl+this.endpointListar}?per_page=${t}&search=${n}`,i)}createProduct(t){return this.httpClient.post(`${this.baseUrl+this.endpointTypeRoomCreate}`,t)}updateTypeRoom(t){return this.httpClient.post(`${this.baseUrl+this.endpointTypeRoomUpdate}`,t)}deleteTypeRoom(t){return this.httpClient.post(`${this.baseUrl+this.endpointDelete}`,t)}static#e=this.\u0275fac=function(n){return new(n||o)(e.LFG(u.eN))};static#t=this.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var S=r(5219);function I(o,p){if(1&o){const t=e.EpF();e.TgZ(0,"div",28)(1,"h5",29),e._uU(2,"Tipo de Habitaciones"),e.qZA(),e.TgZ(3,"span",30)(4,"form",31)(5,"input",32),e.NdJ("input",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.search(i.dt))}),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(4),e.Q6J("formGroup",t.formSearch)}}function P(o,p){1&o&&(e.TgZ(0,"tr")(1,"th",33),e._UZ(2,"p-tableHeaderCheckbox"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Nombre"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Hotel"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Acciones"),e.qZA()())}function B(o,p){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._UZ(2,"p-tableCheckbox",34),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td",35)(8,"p-button",36),e.NdJ("click",function(){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.editTypeRoom(a.id))}),e.qZA(),e._UZ(9,"p-confirmDialog"),e.TgZ(10,"p-button",37),e.NdJ("click",function(){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.confirmDelete(a.id))}),e.qZA()()()}if(2&o){const t=p.$implicit,n=e.oxw();e.xp6(2),e.Q6J("value",n.typeRoomData),e.xp6(2),e.Oqu(t.nombre),e.xp6(2),e.Oqu(t.hotel.nombre)}}function D(o,p){1&o&&(e.TgZ(0,"tr")(1,"td",38),e._uU(2,"Cargando informacion porfavor espere ..."),e.qZA()())}function Q(o,p){1&o&&(e.TgZ(0,"div",39),e._uU(1,"Campo requerido"),e.qZA())}function Y(o,p){1&o&&(e.TgZ(0,"div",39),e._uU(1,"Campo requerido"),e.qZA())}function $(o,p){1&o&&(e.TgZ(0,"div",39),e._uU(1,"Campo requerido"),e.qZA())}function G(o,p){1&o&&(e.TgZ(0,"div",39),e._uU(1,"Campo requerido"),e.qZA())}const L=function(){return{"min-width":"50rem"}},z=function(){return["nombre","medida","precio","cantidad","inventario","acciones"]},O=function(){return[10,20,30]},Z=function(){return{width:"50vw"}};let j=(()=>{class o{constructor(t,n,i){this.FB=t,this.spinner=n,this.typeRoomService=i,this.loadingTable=!1,this.pageCount=10,this.visibleModalTypeRoom=!0,this.imagen=null,this.visibleModalTypeRoomEditar=!1,this.idEditando=0}ngOnInit(){this.buildForm(),this.getIndex(),this.visibleModalTypeRoom=!1}buildForm(){this.formSearch=this.FB.group({search:["",[]]}),this.formCreateTypeRoom=this.FB.group({nombre:["",[s.kI.required]],hotel_id:["",[s.kI.required]]}),this.formEditTypeRoom=this.FB.group({nombre:["",[s.kI.required]],hotel_id:["",[s.kI.required]]})}openModal(){this.onCreate()}onCreate(){this.formCreateTypeRoom.reset(),this.typeRoomService.getTypeRoom(0).subscribe(t=>{this.hotel=t.hotel,this.visibleModalTypeRoom=!0},t=>{console.log("Error: ",t)})}onRemove(t){this.imagen=null}onSelect(t){this.imagen=t.currentFiles[0]}onPage(t){this.pageCount=t.rows,this.getIndex("",this.pageCount)}submitCreate(){this.formCreateTypeRoom.valid?this.newTypeRoom():this.formCreateTypeRoom.markAllAsTouched()}newTypeRoom(){this.visibleModalTypeRoom=!0,this.spinner.show();let t=this.formCreateTypeRoom.value;t.hotel_id=t.hotel_id.id,t.estado=1,this.typeRoomService.createProduct(t).subscribe(n=>{this.spinner.hide(),this.imagen=null,this.visibleModalTypeRoom=!1,"success"==n.code?(m().fire({title:"Exito",text:"Producto creado exitosamente.",icon:"success"}),this.getIndex()):m().fire({title:"Error",text:"Error al crear el producto.",icon:"error"})},n=>{console.log("Error: ",n)})}editTypeRoom(t){this.idEditando=t,this.spinner.show(),this.typeRoomService.getTypeRoom(t).subscribe(n=>{this.spinner.hide(),this.hotel=n.hotel,this.dataEditarInfoTypeRoom=n.typeRoom,this.formEditTypeRoom.get("nombre").setValue(n.tiposHabitaciones.nombre),console.log(),setTimeout(()=>{this.visibleModalTypeRoomEditar=!0},1)},n=>{console.log("Error: ",n)})}updateTypeRoom(){this.spinner.show();let t=this.formEditTypeRoom.value;t.hotel_id=t.hotel_id.id,t.id=this.idEditando,t.estado=1,this.typeRoomService.updateTypeRoom(t).subscribe(n=>{this.spinner.hide(),this.imagen=null,this.visibleModalTypeRoomEditar=!1,"success"==n.code?(m().fire({title:"Exito",text:"Producto creado exitosamente.",icon:"success"}),this.getIndex()):m().fire({title:"Error",text:"Error al crear el producto.",icon:"error"})},n=>{console.log("Error: ",n)})}submitUpdate(){this.formEditTypeRoom.valid&&this.updateTypeRoom()}confirmDelete(t){m().fire({title:"\xbfEstas seguro que deseas eliminar el tipo de habitaci\xf3n?",text:"Ten cuidado esta acci\xf3n no se prodr\xe1 reversar",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, Confirmar",cancelButtonText:"Cancelar"}).then(n=>{n.isConfirmed&&(this.spinner.show(),this.typeRoomService.deleteTypeRoom({id:t}).subscribe(i=>{this.spinner.hide(),"success"==i.code?(m().fire({title:"Exito",text:"tipo de habitaci\xf3n eliminada exitosamente.",icon:"success"}),this.getIndex()):m().fire({title:"Error",text:"Error al eliminar el tipo de habitaci\xf3n.",icon:"error"})},i=>{console.log("Error: ",i)}))})}getIndex(t="",n=this.pageCount){this.spinner.show(),this.loadingTable=!0,this.typeRoomService.getAll(n,t).subscribe(i=>{this.loadingTable=!1,console.log("Response: ",i),this.typeRoomData=i.data,this.countRegisters=i.total,this.spinner.hide()},i=>{console.log("Error: ",i),this.spinner.hide()})}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(s.qu),e.Y36(h.t2),e.Y36(C))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-type-rooms"]],decls:58,vars:37,consts:[["type","ball-scale-multiple"],[1,"surface-section","px-4","py-5","md:px-6","lg:px-8"],[1,"flex","align-items-start","flex-column","lg:justify-content-between","lg:flex-row"],[1,"font-medium","text-3xl","text-900"],[1,"flex","align-items-center","text-700","flex-wrap"],[1,"mr-5","flex","align-items-center","mt-3"],[1,"pi","pi-users","mr-2"],[1,"mt-3","lg:mt-0"],["pButton","","pRipple","","label","Crear","icon","pi pi-star",1,"p-button-outlined","mr-2",3,"click"],[1,"grid","mt-3"],[1,"col-12"],[1,"card","px-3","py-3"],["responsiveLayout","scroll","selectionMode","multiple","dataKey","usuario",3,"value","showPageLinks","first","totalRecords","tableStyle","loading","rows","globalFilterFields","paginator","rowsPerPageOptions","showCurrentPageReport","rowHover","onPage"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","loadingbody"],["header","Nuevo Tipo de Habitaci\xf3n",3,"visible","modal","draggable","resizable","visibleChange"],[3,"formGroup","ngSubmit"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-6"],["type","text","pInputText","","formControlName","nombre",1,"w-full","mb-3","border-round-3xl"],["style","color: red;",4,"ngIf"],["optionLabel","nombre","formControlName","hotel_id",3,"options"],[1,"field","col-12","md:col-12"],["pButton","","pRipple","","label","Crear Tipo de Habitaci\xf3n","icon","pi pi-fw pi-star","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl"],["header","Editar Tipo de Hotel",3,"visible","modal","draggable","resizable","visibleChange"],["pButton","","pRipple","","label","Editar Tipo de Habitaci\xf3n","icon","pi pi-fw pi-star","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[3,"formGroup"],["formControlName","search","pInputText","","type","text","placeholder","Buscar...",1,"w-full","sm:w-auto",3,"input"],[2,"width","3rem"],[3,"value"],[1,"flex","gap-2"],["icon","pi pi-user-edit","severity","info",3,"click"],["icon","pi pi-trash","severity","danger",3,"click"],["colspan","8"],[2,"color","red"]],template:function(n,i){1&n&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div")(4,"div",3),e._uU(5,"Tipos de Habitaci\xf3n"),e.qZA(),e.TgZ(6,"div",4)(7,"div",5),e._UZ(8,"i",6),e.qZA()()(),e.TgZ(9,"div",7)(10,"button",8),e.NdJ("click",function(){return i.openModal()}),e.qZA()()()(),e.TgZ(11,"div",9)(12,"div",10)(13,"div",11)(14,"p-table",12),e.NdJ("onPage",function(l){return i.onPage(l)}),e.YNc(15,I,6,1,"ng-template",13),e.YNc(16,P,9,0,"ng-template",14),e.YNc(17,B,11,3,"ng-template",15),e.YNc(18,D,3,0,"ng-template",16),e.qZA()()()(),e._uU(19,"\n<"),e.TgZ(20,"p-dialog",17),e.NdJ("visibleChange",function(l){return i.visibleModalTypeRoom=l}),e.TgZ(21,"div",10)(22,"h5"),e._uU(23,"Completa el formulario"),e.qZA(),e.TgZ(24,"form",18),e.NdJ("ngSubmit",function(){return i.submitCreate()}),e.TgZ(25,"div",19)(26,"div",20)(27,"label"),e._uU(28,"Nombre"),e.qZA(),e._UZ(29,"input",21),e.YNc(30,Q,2,0,"div",22),e.qZA(),e.TgZ(31,"div",20)(32,"label"),e._uU(33,"Hotel"),e.qZA(),e._UZ(34,"p-dropdown",23),e.YNc(35,Y,2,0,"div",22),e.qZA(),e.TgZ(36,"div",24),e._UZ(37,"button",25),e.qZA()(),e._UZ(38,"br"),e.qZA()()(),e.TgZ(39,"p-dialog",26),e.NdJ("visibleChange",function(l){return i.visibleModalTypeRoomEditar=l}),e.TgZ(40,"div",10)(41,"h5"),e._uU(42,"Completa el formulario"),e.qZA(),e.TgZ(43,"form",18),e.NdJ("ngSubmit",function(){return i.submitUpdate()}),e.TgZ(44,"div",19)(45,"div",20)(46,"label"),e._uU(47,"Nombre"),e.qZA(),e._UZ(48,"input",21),e.YNc(49,$,2,0,"div",22),e.qZA(),e.TgZ(50,"div",20)(51,"label"),e._uU(52,"Hotel"),e.qZA(),e._UZ(53,"p-dropdown",23),e.YNc(54,G,2,0,"div",22),e.qZA(),e.TgZ(55,"div",24),e._UZ(56,"button",27),e.qZA()(),e._UZ(57,"br"),e.qZA()()()),2&n&&(e.xp6(14),e.Q6J("value",i.typeRoomData)("showPageLinks",!0)("first",1)("totalRecords",17)("tableStyle",e.DdM(32,L))("loading",i.loadingTable)("rows",8)("globalFilterFields",e.DdM(33,z))("paginator",!0)("rowsPerPageOptions",e.DdM(34,O))("showCurrentPageReport",!0)("rowHover",!0),e.xp6(6),e.Akn(e.DdM(35,Z)),e.Q6J("visible",i.visibleModalTypeRoom)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(4),e.Q6J("formGroup",i.formCreateTypeRoom),e.xp6(6),e.Q6J("ngIf",i.formCreateTypeRoom.get("nombre").hasError("required")),e.xp6(4),e.Q6J("options",i.hotel),e.xp6(1),e.Q6J("ngIf",i.formCreateTypeRoom.get("hotel_id").hasError("required")),e.xp6(4),e.Akn(e.DdM(36,Z)),e.Q6J("visible",i.visibleModalTypeRoomEditar)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(4),e.Q6J("formGroup",i.formEditTypeRoom),e.xp6(6),e.Q6J("ngIf",i.formEditTypeRoom.get("nombre").hasError("required")),e.xp6(4),e.Q6J("options",i.hotel),e.xp6(1),e.Q6J("ngIf",i.formEditTypeRoom.get("hotel_id").hasError("required")))},dependencies:[f.O5,d.iA,S.jx,d.UA,d.Mo,c.Hq,c.zx,s._Y,s.Fj,s.JJ,s.JL,T.H,b.o,v.Lt,y.V,s.sg,s.u,h.Ro],styles:["svg[_ngcontent-%COMP%]{width:45%}"]})}return o})(),K=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275mod=e.oAB({type:o});static#o=this.\u0275inj=e.cJS({imports:[R.Bz.forChild([{path:"",component:j}]),R.Bz]})}return o})(),V=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275mod=e.oAB({type:o});static#o=this.\u0275inj=e.cJS({providers:[{provide:u.TP,useClass:J.n,multi:!0},C],imports:[f.ez,K,d.U$,x.O,s.u5,c.hJ,T.T,A.EV,U.V,E.Xt,b.j,_.A,v.kW,w.cc,M.L$,y.S,N.ii.forRoot(),s.UX,h.ef,q.U]})}return o})()}}]);