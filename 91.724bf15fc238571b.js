"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[91],{4091:(To,M,c)=>{c.r(M),c.d(M,{DashboardRoomsModule:()=>bo});var m=c(6814),l=c(95),V=c(9664),$=c(6068),v=c(707),T=c(4480),K=c(4104),F=c(6340),X=c(6022),x=c(3714),R=c(6218),C=c(2160),W=c(1865),ee=c(354),y=c(7213),te=c(9862),oe=c(8712),ae=c(5722),Z=c(8672),ie=c(1712),P=c(1532),b=c(86),ne=c(3519),d=c.n(ne),e=c(4946),I=c(8663),w=c(3859),k=c(1230),_=c(5219),U=c(1122),g=c(6825),f=c(2076),J=c(7778),O=c(2332);function re(i,r){1&i&&e.GkF(0)}function se(i,r){1&i&&e._UZ(0,"TimesIcon",8),2&i&&e.Q6J("styleClass","p-overlaypanel-close-icon")}function le(i,r){}function ce(i,r){1&i&&e.YNc(0,le,0,0,"ng-template")}function de(i,r){if(1&i&&(e.TgZ(0,"span",9),e.YNc(1,ce,1,0,null,3),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngTemplateOutlet",t.closeIconTemplate)}}function pe(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onCloseClick(o))})("keydown.enter",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.hide())}),e.YNc(1,se,1,1,"TimesIcon",6),e.YNc(2,de,2,1,"span",7),e.qZA()}if(2&i){const t=e.oxw(2);e.uIk("aria-label",t.ariaCloseLabel),e.xp6(1),e.Q6J("ngIf",!t.closeIconTemplate),e.xp6(1),e.Q6J("ngIf",t.closeIconTemplate)}}const ue=function(i,r){return{showTransitionParams:i,hideTransitionParams:r}},he=function(i,r){return{value:i,params:r}};function me(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.NdJ("click",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.onOverlayClick(o))})("@animation.start",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.onAnimationStart(o))})("@animation.done",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.onAnimationEnd(o))}),e.TgZ(1,"div",2),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onContentClick())})("mousedown",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onContentClick())}),e.Hsn(2),e.YNc(3,re,1,0,"ng-container",3),e.qZA(),e.YNc(4,pe,3,3,"button",4),e.qZA()}if(2&i){const t=e.oxw();e.Tol(t.styleClass),e.Q6J("ngClass","p-overlaypanel p-component")("ngStyle",t.style)("@animation",e.WLB(10,he,t.overlayVisible?"open":"close",e.WLB(7,ue,t.showTransitionOptions,t.hideTransitionOptions))),e.xp6(3),e.Q6J("ngTemplateOutlet",t.contentTemplate),e.xp6(1),e.Q6J("ngIf",t.showCloseIcon)}}const ge=["*"];let _e=(()=>{class i{document;platformId;el;renderer;cd;zone;config;overlayService;dismissable=!0;showCloseIcon;style;styleClass;appendTo="body";autoZIndex=!0;ariaCloseLabel;baseZIndex=0;focusOnShow=!0;showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)";hideTransitionOptions=".1s linear";onShow=new e.vpe;onHide=new e.vpe;templates;container;overlayVisible=!1;render=!1;isOverlayAnimationInProgress=!1;selfClick=!1;documentClickListener;target;willHide;scrollHandler;documentResizeListener;contentTemplate;closeIconTemplate;destroyCallback;overlayEventListener;overlaySubscription;constructor(t,a,o,n,s,p,u,h){this.document=t,this.platformId=a,this.el=o,this.renderer=n,this.cd=s,this.zone=p,this.config=u,this.overlayService=h}ngAfterContentInit(){this.templates?.forEach(t=>{switch(t.getType()){case"content":default:this.contentTemplate=t.template;break;case"closeicon":this.closeIconTemplate=t.template}this.cd.markForCheck()})}bindDocumentClickListener(){(0,m.NF)(this.platformId)&&!this.documentClickListener&&this.dismissable&&this.zone.runOutsideAngular(()=>{let t=f.p.isIOS()?"touchstart":"click";this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:this.document,t,o=>{!this.container?.contains(o.target)&&this.target!==o.target&&!this.target.contains(o.target)&&!this.selfClick&&this.zone.run(()=>{this.hide()}),this.selfClick=!1,this.cd.markForCheck()})})}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null,this.selfClick=!1)}toggle(t,a){this.isOverlayAnimationInProgress||(this.overlayVisible?(this.hasTargetChanged(t,a)&&(this.destroyCallback=()=>{this.show(null,a||t.currentTarget||t.target)}),this.hide()):this.show(t,a))}show(t,a){a&&t&&t.stopPropagation(),!this.isOverlayAnimationInProgress&&(this.target=a||t.currentTarget||t.target,this.overlayVisible=!0,this.render=!0,this.cd.markForCheck())}onOverlayClick(t){this.overlayService.add({originalEvent:t,target:this.el.nativeElement}),this.selfClick=!0}onContentClick(){this.selfClick=!0}hasTargetChanged(t,a){return null!=this.target&&this.target!==(a||t.currentTarget||t.target)}appendContainer(){this.appendTo&&("body"===this.appendTo?this.renderer.appendChild(this.document.body,this.container):f.p.appendChild(this.container,this.appendTo))}restoreAppend(){this.container&&this.appendTo&&this.renderer.appendChild(this.el.nativeElement,this.container)}align(){this.autoZIndex&&O.P9.set("overlay",this.container,this.baseZIndex+this.config.zIndex.overlay),f.p.absolutePosition(this.container,this.target);const t=f.p.getOffset(this.container),a=f.p.getOffset(this.target),o=this.document.defaultView?.getComputedStyle(this.container).getPropertyValue("border-radius");let n=0;t.left<a.left&&(n=a.left-t.left-2*parseFloat(o)),this.container?.style.setProperty("--overlayArrowLeft",`${n}px`),t.top<a.top&&(f.p.addClass(this.container,"p-overlaypanel-flipped"),this.showCloseIcon&&this.renderer.setStyle(this.container,"margin-top","-30px"))}onAnimationStart(t){"open"===t.toState&&(this.container=t.element,this.appendContainer(),this.align(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.focusOnShow&&this.focus(),this.overlayEventListener=a=>{this.container&&this.container.contains(a.target)&&(this.selfClick=!0)},this.overlaySubscription=this.overlayService.clickObservable.subscribe(this.overlayEventListener),this.onShow.emit(null)),this.isOverlayAnimationInProgress=!0}onAnimationEnd(t){switch(t.toState){case"void":this.destroyCallback&&(this.destroyCallback(),this.destroyCallback=null),this.overlaySubscription&&this.overlaySubscription.unsubscribe();break;case"close":this.autoZIndex&&O.P9.clear(this.container),this.overlaySubscription&&this.overlaySubscription.unsubscribe(),this.onContainerDestroy(),this.onHide.emit({}),this.render=!1}this.isOverlayAnimationInProgress=!1}focus(){let t=f.p.findSingle(this.container,"[autofocus]");t&&this.zone.runOutsideAngular(()=>{setTimeout(()=>t.focus(),5)})}hide(){this.overlayVisible=!1,this.cd.markForCheck()}onCloseClick(t){this.hide(),t.preventDefault()}onWindowResize(){this.overlayVisible&&!f.p.isTouchDevice()&&this.hide()}bindDocumentResizeListener(){(0,m.NF)(this.platformId)&&!this.documentResizeListener&&(this.documentResizeListener=this.renderer.listen(this.document.defaultView,"resize",this.onWindowResize.bind(this)))}unbindDocumentResizeListener(){this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}bindScrollListener(){(0,m.NF)(this.platformId)&&(this.scrollHandler||(this.scrollHandler=new f.V(this.target,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener())}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}onContainerDestroy(){this.cd.destroyed||(this.target=null),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener()}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.container&&this.autoZIndex&&O.P9.clear(this.container),this.cd.destroyed||(this.target=null),this.destroyCallback=null,this.container&&(this.restoreAppend(),this.onContainerDestroy()),this.overlaySubscription&&this.overlaySubscription.unsubscribe()}static \u0275fac=function(a){return new(a||i)(e.Y36(m.K0),e.Y36(e.Lbi),e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(e.sBO),e.Y36(e.R0b),e.Y36(_.b4),e.Y36(_.F0))};static \u0275cmp=e.Xpm({type:i,selectors:[["p-overlayPanel"]],contentQueries:function(a,o,n){if(1&a&&e.Suo(n,_.jx,4),2&a){let s;e.iGM(s=e.CRH())&&(o.templates=s)}},hostAttrs:[1,"p-element"],inputs:{dismissable:"dismissable",showCloseIcon:"showCloseIcon",style:"style",styleClass:"styleClass",appendTo:"appendTo",autoZIndex:"autoZIndex",ariaCloseLabel:"ariaCloseLabel",baseZIndex:"baseZIndex",focusOnShow:"focusOnShow",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onShow:"onShow",onHide:"onHide"},ngContentSelectors:ge,decls:1,vars:1,consts:[[3,"ngClass","ngStyle","class","click",4,"ngIf"],[3,"ngClass","ngStyle","click"],[1,"p-overlaypanel-content",3,"click","mousedown"],[4,"ngTemplateOutlet"],["type","button","class","p-overlaypanel-close p-link","pRipple","",3,"click","keydown.enter",4,"ngIf"],["type","button","pRipple","",1,"p-overlaypanel-close","p-link",3,"click","keydown.enter"],[3,"styleClass",4,"ngIf"],["class","p-overlaypanel-close-icon",4,"ngIf"],[3,"styleClass"],[1,"p-overlaypanel-close-icon"]],template:function(a,o){1&a&&(e.F$t(),e.YNc(0,me,5,13,"div",0)),2&a&&e.Q6J("ngIf",o.render)},dependencies:function(){return[m.mk,m.O5,m.tP,m.PC,T.H,J.q]},styles:['.p-overlaypanel{position:absolute;margin-top:10px;top:0;left:0}.p-overlaypanel-flipped{margin-top:0;margin-bottom:10px}.p-overlaypanel-close{display:flex;justify-content:center;align-items:center;overflow:hidden;position:relative}.p-overlaypanel:after,.p-overlaypanel:before{bottom:100%;left:calc(var(--overlayArrowLeft, 0) + 1.25rem);content:" ";height:0;width:0;position:absolute;pointer-events:none}.p-overlaypanel:after{border-width:8px;margin-left:-8px}.p-overlaypanel:before{border-width:10px;margin-left:-10px}.p-overlaypanel-shifted:after,.p-overlaypanel-shifted:before{left:auto;right:1.25em;margin-left:auto}.p-overlaypanel-flipped:after,.p-overlaypanel-flipped:before{bottom:auto;top:100%}.p-overlaypanel.p-overlaypanel-flipped:after{border-bottom-color:transparent}.p-overlaypanel.p-overlaypanel-flipped:before{border-bottom-color:transparent}\n'],encapsulation:2,data:{animation:[(0,g.X$)("animation",[(0,g.SB)("void",(0,g.oB)({transform:"scaleY(0.8)",opacity:0})),(0,g.SB)("close",(0,g.oB)({opacity:0})),(0,g.SB)("open",(0,g.oB)({transform:"translateY(0)",opacity:1})),(0,g.eR)("void => open",(0,g.jt)("{{showTransitionParams}}")),(0,g.eR)("open => close",(0,g.jt)("{{hideTransitionParams}}"))])]},changeDetection:0})}return i})(),fe=(()=>{class i{static \u0275fac=function(a){return new(a||i)};static \u0275mod=e.oAB({type:i});static \u0275inj=e.cJS({imports:[m.ez,T.T,_.m8,J.q,_.m8]})}return i})();var N=c(6005),H=c(4562);function be(i,r){if(1&i&&e._UZ(0,"span",11),2&i){const t=e.oxw(3);e.Tol(t.accordion.collapseIcon),e.Q6J("ngClass",t.iconClass)}}function ve(i,r){if(1&i&&e._UZ(0,"ChevronDownIcon",11),2&i){const t=e.oxw(3);e.Q6J("ngClass",t.iconClass)}}function Te(i,r){if(1&i&&(e.ynx(0),e.YNc(1,be,1,3,"span",9),e.YNc(2,ve,1,1,"ChevronDownIcon",10),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.accordion.collapseIcon),e.xp6(1),e.Q6J("ngIf",!t.accordion.collapseIcon)}}function Ze(i,r){if(1&i&&e._UZ(0,"span",11),2&i){const t=e.oxw(3);e.Tol(t.accordion.expandIcon),e.Q6J("ngClass",t.iconClass)}}function Ce(i,r){if(1&i&&e._UZ(0,"ChevronRightIcon",11),2&i){const t=e.oxw(3);e.Q6J("ngClass",t.iconClass)}}function Ae(i,r){if(1&i&&(e.ynx(0),e.YNc(1,Ze,1,3,"span",9),e.YNc(2,Ce,1,1,"ChevronRightIcon",10),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.accordion.expandIcon),e.xp6(1),e.Q6J("ngIf",!t.accordion.expandIcon)}}function xe(i,r){if(1&i&&(e.ynx(0),e.YNc(1,Te,3,2,"ng-container",3),e.YNc(2,Ae,3,2,"ng-container",3),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.selected),e.xp6(1),e.Q6J("ngIf",!t.selected)}}function Re(i,r){}function ye(i,r){1&i&&e.YNc(0,Re,0,0,"ng-template")}function Ie(i,r){if(1&i&&(e.TgZ(0,"span",12),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.header," ")}}function Oe(i,r){1&i&&e.GkF(0)}function De(i,r){1&i&&e.Hsn(0,1,["*ngIf","hasHeaderFacet"])}function qe(i,r){1&i&&e.GkF(0)}function Se(i,r){if(1&i&&(e.ynx(0),e.YNc(1,qe,1,0,"ng-container",6),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",t.contentTemplate)}}const Me=["*",[["p-header"]]],Fe=function(i){return{$implicit:i}},E=function(i){return{transitionParams:i}},Pe=function(i){return{value:"visible",params:i}},we=function(i){return{value:"hidden",params:i}},ke=["*","p-header"],Ue=["*"];let Je=0,Q=(()=>{class i{changeDetector;header;headerStyle;tabStyle;contentStyle;tabStyleClass;headerStyleClass;contentStyleClass;disabled;cache=!0;transitionOptions="400ms cubic-bezier(0.86, 0, 0.07, 1)";iconPos="start";selectedChange=new e.vpe;headerFacet;templates;_selected=!1;get selected(){return this._selected}set selected(t){this._selected=t,this.loaded||(this._selected&&this.cache&&(this.loaded=!0),this.changeDetector.detectChanges())}get iconClass(){return"end"===this.iconPos?"p-accordion-toggle-icon-end":"p-accordion-toggle-icon"}contentTemplate;headerTemplate;iconTemplate;id="p-accordiontab-"+Je++;loaded=!1;accordion;constructor(t,a){this.changeDetector=a,this.accordion=t}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"content":default:this.contentTemplate=t.template;break;case"header":this.headerTemplate=t.template;break;case"icon":this.iconTemplate=t.template}})}toggle(t){if(this.disabled)return!1;let a=this.findTabIndex();if(this.selected)this.selected=!1,this.accordion.onClose.emit({originalEvent:t,index:a});else{if(!this.accordion.multiple)for(var o=0;o<this.accordion.tabs.length;o++)this.accordion.tabs[o].selected&&(this.accordion.tabs[o].selected=!1,this.accordion.tabs[o].selectedChange.emit(!1),this.accordion.tabs[o].changeDetector.markForCheck());this.selected=!0,this.loaded=!0,this.accordion.onOpen.emit({originalEvent:t,index:a})}this.selectedChange.emit(this.selected),this.accordion.updateActiveIndex(),this.changeDetector.markForCheck(),t.preventDefault()}findTabIndex(){let t=-1;for(var a=0;a<this.accordion.tabs.length;a++)if(this.accordion.tabs[a]==this){t=a;break}return t}get hasHeaderFacet(){return this.headerFacet&&this.headerFacet.length>0}onKeydown(t){(32===t.which||13===t.which)&&(this.toggle(t),t.preventDefault())}ngOnDestroy(){this.accordion.tabs.splice(this.findTabIndex(),1)}static \u0275fac=function(a){return new(a||i)(e.Y36((0,e.Gpc)(()=>L)),e.Y36(e.sBO))};static \u0275cmp=e.Xpm({type:i,selectors:[["p-accordionTab"]],contentQueries:function(a,o,n){if(1&a&&(e.Suo(n,_.h4,4),e.Suo(n,_.jx,4)),2&a){let s;e.iGM(s=e.CRH())&&(o.headerFacet=s),e.iGM(s=e.CRH())&&(o.templates=s)}},hostAttrs:[1,"p-element"],inputs:{header:"header",headerStyle:"headerStyle",tabStyle:"tabStyle",contentStyle:"contentStyle",tabStyleClass:"tabStyleClass",headerStyleClass:"headerStyleClass",contentStyleClass:"contentStyleClass",disabled:"disabled",cache:"cache",transitionOptions:"transitionOptions",iconPos:"iconPos",selected:"selected"},outputs:{selectedChange:"selectedChange"},ngContentSelectors:ke,decls:12,vars:38,consts:[[1,"p-accordion-tab",3,"ngClass","ngStyle"],[1,"p-accordion-header"],["role","tab",1,"p-accordion-header-link",3,"ngClass","click","keydown"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-accordion-header-text",4,"ngIf"],[4,"ngTemplateOutlet"],["role","region",1,"p-toggleable-content"],[1,"p-accordion-content",3,"ngClass","ngStyle"],[3,"class","ngClass",4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"p-accordion-header-text"]],template:function(a,o){1&a&&(e.F$t(Me),e.TgZ(0,"div",0)(1,"div",1)(2,"a",2),e.NdJ("click",function(s){return o.toggle(s)})("keydown",function(s){return o.onKeydown(s)}),e.YNc(3,xe,3,2,"ng-container",3),e.YNc(4,ye,1,0,null,4),e.YNc(5,Ie,2,1,"span",5),e.YNc(6,Oe,1,0,"ng-container",6),e.YNc(7,De,1,0,"ng-content",3),e.qZA()(),e.TgZ(8,"div",7)(9,"div",8),e.Hsn(10),e.YNc(11,Se,2,1,"ng-container",3),e.qZA()()()),2&a&&(e.ekj("p-accordion-tab-active",o.selected),e.Q6J("ngClass",o.tabStyleClass)("ngStyle",o.tabStyle),e.xp6(1),e.ekj("p-highlight",o.selected)("p-disabled",o.disabled),e.xp6(1),e.Akn(o.headerStyle),e.Q6J("ngClass",o.headerStyleClass),e.uIk("tabindex",o.disabled?null:0)("id",o.id)("aria-controls",o.id+"-content")("aria-expanded",o.selected),e.xp6(1),e.Q6J("ngIf",!o.iconTemplate),e.xp6(1),e.Q6J("ngTemplateOutlet",o.iconTemplate)("ngTemplateOutletContext",e.VKq(28,Fe,o.selected)),e.xp6(1),e.Q6J("ngIf",!o.hasHeaderFacet),e.xp6(1),e.Q6J("ngTemplateOutlet",o.headerTemplate),e.xp6(1),e.Q6J("ngIf",o.hasHeaderFacet),e.xp6(1),e.Q6J("@tabContent",o.selected?e.VKq(32,Pe,e.VKq(30,E,o.transitionOptions)):e.VKq(36,we,e.VKq(34,E,o.transitionOptions))),e.uIk("id",o.id+"-content")("aria-hidden",!o.selected)("aria-labelledby",o.id),e.xp6(1),e.Q6J("ngClass",o.contentStyleClass)("ngStyle",o.contentStyle),e.xp6(2),e.Q6J("ngIf",o.contentTemplate&&(o.cache?o.loaded:o.selected)))},dependencies:function(){return[m.mk,m.O5,m.tP,m.PC,H.X,N.v]},styles:[".p-accordion-header-link{cursor:pointer;display:flex;align-items:center;-webkit-user-select:none;user-select:none;position:relative;text-decoration:none}.p-accordion-header-link:focus{z-index:1}.p-accordion-header-text{line-height:1}.p-accordion .p-toggleable-content{overflow:hidden}.p-accordion .p-accordion-tab-active>.p-toggleable-content:not(.ng-animating){overflow:inherit}.p-accordion-toggle-icon-end{order:1;margin-left:auto}.p-accordion-toggle-icon{order:0}\n"],encapsulation:2,data:{animation:[(0,g.X$)("tabContent",[(0,g.SB)("hidden",(0,g.oB)({height:"0"})),(0,g.SB)("visible",(0,g.oB)({height:"*"})),(0,g.eR)("visible <=> hidden",[(0,g.jt)("{{transitionParams}}")]),(0,g.eR)("void => *",(0,g.jt)(0))])]},changeDetection:0})}return i})(),L=(()=>{class i{el;changeDetector;multiple=!1;style;styleClass;expandIcon;collapseIcon;get activeIndex(){return this._activeIndex}set activeIndex(t){this._activeIndex=t,this.preventActiveIndexPropagation?this.preventActiveIndexPropagation=!1:this.updateSelectionState()}onClose=new e.vpe;onOpen=new e.vpe;activeIndexChange=new e.vpe;tabList;tabListSubscription=null;_activeIndex;preventActiveIndexPropagation=!1;tabs=[];constructor(t,a){this.el=t,this.changeDetector=a}ngAfterContentInit(){this.initTabs(),this.tabListSubscription=this.tabList.changes.subscribe(t=>{this.initTabs()})}initTabs(){this.tabs=this.tabList.toArray(),this.updateSelectionState(),this.changeDetector.markForCheck()}getBlockableElement(){return this.el.nativeElement.children[0]}updateSelectionState(){if(this.tabs&&this.tabs.length&&null!=this._activeIndex)for(let t=0;t<this.tabs.length;t++){let a=this.multiple?this._activeIndex.includes(t):t===this._activeIndex;a!==this.tabs[t].selected&&(this.tabs[t].selected=a,this.tabs[t].selectedChange.emit(a),this.tabs[t].changeDetector.markForCheck())}}updateActiveIndex(){let t=this.multiple?[]:null;this.tabs.forEach((a,o)=>{if(a.selected){if(!this.multiple)return void(t=o);t.push(o)}}),this.preventActiveIndexPropagation=!0,this.activeIndexChange.emit(t)}ngOnDestroy(){this.tabListSubscription&&this.tabListSubscription.unsubscribe()}static \u0275fac=function(a){return new(a||i)(e.Y36(e.SBq),e.Y36(e.sBO))};static \u0275cmp=e.Xpm({type:i,selectors:[["p-accordion"]],contentQueries:function(a,o,n){if(1&a&&e.Suo(n,Q,4),2&a){let s;e.iGM(s=e.CRH())&&(o.tabList=s)}},hostAttrs:[1,"p-element"],inputs:{multiple:"multiple",style:"style",styleClass:"styleClass",expandIcon:"expandIcon",collapseIcon:"collapseIcon",activeIndex:"activeIndex"},outputs:{onClose:"onClose",onOpen:"onOpen",activeIndexChange:"activeIndexChange"},ngContentSelectors:Ue,decls:2,vars:4,consts:[["role","tablist",3,"ngClass","ngStyle"]],template:function(a,o){1&a&&(e.F$t(),e.TgZ(0,"div",0),e.Hsn(1),e.qZA()),2&a&&(e.Tol(o.styleClass),e.Q6J("ngClass","p-accordion p-component")("ngStyle",o.style))},dependencies:[m.mk,m.PC],encapsulation:2,changeDetection:0})}return i})(),Ne=(()=>{class i{static \u0275fac=function(a){return new(a||i)};static \u0275mod=e.oAB({type:i});static \u0275inj=e.cJS({imports:[m.ez,H.X,N.v,_.m8]})}return i})();var D=c(6263),q=c(4055),S=c(7161),He=c(8725);const Ee=["op1"],Qe=["clienteMultiSelectReservar"],Le=["clienteMultiSelectTarifa"],Ye=["clienteMultiSelectOcupar"],Be=["tarifaMultiSelectOcupar"];function ze(i,r){1&i&&e._UZ(0,"i",36)}function Ge(i,r){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"p-tag",48),e.qZA()),2&i){const t=e.oxw().$implicit,a=e.oxw(3);e.xp6(1),e.Q6J("value",a.validarEstado(t.detalle,5))}}function je(i,r){1&i&&(e.TgZ(0,"div"),e._UZ(1,"p-tag",49),e.qZA())}function Ve(i,r){1&i&&(e.TgZ(0,"div"),e._UZ(1,"p-tag",50),e.qZA())}function $e(i,r){1&i&&(e.TgZ(0,"div"),e._UZ(1,"p-tag",51),e.qZA())}function Ke(i,r){1&i&&(e.TgZ(0,"div"),e._UZ(1,"p-tag",52),e.qZA())}function Xe(i,r){1&i&&(e.TgZ(0,"div"),e._UZ(1,"p-tag",53),e.qZA())}function We(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",37)(1,"div",38),e._UZ(2,"label",39),e.qZA(),e.TgZ(3,"i",40),e.NdJ("click",function(o){const s=e.CHM(t).$implicit,p=e.oxw(3);return e.KtG(p.abrirMenu(o,s))}),e.qZA(),e.TgZ(4,"p-overlayPanel",41,42)(6,"p-menu",43),e.NdJ("click",function(){const n=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.opcionesHabitacion(n))}),e.qZA()(),e._UZ(7,"br"),e.TgZ(8,"div",44),e._UZ(9,"img",45),e.qZA(),e.TgZ(10,"div",46),e.ynx(11),e.YNc(12,Ge,2,1,"div",47),e.YNc(13,je,2,0,"div",47),e.YNc(14,Ve,2,0,"div",47),e.YNc(15,$e,2,0,"div",47),e.YNc(16,Ke,2,0,"div",47),e.YNc(17,Xe,2,0,"div",47),e.BQk(),e.qZA()()}if(2&i){const t=r.$implicit,a=e.oxw(3);e.xp6(2),e.Q6J("label",t.nombre),e.xp6(2),e.Q6J("showCloseIcon",!0),e.xp6(2),e.Q6J("model",a.menuHabitacion),e.xp6(3),e.MGl("src","assets/puertas/",t.habitacionNombre,".jpg",e.LSH),e.xp6(3),e.Q6J("ngIf",a.validarEstado(t.detalle,5)),e.xp6(1),e.Q6J("ngIf",a.validarEstado(t.detalle,3)),e.xp6(1),e.Q6J("ngIf",a.validarEstado(t.detalle,4)),e.xp6(1),e.Q6J("ngIf",a.validarEstado(t.detalle,6)),e.xp6(1),e.Q6J("ngIf",a.validarEstado(t.detalle,2)),e.xp6(1),e.Q6J("ngIf",a.validarEstado(t.detalle,7))}}function et(i,r){if(1&i&&(e.YNc(0,ze,1,0,"i",33),e.TgZ(1,"div",34),e.YNc(2,We,18,10,"div",35),e.qZA()),2&i){const t=e.oxw().$implicit;e.Q6J("ngIf",t.loading),e.xp6(2),e.Q6J("ngForOf",t.habitaciones)}}function tt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"p-accordion")(1,"p-accordionTab",31),e.NdJ("selectedChange",function(){const n=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.openTag(n.piso))}),e.YNc(2,et,3,2,"ng-template",32),e.qZA()()}if(2&i){const t=r.$implicit,a=e.oxw();e.xp6(1),e.Q6J("header","Piso "+t.piso)("selected",t.piso==a.primerPiso)}}function ot(i,r){if(1&i&&(e.TgZ(0,"div",71)(1,"span",72),e._uU(2),e.qZA()()),2&i){const t=r.$implicit;e.xp6(2),e.Oqu(t.name)}}function at(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",73),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.crearCliente("reserva"))}),e.qZA()}}function it(i,r){1&i&&(e.TgZ(0,"div")(1,"h5"),e._uU(2,"Hora"),e.qZA()())}function nt(i,r){1&i&&(e.TgZ(0,"div")(1,"h5"),e._uU(2,"Noche"),e.qZA()())}function rt(i,r){if(1&i&&(e.TgZ(0,"div",71)(1,"span",72),e._uU(2),e._UZ(3,"p-tag",74),e.YNc(4,it,3,0,"div",47),e.YNc(5,nt,3,0,"div",47),e.qZA()()),2&i){const t=r.$implicit;e.xp6(2),e.hij(" ",t.nombre," "),e.xp6(1),e.s9C("icon",t.icon),e.s9C("value",t.valor),e.xp6(1),e.Q6J("ngIf",2==t.tipo),e.xp6(1),e.Q6J("ngIf",1==t.tipo)}}function st(i,r){1&i&&(e.TgZ(0,"div",84),e._uU(1,"Monto es requerido."),e.qZA())}function lt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",75)(1,"div",76)(2,"label",77),e._uU(3,"Monto"),e.qZA(),e._UZ(4,"br"),e.TgZ(5,"input",78),e.NdJ("input",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.changeMedioPagoReserva())}),e.qZA(),e._UZ(6,"br"),e.YNc(7,st,2,0,"div",18),e.qZA(),e.TgZ(8,"div",76)(9,"label",79),e._uU(10,"Medio Pago"),e.qZA(),e._UZ(11,"br")(12,"p-dropdown",80),e.qZA(),e.TgZ(13,"div",81),e._UZ(14,"label",82)(15,"br"),e.TgZ(16,"p-button",83),e.NdJ("click",function(){const n=e.CHM(t).index,s=e.oxw(2);return e.KtG(s.eliminarMedioPago(n))}),e.qZA()()()}if(2&i){const t=r.$implicit,a=e.oxw(2);e.Q6J("formGroup",t),e.xp6(7),e.Q6J("ngIf",null==t||null==t.controls.monto||null==t.controls.monto.errors?null:t.controls.monto.errors.required),e.xp6(5),e.Q6J("options",a.selectMedioPago)}}function ct(i,r){if(1&i&&(e.TgZ(0,"tbody")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA()()),2&i){const t=r.$implicit;e.xp6(2),e.hij(" ",t.nombre," "),e.xp6(2),e.hij(" ",t.valor," ")}}function dt(i,r){if(1&i&&(e.TgZ(0,"tbody")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA()()),2&i){const t=r.$implicit;e.xp6(2),e.hij(" ",t.monto," "),e.xp6(2),e.hij(" ",t.medio_pago.nombre," ")}}const Y=function(){return{width:"70vw"}};function pt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"p-dialog",54),e.NdJ("visibleChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.reservacionModalVisible=o)}),e.TgZ(1,"div",12)(2,"div",55),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.reservarSubmit())}),e.TgZ(3,"h2",44),e._uU(4),e.qZA(),e.TgZ(5,"div",14)(6,"div",15)(7,"label",56),e._uU(8,"Cliente"),e.qZA(),e.TgZ(9,"p-multiSelect",57,58),e.NdJ("onFilter",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.busquedaCliente(o))})("onChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.checkClienteReserva(o))}),e.YNc(11,ot,3,1,"ng-template",17),e.YNc(12,at,1,0,"ng-template",59),e.qZA()(),e.TgZ(13,"div",15)(14,"label",56),e._uU(15,"Tarifa"),e.qZA(),e.TgZ(16,"p-multiSelect",60,61),e.NdJ("onChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.checkTarifaReserva(o))}),e.YNc(18,rt,6,5,"ng-template",17),e.qZA()(),e.TgZ(19,"div",15)(20,"p-panel",62)(21,"button",63),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.agregarAbono())}),e.qZA(),e.YNc(22,lt,17,3,"div",64),e.qZA()(),e.TgZ(23,"div",19)(24,"label"),e._uU(25,"Fecha Inicio "),e.qZA(),e.TgZ(26,"p-calendar",65),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.fechaInicio=o)})("onSelect",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.fechaInicioChange())}),e.qZA()(),e.TgZ(27,"div",19)(28,"label"),e._uU(29,"Fecha Final"),e.qZA(),e.TgZ(30,"p-calendar",66),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.fechaFinal=o)})("onSelect",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.fechaFinalChange())}),e.qZA()(),e.TgZ(31,"div",15)(32,"label"),e._uU(33,"Descripcion"),e.qZA(),e.TgZ(34,"form",67)(35,"textarea",68),e.NdJ("input",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.descripcionReservaInput(o.target.value))}),e.qZA()()(),e.TgZ(36,"div",15)(37,"table")(38,"tr")(39,"th",69),e._uU(40,"Nombre"),e.qZA(),e.TgZ(41,"th"),e._uU(42,"Valores"),e.qZA(),e.TgZ(43,"td"),e._uU(44,"Detalle"),e.qZA()(),e.TgZ(45,"tr")(46,"th"),e._uU(47," Tarifas"),e.qZA(),e.TgZ(48,"th"),e._uU(49),e.qZA(),e.TgZ(50,"td")(51,"table")(52,"thead")(53,"th"),e._uU(54,"Nombre"),e.qZA(),e.TgZ(55,"th"),e._uU(56,"Precio"),e.qZA()(),e.YNc(57,ct,5,2,"tbody",9),e.qZA()()(),e.TgZ(58,"tr")(59,"th"),e._uU(60," Abonos"),e.qZA(),e.TgZ(61,"th"),e._uU(62),e.qZA(),e.TgZ(63,"td")(64,"table")(65,"thead")(66,"th"),e._uU(67,"Monto"),e.qZA(),e.TgZ(68,"th"),e._uU(69,"Metodo Pago"),e.qZA()(),e.YNc(70,dt,5,2,"tbody",9),e.qZA()()(),e.TgZ(71,"tr")(72,"th"),e._uU(73," Sub Total"),e.qZA(),e.TgZ(74,"th"),e._uU(75),e.qZA(),e._UZ(76,"td"),e.qZA(),e.TgZ(77,"tr")(78,"th"),e._uU(79," Total"),e.qZA(),e.TgZ(80,"th"),e._uU(81),e.qZA(),e._UZ(82,"td"),e.qZA()()(),e.TgZ(83,"div",15)(84,"button",70),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.submitReserva())}),e.qZA()()()()()()}if(2&i){const t=e.oxw();e.Akn(e.DdM(27,Y)),e.Q6J("visible",t.reservacionModalVisible)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(4),e.hij("",t.nombreHabitacionReservada," "),e.xp6(5),e.Q6J("options",t.clienteData),e.xp6(7),e.Q6J("options",t.tarifaData),e.xp6(4),e.MGl("header","Abonos $ ",t.abonosTotal,""),e.Q6J("toggleable",!0)("collapsed",t.collapsed),e.xp6(2),e.Q6J("ngForOf",t.formReservacionArray.controls),e.xp6(4),e.Q6J("minDate",t.hoy)("ngModel",t.fechaInicio)("showIcon",!0),e.xp6(4),e.Q6J("minDate",t.hoy)("ngModel",t.fechaFinal)("showIcon",!0),e.xp6(4),e.Q6J("formGroup",t.formReserva),e.xp6(15),e.hij(" $ ",t.tarifasTotal," "),e.xp6(8),e.Q6J("ngForOf",t.tarifasAgregadasReserva),e.xp6(5),e.hij(" $ ",t.abonosTotal," "),e.xp6(8),e.Q6J("ngForOf",t.formReservacionArray.value),e.xp6(5),e.hij(" $ ",t.totalPagarReserva<=0?0:t.totalPagarReserva," "),e.xp6(6),e.hij(" $ ",t.totalPagarReserva-t.abonosTotal<=0?0:t.totalPagarReserva-t.abonosTotal," "),e.xp6(3),e.Q6J("disabled",t.disableReserva||t.formReservacionArray.invalid)}}function ut(i,r){if(1&i&&(e.TgZ(0,"div",71)(1,"span",72),e._uU(2),e.qZA()()),2&i){const t=r.$implicit;e.xp6(2),e.Oqu(t.name)}}function ht(i,r){1&i&&(e.TgZ(0,"div",84),e._uU(1,"Campo requerido"),e.qZA())}function mt(i,r){1&i&&(e.TgZ(0,"div",84),e._uU(1,"Campo requerido"),e.qZA())}function gt(i,r){1&i&&e._UZ(0,"p-message",85)}function _t(i,r){if(1&i&&(e.TgZ(0,"div",71)(1,"span",72),e._uU(2),e.qZA()()),2&i){const t=r.$implicit;e.xp6(2),e.Oqu(t.name)}}function ft(i,r){1&i&&(e.TgZ(0,"div",84),e._uU(1,"Campo requerido"),e.qZA())}function bt(i,r){1&i&&(e.TgZ(0,"div",84),e._uU(1,"Campo requerido"),e.qZA())}function vt(i,r){1&i&&e._UZ(0,"p-message",85)}function Tt(i,r){if(1&i&&(e.TgZ(0,"div",71)(1,"span",72),e._uU(2),e.qZA()()),2&i){const t=r.$implicit;e.xp6(2),e.Oqu(t.name)}}function Zt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",73),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.crearCliente("ingreso"))}),e.qZA()}}function Ct(i,r){1&i&&(e.TgZ(0,"div")(1,"h5"),e._uU(2,"Hora"),e.qZA()())}function At(i,r){1&i&&(e.TgZ(0,"div")(1,"h5"),e._uU(2,"Noche"),e.qZA()())}function xt(i,r){if(1&i&&(e.TgZ(0,"div",71)(1,"span",72),e._uU(2),e._UZ(3,"p-tag",74),e.YNc(4,Ct,3,0,"div",47),e.YNc(5,At,3,0,"div",47),e.qZA()()),2&i){const t=r.$implicit;e.xp6(2),e.hij(" ",t.nombre," "),e.xp6(1),e.s9C("icon",t.icon),e.s9C("value",t.valor),e.xp6(1),e.Q6J("ngIf",2==t.tipo),e.xp6(1),e.Q6J("ngIf",1==t.tipo)}}function Rt(i,r){1&i&&(e.TgZ(0,"div",84),e._uU(1,"Monto es requerido."),e.qZA())}function yt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",75)(1,"div",76)(2,"label",77),e._uU(3,"Monto"),e.qZA(),e._UZ(4,"br"),e.TgZ(5,"input",78),e.NdJ("input",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.changeMedioPagoOcupar())}),e.qZA(),e._UZ(6,"br"),e.YNc(7,Rt,2,0,"div",18),e.qZA(),e.TgZ(8,"div",76)(9,"label",79),e._uU(10,"Medio Pago"),e.qZA(),e._UZ(11,"br")(12,"p-dropdown",80),e.qZA(),e.TgZ(13,"div",81),e._UZ(14,"label",82)(15,"br"),e.TgZ(16,"p-button",83),e.NdJ("click",function(){const n=e.CHM(t).index,s=e.oxw(2);return e.KtG(s.eliminarMedioPagoAbono(n))}),e.qZA()()()}if(2&i){const t=r.$implicit,a=e.oxw(2);e.Q6J("formGroup",t),e.xp6(7),e.Q6J("ngIf",null==t||null==t.controls.monto||null==t.controls.monto.errors?null:t.controls.monto.errors.required),e.xp6(5),e.Q6J("options",a.selectMedioPago)}}function It(i,r){1&i&&e._UZ(0,"p-message",95)}function Ot(i,r){1&i&&e._UZ(0,"p-message",96)}function Dt(i,r){1&i&&e._UZ(0,"p-message",97)}function qt(i,r){if(1&i&&(e.TgZ(0,"tbody")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA()()),2&i){const t=r.$implicit;e.xp6(2),e.hij(" ",t.nombre," "),e.xp6(2),e.hij(" ",t.valor," ")}}function St(i,r){if(1&i&&(e.TgZ(0,"tbody")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA()()),2&i){const t=r.$implicit;e.xp6(2),e.hij(" ",t.monto," "),e.xp6(2),e.hij(" ",t.medio_pago.nombre," ")}}function Mt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"p-dialog",86),e.NdJ("visibleChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.ocuparModalVisible=o)}),e.TgZ(1,"div",12)(2,"div")(3,"h2",44),e._uU(4),e.qZA(),e.TgZ(5,"div",14)(6,"div",15)(7,"label",56),e._uU(8,"Cliente"),e.qZA(),e.TgZ(9,"p-multiSelect",57,87),e.NdJ("onFilter",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.busquedaCliente(o))})("onChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.checkClienteOcupar(o))}),e.YNc(11,Tt,3,1,"ng-template",17),e.YNc(12,Zt,1,0,"ng-template",59),e.qZA()(),e.TgZ(13,"div",15)(14,"label",56),e._uU(15,"Tarifa"),e.qZA(),e.TgZ(16,"p-multiSelect",60,88),e.NdJ("onChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.checkTarifaOcupar(o))}),e.YNc(18,xt,6,5,"ng-template",17),e.qZA()(),e.TgZ(19,"div",15)(20,"p-panel",89)(21,"button",63),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.agregarAbonoOcupar())}),e.qZA(),e.YNc(22,yt,17,3,"div",64),e.qZA()(),e.TgZ(23,"div",15)(24,"label"),e._uU(25,"Descripcion"),e.qZA(),e.TgZ(26,"form",67)(27,"textarea",90),e.NdJ("input",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.descripcionReservaInput(o.target.value))}),e.qZA()()(),e.YNc(28,It,1,0,"p-message",91),e.YNc(29,Ot,1,0,"p-message",92),e.YNc(30,Dt,1,0,"p-message",93),e.TgZ(31,"div",15)(32,"table")(33,"tr")(34,"th",69),e._uU(35,"Nombre"),e.qZA(),e.TgZ(36,"th"),e._uU(37,"Valores"),e.qZA(),e.TgZ(38,"td"),e._uU(39,"Detalle"),e.qZA()(),e.TgZ(40,"tr")(41,"th"),e._uU(42," Tarifas"),e.qZA(),e.TgZ(43,"th"),e._uU(44),e.qZA(),e.TgZ(45,"td")(46,"table")(47,"thead")(48,"th"),e._uU(49,"Nombre"),e.qZA(),e.TgZ(50,"th"),e._uU(51,"Precio"),e.qZA()(),e.YNc(52,qt,5,2,"tbody",9),e.qZA()()(),e.TgZ(53,"tr")(54,"th"),e._uU(55," Abonos"),e.qZA(),e.TgZ(56,"th"),e._uU(57),e.qZA(),e.TgZ(58,"td")(59,"table")(60,"thead")(61,"th"),e._uU(62,"Monto"),e.qZA(),e.TgZ(63,"th"),e._uU(64,"Metodo Pago"),e.qZA()(),e.YNc(65,St,5,2,"tbody",9),e.qZA()()(),e.TgZ(66,"tr")(67,"th"),e._uU(68," Sub Total"),e.qZA(),e.TgZ(69,"th"),e._uU(70),e.qZA(),e._UZ(71,"td"),e.qZA(),e.TgZ(72,"tr")(73,"th"),e._uU(74," Total"),e.qZA(),e.TgZ(75,"th"),e._uU(76),e.qZA(),e._UZ(77,"td"),e.qZA()()(),e.TgZ(78,"div",15)(79,"button",94),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.submitOcupar())}),e.qZA()()()()()()}if(2&i){const t=e.oxw();e.Akn(e.DdM(23,Y)),e.Q6J("visible",t.ocuparModalVisible)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(4),e.hij("",t.nombreHabitacionReservada," "),e.xp6(5),e.Q6J("options",t.clienteData),e.xp6(7),e.Q6J("options",t.tarifaData),e.xp6(4),e.Q6J("toggleable",!0)("collapsed",t.collapsed),e.xp6(2),e.Q6J("ngForOf",t.formOcuparArray.controls),e.xp6(4),e.Q6J("formGroup",t.formOcupar),e.xp6(2),e.Q6J("ngIf",t.abonosTotalOcupar>t.totalPagarOcupar),e.xp6(1),e.Q6J("ngIf",t.totalPagarOcupar<=0),e.xp6(1),e.Q6J("ngIf",t.tarifasAgregadasOcupar.length<=0),e.xp6(14),e.hij(" $ ",t.tarifasTotalOcupar," "),e.xp6(8),e.Q6J("ngForOf",t.tarifasAgregadasOcupar),e.xp6(5),e.hij(" $ ",t.abonosTotalOcupar," "),e.xp6(8),e.Q6J("ngForOf",t.formOcuparArray.value),e.xp6(5),e.hij(" $ ",t.totalPagarOcupar<=0?0:t.totalPagarOcupar," "),e.xp6(6),e.hij(" $ ",t.totalPagarOcupar-t.abonosTotalOcupar<=0?0:t.totalPagarOcupar-t.abonosTotalOcupar," "),e.xp6(3),e.Q6J("disabled",t.disableOcupar||t.formOcuparArray.invalid)}}function Ft(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"app-clientes",98,99),e.NdJ("clienteCreado",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.handleClienteCreado(o))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("vieneDeHabitaciones",t.creandoCliente)}}const B=function(){return{width:"50vw",height:"150vw"}};let Pt=(()=>{class i{ngOnInit(){this.creandoCliente=!1,this.buildForm(),this.pisoId=1,this.primerPiso=this.pisoId;let t=JSON.parse(localStorage.getItem("currentUser"));this.hotelId=t.usuario.datalle_hoteles[0].hotel_id,this.getRoomsDashboardPisos(),this.clienteData=[],this.ProductoServicioData=[],this.empleadosData=[],this.tarifaData=[],this.hoy=new Date}constructor(t,a,o,n,s,p){this.dashboardRoomsService=t,this.FB=a,this.spinner=o,this.datePipe=n,this.router=s,this.layoutService=p,this.dayNamesSpanish=["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"],this.dayNamesShortSpanish=["Dom","Lun","Mar","Mi\xe9","Jue","Vie","S\xe1b"],this.monthNamesSpanish=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],this.monthNamesShortSpanish=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],this.localeSettingsSpanish={firstDayOfWeek:1,dayNames:this.dayNamesSpanish,dayNamesShort:this.dayNamesShortSpanish,monthNames:this.monthNamesSpanish,monthNamesShort:this.monthNamesShortSpanish,today:"Hoy",clear:"Borrar",dateFormat:"dd/mm/yy",weekHeader:"Sm"},this.totalPagarReserva=0,this.selectedMulti=[],this.primerPiso=1,this.pisoSeleccionado=1,this.dataRoom=[],this.reservacionModalVisible=!1,this.ProductoServicioDataSeleccionados=[],this.selectMedioPago=[],this.visibleModalLimpieza=!1,this.visibleModalMantenimiento=!1,this.ocuparModalVisible=!1,this.tarifasAgregadasReserva=[],this.productosAgregadosReserva=[],this.tarifasAgregadasOcupar=[],this.productosAgregadosOcupar=[],this.tarifasTotal=0,this.productosTotal=0,this.abonosTotal=0,this.tarifasTotalOcupar=0,this.productosTotalOcupar=0,this.abonosTotalOcupar=0,this.totalPagarOcupar=0,this.disableReserva=!1,this.disableOcupar=!1,this.disableButtonMantenimiento=!1,this.disableButtonLimpieza=!1,this.creandoCliente=!1,this.estadoFormulario=null,this.clienteAgregadoOcupar=[],this.clienteAgregadoReserva=[],this.collapsed=!0,this.formReservacionArray=this.FB.array([]),this.formOcuparArray=this.FB.array([])}buildForm(){this.spinner.hide(),this.formLimpieza=this.FB.group({descripcion:["",[]],empleado:["",[l.kI.required]],fechaInicio:["",[l.kI.required]],fechaFinal:["",[l.kI.required]]}),this.formMantenimiento=this.FB.group({descripcion:["",[]],empleado:["",[l.kI.required]],fechaInicio:["",[l.kI.required]],fechaFinal:["",[l.kI.required]]}),this.formReservacion=this.FB.group({habitacion_id:["",[l.kI.required]],hotel_id:["",[l.kI.required]],cliente_id:["",[l.kI.required]],fecha_inicio:["",[l.kI.required]],fecha_final:["",[l.kI.required]]}),this.formReserva=this.FB.group({descripcionReserva:["",[]]}),this.formOcupar=this.FB.group({descripcionReserva:["",[]]})}agregarAbono(){let t=this.FB.group({monto:["",[l.kI.required,l.kI.min(0)]],medio_pago:[this.selectMedioPago[0],[l.kI.required,l.kI.min(0)]]});null!=this.estadoFormulario&&(t=this.FB.group({monto:[this.estadoFormulario.abono[this.formReservacionArray.controls.length].monto,[l.kI.required,l.kI.min(0)]],medio_pago:[this.estadoFormulario.abono[this.formReservacionArray.controls.length].medio_pago,[l.kI.required,l.kI.min(0)]]})),this.formReservacionArray.push(t)}agregarAbonoOcupar(){let t=this.FB.group({monto:["",[l.kI.required,l.kI.min(0)]],medio_pago:[this.selectMedioPago[0],[l.kI.required,l.kI.min(0)]]});null!=this.estadoFormulario&&(t=this.FB.group({monto:[this.estadoFormulario.abono[this.formOcuparArray.controls.length].monto,[l.kI.required,l.kI.min(0)]],medio_pago:[this.estadoFormulario.abono[this.formOcuparArray.controls.length].medio_pago,[l.kI.required,l.kI.min(0)]]})),this.formOcuparArray.push(t)}getRoomsDashboard(t=0){this.dashboardRoomsService.getDashboardRooms({hotel_id:this.hotelId,piso_id:this.pisoId,estado_id:t}).subscribe(o=>{this.dataRoom.forEach(s=>{this.pisoId==s.piso&&(s.habitaciones=[])});let n=this.dataRoom.find(s=>s.piso==this.pisoId);n.loading=!1,o.forEach(s=>{n.habitaciones.push({nombre:s.nombre,json:s.diseno_json,id:s.id,detalle:s.habitacion_estado,tipoHabitacion:s.tipo_habitacion,habitacionNombre:JSON.parse(s.tipo_habitacion.diseno_json).puerta,piso:s.piso,habitacionEstado:s.habitacion_estado})}),this.dataRoom.forEach(s=>{this.pisoId==s.piso&&(s=n)})},o=>{console.log("Error: ",o)})}getRoomsDashboardPisos(t=0){this.dashboardRoomsService.getPisos({hotel_id:this.hotelId,piso_id:this.pisoId,estado_id:t}).subscribe(o=>{this.dataRoomsPisos=[],this.dataRoomsPisos=o.pisos,this.dataRoomsPisos.forEach(n=>{this.dataRoom.push({piso:n.piso,habitaciones:[],loading:!0})}),this.getRoomsDashboard(t)},o=>{console.log("Error: ",o)})}openTag(t){this.pisoId=t,this.getRoomsDashboard()}opcionesHabitacion(t){}opcionSeleccionada(t,a){this.estadoHabitacion=t.item.id,this.formReservacionArray=this.FB.array([]),this.formOcuparArray=this.FB.array([]),setTimeout(()=>{this.accionMenuHabitaciones()},500)}accionMenuHabitaciones(){let t={};5==this.estadoHabitacion?this.reservar():4==this.estadoHabitacion?this.getDataEmpleado({hotel_id:this.habitacionId,estado:4}):6==this.estadoHabitacion?this.getDataEmpleado({hotel_id:this.habitacionId,estado:6}):2==this.estadoHabitacion?this.ocupar():20==this.estadoHabitacion?(t={id_habitacion:this.habitacionId},d().fire({title:"\xbfEstas seguro que deseas Salir (Check Out)?",text:"",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, Confirmar",cancelButtonText:"Cancelar"}).then(a=>{a.isConfirmed&&this.enviarDesocupar(t)})):50==this.estadoHabitacion?(t={id_habitacion:this.habitacionId},d().fire({title:"\xbfEstas seguro que deseas Anular la reserva?",text:"",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, Confirmar",cancelButtonText:"Cancelar"}).then(a=>{a.isConfirmed&&this.enviarAnularReserva(t)})):40==this.estadoHabitacion?(t={id_habitacion:this.habitacionId},d().fire({title:"\xbfEstas seguro que deseas Anular La impuestos?",text:"",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, Confirmar",cancelButtonText:"Cancelar"}).then(a=>{a.isConfirmed&&this.enviarAnularLimpieza(t)})):60==this.estadoHabitacion?(t={id_habitacion:this.habitacionId},d().fire({title:"\xbfEstas seguro que deseas Anular el mantenimiento?",text:"",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, Confirmar",cancelButtonText:"Cancelar"}).then(a=>{a.isConfirmed&&this.enviarAnularMantenimiento(t)})):8==this.estadoHabitacion?this.router.navigate(["dashboard/dashboardRooms/"+this.habitacionId+"/ocupar"]):console.log("Ninguno")}abrirMenu(t,a){this.op1.toggle(t);let o=[];this.habitacionId=a.id,this.nombreHabitacionReservada=a.nombre,this.tipoHabitacionId=a.tipoHabitacion.id,this.pisoSeleccionado=a.piso,this.estadoHabitacionActual=a.habitacionEstado,this.detalleHabitacion=a.detalle,this.estadoHabitacionActual.forEach(p=>{o.push(p.estado_id)});let n=[];if(console.log(this.estadoHabitacionActual),o.includes(5)||n.push({label:"Reservar",icon:"pi pi-calendar-times",id:"5",command:p=>this.opcionSeleccionada(p,a),visible:!0,disabled:!1}),o.includes(4)||n.push({label:"Limpieza",icon:"pi pi-exclamation-triangle",id:"4",command:p=>this.opcionSeleccionada(p,a),visible:!0,disabled:!!o.includes(2)}),(o.includes(2)||o.includes(7))&&n.push({label:"Ver Ingreso",icon:"pi pi-book",id:"8",command:p=>this.opcionSeleccionada(p,a),visible:!0,disabled:!o.includes(7)&&!o.includes(2)}),!o.includes(2)){let p=!1;a.detalle&&a.detalle.forEach(u=>{if(5==u.estado_id){let h=new Date(u.fecha_inicio),vo=h.getFullYear()+"/"+h.getMonth()+"/"+h.getDate();(new Date).getFullYear()+"/"+(new Date).getMonth()+"/"+(new Date).getDate()==vo&&(p=!0)}}),n.push({label:"Ingresar",icon:"pi pi-lock",id:"2",command:u=>this.opcionSeleccionada(u,a),visible:!0,disabled:!!o.includes(7)})}o.includes(6)||n.push({label:"Mantenimiento",icon:"pi pi-wrench",id:"6",command:p=>this.opcionSeleccionada(p,a),visible:!0,disabled:!!o.includes(2)});let s=!1;o.forEach(p=>{switch(p){case 5:s||(n.push({label:"Reservar",icon:"pi pi-calendar-times",id:"5",command:u=>this.opcionSeleccionada(u,a),visible:!0,disabled:!1}),s=!0);break;case 4:n.push({label:"Anular Limpieza",icon:"pi pi-exclamation-triangle",id:"40",command:u=>this.opcionSeleccionada(u,a),visible:!0,disabled:!!o.includes(2)});break;case 6:n.push({label:"Anular Mantenimiento",icon:"pi pi-wrench",id:"60",command:u=>this.opcionSeleccionada(u,a),visible:!0,disabled:!!o.includes(2)});break;case 2:n.push({label:"Salir (Check Out)",icon:"pi pi-lock-open",id:"20",command:u=>this.opcionSeleccionada(u,a),visible:!0})}}),this.menuHabitacion=[{label:"Opciones",items:n}]}reservar(){this.getReserva()}enviarReservar(t){this.dashboardRoomsService.reservar(t).subscribe(a=>{let o=a;this.reservacionModalVisible=!1,"success"==o.code?(this.layoutService.reloadComponent(),d().fire({title:"Exito",text:"Reservacion exitosa.",icon:"success"}),this.openTag(this.pisoSeleccionado)):"warning"==o.code?d().fire({title:"Advertencia",text:o.error,icon:"warning"}):d().fire({title:"Error",text:"Error al generar la reserva.",icon:"error"})},a=>{console.log("Error: ",a)})}reservarSubmit(){}enviarDesocupar(t){this.dashboardRoomsService.desocupar(t).subscribe(a=>{let o=a;"success"==o.code?(d().fire({title:"Exito",text:"Anulacion Exitosa.",icon:"success"}),this.openTag(this.pisoSeleccionado)):"warning"==o.code?d().fire({title:"Advertencia",text:o.error,icon:"warning"}):d().fire({title:"Error",text:"Error al anular.",icon:"error"})},a=>{console.log("Error: ",a)})}enviarAnularReserva(t){this.dashboardRoomsService.anularReserva(t).subscribe(a=>{let o=a;"success"==o.code?(d().fire({title:"Exito",text:"Anulacion Exitosa.",icon:"success"}),this.layoutService.reloadComponent(),this.openTag(this.pisoSeleccionado)):"warning"==o.code?d().fire({title:"Advertencia",text:o.error,icon:"warning"}):d().fire({title:"Error",text:"Error al anular.",icon:"error"})},a=>{console.log("Error: ",a)})}enviarAnularLimpieza(t){this.dashboardRoomsService.anularLimpieza(t).subscribe(a=>{let o=a;"success"==o.code?(d().fire({title:"Exito",text:"Anulacion Exitosa.",icon:"success"}),this.openTag(this.pisoSeleccionado)):"warning"==o.code?d().fire({title:"Advertencia",text:o.error,icon:"warning"}):d().fire({title:"Error",text:"Error al anular.",icon:"error"})},a=>{console.log("Error: ",a)})}enviarAnularMantenimiento(t){this.spinner.show(),this.dashboardRoomsService.anularMantenimiento(t).subscribe(a=>{this.spinner.hide();let o=a;"success"==o.code?(d().fire({title:"Exito",text:"Anulacion Exitosa.",icon:"success"}),this.openTag(this.pisoSeleccionado)):"warning"==o.code?d().fire({title:"Advertencia",text:o.error,icon:"warning"}):d().fire({title:"Error",text:"Error al anular.",icon:"error"})},a=>{console.log("Error: ",a)})}enviarMantenimiento(t){this.spinner.show(),this.dashboardRoomsService.mantenimiento(t).subscribe(a=>{this.spinner.hide(),this.visibleModalMantenimiento=!1;let o=a;"success"==o.code?(d().fire({title:"Exito",text:"Registro exitoso.",icon:"success"}),this.openTag(this.pisoSeleccionado)):"warning"==o.code?d().fire({title:"Advertencia",text:o.error,icon:"warning"}):d().fire({title:"Error",text:"Error al registrar.",icon:"error"})},a=>{console.log("Error: ",a)})}enviarOcuparReserva(t){this.spinner.show(),this.dashboardRoomsService.ocuparReserva(t).subscribe(a=>{this.spinner.hide();let o=a;this.ocuparModalVisible=!1,"success"==o.code?(d().fire({title:"Exito",text:"Ingreso exitoso.",icon:"success"}),this.openTag(this.pisoSeleccionado)):"warning"==o.code?d().fire({title:"Advertencia",text:o.error,icon:"warning"}):d().fire({title:"Error",text:"Error al generar el ingreso.",icon:"error"})},a=>{console.log("Error: ",a)})}enviarOcupar(t){this.spinner.show(),this.dashboardRoomsService.ocupar(t).subscribe(a=>{this.spinner.hide();let o=a;this.ocuparModalVisible=!1,"success"==o.code?(d().fire({title:"Exito",text:"Ingreso exitosa.",icon:"success"}),this.layoutService.reloadComponent(),this.openTag(this.pisoSeleccionado)):"warning"==o.code?d().fire({title:"Advertencia",text:o.error,icon:"warning"}):d().fire({title:"Error",text:"Error al generar el ingreso.",icon:"error"})},a=>{console.log("Error: ",a)})}enviarLimpieza(t){this.spinner.show(),this.dashboardRoomsService.limpieza(t).subscribe(a=>{this.spinner.hide();let o=a;this.visibleModalLimpieza=!1,"success"==o.code?(d().fire({title:"Exito",text:"Registro exitoso.",icon:"success"}),this.openTag(this.pisoSeleccionado)):"warning"==o.code?d().fire({title:"Advertencia",text:o.error,icon:"warning"}):d().fire({title:"Error",text:"Error al registrar.",icon:"error"})},a=>{console.log("Error: ",a)})}ocupar(){let t=[];this.estadoHabitacionActual.forEach(a=>{t.push(a.estado_id)}),this.getReserva()}getReserva(t=""){this.spinner.show(),this.dashboardRoomsService.getReserva({hotel_id:this.hotelId,cliente_busqueda:t,tipo_habitacion:this.tipoHabitacionId}).subscribe(o=>{this.spinner.hide(),this.clienteMultiSelectReservar.checkAll(),this.clienteMultiSelectReservar.uncheckAll(),this.clienteMultiSelectTarifa.checkAll(),this.clienteMultiSelectTarifa.uncheckAll(),this.clienteMultiSelectOcupar.checkAll(),this.clienteMultiSelectOcupar.uncheckAll(),this.tarifaMultiSelectOcupar.checkAll(),this.tarifaMultiSelectOcupar.uncheckAll(),this.selectMedioPago=[],this.tarifaData=[],this.ProductoServicioData=[],this.clienteData=[],this.formReservacionArray=this.FB.array([]),this.formOcuparArray=this.FB.array([]),this.fechaFinal="",this.fechaInicio="",this.descripcionReserva="",this.totalPagarOcupar=0,this.totalPagarReserva=0,this.abonosTotal=0,this.abonosTotalOcupar=0,this.formReserva.reset(),this.formOcupar.reset(),5==this.estadoHabitacion&&(this.reservacionModalVisible=!0,this.restaurarEstadoFormulario("reserva"),this.validacionesReserva()),2==this.estadoHabitacion&&(this.ocuparModalVisible=!0,this.restaurarEstadoFormulario("ingreso"),this.validacionesOcupacion());let s=o.metodos_pago,p=o.tarifa;o.cliente.forEach(h=>{this.clienteData.push({name:h.numero_documento+" "+h.nombres+" "+h.apellidos,code:h.numero_documento,id:h.id})}),s.forEach(h=>{this.selectMedioPago.push({nombre:h.nombre,id:h.id})}),p.forEach(h=>{this.tarifaData.push({nombre:h.nombre,id:h.id,tipo:h.tipo,valor:h.valor,icon:1!=h.tipo?"pi pi-hourglass":"pi pi-moon"})}),o.productos.forEach(h=>{this.ProductoServicioData.push({name:h.nombre,code:h.id,valor:h.precio,tipo:h.tipo_producto})})},o=>{this.spinner.hide(),console.log("Error: ",o)})}busquedaCliente(t){this.getReserva(t.filter)}submitAsignarLimpieza(){if(this.formLimpieza.valid){let t={empleado_id:this.formLimpieza.value.empleado[0].code,descripcion:this.formLimpieza.value.descripcion,fecha_final:this.datePipe.transform(this.formLimpieza.value.fechaFinal,"yyyy-MM-dd HH:mm:ss"),fecha_inicio:this.datePipe.transform(this.formLimpieza.value.fechaInicio,"yyyy-MM-dd HH:mm:ss"),habitacion_id:this.habitacionId};this.enviarLimpieza(t)}}eliminarMedioPago(t){this.formReservacionArray.removeAt(t),this.abonosTotal=0,this.formReservacionArray.value.forEach(a=>{this.abonosTotal=this.abonosTotal+parseFloat(a.monto)}),this.validacionesReserva()}eliminarMedioPagoAbono(t){this.formOcuparArray.removeAt(t),this.abonosTotalOcupar=0,this.formOcuparArray.value.forEach(a=>{this.abonosTotalOcupar=this.abonosTotalOcupar+parseFloat(a.monto)}),this.validacionesOcupacion()}getDataEmpleado(t){this.spinner.show(),this.dashboardRoomsService.getEmpleadoHabitacion(t).subscribe(a=>{this.spinner.hide(),this.empleadosData=[],a.empleados.forEach(o=>{this.empleadosData.push({name:o.nombres+" "+o.apellidos,code:o.id})}),4==t.estado?(this.formLimpieza.reset(),this.visibleModalLimpieza=!0):6==t.estado&&(this.formMantenimiento.reset(),this.visibleModalMantenimiento=!0)},a=>{this.spinner.hide(),console.log("Error: ",a)})}submitAsignarMantenimiento(){if(this.formMantenimiento.valid){let t={empleado_id:this.formMantenimiento.value.empleado[0].code,descripcion:this.formMantenimiento.value.descripcion,fecha_final:this.datePipe.transform(this.formMantenimiento.value.fechaFinal,"yyyy-MM-dd HH:mm:ss"),fecha_inicio:this.datePipe.transform(this.formMantenimiento.value.fechaInicio,"yyyy-MM-dd HH:mm:ss"),habitacion_id:this.habitacionId};this.enviarMantenimiento(t)}}checkClienteReserva(t){this.clienteAgregadoReserva=[],this.clienteAgregadoReserva=t.value,this.validacionesReserva()}checkTarifaReserva(t){this.tarifasAgregadasReserva=[],this.tarifasAgregadasReserva=t.value,this.calcularTotalTarifaReserva(),this.calcularTotalReserva()}checkProducto(t){this.productosAgregadosReserva=t.value,this.calcularTotalProductosReserva(),this.calcularTotalReserva()}calcularTotalTarifaReserva(){this.tarifasTotal=0,this.tarifasAgregadasReserva.forEach(t=>{this.tarifasTotal=this.tarifasTotal+parseFloat(t.valor)})}calcularTotalReserva(){this.totalPagarReserva=this.tarifasTotal+this.productosTotal,this.validacionesReserva()}calcularTotalProductosReserva(){this.productosTotal=0,this.productosAgregadosReserva.forEach(t=>{this.productosTotal=this.productosTotal+parseFloat(t.valor)})}changeMedioPagoReserva(){this.abonosTotal=0,this.formReservacionArray.value.forEach(t=>{this.abonosTotal=this.abonosTotal+parseFloat(t.monto)}),this.validacionesReserva()}validacionesReserva(){let t=!1;this.clienteAgregadoReserva.length<=0&&(this.disableReserva=!0,t=!0),this.abonosTotal>this.totalPagarReserva&&(this.disableReserva=!0,t=!0),this.fechaFinal<this.fechaInicio&&(this.disableReserva=!0,t=!0),this.totalPagarReserva<=0&&(this.disableReserva=!0,t=!0),this.fechaFinal||(this.disableReserva=!0,t=!0),this.fechaInicio||(this.disableReserva=!0,t=!0),this.tarifasAgregadasReserva.length<=0&&(this.disableReserva=!0,t=!0),this.fechaInicio<new Date&&(this.disableReserva=!0,t=!0),t||(this.disableReserva=!1)}fechaInicioChange(){this.validacionesReserva()}fechaFinalChange(){this.validacionesReserva()}checkClienteOcupar(t){this.clienteAgregadoOcupar=[],this.clienteAgregadoOcupar=t.value,this.validacionesOcupacion()}checkTarifaOcupar(t){this.tarifasAgregadasOcupar=[],this.tarifasAgregadasOcupar=t.value,this.calcularTotalTarifaOcupar(),this.calcularTotalOcupar()}checkProductoOcupar(t){this.productosAgregadosOcupar=t.value,this.calcularTotalProductosOcupar(),this.calcularTotalOcupar()}calcularTotalProductosOcupar(){this.productosTotalOcupar=0,this.productosAgregadosOcupar.forEach(t=>{this.productosTotalOcupar=this.productosTotalOcupar+parseFloat(t.valor)})}calcularTotalTarifaOcupar(){this.tarifasTotalOcupar=0,this.tarifasAgregadasOcupar.forEach(t=>{this.tarifasTotalOcupar=this.tarifasTotalOcupar+parseFloat(t.valor)})}calcularTotalOcupar(){this.totalPagarOcupar=this.tarifasTotalOcupar+this.productosTotalOcupar,this.validacionesOcupacion()}validacionesOcupacion(){let t=!1;this.clienteAgregadoOcupar.length<=0&&(this.disableOcupar=!0,t=!0),this.abonosTotalOcupar>this.totalPagarOcupar&&(this.disableOcupar=!0,t=!0),this.totalPagarOcupar<=0&&(this.disableOcupar=!0,t=!0),this.tarifasAgregadasOcupar.length<=0&&(this.disableOcupar=!0,t=!0),t||(this.disableOcupar=!1)}changeMedioPagoOcupar(){this.abonosTotalOcupar=0,this.formOcuparArray.value.forEach(t=>{this.abonosTotalOcupar=this.abonosTotalOcupar+parseFloat(t.monto)}),this.validacionesReserva()}submitReserva(){let t=this.datePipe.transform(this.fechaInicio,"yyyy-MM-dd HH:mm:ss"),a=this.datePipe.transform(this.fechaFinal,"yyyy-MM-dd HH:mm:ss");this.enviarReservar({fecha_inicio:t,fecha_final:a,cliente_id:this.clienteMultiSelectReservar.value[0].id,total:this.totalPagarReserva-this.abonosTotal,subtotal:this.totalPagarReserva,tarifas:this.clienteMultiSelectTarifa.value,productos:[],descripcion:this.descripcionReserva,habitacion_id:this.habitacionId,hotel_id:this.hotelId,abonos:this.formReservacionArray.value})}descripcionReservaInput(t){this.descripcionReserva=t}submitOcupar(){let s={cliente_id:this.clienteMultiSelectOcupar.value[0].id,total:this.totalPagarOcupar-this.abonosTotalOcupar,subtotal:this.totalPagarOcupar,tarifas:this.tarifaMultiSelectOcupar.value,productos:[],descripcion:this.formReserva.get("descripcionReserva").value,habitacion_id:this.habitacionId,hotel_id:this.hotelId,abonos:this.formOcuparArray.value};this.enviarOcupar(s)}changeFechaMantenimiento(){let t=this.formMantenimiento.get("fechaInicio").value,a=this.formMantenimiento.get("fechaFinal").value;this.disableButtonMantenimiento=t>a}changeFechaLimpieza(t){let a=this.formLimpieza.get("fechaInicio").value,o=this.formLimpieza.get("fechaFinal").value;this.disableButtonLimpieza=a>o}validarEstado(t,a){return t.filter(n=>n.estado_id==a).length}orderar(t){this.dataRoom=[],this.getRoomsDashboardPisos(t)}guardarEstadoFormulario(t){"ingreso"==t?this.estadoFormulario={tarifa:this.tarifaMultiSelectOcupar.value,abono:this.formOcuparArray.controls.map(a=>a.value),descripcion:this.formOcupar.value.descripcionReserva}:"reserva"==t&&(this.estadoFormulario={tarifa:this.clienteMultiSelectTarifa.value,abono:this.formReservacionArray.controls.map(a=>a.value),descripcion:this.formReserva.value.descripcionReserva,fechaInicio:this.fechaInicio,fechaFinal:this.fechaFinal})}restaurarEstadoFormulario(t){("ingreso"==t&&null==this.estadoFormulario||"reserva"==t&&null==this.estadoFormulario)&&(this.collapsed=!0),"ingreso"==t&&null!=this.estadoFormulario?(this.tarifaMultiSelectOcupar.value=this.estadoFormulario.tarifa,this.estadoFormulario.abono.forEach(a=>{this.agregarAbonoOcupar()}),this.formOcupar.get("descripcionReserva").setValue(this.estadoFormulario.descripcion),this.estadoFormulario=null,this.tarifasAgregadasOcupar=this.tarifaMultiSelectOcupar.value,this.abonosTotalOcupar=0,this.formOcuparArray.controls.forEach(a=>{this.abonosTotalOcupar+=a.value.monto}),this.calcularTotalTarifaOcupar(),this.calcularTotalOcupar(),this.validacionesOcupacion()):"reserva"==t&&null!=this.estadoFormulario&&(this.clienteMultiSelectTarifa.value=this.estadoFormulario.tarifa,this.estadoFormulario.abono.forEach(a=>{this.agregarAbono()}),this.fechaInicio=this.estadoFormulario.fechaInicio,this.fechaFinal=this.estadoFormulario.fechaFinal,this.formReserva.get("descripcionReserva").setValue(this.estadoFormulario.descripcion),this.estadoFormulario=null,this.tarifasAgregadasReserva=this.clienteMultiSelectTarifa.value,this.abonosTotal=0,this.formReservacionArray.value.forEach(a=>{this.abonosTotal=this.abonosTotal+parseFloat(a.monto)}),this.calcularTotalTarifaReserva(),this.calcularTotalReserva(),this.validacionesReserva())}crearCliente(t){this.guardarEstadoFormulario(t),this.creandoCliente=!0}handleClienteCreado(t){this.creandoCliente=!1,t&&this.getReserva(),0==this.estadoFormulario.abono.length?(this.getReserva(),this.collapsed=!0):this.collapsed=!1}static#e=this.\u0275fac=function(a){return new(a||i)(e.Y36(I.y),e.Y36(l.qu),e.Y36(Z.t2),e.Y36(m.uU),e.Y36(b.F0),e.Y36(w.P))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-dashboard-rooms"]],viewQuery:function(a,o){if(1&a&&(e.Gf(Ee,5),e.Gf(Qe,5),e.Gf(Le,5),e.Gf(Ye,5),e.Gf(Be,5)),2&a){let n;e.iGM(n=e.CRH())&&(o.op1=n.first),e.iGM(n=e.CRH())&&(o.clienteMultiSelectReservar=n.first),e.iGM(n=e.CRH())&&(o.clienteMultiSelectTarifa=n.first),e.iGM(n=e.CRH())&&(o.clienteMultiSelectOcupar=n.first),e.iGM(n=e.CRH())&&(o.tarifaMultiSelectOcupar=n.first)}},decls:68,vars:34,consts:[["type","ball-scale-multiple","fullScreen","true"],[1,"card"],["icon","pi pi-calendar-times","value","Reservada",1,"padding","habilitarCursor",3,"click"],["icon","pi pi-lock-open","severity","success","value","Disponible",1,"padding","habilitarCursor",3,"click"],["icon","pi pi-exclamation-triangle","severity","info","value","Limpieza",1,"padding","habilitarCursor",3,"click"],["icon","pi pi-wrench","severity","warning","value","Mantenimiento",1,"padding","habilitarCursor",3,"click"],["icon","pi pi-lock","severity","danger","value","Ocupada",1,"padding","habilitarCursor",3,"click"],["icon","pi pi-dollar","severity","success","value","Facturar",1,"padding","habilitarCursor",3,"click"],["value","Ninguna",1,"padding","habilitarCursor",3,"click"],[4,"ngFor","ngForOf"],["header","Reservar",3,"visible","modal","style","draggable","resizable","visibleChange",4,"ngIf"],["header","Asignar Limpieza","dateFormat","dd/mm/yy",3,"visible","modal","draggable","resizable","visibleChange"],[1,"col-12"],[3,"formGroup","ngSubmit"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-12"],["formControlName","empleado","selectionLimit","1","optionLabel","name","placeholder","Buscar Empleados","optionLabel","name","display","chip","emptyMessage","Empleado no encontrado",1,"multiselect-custom",3,"options"],["pTemplate","item"],["style","color: red;",4,"ngIf"],[1,"field","col-12","md:col-6"],["locale","localeSettingsSpanish","inputId","fechaInicioLimpieza","formControlName","fechaInicio","showTime","true",1,"ng-dirty",3,"showIcon","onSelect"],["locale","localeSettingsSpanish","inputId","fechaFinalLimpieza","formControlName","fechaFinal","showTime","true",1,"ng-dirty",3,"showIcon","onSelect"],["formControlName","descripcion","pInputTextarea","","rows","3","cols","20"],["severity","error","class","padding","text","La fecha final es mayor a la fecha inicial",4,"ngIf"],["pButton","","pRipple","","label","Asignar limpieza","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl",3,"disabled"],["header","Asignar Mantenimiento",3,"visible","modal","draggable","resizable","visibleChange"],["locale","localeSettingsSpanish","inputId","fechaInicioMantenimiento","formControlName","fechaInicio","showTime","true",1,"ng-dirty",3,"showIcon","onSelect"],["locale","localeSettingsSpanish","inputId","fechaFinalMantenimiento","formControlName","fechaFinal","showTime","true",1,"ng-dirty",3,"showIcon","onSelect"],["pButton","","pRipple","","label","Asignar Mantenimiento","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl",3,"disabled"],["header","Ingresar ",3,"visible","modal","style","draggable","resizable","visibleChange",4,"ngIf"],[3,"vieneDeHabitaciones","clienteCreado",4,"ngIf"],[1,"line-height-3","m-0",3,"header","selected","selectedChange"],["pTemplate","listItem"],["class","pi pi-spin pi-spinner","style","font-size: 4em;",4,"ngIf"],[1,"grid","p-fluid","mt-3"],["class","field col-12 md:col-3",4,"ngFor","ngForOf"],[1,"pi","pi-spin","pi-spinner",2,"font-size","4em"],[1,"field","col-12","md:col-3"],[1,"nomeRoome"],["pButton","",3,"label"],[1,"pi","pi-ellipsis-v",2,"font-size","2rem","margin-top","4%","cursor","pointer",3,"click"],[3,"showCloseIcon"],["op1",""],[3,"model","click"],[2,"text-align","center"],["width","80%","height","80%",1,"rooms",3,"src"],[1,"flex","flex-wrap","gap-2",2,"margin-left","20%"],[4,"ngIf"],["icon","pi pi-calendar-times",3,"value"],["icon","pi pi-lock-open","severity","success"],["icon","pi pi-exclamation-triangle","severity","info"],["icon","pi pi-wrench","severity","warning"],["icon","pi pi-lock","severity","danger"],["icon","pi pi-dollar","severity","success"],["header","Reservar",3,"visible","modal","draggable","resizable","visibleChange"],[3,"ngSubmit"],["for","cliente"],["selectionLimit","1","optionLabel","name","placeholder","Buscar cliente","optionLabel","name","display","chip","emptyMessage","Cliente no encontrado",1,"multiselect-custom",3,"options","onFilter","onChange"],["clienteMultiSelectReservar",""],["pTemplate","footer"],["optionLabel","nombre","placeholder","Buscar Tarifa","optionLabel","nombre","emptyMessage","Tarifa no encontrada","display","chip",1,"multiselect-custom",3,"options","onChange"],["clienteMultiSelectTarifa",""],[3,"header","toggleable","collapsed"],["pButton","","pRipple","","type","button","icon","pi pi-plus",1,"p-button-rounded",3,"click"],["style","margin-top: 5%;","class","grid formgrid",3,"formGroup",4,"ngFor","ngForOf"],["locale","localeSettingsSpanish","inputId","fechaInicio","showTime","true","dateFormat","dd/mm/yy",1,"ng-dirty",3,"minDate","ngModel","showIcon","ngModelChange","onSelect"],["locale","localeSettingsSpanish","inputId","fechaFinal","showTime","true","dateFormat","dd/mm/yy",1,"ng-dirty",3,"minDate","ngModel","showIcon","ngModelChange","onSelect"],[3,"formGroup"],["formControlName","descripcionReserva","pInputTextarea","","rows","3","cols","20",3,"input"],[2,"width","20%"],["pButton","","pRipple","","label","Crear Reserva","showTime","true","icon","pi pi-calendar-times","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl",3,"disabled","click"],[1,"flex","align-items-center"],[1,"ml-2"],["pButton","","pRipple","","label","Crear nuevo cliente","type","button","icon","pi pi-plus",1,"w-full","bg-blue","boder-blue","mb-5","border-round-3xl",3,"click"],[1,"padding",3,"icon","value"],[1,"grid","formgrid",2,"margin-top","5%",3,"formGroup"],[1,"col-12","mb-2","lg:col-5","lg:mb-0"],["for","monto"],["type","number","id","monto","formControlName","monto","pInputText","","placeholder","Valor",3,"input"],["htmlFor","medioPago"],["formControlName","medio_pago","id","medioPago","optionLabel","nombre","placeholder","Seleccione una opci\xf3n",3,"options"],[1,"col-12","mb-2","lg:col-2","lg:mb-0"],["htmlFor","opciones"],["id","opciones","icon","pi pi-trash","severity","danger",3,"click"],[2,"color","red"],["severity","error","text","La fecha final es mayor a la fecha inicial",1,"padding"],["header","Ingresar ",3,"visible","modal","draggable","resizable","visibleChange"],["clienteMultiSelectOcupar",""],["tarifaMultiSelectOcupar",""],["header","Abonos",3,"toggleable","collapsed"],["formControlName","descripcionReserva","pInputTextarea","","rows","3","cols","20",2,"resize","none",3,"input"],["severity","error","class","padding","text","El abono es mayor a la cantidad agregada",4,"ngIf"],["severity","error","class","padding","text","El total a reservar debe ser mayor a 0",4,"ngIf"],["severity","error","class","padding","text","La tarifa es obligatoria",4,"ngIf"],["pButton","","pRipple","","label","Crear Ingreso","icon","pi pi-calendar-times","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl",3,"disabled","click"],["severity","error","text","El abono es mayor a la cantidad agregada",1,"padding"],["severity","error","text","El total a reservar debe ser mayor a 0",1,"padding"],["severity","error","text","La tarifa es obligatoria",1,"padding"],[3,"vieneDeHabitaciones","clienteCreado"],["clientes",""]],template:function(a,o){1&a&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"div")(3,"p-tag",2),e.NdJ("click",function(){return o.orderar(5)}),e.qZA(),e.TgZ(4,"p-tag",3),e.NdJ("click",function(){return o.orderar(3)}),e.qZA(),e.TgZ(5,"p-tag",4),e.NdJ("click",function(){return o.orderar(4)}),e.qZA(),e.TgZ(6,"p-tag",5),e.NdJ("click",function(){return o.orderar(6)}),e.qZA(),e.TgZ(7,"p-tag",6),e.NdJ("click",function(){return o.orderar(2)}),e.qZA(),e.TgZ(8,"p-tag",7),e.NdJ("click",function(){return o.orderar(7)}),e.qZA(),e.TgZ(9,"p-tag",8),e.NdJ("click",function(){return o.orderar(0)}),e.qZA()(),e.TgZ(10,"h5"),e._uU(11,"Habitaciones"),e.qZA(),e.YNc(12,tt,3,2,"p-accordion",9),e.qZA(),e.YNc(13,pt,85,28,"p-dialog",10),e.TgZ(14,"p-dialog",11),e.NdJ("visibleChange",function(s){return o.visibleModalLimpieza=s}),e.TgZ(15,"div",12)(16,"h5"),e._uU(17,"Completa el formulario"),e.qZA(),e.TgZ(18,"form",13),e.NdJ("ngSubmit",function(){return o.submitAsignarLimpieza()}),e.TgZ(19,"div",14)(20,"div",15)(21,"p-multiSelect",16),e.YNc(22,ut,3,1,"ng-template",17),e.qZA(),e.YNc(23,ht,2,0,"div",18),e.qZA(),e.TgZ(24,"div",19)(25,"label"),e._uU(26,"Fecha Inicio "),e.qZA(),e.TgZ(27,"p-calendar",20),e.NdJ("onSelect",function(s){return o.changeFechaLimpieza(s)}),e.qZA()(),e.TgZ(28,"div",19)(29,"label"),e._uU(30,"Fecha Final"),e.qZA(),e.TgZ(31,"p-calendar",21),e.NdJ("onSelect",function(s){return o.changeFechaLimpieza(s)}),e.qZA()(),e.TgZ(32,"div",15)(33,"label"),e._uU(34,"Descripcion"),e.qZA(),e._UZ(35,"textarea",22),e.YNc(36,mt,2,0,"div",18),e.qZA(),e.YNc(37,gt,1,0,"p-message",23),e.TgZ(38,"div",15),e._UZ(39,"button",24),e.qZA()(),e._UZ(40,"br"),e.qZA()()(),e.TgZ(41,"p-dialog",25),e.NdJ("visibleChange",function(s){return o.visibleModalMantenimiento=s}),e.TgZ(42,"div",12)(43,"form",13),e.NdJ("ngSubmit",function(){return o.submitAsignarMantenimiento()}),e.TgZ(44,"div",14)(45,"div",15)(46,"p-multiSelect",16),e.YNc(47,_t,3,1,"ng-template",17),e.qZA(),e.YNc(48,ft,2,0,"div",18),e.qZA(),e.TgZ(49,"div",19)(50,"label"),e._uU(51,"Fecha Inicio "),e.qZA(),e.TgZ(52,"p-calendar",26),e.NdJ("onSelect",function(){return o.changeFechaMantenimiento()}),e.qZA()(),e.TgZ(53,"div",19)(54,"label"),e._uU(55,"Fecha Final"),e.qZA(),e.TgZ(56,"p-calendar",27),e.NdJ("onSelect",function(){return o.changeFechaMantenimiento()}),e.qZA()(),e.TgZ(57,"div",15)(58,"label"),e._uU(59,"Descripcion"),e.qZA(),e._UZ(60,"textarea",22),e.YNc(61,bt,2,0,"div",18),e.qZA(),e.YNc(62,vt,1,0,"p-message",23),e.TgZ(63,"div",15),e._UZ(64,"button",28),e.qZA()(),e._UZ(65,"br"),e.qZA()()(),e.YNc(66,Mt,80,24,"p-dialog",29),e.YNc(67,Ft,2,1,"app-clientes",30)),2&a&&(e.xp6(12),e.Q6J("ngForOf",o.dataRoom),e.xp6(1),e.Q6J("ngIf",!o.creandoCliente),e.xp6(1),e.Akn(e.DdM(32,B)),e.Q6J("visible",o.visibleModalLimpieza)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(4),e.Q6J("formGroup",o.formLimpieza),e.xp6(3),e.Q6J("options",o.empleadosData),e.xp6(2),e.Q6J("ngIf",o.formLimpieza.get("empleado").hasError("required")),e.xp6(4),e.Q6J("showIcon",!0),e.xp6(4),e.Q6J("showIcon",!0),e.xp6(5),e.Q6J("ngIf",o.formLimpieza.get("descripcion").hasError("required")),e.xp6(1),e.Q6J("ngIf",o.formLimpieza.get("fechaInicio").value>o.formLimpieza.get("fechaFinal").value),e.xp6(2),e.Q6J("disabled",o.formLimpieza.invalid||o.disableButtonLimpieza),e.xp6(2),e.Akn(e.DdM(33,B)),e.Q6J("visible",o.visibleModalMantenimiento)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(2),e.Q6J("formGroup",o.formMantenimiento),e.xp6(3),e.Q6J("options",o.empleadosData),e.xp6(2),e.Q6J("ngIf",o.formMantenimiento.get("empleado").hasError("required")),e.xp6(4),e.Q6J("showIcon",!0),e.xp6(4),e.Q6J("showIcon",!0),e.xp6(5),e.Q6J("ngIf",o.formMantenimiento.get("descripcion").hasError("required")),e.xp6(1),e.Q6J("ngIf",o.formMantenimiento.get("fechaInicio").value>o.formMantenimiento.get("fechaFinal").value),e.xp6(2),e.Q6J("disabled",o.formMantenimiento.invalid||o.disableButtonMantenimiento),e.xp6(2),e.Q6J("ngIf",!o.creandoCliente),e.xp6(1),e.Q6J("ngIf",o.creandoCliente))},dependencies:[k.s,_.jx,m.sg,m.O5,v.Hq,v.zx,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.On,U.v2,T.H,x.o,R.g,C.Lt,_e,y.V,l.sg,l.u,Z.Ro,L,Q,D.V,P.f,q.NU,S.q,He.R],styles:[".rooms[_ngcontent-%COMP%]{cursor:pointer}.tag[_ngcontent-%COMP%]{padding:.5%;display:flex;text-align:center}.nomeRoome[_ngcontent-%COMP%]{text-align:center}.padding[_ngcontent-%COMP%]{padding:1%}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #dddddd;text-align:left;padding:8px}th[_ngcontent-%COMP%]{background-color:#f2f2f2}.habilitarCursor[_ngcontent-%COMP%]{cursor:pointer}"]})}return i})();var wt=c(4444),kt=c(6401),z=c(3173),G=c(5609);function Ut(i,r){1&i&&e._UZ(0,"p-message",51)}function Jt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",52)(1,"button",53),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.addTarifa())}),e.qZA()()}}function Nt(i,r){1&i&&(e.TgZ(0,"th"),e._uU(1,"Opcion"),e.qZA())}function Ht(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"td")(1,"p-button",54),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,n=e.oxw();return e.KtG(n.confirmDeleteTarifa(o.id))}),e.qZA()()}}function Et(i,r){if(1&i&&(e.TgZ(0,"tbody")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"number"),e.qZA(),e.YNc(6,Ht,2,0,"td",22),e.qZA()),2&i){const t=r.$implicit,a=e.oxw();e.xp6(2),e.hij(" ",null==t?null:t.nombre," "),e.xp6(2),e.hij(" ",e.lcZ(5,3,null==t?null:t.valor)," "),e.xp6(2),e.Q6J("ngIf",2==(null==a.estadoHabitacion?null:a.estadoHabitacion.estado_id))}}function Qt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",52)(1,"button",53),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.addProductos())}),e.qZA()()}}function Lt(i,r){1&i&&(e.TgZ(0,"th"),e._uU(1,"Opcion"),e.qZA())}function Yt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"td")(1,"p-button",54),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,n=e.oxw();return e.KtG(n.confirmDeleteProductos(o.identificador))}),e.qZA()()}}function Bt(i,r){if(1&i&&(e.TgZ(0,"tbody")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"number"),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.ALo(8,"number"),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.YNc(11,Yt,2,0,"td",22),e.qZA()),2&i){const t=r.$implicit,a=e.oxw();e.xp6(2),e.hij(" ",null==t?null:t.nombre," "),e.xp6(2),e.hij(" ",e.lcZ(5,5,null==t?null:t.valor)," "),e.xp6(3),e.hij(" ",e.lcZ(8,7,null==t?null:t.valorImpuesto)," "),e.xp6(3),e.hij(" ",null==t?null:t.cantidad," "),e.xp6(1),e.Q6J("ngIf",2==(null==a.estadoHabitacion?null:a.estadoHabitacion.estado_id))}}function zt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",52)(1,"button",53),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.addRecetas())}),e.qZA()()}}function Gt(i,r){1&i&&(e.TgZ(0,"th"),e._uU(1,"Opcion"),e.qZA())}function jt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"td")(1,"p-button",54),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,n=e.oxw();return e.KtG(n.confirmDeleteRecetas(o.identificador))}),e.qZA()()}}function Vt(i,r){if(1&i&&(e.TgZ(0,"tbody")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"number"),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.ALo(8,"number"),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.YNc(11,jt,2,0,"td",22),e.qZA()),2&i){const t=r.$implicit,a=e.oxw();e.xp6(2),e.hij(" ",null==t?null:t.nombre," "),e.xp6(2),e.hij(" ",e.lcZ(5,5,null==t?null:t.valor)," "),e.xp6(3),e.hij(" ",e.lcZ(8,7,null==t?null:t.valorImpuesto)," "),e.xp6(3),e.hij(" ",null==t?null:t.cantidad," "),e.xp6(1),e.Q6J("ngIf",2==(null==a.estadoHabitacion?null:a.estadoHabitacion.estado_id))}}function $t(i,r){1&i&&e._UZ(0,"div",52)}function Kt(i,r){1&i&&(e.TgZ(0,"th"),e._uU(1,"Opcion"),e.qZA())}function Xt(i,r){1&i&&e._UZ(0,"td")}function Wt(i,r){if(1&i&&(e.TgZ(0,"tbody")(1,"td"),e._uU(2),e.ALo(3,"number"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.YNc(6,Xt,1,0,"td",22),e.qZA()),2&i){const t=r.$implicit,a=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,3,null==t?null:t.valor)," "),e.xp6(3),e.hij(" ",null==t?null:t.nombre," "),e.xp6(1),e.Q6J("ngIf",2==(null==a.estadoHabitacion?null:a.estadoHabitacion.estado_id))}}function eo(i,r){1&i&&(e.TgZ(0,"div")(1,"h5"),e._uU(2,"Hora"),e.qZA()())}function to(i,r){1&i&&(e.TgZ(0,"div")(1,"h5"),e._uU(2,"Noche"),e.qZA()())}function oo(i,r){if(1&i&&(e.TgZ(0,"div",55)(1,"span",56),e._uU(2),e._UZ(3,"p-tag",57),e.YNc(4,eo,3,0,"div",22),e.YNc(5,to,3,0,"div",22),e.qZA()()),2&i){const t=r.$implicit;e.xp6(2),e.hij(" ",t.nombre," "),e.xp6(1),e.s9C("icon",t.icon),e.s9C("value",t.valor),e.xp6(1),e.Q6J("ngIf",2==t.tipo),e.xp6(1),e.Q6J("ngIf",1==t.tipo)}}function ao(i,r){if(1&i&&(e.TgZ(0,"div",55)(1,"span",56),e._uU(2),e.qZA(),e._UZ(3,"p-tag",58),e.qZA()),2&i){const t=r.$implicit;e.xp6(2),e.Oqu(t.nombre),e.xp6(1),e.s9C("value",t.valor)}}function io(i,r){1&i&&(e.TgZ(0,"small"),e._uU(1,"Producto es requerido."),e.qZA())}function no(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,io,2,0,"small",22),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formProducto.get("producto_id").hasError("required"))}}function ro(i,r){if(1&i&&(e.TgZ(0,"div",55)(1,"span",56),e._uU(2),e.qZA(),e._UZ(3,"p-tag",58),e.qZA()),2&i){const t=r.$implicit;e.xp6(2),e.Oqu(t.nombre),e.xp6(1),e.s9C("value",t.precio)}}function so(i,r){if(1&i&&(e.TgZ(0,"div",55)(1,"span",56),e._uU(2),e.qZA()()),2&i){const t=r.$implicit;e.xp6(2),e.Oqu(t.nombre)}}function lo(i,r){1&i&&(e.TgZ(0,"div",70),e._uU(1,"Nombre es requerido."),e.qZA())}function co(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",59)(1,"div",60)(2,"label",61),e._uU(3,"Monto"),e.qZA(),e._UZ(4,"br"),e.TgZ(5,"input",62),e.NdJ("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.changeMedioPagoFactura())}),e.qZA(),e._UZ(6,"br"),e.YNc(7,lo,2,0,"div",63),e.qZA(),e.TgZ(8,"div",64)(9,"label",65),e._uU(10,"Medio Pago"),e.qZA(),e._UZ(11,"br")(12,"p-dropdown",66),e.qZA(),e.TgZ(13,"div",67),e._UZ(14,"label",68)(15,"br"),e.TgZ(16,"p-button",69),e.NdJ("click",function(){const n=e.CHM(t).index,s=e.oxw();return e.KtG(s.eliminarMedioPagoAbono(n))}),e.qZA()()()}if(2&i){const t=r.$implicit,a=e.oxw();e.Q6J("formGroup",t),e.xp6(7),e.Q6J("ngIf",null==t||null==t.controls.monto||null==t.controls.monto.errors?null:t.controls.monto.errors.required),e.xp6(5),e.Q6J("options",a.dataMetodosPago)}}function po(i,r){1&i&&e._UZ(0,"p-message",71)}const A=function(){return{width:"50vw",height:"40vw"}},uo=function(){return{width:"40vw",height:"40vw"}};let ho=(()=>{class i{constructor(t,a,o,n,s,p,u,h){this.dashboardRoomsService=t,this.FB=a,this.spinner=o,this.datePipe=n,this.router=s,this.route=p,this.appComponent=u,this.layoutService=h,this.dataTarifa=[],this.dataAbonos=[],this.tarifasTotal=0,this.abonosTotal=0,this.items=[],this.totalPagarReserva=0,this.subtotaltotalPagarReserva=0,this.totalProductos=0,this.dataProductos=[],this.dataReceta=[],this.tarifaVisible=!1,this.productoVisible=!1,this.abonoVisible=!1,this.recetaVisible=!1,this.allTarifas=[],this.allTarifasDefault=[],this.productoData=[],this.totalFactura=0,this.totalImpuestos=0,this.impuestosData=[],this.detalleId=0,this.hotelId=0,this.clienteId=0,this.impuestos_save=[],this.totalRecetas=0,this.recetasData=[],this.montoSinRedondear=0,this.formFacturacionMediosPago=this.FB.array([]),this.baseUrl=wt.D.url,this.token=u.getToken()}ngOnInit(){this.spinner.hide(),this.dataRoomDetail=[],this.habitacionId=parseFloat(this.route.snapshot.paramMap.get("idHabitacion")),this.buildForm(),this.getRoomOcupar()}cargarItems(){this.items=[{label:"Facturar",icon:"pi pi-dollar",disabled:this.disableFactura,command:t=>this.opcionSelect(t,"facturar")},{label:"Salida (Check out)",disabled:2!=this.estadoHabitacion?.estado_id,icon:"pi pi-lock-open",command:t=>this.opcionSelect(t,"desocupar")}]}buildForm(){this.form=this.FB.group({nombreHabitacion:[this.dataRoomDetail?.detalleHabitacion?.habitacion?.nombre,[]],descripcion:[this.dataRoomDetail?.detalleHabitacion?.descripcion,[]],nombreCliente:[this.dataRoomDetail?.detalleHabitacion?.cliente?.nombres+" "+this.dataRoomDetail?.detalleHabitacion?.cliente?.apellidos,[]],desde:[this.dataRoomDetail?.detalleHabitacion?.checkin,[]],hasta:[this.dataRoomDetail?.detalleHabitacion?.checkout,[]]}),this.formTarifa=this.FB.group({tarifa_id:[this.allTarifasDefault,[l.kI.required]]}),this.formProducto=this.FB.group({producto_id:[null,[l.kI.required]],cantidad:[1,[l.kI.required,l.kI.min(1)]]}),this.formMetodoPago=this.FB.group({metodo_pago_id:[null,[l.kI.required]],valor:[null,[l.kI.required,l.kI.min(1)]]}),this.formReceta=this.FB.group({receta_id:[null,[l.kI.required]],cantidad:[1,[l.kI.required,l.kI.min(1)]]});let t=this.FB.group({monto:["",[l.kI.required,l.kI.min(0)]],medio_pago:[this.dataMetodosPago?this.dataMetodosPago[0]:null,[l.kI.required,l.kI.min(1)]]});this.formFacturacionMediosPago=this.FB.array([]),this.formFacturacionMediosPago.push(t),this.formFacturar=this.FB.group({isFacturaElectronica:[""]}),this.form.disable()}getRoomOcupar(){let t={habitacion_id:this.habitacionId};this.spinner.show(),this.dashboardRoomsService.getOcuparHabitacion(t).subscribe(a=>{this.spinner.hide(),this.dataRoomDetail=a,this.estadoHabitacion=this.dataRoomDetail.estadoHabitacion,this.impuestos=this.dataRoomDetail.impuesto,this.recetasData=this.dataRoomDetail.recetas,console.log(this.recetasData),this.allTarifasDefault=[],this.dataRoomDetail.tarifasHabitacion.forEach(o=>{this.dataTarifa.push({valor:o.valor,nombre:o.tarifa?.nombre,tipo:o.tipo,id:o.item_id})}),this.dataRoomDetail.recetasHabitacion.forEach(o=>{let n="receta"+this.generarIdAleatorio(),s=0;o?.recetas?.impuestos.forEach(p=>{let u=parseInt(p?.impuesto?.porcentaje)*(parseFloat(o?.recetas.precio)*parseInt(o?.cantidad))/100;s+=u,this.impuestos_save.push({valor:u,porcentaje:p?.impuesto?.porcentaje,cantidad:o?.cantidad,id:p?.impuesto.id,item_id:o?.item_id,tipo:"4",identificador:n})}),this.dataReceta.push({nombre:o?.recetas?.nombre,valor:o?.recetas?.precio,valorImpuesto:s+parseFloat(o?.recetas?.precio),cantidad:o?.cantidad,id:o?.item_id,identificador:n,impuestos:o.recetas?.impuestos}),this.totalRecetas=this.totalRecetas+s+parseFloat(o?.recetas?.precio)}),this.dataMetodosPago=this.dataRoomDetail.metodos_pago,this.dataRoomDetail.productosHabitacion.forEach(o=>{let n=0,s="productos"+this.generarIdAleatorio();o.productos.impuestos.forEach(p=>{let u=parseInt(p.impuesto.porcentaje)*parseFloat(o?.valor)/100;n+=u,this.impuestos_save.push({valor:u,porcentaje:p.impuesto.porcentaje,cantidad:o?.cantidad,id:p.impuesto.id,item_id:o?.item_id,tipo:"1",identificador:s})}),this.dataProductos.push({nombre:o?.productos.nombre,valor:o?.valor,valorImpuesto:n+parseFloat(o?.valor),cantidad:o?.cantidad,id:o?.item_id,identificador:s,tipoProducto:o?.productos.tipo_producto,impuestos:o.productos.impuestos})}),this.dataRoomDetail.abonoHabitacion.forEach(o=>{this.dataAbonos.push({valor:o.valor,nombre:o.metodo_pago.nombre,id:o.id,metodo_pago_id:o?.metodo_pago.id,identificador:"abonos"+this.generarIdAleatorio()})}),this.dataRoomDetail.tarifas.forEach(o=>{this.allTarifas.push({valor:o.valor,nombre:o.nombre,tipo:o.tipo,id:o.id}),this.dataRoomDetail.tarifasHabitacion.filter(n=>n?.tarifa?.id==o.id).length>0&&this.allTarifasDefault.push({valor:o.valor,nombre:o.nombre,tipo:o.tipo,id:o.id})}),this.dataRoomDetail.productos.forEach(o=>{this.productoData.push({id:o.id,nombre:o.nombre,valor:o.precio,tipo:o.tipo_producto,impuestos:o.impuestos})}),this.detalleId=this.dataRoomDetail?.detalleHabitacion.id,this.hotelId=this.dataRoomDetail?.detalleHabitacion.hotel_id,this.clienteId=this.dataRoomDetail?.detalleHabitacion.cliente?.id,this.buildForm(),this.recalcular(),this.cargarItems()})}recalcular(){console.log("RECALCULANDO"),this.tarifasTotal=0,this.totalProductos=0,this.abonosTotal=0,this.totalPagarReserva=0,this.totalImpuestos=0,this.totalRecetas=0,this.dataTarifa.forEach(o=>{this.tarifasTotal=this.tarifasTotal+parseFloat(o.valor)}),this.dataProductos.forEach(o=>{let n=0;n=parseFloat(o?.valorImpuesto),this.totalImpuestos=this.totalImpuestos+n-o?.valor,this.totalProductos=this.totalProductos+n}),this.dataReceta.forEach(o=>{let n=parseFloat(o?.valorImpuesto);this.totalRecetas=this.totalRecetas+n,this.totalImpuestos=this.totalImpuestos+n-o?.valor}),this.dataAbonos.forEach(o=>{this.abonosTotal=this.abonosTotal+parseFloat(o.valor)}),this.totalPagarReserva=this.tarifasTotal+this.totalProductos+this.totalRecetas-this.abonosTotal,this.montoSinRedondear=this.totalPagarReserva,this.totalPagarReserva=function a(o){let n=o%50,s=0;return n>0&&(s=50-n),o+s}(this.totalPagarReserva),this.excedente=this.totalPagarReserva-this.montoSinRedondear,this.subtotaltotalPagarReserva=this.tarifasTotal+this.totalProductos+this.totalRecetas-this.totalImpuestos,this.validaciones()}opcionSelect(t,a){"desocupar"==a&&this.desocuparHabitacion(),"facturar"==a&&this.facturacion()}confirmDeleteAbono(t){this.dataAbonos=this.dataAbonos.filter(a=>a.identificador!=t),this.recalcular()}confirmDeleteTarifa(t){this.dataTarifa=this.dataTarifa.filter(a=>a.id!=t),this.allTarifasDefault=this.dataTarifa,this.buildForm(),this.recalcular()}confirmDeleteProductos(t){this.dataProductos=this.dataProductos.filter(a=>a.identificador!=t),this.impuestos_save=this.impuestos_save.filter(a=>a.identificador!=t),this.recalcular()}confirmDeleteRecetas(t){this.dataReceta=this.dataReceta.filter(a=>a.identificador!=t),this.impuestos_save=this.impuestos_save.filter(a=>a.identificador!=t),this.recalcular()}addTarifa(){this.tarifaVisible=!0}addProductos(){this.productoVisible=!0,this.formProducto.reset(),this.recalcular()}addAbonos(){this.abonoVisible=!0}submitTarifa(){this.recargarTablaTarifa(),this.tarifaVisible=!1,this.recalcular()}submitProducto(){this.recargarTablaProducto(),this.productoVisible=!1,this.recalcular()}submitReceta(){this.recetaVisible=!1,this.recargarTablaReceta(),this.recalcular()}recargarTablaReceta(){let t=this.formReceta.get("receta_id")?.value,a=this.formReceta.get("cantidad")?.value,o="receta"+this.generarIdAleatorio(),n=0;t.impuestos.forEach(s=>{let p=parseInt(s.impuesto.porcentaje)*(parseFloat(t.precio)*parseInt(a))/100;n+=p,this.impuestos_save.push({valor:p,porcentaje:s?.impuesto?.porcentaje,cantidad:a,id:s?.impuesto.id,item_id:t.id,tipo:"4",identificador:o})}),this.dataReceta.push({nombre:t.nombre,valor:t.precio*a,valorImpuesto:t.precio*a+n,cantidad:a,id:t.id,identificador:o,impuestos:t.impuestos})}recargarTablaProducto(){let t=this.formProducto.get("producto_id")?.value,a=this.formProducto.get("cantidad").value,o=0,n=t.tipo,s="productos"+this.generarIdAleatorio();t.impuestos.forEach(p=>{let u=parseInt(p.impuesto.porcentaje)*(parseFloat(t.valor)*parseInt(a))/100;o+=u,this.impuestos_save.push({valor:u,porcentaje:p.impuesto.porcentaje,cantidad:a,id:p.impuesto.id,item_id:t.id,tipo:"1",identificador:s})}),this.dataProductos.push({nombre:t.nombre,valor:t.valor*a,valorImpuesto:t.valor*a+o,cantidad:a,tipoProducto:n,id:t.id,identificador:s}),this.formProducto.reset()}recargarTablaTarifa(){let t=this.formTarifa.get("tarifa_id").value;this.dataTarifa=[],this.allTarifasDefault=[],t.forEach(a=>{this.dataTarifa.push({valor:a.valor,nombre:a.nombre,tipo:a.tipo,id:a.id}),this.allTarifasDefault.push({valor:a.valor,nombre:a.nombre,tipo:a.tipo,id:a.id})})}recargarTablaAbonos(){let t=this.formMetodoPago.get("metodo_pago_id").value[0],a=parseFloat(this.formMetodoPago.get("valor").value);this.dataAbonos.push({valor:a,nombre:t.nombre,id:t.id,metodo_pago_id:t.id,identificador:"abonos"+this.generarIdAleatorio()})}submitAbono(){this.abonoVisible=!1,this.recargarTablaAbonos(),this.recalcular()}submitAll(){2==this.estadoHabitacion?.estado_id&&this.envirRoomDetalle({tarifas:this.dataTarifa,productos:this.dataProductos,abonos:this.dataAbonos,detalleId:this.detalleId,hotelId:this.hotelId,clienteId:this.clienteId,receta:this.dataReceta,habitacion_id:this.habitacionId})}envirRoomDetalle(t){this.spinner.show(),this.dashboardRoomsService.saveDetalleHabitacion(t).subscribe(a=>{this.spinner.hide();let o=a;"success"==o.code?(d().fire({title:"Exito",text:o.msm,icon:"success"}),this.layoutService.reloadComponent(),this.router.navigate(["dashboard/dashboardRooms"])):"warning"==o.code?d().fire({title:"Advertencia",text:o.msm,icon:"warning"}):d().fire({title:"Error",text:"Error al anular.",icon:"error"})})}envirRoomDetalleFactura(t){this.spinner.show(),this.dashboardRoomsService.saveDetalleHabitacion(t).subscribe(a=>{if("warning"==a.code)d().fire({title:"Advertencia",text:a.msm,icon:"warning"}),this.spinner.hide(),this.facturarVisible=!1;else{let o=this.formFacturar.get("isFacturaElectronica").value;this.enviarFacturacion({detalle_id:this.detalleId,metodos_pagos:this.formFacturacionMediosPago.value,concepto:"Factura Habitacion",hotel_id:this.hotelId,cliente_id:this.clienteId,porcentaje_descuento:0,subtotal:this.subtotaltotalPagarReserva,total:this.totalPagarReserva+this.abonosTotal,impuesto_total:this.totalImpuestos,detalleId:this.detalleId,hotelId:this.hotelId,clienteId:this.clienteId,receta:this.dataReceta,impuesto:this.impuestos_save,habitacion_id:this.habitacionId,is_factura_electronica:o})}})}desocuparHabitacion(){let t={id_habitacion:this.habitacionId};d().fire({title:"\xbfEstas seguro que deseas Salir (Check out) de esta habitacion?",text:"",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, Confirmar",cancelButtonText:"Cancelar"}).then(a=>{a.isConfirmed&&(this.spinner.show(),this.enviarDesocupar(t))})}facturacion(){this.facturarVisible=!0}enviarDesocupar(t){this.dashboardRoomsService.desocupar(t).subscribe(a=>{let o=a;this.spinner.hide(),"success"==o.code?(d().fire({title:"Exito",text:"Anulacion Exitosa.",icon:"success"}),this.router.navigate(["dashboard/dashboardRooms"])):"warning"==o.code?d().fire({title:"Advertencia",text:o.error,icon:"warning"}):d().fire({title:"Error",text:"Error al anular.",icon:"error"})},a=>{console.log("Error: ",a)})}validaciones(){this.disableFactura=!1,this.abonosTotal>this.tarifasTotal&&(this.disableFactura=!0,this.cargarItems())}eliminarMedioPagoAbono(t){this.formFacturacionMediosPago.removeAt(t),this.changeMedioPagoFactura()}agregarAbonoOcupar(){let t=this.FB.group({monto:["",[l.kI.required,l.kI.min(1)]],medio_pago:[this.dataMetodosPago[0],[l.kI.required,l.kI.min(0)]]});this.formFacturacionMediosPago.push(t)}changeMedioPagoFactura(){this.totalFactura=0,this.formFacturacionMediosPago.value.forEach(t=>{this.totalFactura=this.totalFactura+parseFloat(t.monto)})}submitFactura(){this.envirRoomDetalleFactura({tarifas:this.dataTarifa,productos:this.dataProductos,abonos:this.dataAbonos,detalleId:this.detalleId,hotelId:this.hotelId,clienteId:this.clienteId,receta:this.dataReceta,impuesto:this.impuestos_save,habitacion_id:this.habitacionId})}enviarFacturacion(t){this.spinner.show(),this.dashboardRoomsService.facturar(t).subscribe(a=>{let o=a;if(this.facturarVisible=!1,this.spinner.hide(),console.log(o),"success"==o.code){this.layoutService.reloadComponent(),d().fire({title:"Exito",text:o.msm,icon:"success"});let n=o.factura,s=n.id;console.log(s),console.log(n),console.log(o),window.open(this.baseUrl+"/facturaRemisionPdf/"+s+"?token="+this.token,"_blank"),this.router.navigate(["dashboard/dashboardRooms"])}else"warning"==o.code?d().fire({title:"Advertencia",text:o.msm,icon:"warning"}):d().fire({title:"Error",text:"Error al Facturar.",icon:"error"})},a=>{console.log("Error: ",a)})}addRecetas(){this.recetaVisible=!0}generarIdAleatorio(){let o="";for(let n=0;n<10;n++)o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return o}static#e=this.\u0275fac=function(a){return new(a||i)(e.Y36(I.y),e.Y36(l.qu),e.Y36(Z.t2),e.Y36(m.uU),e.Y36(b.F0),e.Y36(b.gz),e.Y36(kt.y),e.Y36(w.P))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-dashboard-rooms-ocupar"]],decls:224,vars:100,consts:[["type","ball-scale-multiple","fullScreen","true"],[1,"surface-section","px-4","py-5","md:px-6","lg:px-8"],[1,"flex","align-items-center","flex-column","lg:flex-row"],["pButton","","pRipple","","label","","icon","pi pi-arrow-left",1,"p-button-outlined","mr-4",3,"routerLink"],[1,"font-medium","text-3xl","text-900"],[1,"card","mt-3"],[1,"p-toolbar-group-left","flex","flex-wrap"],[1,"p-toolbar-group-right"],[3,"label","disabled","model","onClick"],[3,"formGroup"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-3"],["type","text","formControlName","nombreHabitacion","pInputText","",1,"w-full","mb-3","border-round-3xl"],["type","text","formControlName","desde","pInputText","",1,"w-full","mb-3","border-round-3xl"],["type","text","formControlName","hasta","pInputText","",1,"w-full","mb-3","border-round-3xl"],["type","text","formControlName","nombreCliente","pInputText","",1,"w-full","mb-3","border-round-3xl"],[1,"field","col-12","md:col-12"],["formControlName","descripcion","pInputTextarea","","rows","3","cols","20"],["severity","error","class","padding","text","El total de abonos no puede ser mallor al total a pagar",4,"ngIf"],[1,"card","field","col-12","md:col-12"],[2,"width","20%"],["class","ordenAdd",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],["header","Agregar Tarifa",3,"visible","modal","draggable","resizable","visibleChange"],[1,"col-12"],[3,"formGroup","ngSubmit"],["formControlName","tarifa_id","optionLabel","nombre","placeholder","Buscar Tarifa","optionLabel","nombre","emptyMessage","Tarifa no encontrada","display","chip",1,"multiselect-custom",3,"options"],["pTemplate","item"],["pButton","","pRipple","","label","Agregar","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl",3,"disabled"],["header","Agregar Producto",3,"visible","modal","draggable","resizable","visibleChange"],[1,"field","col-12","md:col-6"],["for","producto_id"],["formControlName","producto_id","limoptionLabel","nombre","placeholder","Buscar Producto/Servicio","optionLabel","nombre","emptyMessage","Producto no encontrado","display","chip",1,"multiselect-custom",3,"options"],["type","number","formControlName","cantidad","pInputText","",1,"w-full","mb-3","border-round-3xl"],["header","Agregar Receta",3,"visible","modal","draggable","resizable","visibleChange"],["for","cliente"],["formControlName","receta_id","limoptionLabel","nombre","placeholder","Buscar Receta","optionLabel","nombre","emptyMessage","Producto no encontrado","display","chip",1,"multiselect-custom",3,"options"],["header","Abonos ",3,"visible","modal","draggable","resizable","visibleChange"],["formControlName","metodo_pago_id","selectionLimit","1","limoptionLabel","nombre","placeholder","Metodo pago","optionLabel","nombre","emptyMessage","Producto no encontrado","display","chip",1,"multiselect-custom",3,"options"],["type","number","formControlName","valor","pInputText","",1,"w-full","mb-3","border-round-3xl"],["header","Facturar ",3,"visible","modal","draggable","resizable","visibleChange"],["pButton","","pRipple","","type","button","icon","pi pi-plus",1,"p-button-rounded",3,"click"],[2,"display","flex"],[2,"text-align","left"],["severity","info","text","Generar Factura electronica",1,"padding"],[2,"margin-left","20%"],["formControlName","isFacturaElectronica"],["class","grid formgrid",3,"formGroup",4,"ngFor","ngForOf"],["severity","info","class","padding","text","El total ingresado no es igual al total a Pagar",4,"ngIf"],["pButton","","pRipple","","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl",3,"label","disabled","click"],["severity","error","text","El total de abonos no puede ser mallor al total a pagar",1,"padding"],[1,"ordenAdd"],["pButton","","pRipple","","icon","pi pi-plus",1,"p-button",3,"click"],["icon","pi pi-trash","severity","danger",3,"click"],[1,"flex","align-items-center"],[1,"ml-2"],[1,"padding",3,"icon","value"],[1,"padding",3,"value"],[1,"grid","formgrid",3,"formGroup"],[1,"col-12","mb-5","lg:col-5","lg:mb-5"],["for","monto"],["type","number","id","monto","formControlName","monto","pInputText","","placeholder","Valor",1,"expandir",3,"input"],["style","color: red;",4,"ngIf"],[1,"col-12","mb-5","lg:col-5","lg:mb-5",2,"width","auto"],["htmlFor","medioPago"],["formControlName","medio_pago","id","medioPago","optionLabel","nombre",1,"expandir",3,"options"],[1,"col-12","mb-2","lg:col-2","lg:mb-5"],["htmlFor","opciones"],["id","opciones","icon","pi pi-trash","severity","danger",3,"click"],[2,"color","red"],["severity","info","text","El total ingresado no es igual al total a Pagar",1,"padding"]],template:function(a,o){1&a&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div"),e._UZ(4,"button",3),e.qZA(),e.TgZ(5,"div")(6,"div",4),e._uU(7,"Detalle Ingreso"),e.qZA()()()(),e.TgZ(8,"div",5)(9,"p-toolbar"),e._UZ(10,"div",6),e.TgZ(11,"div",7)(12,"p-splitButton",8),e.NdJ("onClick",function(){return o.submitAll()}),e.qZA()(),e.TgZ(13,"form",9)(14,"div",10)(15,"div",11)(16,"label"),e._uU(17,"Nombre Habitacion"),e.qZA(),e._UZ(18,"input",12),e.qZA(),e.TgZ(19,"div",11)(20,"label"),e._uU(21," CheckIn "),e.qZA(),e._UZ(22,"input",13),e.qZA(),e.TgZ(23,"div",11)(24,"label"),e._uU(25," CheckOut "),e.qZA(),e._UZ(26,"input",14),e.qZA(),e.TgZ(27,"div",11)(28,"label"),e._uU(29,"Nombre Cliente"),e.qZA(),e._UZ(30,"input",15),e.qZA(),e.TgZ(31,"div",16)(32,"label"),e._uU(33,"Descripcion"),e.qZA(),e._UZ(34,"textarea",17),e.qZA()()(),e.YNc(35,Ut,1,0,"p-message",18),e.qZA()(),e.TgZ(36,"div",19)(37,"table")(38,"tr")(39,"th",20),e._uU(40,"Nombre"),e.qZA(),e.TgZ(41,"th"),e._uU(42,"Valores"),e.qZA(),e.TgZ(43,"th"),e._uU(44,"Detalle"),e.qZA()(),e.TgZ(45,"tr")(46,"th"),e._uU(47," Tarifas"),e.qZA(),e.TgZ(48,"th"),e._uU(49),e.ALo(50,"number"),e.qZA(),e.TgZ(51,"td"),e.YNc(52,Jt,2,0,"div",21),e.TgZ(53,"table")(54,"thead")(55,"th"),e._uU(56,"Nombre"),e.qZA(),e.TgZ(57,"th"),e._uU(58,"Precio"),e.qZA(),e.YNc(59,Nt,2,0,"th",22),e.qZA(),e.YNc(60,Et,7,5,"tbody",23),e.qZA()()(),e.TgZ(61,"tr")(62,"th"),e._uU(63," Productos / Servicios"),e.qZA(),e.TgZ(64,"th"),e._uU(65),e.ALo(66,"number"),e.qZA(),e.TgZ(67,"td"),e.YNc(68,Qt,2,0,"div",21),e.TgZ(69,"table")(70,"thead")(71,"th"),e._uU(72,"Nombre"),e.qZA(),e.TgZ(73,"th"),e._uU(74,"Precio "),e.qZA(),e.TgZ(75,"th"),e._uU(76,"Precio con Impuesto"),e.qZA(),e.TgZ(77,"th"),e._uU(78,"Cantidad"),e.qZA(),e.YNc(79,Lt,2,0,"th",22),e.qZA(),e.YNc(80,Bt,12,9,"tbody",23),e.qZA()()(),e.TgZ(81,"tr")(82,"th"),e._uU(83,"Recetas"),e.qZA(),e.TgZ(84,"th"),e._uU(85),e.ALo(86,"number"),e.qZA(),e.TgZ(87,"td"),e.YNc(88,zt,2,0,"div",21),e.TgZ(89,"table")(90,"thead")(91,"th"),e._uU(92,"Nombre"),e.qZA(),e.TgZ(93,"th"),e._uU(94,"Precio"),e.qZA(),e.TgZ(95,"th"),e._uU(96,"Precio con Impuesto"),e.qZA(),e.TgZ(97,"th"),e._uU(98,"Cantidad"),e.qZA(),e.YNc(99,Gt,2,0,"th",22),e.qZA(),e.YNc(100,Vt,12,9,"tbody",23),e.qZA()()(),e.TgZ(101,"tr")(102,"th"),e._uU(103," Abonos"),e.qZA(),e.TgZ(104,"th"),e._uU(105),e.ALo(106,"number"),e.qZA(),e.TgZ(107,"td"),e.YNc(108,$t,1,0,"div",21),e.TgZ(109,"table")(110,"thead")(111,"th"),e._uU(112,"Monto"),e.qZA(),e.TgZ(113,"th"),e._uU(114,"Metodo Pago"),e.qZA(),e.YNc(115,Kt,2,0,"th",22),e.qZA(),e.YNc(116,Wt,7,5,"tbody",23),e.qZA()()(),e.TgZ(117,"tr")(118,"th"),e._uU(119," Impuestos "),e.qZA(),e.TgZ(120,"th"),e._uU(121),e.ALo(122,"number"),e.qZA(),e._UZ(123,"th"),e.qZA(),e.TgZ(124,"tr")(125,"th"),e._uU(126," Sub Total"),e.qZA(),e.TgZ(127,"th"),e._uU(128),e.ALo(129,"number"),e.qZA(),e._UZ(130,"td"),e.qZA(),e.TgZ(131,"tr")(132,"th"),e._uU(133," Total sin redondear"),e.qZA(),e.TgZ(134,"th"),e._uU(135),e.ALo(136,"number"),e.qZA(),e._UZ(137,"td"),e.qZA(),e.TgZ(138,"tr")(139,"th"),e._uU(140," Excedente"),e.qZA(),e.TgZ(141,"th"),e._uU(142),e.ALo(143,"number"),e.qZA(),e._UZ(144,"td"),e.qZA(),e.TgZ(145,"tr")(146,"th"),e._uU(147," Total redondeado"),e.qZA(),e.TgZ(148,"th"),e._uU(149),e.ALo(150,"number"),e.qZA(),e._UZ(151,"td"),e.qZA()()(),e.TgZ(152,"p-dialog",24),e.NdJ("visibleChange",function(s){return o.tarifaVisible=s}),e.TgZ(153,"div",25)(154,"form",26),e.NdJ("ngSubmit",function(){return o.submitTarifa()}),e.TgZ(155,"div",10)(156,"div",16)(157,"label"),e._uU(158,"Tarifa"),e.qZA(),e.TgZ(159,"p-multiSelect",27),e.YNc(160,oo,6,5,"ng-template",28),e.qZA()(),e.TgZ(161,"div",16),e._UZ(162,"button",29),e.qZA()()()()(),e.TgZ(163,"p-dialog",30),e.NdJ("visibleChange",function(s){return o.productoVisible=s}),e.TgZ(164,"div",25)(165,"form",26),e.NdJ("ngSubmit",function(){return o.submitProducto()}),e.TgZ(166,"div",10)(167,"div",31)(168,"label",32),e._uU(169,"Producto / Servicio"),e.qZA(),e.TgZ(170,"p-dropdown",33),e.YNc(171,ao,4,2,"ng-template",28),e.qZA(),e.YNc(172,no,2,1,"div",22),e.qZA(),e.TgZ(173,"div",31)(174,"label"),e._uU(175,"Cantidad"),e.qZA(),e._UZ(176,"input",34),e.qZA(),e.TgZ(177,"div",16),e._UZ(178,"button",29),e.qZA()()()()(),e.TgZ(179,"p-dialog",35),e.NdJ("visibleChange",function(s){return o.recetaVisible=s}),e.TgZ(180,"div",25)(181,"form",26),e.NdJ("ngSubmit",function(){return o.submitReceta()}),e.TgZ(182,"div",10)(183,"div",31)(184,"label",36),e._uU(185,"Receta"),e.qZA(),e.TgZ(186,"p-dropdown",37),e.YNc(187,ro,4,2,"ng-template",28),e.qZA()(),e.TgZ(188,"div",31)(189,"label"),e._uU(190,"Cantidad"),e.qZA(),e._UZ(191,"input",34),e.qZA(),e.TgZ(192,"div",16),e._UZ(193,"button",29),e.qZA()()()()(),e.TgZ(194,"p-dialog",38),e.NdJ("visibleChange",function(s){return o.abonoVisible=s}),e.TgZ(195,"div",25)(196,"form",26),e.NdJ("ngSubmit",function(){return o.submitAbono()}),e.TgZ(197,"div",10)(198,"div",31)(199,"label",36),e._uU(200,"Metodo Pago"),e.qZA(),e.TgZ(201,"p-multiSelect",39),e.YNc(202,so,3,1,"ng-template",28),e.qZA()(),e.TgZ(203,"div",31)(204,"label"),e._uU(205,"Monto"),e.qZA(),e._UZ(206,"input",40),e.qZA(),e.TgZ(207,"div",16),e._UZ(208,"button",29),e.qZA()()()()(),e.TgZ(209,"p-dialog",41),e.NdJ("visibleChange",function(s){return o.facturarVisible=s}),e.TgZ(210,"button",42),e.NdJ("click",function(){return o.agregarAbonoOcupar()}),e.qZA(),e._UZ(211,"br"),e.TgZ(212,"div",43)(213,"div",44),e._UZ(214,"p-message",45),e.qZA(),e.TgZ(215,"div",46)(216,"form",26),e.NdJ("ngSubmit",function(){return o.submitAbono()}),e._UZ(217,"p-inputSwitch",47),e.qZA()()(),e._UZ(218,"br"),e.YNc(219,co,17,3,"div",48),e.YNc(220,po,1,0,"p-message",49),e.TgZ(221,"div",16)(222,"button",50),e.NdJ("click",function(){return o.submitFactura()}),e.ALo(223,"number"),e.qZA()()()),2&a&&(e.xp6(4),e.Q6J("routerLink","/dashboard/dashboardRooms"),e.xp6(8),e.Q6J("label",2==(null==o.estadoHabitacion?null:o.estadoHabitacion.estado_id)?"Guardar":void 0)("disabled",o.subtotaltotalPagarReserva<=0)("model",o.items),e.xp6(1),e.Q6J("formGroup",o.form),e.xp6(22),e.Q6J("ngIf",o.abonosTotal>o.tarifasTotal),e.xp6(14),e.hij(" $ ",e.lcZ(50,75,o.tarifasTotal)," "),e.xp6(3),e.Q6J("ngIf",2==(null==o.estadoHabitacion?null:o.estadoHabitacion.estado_id)),e.xp6(7),e.Q6J("ngIf",2==(null==o.estadoHabitacion?null:o.estadoHabitacion.estado_id)),e.xp6(1),e.Q6J("ngForOf",o.dataTarifa),e.xp6(5),e.hij(" $ ",e.lcZ(66,77,o.totalProductos)," "),e.xp6(3),e.Q6J("ngIf",2==(null==o.estadoHabitacion?null:o.estadoHabitacion.estado_id)),e.xp6(11),e.Q6J("ngIf",2==(null==o.estadoHabitacion?null:o.estadoHabitacion.estado_id)),e.xp6(1),e.Q6J("ngForOf",o.dataProductos),e.xp6(5),e.hij(" $ ",e.lcZ(86,79,o.totalRecetas)," "),e.xp6(3),e.Q6J("ngIf",2==(null==o.estadoHabitacion?null:o.estadoHabitacion.estado_id)),e.xp6(11),e.Q6J("ngIf",2==(null==o.estadoHabitacion?null:o.estadoHabitacion.estado_id)),e.xp6(1),e.Q6J("ngForOf",o.dataReceta),e.xp6(5),e.hij(" $ ",e.lcZ(106,81,o.abonosTotal)," "),e.xp6(3),e.Q6J("ngIf",2==(null==o.estadoHabitacion?null:o.estadoHabitacion.estado_id)),e.xp6(7),e.Q6J("ngIf",2==(null==o.estadoHabitacion?null:o.estadoHabitacion.estado_id)),e.xp6(1),e.Q6J("ngForOf",o.dataAbonos),e.xp6(5),e.hij(" $ ",e.lcZ(122,83,o.totalImpuestos)," "),e.xp6(7),e.hij(" $ ",o.subtotaltotalPagarReserva<=0?0:e.lcZ(129,85,o.subtotaltotalPagarReserva)," "),e.xp6(7),e.hij(" $ ",e.lcZ(136,87,o.montoSinRedondear)," "),e.xp6(7),e.hij(" $ ",e.lcZ(143,89,o.excedente)," "),e.xp6(7),e.hij(" $ ",e.lcZ(150,91,o.totalPagarReserva)," "),e.xp6(3),e.Akn(e.DdM(95,A)),e.Q6J("visible",o.tarifaVisible)("modal",!0)("draggable",!0)("resizable",!0),e.xp6(2),e.Q6J("formGroup",o.formTarifa),e.xp6(5),e.Q6J("options",o.allTarifas),e.xp6(3),e.Q6J("disabled",o.formTarifa.invalid),e.xp6(1),e.Akn(e.DdM(96,A)),e.Q6J("visible",o.productoVisible)("modal",!0)("draggable",!0)("resizable",!0),e.xp6(2),e.Q6J("formGroup",o.formProducto),e.xp6(5),e.Q6J("options",o.productoData),e.xp6(2),e.Q6J("ngIf",o.formProducto.get("producto_id").errors&&(o.formProducto.get("producto_id").dirty||o.formProducto.get("producto_id").touched)),e.xp6(6),e.Q6J("disabled",o.formProducto.invalid),e.xp6(1),e.Akn(e.DdM(97,A)),e.Q6J("visible",o.recetaVisible)("modal",!0)("draggable",!0)("resizable",!0),e.xp6(2),e.Q6J("formGroup",o.formReceta),e.xp6(5),e.Q6J("options",o.recetasData),e.xp6(7),e.Q6J("disabled",o.formReceta.invalid),e.xp6(1),e.Akn(e.DdM(98,A)),e.Q6J("visible",o.abonoVisible)("modal",!0)("draggable",!0)("resizable",!0),e.xp6(2),e.Q6J("formGroup",o.formMetodoPago),e.xp6(5),e.Q6J("options",o.dataMetodosPago),e.xp6(7),e.Q6J("disabled",o.formMetodoPago.invalid),e.xp6(1),e.Akn(e.DdM(99,uo)),e.Q6J("visible",o.facturarVisible)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(7),e.Q6J("formGroup",o.formFacturar),e.xp6(3),e.Q6J("ngForOf",o.formFacturacionMediosPago.controls),e.xp6(1),e.Q6J("ngIf",o.totalFactura!=o.totalPagarReserva),e.xp6(2),e.Q6J("label","Pagar "+e.lcZ(223,93,o.totalPagarReserva))("disabled",o.formFacturacionMediosPago.invalid||o.totalFactura!=o.totalPagarReserva))},dependencies:[_.jx,m.sg,m.O5,v.Hq,v.zx,l._Y,l.Fj,l.wV,l.JJ,l.JL,b.rH,T.H,F.o,x.o,R.g,C.Lt,y.V,l.sg,l.u,Z.Ro,D.V,q.NU,S.q,z.a,G.Ql,m.JJ],styles:["table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #dddddd;text-align:left;padding:8px}th[_ngcontent-%COMP%]{background-color:#f2f2f2}.ordenAdd[_ngcontent-%COMP%]{padding:1%;text-align:right}.padding[_ngcontent-%COMP%]{padding:1%}.expandir[_ngcontent-%COMP%]{width:100%}"]})}return i})();var j=c(2506);let mo=(()=>{class i{static#e=this.\u0275fac=function(a){return new(a||i)};static#t=this.\u0275mod=e.oAB({type:i});static#o=this.\u0275inj=e.cJS({imports:[b.Bz.forChild([{path:"",component:Pt,canActivate:[j.a],data:{permissions:["dashboard.habitacion"]}},{path:":idHabitacion/ocupar",component:ho,canActivate:[j.a],data:{permissions:["dashboard.habitacion"]}}]),b.Bz]})}return i})();var go=c(2169),_o=c(1480),fo=c(5617);let bo=(()=>{class i{static#e=this.\u0275fac=function(a){return new(a||i)};static#t=this.\u0275mod=e.oAB({type:i});static#o=this.\u0275inj=e.cJS({providers:[{provide:te.TP,useClass:oe.n,multi:!0},I.y,m.uU],imports:[k.Q,m.ez,V.U$,$.O,l.u5,U.$9,v.hJ,T.T,K.EV,F.V,X.Xt,x.j,R.A,C.kW,W.cc,fe,ee.L$,y.S,ae.ii.forRoot(),l.UX,Z.ef,ie.U,mo,Ne,D.W,P._8,q.q4,go.o,_o.Gg,S.O,z.l,C.kW,G.Iu,fo.ClientesModule]})}return i})()}}]);