"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[614],{5614:(te,g,a)=>{a.r(g),a.d(g,{InternalSequenceModule:()=>ee});var f=a(6814),q=a(4670),o=a(95),C=a(3519),u=a.n(C),e=a(4946),p=a(8672),m=a(9862),T=a(4444);let I=(()=>{class n{constructor(t){this.httpClient=t,this.baseUrl=T.D.url,this.endpointListar="/secuenciaInternaListar",this.endpointInternalSequenceGet="/secuenciaInternaEditar/",this.endpointInternalSequenceUpdate="/secuenciaInternaActualizar",this.endpointInternalSequenceCreate="/secuenciaInternaCrear",this.endpointDelete="/secuenciaInternaEliminar/"}getAll(t,r=""){return new m.WM({"Content-Type":"application/json"}),this.httpClient.post(`${this.baseUrl+this.endpointListar}?per_page=${t}&search=${r}`,{})}getInternalSequence(t){return this.httpClient.get(`${this.baseUrl+this.endpointInternalSequenceGet+t}`)}createInternalSequence(t){return this.httpClient.post(`${this.baseUrl+this.endpointInternalSequenceCreate}`,t)}updateInternalSequence(t){return this.httpClient.post(`${this.baseUrl+this.endpointInternalSequenceUpdate}`,t)}deleteInternalSequence(t){return this.httpClient.post(`${this.baseUrl+this.endpointDelete}`,t)}static#e=this.\u0275fac=function(r){return new(r||n)(e.LFG(m.eN))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var d=a(8027),x=a(5219),h=a(707),v=a(4480),S=a(3714),Z=a(2352),b=a(7213);function A(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",32)(1,"h5",33),e._uU(2,"Tipo de Habitaciones"),e.qZA(),e.TgZ(3,"span",34)(4,"form",35)(5,"input",36),e.NdJ("input",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.search(i.dt))}),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("formGroup",t.formSearch)}}function U(n,l){1&n&&(e.TgZ(0,"tr")(1,"th",37),e._UZ(2,"p-tableHeaderCheckbox"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Hotel"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Descripci\xf3n"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Secuencia Inicial"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Secuencia Actual"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Acciones"),e.qZA()())}function E(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._UZ(2,"p-tableCheckbox",38),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td",39)(12,"p-button",40),e.NdJ("click",function(){const c=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.editInternalSequence(c.id))}),e.qZA(),e._UZ(13,"p-confirmDialog"),e.TgZ(14,"p-button",41),e.NdJ("click",function(){const c=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.confirmDelete(c.id))}),e.qZA()()()}if(2&n){const t=l.$implicit,r=e.oxw();e.xp6(2),e.Q6J("value",r.internalSequenceData),e.xp6(2),e.Oqu(t.hotel.nombre),e.xp6(2),e.Oqu(t.descripcion_secuencia),e.xp6(2),e.Oqu(t.secuensia_incial),e.xp6(2),e.Oqu(t.secuensia_actual)}}function w(n,l){1&n&&(e.TgZ(0,"tr")(1,"td",42),e._uU(2,"Cargando informacion porfavor espere ..."),e.qZA()())}function y(n,l){1&n&&(e.TgZ(0,"div",43),e._uU(1,"Campo requerido"),e.qZA())}function J(n,l){1&n&&(e.TgZ(0,"div",43),e._uU(1,"Campo requerido"),e.qZA())}function M(n,l){1&n&&(e.TgZ(0,"div",43),e._uU(1,"Campo requerido"),e.qZA())}function N(n,l){1&n&&(e.TgZ(0,"div",43),e._uU(1,"Campo requerido"),e.qZA())}function F(n,l){1&n&&(e.TgZ(0,"div",43),e._uU(1,"Campo requerido"),e.qZA())}function D(n,l){1&n&&(e.TgZ(0,"div",43),e._uU(1,"Campo requerido"),e.qZA())}function P(n,l){1&n&&(e.TgZ(0,"div",43),e._uU(1,"Campo requerido"),e.qZA())}function Q(n,l){1&n&&(e.TgZ(0,"div",43),e._uU(1,"Campo requerido"),e.qZA())}const Y=function(){return{"min-width":"50rem"}},B=function(){return["nombre","medida","precio","cantidad","inventario","acciones"]},H=function(){return[10,20,30]},_=function(){return{width:"50vw"}};let R=(()=>{class n{constructor(t,r,i){this.FB=t,this.spinner=r,this.InternalSequenceService=i,this.loadingTable=!1,this.pageCount=10,this.visibleModalInternalSequence=!0,this.visibleModalInternalSequenceEditar=!1,this.imagen=null,this.idEditando=0}ngOnInit(){this.buildForm(),this.getIndex(),this.visibleModalInternalSequence=!1}openModal(){this.onCreate()}onCreate(){this.formCreateInternalSequence.reset(),this.InternalSequenceService.getInternalSequence(0).subscribe(t=>{this.hotel=t.hotel,this.secuenciaDescripcion=t.descripcion_secuencia,this.secuenciaInicial=t.secuensia_incial,this.secuenciaActual=t.secuensia_actual,this.visibleModalInternalSequence=!0},t=>{console.log("Error: ",t)})}onRemove(t){this.imagen=null}onSelect(t){this.imagen=t.currentFiles[0]}onPage(t){this.pageCount=t.rows,this.getIndex("",this.pageCount)}submitCreate(){this.formCreateInternalSequence.valid?this.newInternalSequence():this.formCreateInternalSequence.markAllAsTouched()}newInternalSequence(){this.visibleModalInternalSequence=!0,this.spinner.show();let t=this.formCreateInternalSequence.value;t.hotel_id=t.hotel_id.id,t.estado=1,this.InternalSequenceService.createInternalSequence(t).subscribe(r=>{this.spinner.hide(),this.imagen=null,this.visibleModalInternalSequence=!1,"success"==r.code?(u().fire({title:"Exito",text:"Producto creado exitosamente.",icon:"success"}),this.getIndex()):u().fire({title:"Error",text:"Error al crear el producto.",icon:"error"})},r=>{console.log("Error: ",r)})}editInternalSequence(t){this.idEditando=t,this.spinner.show(),this.InternalSequenceService.getInternalSequence(t).subscribe(r=>{console.log(r),this.spinner.hide(),this.hotel=r.hotel;const i=r.secuencia_interna;i&&"descripcion_secuencia"in i&&(this.secuenciaDescripcion=i.descripcion_secuencia,this.secuenciaInicial=i.secuensia_incial,this.secuenciaActual=i.secuensia_actual,this.formEditInternalSequence.setValue({hotel_id:this.hotel,descripcion_secuencia:this.secuenciaDescripcion,secuensia_incial:this.secuenciaInicial,secuencia_actual:this.secuenciaActual})),console.log(),setTimeout(()=>{this.visibleModalInternalSequenceEditar=!0},1)},r=>{console.log("Error: ",r)})}updateInternalSequence(){this.spinner.show();let t=this.formEditInternalSequence.value;t.hotel_id=t.hotel_id.id,t.id=this.idEditando,t.estado=1,console.log(t),this.InternalSequenceService.updateInternalSequence(t).subscribe(r=>{this.spinner.hide(),this.imagen=null,this.visibleModalInternalSequenceEditar=!1,"success"==r.code?(u().fire({title:"\xc9xito",text:"Producto actualizado exitosamente.",icon:"success"}),this.getIndex()):u().fire({title:"Error",text:"Error al actualizar el producto.",icon:"error"})},r=>{console.log("Error: ",r)})}submitUpdate(){this.formEditInternalSequence.valid&&this.updateInternalSequence()}buildForm(){this.formSearch=this.FB.group({search:["",[]]}),this.formCreateInternalSequence=this.FB.group({hotel_id:["",[o.kI.required]],descripcion_secuencia:["",[o.kI.required]],secuensia_incial:["",[o.kI.required]],secuensia_actual:["",[o.kI.required]]}),this.formEditInternalSequence=this.FB.group({hotel_id:["",[o.kI.required]],descripcion_secuencia:["",[o.kI.required]],secuensia_incial:["",[o.kI.required]],secuencia_actual:["",[o.kI.required]]})}confirmDelete(t){u().fire({title:"\xbfEstas seguro que deseas eliminar esta secuencia?",text:"Ten cuidado esta acci\xf3n no se prodr\xe1 reversar",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, Confirmar",cancelButtonText:"Cancelar"}).then(r=>{r.isConfirmed&&(this.spinner.show(),this.InternalSequenceService.deleteInternalSequence({id:t}).subscribe(i=>{this.spinner.hide(),"success"==i.code?(u().fire({title:"Exito",text:"Secuencia eliminada exitosamente.",icon:"success"}),this.getIndex()):u().fire({title:"Error",text:"Error al eliminar la secuencia.",icon:"error"})},i=>{console.log("Error: ",i)}))})}getIndex(t="",r=this.pageCount){this.spinner.show(),this.loadingTable=!0,this.InternalSequenceService.getAll(r,t).subscribe(i=>{this.loadingTable=!1,console.log("Response: ",i),this.internalSequenceData=i.data,this.countRegisters=i.total,this.spinner.hide()},i=>{console.log("Error: ",i),this.spinner.hide()})}static#e=this.\u0275fac=function(r){return new(r||n)(e.Y36(o.qu),e.Y36(p.t2),e.Y36(I))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-internal-sequence"]],decls:78,vars:41,consts:[["type","ball-scale-multiple"],[1,"surface-section","px-4","py-5","md:px-6","lg:px-8"],[1,"flex","align-items-start","flex-column","lg:justify-content-between","lg:flex-row"],[1,"font-medium","text-3xl","text-900"],[1,"flex","align-items-center","text-700","flex-wrap"],[1,"mr-5","flex","align-items-center","mt-3"],[1,"pi","pi-users","mr-2"],[1,"mt-3","lg:mt-0"],["pButton","","pRipple","","label","Crear","icon","pi pi-star",1,"p-button-outlined","mr-2",3,"click"],[1,"grid","mt-3"],[1,"col-12"],[1,"card","px-3","py-3"],["responsiveLayout","scroll","selectionMode","multiple","dataKey","usuario",3,"value","showPageLinks","first","totalRecords","tableStyle","loading","rows","globalFilterFields","paginator","rowsPerPageOptions","showCurrentPageReport","rowHover","onPage"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","loadingbody"],["header","Secuencia Interna",3,"visible","modal","draggable","resizable","visibleChange"],[3,"formGroup","ngSubmit"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-6"],["optionLabel","nombre","formControlName","hotel_id",3,"options"],["style","color: red;",4,"ngIf"],["type","text","pInputText","","formControlName","descripcion_secuencia",1,"w-full","mb-3","border-round-3xl"],["type","text","pInputText","","formControlName","secuensia_incial",1,"w-full","mb-3","border-round-3xl"],["type","text","pInputText","","formControlName","secuensia_actual",1,"w-full","mb-3","border-round-3xl"],[1,"field","col-12","md:col-12"],["pButton","","pRipple","","label","Crear Secuencia Interna","icon","pi pi-fw pi-star","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl"],["header","Editar Secuencia Interna",3,"visible","modal","draggable","resizable","visibleChange"],["type","number","pInputText","","formControlName","secuensia_incial",1,"w-full","mb-3","border-round-3xl"],["type","number","pInputText","","formControlName","secuencia_actual",1,"w-full","mb-3","border-round-3xl"],["pButton","","pRipple","","label","Editar Tipo de Habitaci\xf3n","icon","pi pi-fw pi-star","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[3,"formGroup"],["formControlName","search","pInputText","","type","text","placeholder","Buscar...",1,"w-full","sm:w-auto",3,"input"],[2,"width","3rem"],[3,"value"],[1,"flex","gap-2"],["icon","pi pi-user-edit","severity","info",3,"click"],["icon","pi pi-trash","severity","danger",3,"click"],["colspan","8"],[2,"color","red"]],template:function(r,i){1&r&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div")(4,"div",3),e._uU(5,"Secuencia Interna"),e.qZA(),e.TgZ(6,"div",4)(7,"div",5),e._UZ(8,"i",6),e.qZA()()(),e.TgZ(9,"div",7)(10,"button",8),e.NdJ("click",function(){return i.openModal()}),e.qZA()()()(),e.TgZ(11,"div",9)(12,"div",10)(13,"div",11)(14,"p-table",12),e.NdJ("onPage",function(s){return i.onPage(s)}),e.YNc(15,A,6,1,"ng-template",13),e.YNc(16,U,13,0,"ng-template",14),e.YNc(17,E,15,5,"ng-template",15),e.YNc(18,w,3,0,"ng-template",16),e.qZA()()()(),e._uU(19,"\n<"),e.TgZ(20,"p-dialog",17),e.NdJ("visibleChange",function(s){return i.visibleModalInternalSequence=s}),e.TgZ(21,"div",10)(22,"h5"),e._uU(23,"Completa el formulario"),e.qZA(),e.TgZ(24,"form",18),e.NdJ("ngSubmit",function(){return i.submitCreate()}),e.TgZ(25,"div",19)(26,"div",20)(27,"label"),e._uU(28,"Hotel"),e.qZA(),e._UZ(29,"p-dropdown",21),e.YNc(30,y,2,0,"div",22),e.qZA(),e.TgZ(31,"div",20)(32,"label"),e._uU(33,"Descripci\xf3n de Secuencia"),e.qZA(),e._UZ(34,"input",23),e.YNc(35,J,2,0,"div",22),e.qZA(),e.TgZ(36,"div",20)(37,"label"),e._uU(38,"Secuencia Inicial"),e.qZA(),e._UZ(39,"input",24),e.YNc(40,M,2,0,"div",22),e.qZA(),e.TgZ(41,"div",20)(42,"label"),e._uU(43,"Secuencia Actual"),e.qZA(),e._UZ(44,"input",25),e.YNc(45,N,2,0,"div",22),e.qZA(),e.TgZ(46,"div",26),e._UZ(47,"button",27),e.qZA()(),e._UZ(48,"br"),e.qZA()()(),e.TgZ(49,"p-dialog",28),e.NdJ("visibleChange",function(s){return i.visibleModalInternalSequenceEditar=s}),e.TgZ(50,"div",10)(51,"h5"),e._uU(52,"Completa el formulario"),e.qZA(),e.TgZ(53,"form",18),e.NdJ("ngSubmit",function(){return i.submitUpdate()}),e.TgZ(54,"div",19)(55,"div",20)(56,"label"),e._uU(57,"Hotel"),e.qZA(),e._UZ(58,"p-dropdown",21),e.YNc(59,F,2,0,"div",22),e.qZA(),e.TgZ(60,"div",20)(61,"label"),e._uU(62,"Descripci\xf3n de Secuencia"),e.qZA(),e._UZ(63,"input",23),e.YNc(64,D,2,0,"div",22),e.qZA(),e.TgZ(65,"div",20)(66,"label"),e._uU(67,"Secuencia Inicial"),e.qZA(),e._UZ(68,"input",29),e.YNc(69,P,2,0,"div",22),e.qZA(),e.TgZ(70,"div",20)(71,"label"),e._uU(72,"Secuencia Actual"),e.qZA(),e._UZ(73,"input",30),e.YNc(74,Q,2,0,"div",22),e.qZA(),e.TgZ(75,"div",26),e._UZ(76,"button",31),e.qZA()(),e._UZ(77,"br"),e.qZA()()()),2&r&&(e.xp6(14),e.Q6J("value",i.internalSequenceData)("showPageLinks",!0)("first",1)("totalRecords",17)("tableStyle",e.DdM(36,Y))("loading",i.loadingTable)("rows",8)("globalFilterFields",e.DdM(37,B))("paginator",!0)("rowsPerPageOptions",e.DdM(38,H))("showCurrentPageReport",!0)("rowHover",!0),e.xp6(6),e.Akn(e.DdM(39,_)),e.Q6J("visible",i.visibleModalInternalSequence)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(4),e.Q6J("formGroup",i.formCreateInternalSequence),e.xp6(5),e.Q6J("options",i.hotel),e.xp6(1),e.Q6J("ngIf",i.formCreateInternalSequence.get("hotel_id").hasError("required")),e.xp6(5),e.Q6J("ngIf",i.formCreateInternalSequence.get("descripcion_secuencia").hasError("required")),e.xp6(5),e.Q6J("ngIf",i.formCreateInternalSequence.get("secuensia_incial").hasError("required")),e.xp6(5),e.Q6J("ngIf",i.formCreateInternalSequence.get("secuensia_actual").hasError("required")),e.xp6(4),e.Akn(e.DdM(40,_)),e.Q6J("visible",i.visibleModalInternalSequenceEditar)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(4),e.Q6J("formGroup",i.formEditInternalSequence),e.xp6(5),e.Q6J("options",i.hotel),e.xp6(1),e.Q6J("ngIf",i.formEditInternalSequence.get("hotel_id").hasError("required")),e.xp6(5),e.Q6J("ngIf",i.formEditInternalSequence.get("descripcion_secuencia").hasError("required")),e.xp6(5),e.Q6J("ngIf",i.formEditInternalSequence.get("secuensia_incial").hasError("required")),e.xp6(5),e.Q6J("ngIf",i.formEditInternalSequence.get("secuencia_actual").hasError("required")))},dependencies:[f.O5,d.iA,x.jx,d.UA,d.Mo,h.Hq,h.zx,o._Y,o.Fj,o.wV,o.JJ,o.JL,v.H,S.o,Z.Lt,b.V,o.sg,o.u,p.Ro],styles:["svg[_ngcontent-%COMP%]{width:45%}"]})}return n})(),z=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[q.Bz.forChild([{path:"",component:R}]),q.Bz]})}return n})();var $=a(6068),G=a(4104),L=a(6022),O=a(6340),j=a(6218),k=a(5722),V=a(354),K=a(1712),X=a(1865),W=a(8712);let ee=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({providers:[{provide:m.TP,useClass:W.n,multi:!0},I],imports:[f.ez,z,d.U$,$.O,o.u5,h.hJ,v.T,G.EV,O.V,L.Xt,S.j,j.A,Z.kW,X.cc,V.L$,b.S,k.ii.forRoot(),o.UX,p.ef,K.U]})}return n})()}}]);