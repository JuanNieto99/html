"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[669],{7669:(te,h,a)=>{a.r(h),a.d(h,{TypeRoomsModule:()=>ee});var T=a(6814),s=a(95),f=a(9664),x=a(6068),m=a(707),b=a(4480),M=a(4104),U=a(6340),J=a(6022),v=a(3714),P=a(6218),y=a(2160),_=a(1865),E=a(354),Z=a(7213),u=a(9862),q=a(8712),N=a(5722),c=a(8672),B=a(1712),R=a(86),g=a(2791),I=a(3519),d=a.n(I),e=a(4946),w=a(4444);let C=(()=>{class i{constructor(o){this.httpClient=o,this.baseUrl=w.D.url,this.endpointListar="/tipoHabitacionListar",this.endpointTypeRoomGet="/tipoHabitacionEditar/",this.endpointTypeRoomUpdate="/tipoHabitacionActualizar/",this.endpointTypeRoomCreate="/tipoHabitacionCrear",this.endpointDelete="/tipoHabitacionEliminar/"}getTypeRoom(o){return this.httpClient.get(`${this.baseUrl+this.endpointTypeRoomGet+o}`)}getAll(o,n="",t=1){const r={headers:new u.WM({"Content-Type":"application/json"})};return this.httpClient.post(`${this.baseUrl+this.endpointListar}?per_page=${o}&page=${t}&search=${n}`,r)}createTypeRoom(o){return this.httpClient.post(`${this.baseUrl+this.endpointTypeRoomCreate}`,o)}updateTypeRoom(o){return this.httpClient.post(`${this.baseUrl+this.endpointTypeRoomUpdate}`,o)}deleteTypeRoom(o){return this.httpClient.post(`${this.baseUrl+this.endpointDelete}`,o)}static#e=this.\u0275fac=function(n){return new(n||i)(e.LFG(u.eN))};static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var H=a(5219);function F(i,p){if(1&i){const o=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.openModal())}),e.qZA()}}function Q(i,p){if(1&i){const o=e.EpF();e.TgZ(0,"div",45)(1,"h5",46),e._uU(2,"Tipo de Habitaciones"),e.qZA(),e.TgZ(3,"span",47)(4,"form",22)(5,"div",48)(6,"input",49),e.NdJ("input",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.searchInput())}),e.qZA(),e.TgZ(7,"button",50),e.NdJ("click",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.search(t.dt))}),e.qZA()()()()()}if(2&i){const o=e.oxw();e.xp6(4),e.Q6J("formGroup",o.formSearch)}}function S(i,p){1&i&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Nombre"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Hotel"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Acciones"),e.qZA()())}function j(i,p){if(1&i){const o=e.EpF();e.TgZ(0,"p-button",54),e.NdJ("click",function(){e.CHM(o);const t=e.oxw().$implicit,r=e.oxw();return e.KtG(r.editTypeRoom(t.id))}),e.qZA()}}function Y(i,p){if(1&i){const o=e.EpF();e.TgZ(0,"p-button",55),e.NdJ("click",function(){e.CHM(o);const t=e.oxw().$implicit,r=e.oxw();return e.KtG(r.confirmDelete(t.id))}),e.qZA()}}function z(i,p){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",51),e.YNc(6,j,1,0,"p-button",52),e._UZ(7,"p-confirmDialog"),e.YNc(8,Y,1,0,"p-button",53),e.qZA()()),2&i){const o=p.$implicit,n=e.oxw();e.xp6(2),e.Oqu(o.nombre),e.xp6(2),e.Oqu(o.hotel.nombre),e.xp6(2),e.Q6J("ngIf",n.permisoActualizar),e.xp6(2),e.Q6J("ngIf",n.permisoEliminar)}}function k(i,p){1&i&&(e.TgZ(0,"tr")(1,"td",56),e._uU(2,"Cargando informacion porfavor espere ..."),e.qZA()())}function L(i,p){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}function $(i,p){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}function D(i,p){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}function G(i,p){1&i&&(e.TgZ(0,"div",57),e._uU(1,"Campo requerido"),e.qZA())}const O=function(){return{"min-width":"50rem"}},K=function(){return["nombre","Hotel","acciones"]},A=function(){return{width:"50vw"}};let V=(()=>{class i{constructor(o,n,t){this.FB=o,this.spinner=n,this.typeRoomService=t,this.permisoCrear=g.e.hasPermission(["administracion.tipoHabitacion.crear"]),this.permisoActualizar=g.e.hasPermission(["administracion.tipoHabitacion.actualizar"]),this.permisoEliminar=g.e.hasPermission(["administracion.tipoHabitacion.eliminar"]),this.loadingTable=!1,this.pageCount=10,this.visibleModalTypeRoom=!0,this.imagen=null,this.visibleModalTypeRoomEditar=!1,this.idEditando=0,this.first=0,this.rows=8,this.pageActual=1,this.ultimaPage=1,this.disablePageLeft=!1,this.disablePageRight=!1,this.valPuerta=""}ngOnInit(){this.buildForm(),this.getIndex(),this.visibleModalTypeRoom=!1}buildForm(){this.formSearch=this.FB.group({search:["",[]]}),this.formCreateTypeRoom=this.FB.group({nombre:["",[s.kI.required]],hotel_id:["",[s.kI.required]]}),this.formEditTypeRoom=this.FB.group({nombre:["",[s.kI.required]],hotel_id:["",[s.kI.required]]})}openModal(){this.onCreate()}onCreate(){this.formCreateTypeRoom.reset(),this.typeRoomService.getTypeRoom(0).subscribe(o=>{this.hotel=o.hotel,this.visibleModalTypeRoom=!0},o=>{console.log("Error: ",o)})}onRemove(o){this.imagen=null}onSelect(o){this.imagen=o.currentFiles[0]}onPage(o){this.pageCount=o.rows,this.getIndex("",this.pageCount)}submitCreate(){console.log(this.formCreateTypeRoom.valid),this.formCreateTypeRoom.valid?this.newTypeRoom():this.formCreateTypeRoom.markAllAsTouched()}newTypeRoom(){this.visibleModalTypeRoom=!0,this.spinner.show();let o={puerta:this.valPuerta},n=this.formCreateTypeRoom.value;n.hotel_id=n.hotel_id.id,n.estado=1,n.diseno_json=JSON.stringify(o),this.typeRoomService.createTypeRoom(n).subscribe(t=>{this.spinner.hide(),this.imagen=null,this.visibleModalTypeRoom=!1,"success"==t.code?(d().fire({title:"Exito",text:"Tipo de habitaci\xf3n creado exitosamente.",icon:"success"}),this.getIndex()):d().fire({title:"Error",text:"Error al crear el tipo de habitaci\xf3n.",icon:"error"})},t=>{console.log("Error: ",t)})}editTypeRoom(o){this.idEditando=o,this.spinner.show(),this.typeRoomService.getTypeRoom(o).subscribe(n=>{this.spinner.hide(),this.hotel=n.hotel,this.dataEditarInfoTypeRoom=n.typeRoom,this.formEditTypeRoom.get("nombre").setValue(n.tiposHabitaciones.nombre),this.valPuerta=JSON.parse(n.tiposHabitaciones.diseno_json).puerta,setTimeout(()=>{this.visibleModalTypeRoomEditar=!0},1)},n=>{console.log("Error: ",n)})}updateTypeRoom(){this.spinner.show();let o=this.formEditTypeRoom.value;o.hotel_id=o.hotel_id.id,o.id=this.idEditando,o.estado=1,o.diseno_json=JSON.stringify({puerta:this.valPuerta}),this.typeRoomService.updateTypeRoom(o).subscribe(t=>{this.spinner.hide(),this.imagen=null,this.visibleModalTypeRoomEditar=!1,"success"==t.code?(d().fire({title:"Exito",text:"Tipo de habitaci\xf3n actualizada exitosamente.",icon:"success"}),this.getIndex()):d().fire({title:"Error",text:"Error al actualizar el tipo de habitaci\xf3n.",icon:"error"})},t=>{console.log("Error: ",t)})}submitUpdate(){this.formEditTypeRoom.valid&&this.updateTypeRoom()}confirmDelete(o){d().fire({title:"\xbfEstas seguro que deseas eliminar el tipo de habitaci\xf3n?",text:"Ten cuidado esta acci\xf3n no se prodr\xe1 reversar",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, Confirmar",cancelButtonText:"Cancelar"}).then(n=>{n.isConfirmed&&(this.spinner.show(),this.typeRoomService.deleteTypeRoom({id:o}).subscribe(t=>{this.spinner.hide(),"success"==t.code?(d().fire({title:"Exito",text:"Tipo de habitaci\xf3n eliminada exitosamente.",icon:"success"}),this.getIndex()):d().fire({title:"Error",text:"Error al eliminar el tipo de habitaci\xf3n.",icon:"error"})},t=>{console.log("Error: ",t)}))})}getIndex(o="",n=this.pageCount,t=1){this.spinner.show(),this.loadingTable=!0,this.typeRoomService.getAll(n,o,t).subscribe(r=>{this.loadingTable=!1,this.typeRoomData=r.data,this.countRegisters=r.total,this.ultimaPage=r.last_page,r.total>n&&(this.disablePageRight=!0),this.validatePage(),this.spinner.hide()},r=>{console.log("Error: ",r),this.spinner.hide()})}searchInput(){let o=this.formSearch.get("search").value;""==o&&this.getIndex(o)}search(o){let n=this.formSearch.get("search").value;this.getIndex(n)}onPageChange(o){this.first=o.first,this.rows=o.rows}leftTable(){this.pageActual=this.pageActual-1,this.getIndex("",this.pageCount,this.pageActual),this.validatePage()}rightTable(){this.pageActual=this.pageActual+1,this.getIndex("",this.pageCount,this.pageActual),this.validatePage()}validatePage(){1==this.pageActual&&(this.disablePageLeft=!1),this.pageActual>1&&(this.disablePageLeft=!0),this.ultimaPage==this.pageActual&&(this.disablePageRight=!1),this.ultimaPage>this.pageActual&&(this.disablePageRight=!0)}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(s.qu),e.Y36(c.t2),e.Y36(C))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-type-rooms"]],decls:96,vars:40,consts:[["type","ball-scale-multiple"],[1,"surface-section","px-4","py-5","md:px-6","lg:px-8"],[1,"flex","align-items-start","flex-column","lg:justify-content-between","lg:flex-row"],[1,"font-medium","text-3xl","text-900"],[1,"flex","align-items-center","text-700","flex-wrap"],[1,"mr-5","flex","align-items-center","mt-3"],[1,"mt-3","lg:mt-0"],["pButton","","pRipple","","label","Crear","class","p-button-outlined mr-2","icon","",3,"click",4,"ngIf"],[1,"grid","mt-3"],[1,"col-12"],[1,"card","px-3","py-3"],["responsiveLayout","scroll","selectionMode","multiple","dataKey","usuario",3,"value","tableStyle","loading","rows","globalFilterFields","rowHover","onPage"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","loadingbody"],[2,"text-align","center"],[1,"p-buttonset"],["pButton","","pRipple","","label","","icon","pi pi-arrow-left",3,"disabled","click"],["pButton","","pRipple","",3,"label"],["pButton","","pRipple","","label","","icon","pi pi-arrow-right",3,"disabled","click"],["header","Nuevo Tipo de Habitaci\xf3n",3,"visible","modal","draggable","resizable","visibleChange"],[3,"formGroup"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-6"],["type","text","pInputText","","formControlName","nombre",1,"w-full","mb-3","border-round-3xl"],["style","color: red;",4,"ngIf"],["optionLabel","nombre","formControlName","hotel_id",3,"options"],[1,"grid","formgrid",2,"text-align","center"],[1,"col-12","md:col-4"],["name","puerta","value","puerta1","id","puerta1",3,"ngModel","ngModelChange"],["for","puerta1"],[1,"field-radiobutton"],["src","assets/puertas/puerta1.jpg","width","100%","height","80%"],["name","puerta","value","puerta2","id","puerta2",3,"ngModel","ngModelChange"],["for","puerta3"],["src","assets/puertas/puerta2.jpg","width","100%","height","80%"],["name","puerta","value","puerta3","id","puerta3",3,"ngModel","ngModelChange"],["for","puerta2"],["src","assets/puertas/puerta3.jpg","width","100%","height","80%"],[1,"field","col-12","md:col-12"],["pButton","","pRipple","","label","Crear Tipo de Habitaci\xf3n","icon","","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl",3,"click"],["header","Editar Tipo de Hotel",3,"visible","modal","draggable","resizable","visibleChange"],["pButton","","pRipple","","label","Editar Tipo de Habitaci\xf3n","icon","","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl",3,"click"],["pButton","","pRipple","","label","Crear","icon","",1,"p-button-outlined","mr-2",3,"click"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[1,"p-inputgroup"],["formControlName","search","pInputText","","type","text","placeholder","Buscar...",1,"w-full","sm:w-auto",3,"input"],["type","button","pButton","","pRipple","",1,"pi","pi-search",3,"click"],[1,"flex","gap-2"],["icon","pi pi-pencil","severity","info",3,"click",4,"ngIf"],["icon","pi pi-trash","severity","danger",3,"click",4,"ngIf"],["icon","pi pi-pencil","severity","info",3,"click"],["icon","pi pi-trash","severity","danger",3,"click"],["colspan","8"],[2,"color","red"]],template:function(n,t){1&n&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div")(4,"div",3),e._uU(5,"Tipos de Habitaci\xf3n"),e.qZA(),e.TgZ(6,"div",4),e._UZ(7,"div",5),e.qZA()(),e.TgZ(8,"div",6),e.YNc(9,F,1,0,"button",7),e.qZA()()(),e.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"p-table",11),e.NdJ("onPage",function(l){return t.onPage(l)}),e.YNc(14,Q,8,1,"ng-template",12),e.YNc(15,S,7,0,"ng-template",13),e.YNc(16,z,9,4,"ng-template",14),e.YNc(17,k,3,0,"ng-template",15),e.qZA(),e._UZ(18,"br"),e.TgZ(19,"div",16)(20,"span",17)(21,"button",18),e.NdJ("click",function(){return t.leftTable()}),e.qZA(),e._UZ(22,"button",19),e.TgZ(23,"button",20),e.NdJ("click",function(){return t.rightTable()}),e.qZA()()()()()(),e.TgZ(24,"p-dialog",21),e.NdJ("visibleChange",function(l){return t.visibleModalTypeRoom=l}),e.TgZ(25,"div",9)(26,"form",22)(27,"div",23)(28,"div",24)(29,"label"),e._uU(30,"Nombre"),e.qZA(),e._UZ(31,"input",25),e.YNc(32,L,2,0,"div",26),e.qZA(),e.TgZ(33,"div",24)(34,"label"),e._uU(35,"Hotel"),e.qZA(),e._UZ(36,"p-dropdown",27),e.YNc(37,$,2,0,"div",26),e.qZA()(),e._UZ(38,"br"),e.qZA(),e.TgZ(39,"div",28)(40,"div",29)(41,"p-radioButton",30),e.NdJ("ngModelChange",function(l){return t.valPuerta=l}),e.qZA(),e.TgZ(42,"label",31),e._uU(43," Puerta 1 "),e.qZA(),e.TgZ(44,"div",32),e._UZ(45,"img",33),e.qZA()(),e.TgZ(46,"div",29)(47,"p-radioButton",34),e.NdJ("ngModelChange",function(l){return t.valPuerta=l}),e.qZA(),e.TgZ(48,"label",35),e._uU(49," Puerta 2 "),e.qZA(),e.TgZ(50,"div",32),e._UZ(51,"img",36),e.qZA()(),e.TgZ(52,"div",29)(53,"p-radioButton",37),e.NdJ("ngModelChange",function(l){return t.valPuerta=l}),e.qZA(),e.TgZ(54,"label",38),e._uU(55," Puerta 3 "),e.qZA(),e.TgZ(56,"div",32),e._UZ(57,"img",39),e.qZA()()(),e.TgZ(58,"div",40)(59,"button",41),e.NdJ("click",function(){return t.submitCreate()}),e.qZA()()()(),e.TgZ(60,"p-dialog",42),e.NdJ("visibleChange",function(l){return t.visibleModalTypeRoomEditar=l}),e.TgZ(61,"div",9)(62,"form",22)(63,"div",23)(64,"div",24)(65,"label"),e._uU(66,"Nombre"),e.qZA(),e._UZ(67,"input",25),e.YNc(68,D,2,0,"div",26),e.qZA(),e.TgZ(69,"div",24)(70,"label"),e._uU(71,"Hotel"),e.qZA(),e._UZ(72,"p-dropdown",27),e.YNc(73,G,2,0,"div",26),e.qZA()(),e._UZ(74,"br"),e.qZA(),e.TgZ(75,"div",28)(76,"div",29)(77,"p-radioButton",30),e.NdJ("ngModelChange",function(l){return t.valPuerta=l}),e.qZA(),e.TgZ(78,"label",31),e._uU(79," Puerta 1 "),e.qZA(),e.TgZ(80,"div",32),e._UZ(81,"img",33),e.qZA()(),e.TgZ(82,"div",29)(83,"p-radioButton",34),e.NdJ("ngModelChange",function(l){return t.valPuerta=l}),e.qZA(),e.TgZ(84,"label",35),e._uU(85," Puerta 2 "),e.qZA(),e.TgZ(86,"div",32),e._UZ(87,"img",36),e.qZA()(),e.TgZ(88,"div",29)(89,"p-radioButton",37),e.NdJ("ngModelChange",function(l){return t.valPuerta=l}),e.qZA(),e.TgZ(90,"label",38),e._uU(91," Puerta 3 "),e.qZA(),e.TgZ(92,"div",32),e._UZ(93,"img",39),e.qZA()()(),e.TgZ(94,"div",40)(95,"button",43),e.NdJ("click",function(){return t.submitUpdate()}),e.qZA()()()()),2&n&&(e.xp6(9),e.Q6J("ngIf",t.permisoCrear),e.xp6(4),e.Q6J("value",t.typeRoomData)("tableStyle",e.DdM(36,O))("loading",t.loadingTable)("rows",8)("globalFilterFields",e.DdM(37,K))("rowHover",!0),e.xp6(8),e.Q6J("disabled",!t.disablePageLeft),e.xp6(1),e.Q6J("label",t.pageActual),e.xp6(1),e.Q6J("disabled",!t.disablePageRight),e.xp6(1),e.Akn(e.DdM(38,A)),e.Q6J("visible",t.visibleModalTypeRoom)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(2),e.Q6J("formGroup",t.formCreateTypeRoom),e.xp6(6),e.Q6J("ngIf",t.formCreateTypeRoom.get("nombre").hasError("required")),e.xp6(4),e.Q6J("options",t.hotel),e.xp6(1),e.Q6J("ngIf",t.formCreateTypeRoom.get("hotel_id").hasError("required")),e.xp6(4),e.Q6J("ngModel",t.valPuerta),e.xp6(6),e.Q6J("ngModel",t.valPuerta),e.xp6(6),e.Q6J("ngModel",t.valPuerta),e.xp6(7),e.Akn(e.DdM(39,A)),e.Q6J("visible",t.visibleModalTypeRoomEditar)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(2),e.Q6J("formGroup",t.formEditTypeRoom),e.xp6(6),e.Q6J("ngIf",t.formEditTypeRoom.get("nombre").hasError("required")),e.xp6(4),e.Q6J("options",t.hotel),e.xp6(1),e.Q6J("ngIf",t.formEditTypeRoom.get("hotel_id").hasError("required")),e.xp6(4),e.Q6J("ngModel",t.valPuerta),e.xp6(6),e.Q6J("ngModel",t.valPuerta),e.xp6(6),e.Q6J("ngModel",t.valPuerta))},dependencies:[T.O5,f.iA,H.jx,m.Hq,m.zx,s._Y,s.Fj,s.JJ,s.JL,s.On,b.H,v.o,y.Lt,_.EU,Z.V,s.sg,s.u,c.Ro],styles:["svg[_ngcontent-%COMP%]{width:45%}"]})}return i})();var X=a(2506);let W=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#o=this.\u0275inj=e.cJS({imports:[R.Bz.forChild([{path:"",component:V,canActivate:[X.a],data:{permissions:["administracion.tipoHabitacion"]}}]),R.Bz]})}return i})(),ee=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#o=this.\u0275inj=e.cJS({providers:[{provide:u.TP,useClass:q.n,multi:!0},C],imports:[T.ez,W,f.U$,x.O,s.u5,m.hJ,b.T,M.EV,U.V,J.Xt,v.j,P.A,y.kW,_.cc,E.L$,Z.S,N.ii.forRoot(),s.UX,c.ef,B.U]})}return i})()}}]);