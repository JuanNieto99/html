"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[91],{4091:(uo,M,c)=>{c.r(M),c.d(M,{DashboardRoomsModule:()=>co});var h=c(6814),l=c(95),G=c(9664),V=c(6068),v=c(707),T=c(4480),$=c(4104),P=c(6340),K=c(6022),y=c(3714),R=c(6218),A=c(2160),X=c(1865),W=c(354),x=c(7213),ee=c(9862),te=c(8712),oe=c(5722),Z=c(8672),ie=c(1712),U=c(1532),_=c(86),ae=c(3519),d=c.n(ae),e=c(4946),I=c(8663),F=c(1230),f=c(5219),w=c(1122),g=c(6825),b=c(2076),J=c(7778),q=c(2332);function ne(a,r){1&a&&e.GkF(0)}function re(a,r){1&a&&e._UZ(0,"TimesIcon",8),2&a&&e.Q6J("styleClass","p-overlaypanel-close-icon")}function se(a,r){}function le(a,r){1&a&&e.YNc(0,se,0,0,"ng-template")}function ce(a,r){if(1&a&&(e.TgZ(0,"span",9),e.YNc(1,le,1,0,null,3),e.qZA()),2&a){const t=e.oxw(3);e.xp6(1),e.Q6J("ngTemplateOutlet",t.closeIconTemplate)}}function de(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(o){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onCloseClick(o))})("keydown.enter",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.hide())}),e.YNc(1,re,1,1,"TimesIcon",6),e.YNc(2,ce,2,1,"span",7),e.qZA()}if(2&a){const t=e.oxw(2);e.uIk("aria-label",t.ariaCloseLabel),e.xp6(1),e.Q6J("ngIf",!t.closeIconTemplate),e.xp6(1),e.Q6J("ngIf",t.closeIconTemplate)}}const pe=function(a,r){return{showTransitionParams:a,hideTransitionParams:r}},ue=function(a,r){return{value:a,params:r}};function he(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div",1),e.NdJ("click",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.onOverlayClick(o))})("@animation.start",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.onAnimationStart(o))})("@animation.done",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.onAnimationEnd(o))}),e.TgZ(1,"div",2),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onContentClick())})("mousedown",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onContentClick())}),e.Hsn(2),e.YNc(3,ne,1,0,"ng-container",3),e.qZA(),e.YNc(4,de,3,3,"button",4),e.qZA()}if(2&a){const t=e.oxw();e.Tol(t.styleClass),e.Q6J("ngClass","p-overlaypanel p-component")("ngStyle",t.style)("@animation",e.WLB(10,ue,t.overlayVisible?"open":"close",e.WLB(7,pe,t.showTransitionOptions,t.hideTransitionOptions))),e.xp6(3),e.Q6J("ngTemplateOutlet",t.contentTemplate),e.xp6(1),e.Q6J("ngIf",t.showCloseIcon)}}const me=["*"];let ge=(()=>{class a{document;platformId;el;renderer;cd;zone;config;overlayService;dismissable=!0;showCloseIcon;style;styleClass;appendTo="body";autoZIndex=!0;ariaCloseLabel;baseZIndex=0;focusOnShow=!0;showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)";hideTransitionOptions=".1s linear";onShow=new e.vpe;onHide=new e.vpe;templates;container;overlayVisible=!1;render=!1;isOverlayAnimationInProgress=!1;selfClick=!1;documentClickListener;target;willHide;scrollHandler;documentResizeListener;contentTemplate;closeIconTemplate;destroyCallback;overlayEventListener;overlaySubscription;constructor(t,i,o,n,s,p,u,m){this.document=t,this.platformId=i,this.el=o,this.renderer=n,this.cd=s,this.zone=p,this.config=u,this.overlayService=m}ngAfterContentInit(){this.templates?.forEach(t=>{switch(t.getType()){case"content":default:this.contentTemplate=t.template;break;case"closeicon":this.closeIconTemplate=t.template}this.cd.markForCheck()})}bindDocumentClickListener(){(0,h.NF)(this.platformId)&&!this.documentClickListener&&this.dismissable&&this.zone.runOutsideAngular(()=>{let t=b.p.isIOS()?"touchstart":"click";this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:this.document,t,o=>{!this.container?.contains(o.target)&&this.target!==o.target&&!this.target.contains(o.target)&&!this.selfClick&&this.zone.run(()=>{this.hide()}),this.selfClick=!1,this.cd.markForCheck()})})}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null,this.selfClick=!1)}toggle(t,i){this.isOverlayAnimationInProgress||(this.overlayVisible?(this.hasTargetChanged(t,i)&&(this.destroyCallback=()=>{this.show(null,i||t.currentTarget||t.target)}),this.hide()):this.show(t,i))}show(t,i){i&&t&&t.stopPropagation(),!this.isOverlayAnimationInProgress&&(this.target=i||t.currentTarget||t.target,this.overlayVisible=!0,this.render=!0,this.cd.markForCheck())}onOverlayClick(t){this.overlayService.add({originalEvent:t,target:this.el.nativeElement}),this.selfClick=!0}onContentClick(){this.selfClick=!0}hasTargetChanged(t,i){return null!=this.target&&this.target!==(i||t.currentTarget||t.target)}appendContainer(){this.appendTo&&("body"===this.appendTo?this.renderer.appendChild(this.document.body,this.container):b.p.appendChild(this.container,this.appendTo))}restoreAppend(){this.container&&this.appendTo&&this.renderer.appendChild(this.el.nativeElement,this.container)}align(){this.autoZIndex&&q.P9.set("overlay",this.container,this.baseZIndex+this.config.zIndex.overlay),b.p.absolutePosition(this.container,this.target);const t=b.p.getOffset(this.container),i=b.p.getOffset(this.target),o=this.document.defaultView?.getComputedStyle(this.container).getPropertyValue("border-radius");let n=0;t.left<i.left&&(n=i.left-t.left-2*parseFloat(o)),this.container?.style.setProperty("--overlayArrowLeft",`${n}px`),t.top<i.top&&(b.p.addClass(this.container,"p-overlaypanel-flipped"),this.showCloseIcon&&this.renderer.setStyle(this.container,"margin-top","-30px"))}onAnimationStart(t){"open"===t.toState&&(this.container=t.element,this.appendContainer(),this.align(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.focusOnShow&&this.focus(),this.overlayEventListener=i=>{this.container&&this.container.contains(i.target)&&(this.selfClick=!0)},this.overlaySubscription=this.overlayService.clickObservable.subscribe(this.overlayEventListener),this.onShow.emit(null)),this.isOverlayAnimationInProgress=!0}onAnimationEnd(t){switch(t.toState){case"void":this.destroyCallback&&(this.destroyCallback(),this.destroyCallback=null),this.overlaySubscription&&this.overlaySubscription.unsubscribe();break;case"close":this.autoZIndex&&q.P9.clear(this.container),this.overlaySubscription&&this.overlaySubscription.unsubscribe(),this.onContainerDestroy(),this.onHide.emit({}),this.render=!1}this.isOverlayAnimationInProgress=!1}focus(){let t=b.p.findSingle(this.container,"[autofocus]");t&&this.zone.runOutsideAngular(()=>{setTimeout(()=>t.focus(),5)})}hide(){this.overlayVisible=!1,this.cd.markForCheck()}onCloseClick(t){this.hide(),t.preventDefault()}onWindowResize(){this.overlayVisible&&!b.p.isTouchDevice()&&this.hide()}bindDocumentResizeListener(){(0,h.NF)(this.platformId)&&!this.documentResizeListener&&(this.documentResizeListener=this.renderer.listen(this.document.defaultView,"resize",this.onWindowResize.bind(this)))}unbindDocumentResizeListener(){this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}bindScrollListener(){(0,h.NF)(this.platformId)&&(this.scrollHandler||(this.scrollHandler=new b.V(this.target,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener())}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}onContainerDestroy(){this.cd.destroyed||(this.target=null),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener()}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.container&&this.autoZIndex&&q.P9.clear(this.container),this.cd.destroyed||(this.target=null),this.destroyCallback=null,this.container&&(this.restoreAppend(),this.onContainerDestroy()),this.overlaySubscription&&this.overlaySubscription.unsubscribe()}static \u0275fac=function(i){return new(i||a)(e.Y36(h.K0),e.Y36(e.Lbi),e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(e.sBO),e.Y36(e.R0b),e.Y36(f.b4),e.Y36(f.F0))};static \u0275cmp=e.Xpm({type:a,selectors:[["p-overlayPanel"]],contentQueries:function(i,o,n){if(1&i&&e.Suo(n,f.jx,4),2&i){let s;e.iGM(s=e.CRH())&&(o.templates=s)}},hostAttrs:[1,"p-element"],inputs:{dismissable:"dismissable",showCloseIcon:"showCloseIcon",style:"style",styleClass:"styleClass",appendTo:"appendTo",autoZIndex:"autoZIndex",ariaCloseLabel:"ariaCloseLabel",baseZIndex:"baseZIndex",focusOnShow:"focusOnShow",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onShow:"onShow",onHide:"onHide"},ngContentSelectors:me,decls:1,vars:1,consts:[[3,"ngClass","ngStyle","class","click",4,"ngIf"],[3,"ngClass","ngStyle","click"],[1,"p-overlaypanel-content",3,"click","mousedown"],[4,"ngTemplateOutlet"],["type","button","class","p-overlaypanel-close p-link","pRipple","",3,"click","keydown.enter",4,"ngIf"],["type","button","pRipple","",1,"p-overlaypanel-close","p-link",3,"click","keydown.enter"],[3,"styleClass",4,"ngIf"],["class","p-overlaypanel-close-icon",4,"ngIf"],[3,"styleClass"],[1,"p-overlaypanel-close-icon"]],template:function(i,o){1&i&&(e.F$t(),e.YNc(0,he,5,13,"div",0)),2&i&&e.Q6J("ngIf",o.render)},dependencies:function(){return[h.mk,h.O5,h.tP,h.PC,T.H,J.q]},styles:['.p-overlaypanel{position:absolute;margin-top:10px;top:0;left:0}.p-overlaypanel-flipped{margin-top:0;margin-bottom:10px}.p-overlaypanel-close{display:flex;justify-content:center;align-items:center;overflow:hidden;position:relative}.p-overlaypanel:after,.p-overlaypanel:before{bottom:100%;left:calc(var(--overlayArrowLeft, 0) + 1.25rem);content:" ";height:0;width:0;position:absolute;pointer-events:none}.p-overlaypanel:after{border-width:8px;margin-left:-8px}.p-overlaypanel:before{border-width:10px;margin-left:-10px}.p-overlaypanel-shifted:after,.p-overlaypanel-shifted:before{left:auto;right:1.25em;margin-left:auto}.p-overlaypanel-flipped:after,.p-overlaypanel-flipped:before{bottom:auto;top:100%}.p-overlaypanel.p-overlaypanel-flipped:after{border-bottom-color:transparent}.p-overlaypanel.p-overlaypanel-flipped:before{border-bottom-color:transparent}\n'],encapsulation:2,data:{animation:[(0,g.X$)("animation",[(0,g.SB)("void",(0,g.oB)({transform:"scaleY(0.8)",opacity:0})),(0,g.SB)("close",(0,g.oB)({opacity:0})),(0,g.SB)("open",(0,g.oB)({transform:"translateY(0)",opacity:1})),(0,g.eR)("void => open",(0,g.jt)("{{showTransitionParams}}")),(0,g.eR)("open => close",(0,g.jt)("{{hideTransitionParams}}"))])]},changeDetection:0})}return a})(),fe=(()=>{class a{static \u0275fac=function(i){return new(i||a)};static \u0275mod=e.oAB({type:a});static \u0275inj=e.cJS({imports:[h.ez,T.T,f.m8,J.q,f.m8]})}return a})();var k=c(6005),N=c(4562);function be(a,r){if(1&a&&e._UZ(0,"span",11),2&a){const t=e.oxw(3);e.Tol(t.accordion.collapseIcon),e.Q6J("ngClass",t.iconClass)}}function _e(a,r){if(1&a&&e._UZ(0,"ChevronDownIcon",11),2&a){const t=e.oxw(3);e.Q6J("ngClass",t.iconClass)}}function ve(a,r){if(1&a&&(e.ynx(0),e.YNc(1,be,1,3,"span",9),e.YNc(2,_e,1,1,"ChevronDownIcon",10),e.BQk()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.accordion.collapseIcon),e.xp6(1),e.Q6J("ngIf",!t.accordion.collapseIcon)}}function Te(a,r){if(1&a&&e._UZ(0,"span",11),2&a){const t=e.oxw(3);e.Tol(t.accordion.expandIcon),e.Q6J("ngClass",t.iconClass)}}function Ze(a,r){if(1&a&&e._UZ(0,"ChevronRightIcon",11),2&a){const t=e.oxw(3);e.Q6J("ngClass",t.iconClass)}}function Ae(a,r){if(1&a&&(e.ynx(0),e.YNc(1,Te,1,3,"span",9),e.YNc(2,Ze,1,1,"ChevronRightIcon",10),e.BQk()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.accordion.expandIcon),e.xp6(1),e.Q6J("ngIf",!t.accordion.expandIcon)}}function Ce(a,r){if(1&a&&(e.ynx(0),e.YNc(1,ve,3,2,"ng-container",3),e.YNc(2,Ae,3,2,"ng-container",3),e.BQk()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.selected),e.xp6(1),e.Q6J("ngIf",!t.selected)}}function ye(a,r){}function Re(a,r){1&a&&e.YNc(0,ye,0,0,"ng-template")}function xe(a,r){if(1&a&&(e.TgZ(0,"span",12),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.hij(" ",t.header," ")}}function Ie(a,r){1&a&&e.GkF(0)}function qe(a,r){1&a&&e.Hsn(0,1,["*ngIf","hasHeaderFacet"])}function Oe(a,r){1&a&&e.GkF(0)}function De(a,r){if(1&a&&(e.ynx(0),e.YNc(1,Oe,1,0,"ng-container",6),e.BQk()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",t.contentTemplate)}}const Se=["*",[["p-header"]]],Me=function(a){return{$implicit:a}},H=function(a){return{transitionParams:a}},Pe=function(a){return{value:"visible",params:a}},Ue=function(a){return{value:"hidden",params:a}},Fe=["*","p-header"],we=["*"];let Je=0,Q=(()=>{class a{changeDetector;header;headerStyle;tabStyle;contentStyle;tabStyleClass;headerStyleClass;contentStyleClass;disabled;cache=!0;transitionOptions="400ms cubic-bezier(0.86, 0, 0.07, 1)";iconPos="start";selectedChange=new e.vpe;headerFacet;templates;_selected=!1;get selected(){return this._selected}set selected(t){this._selected=t,this.loaded||(this._selected&&this.cache&&(this.loaded=!0),this.changeDetector.detectChanges())}get iconClass(){return"end"===this.iconPos?"p-accordion-toggle-icon-end":"p-accordion-toggle-icon"}contentTemplate;headerTemplate;iconTemplate;id="p-accordiontab-"+Je++;loaded=!1;accordion;constructor(t,i){this.changeDetector=i,this.accordion=t}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"content":default:this.contentTemplate=t.template;break;case"header":this.headerTemplate=t.template;break;case"icon":this.iconTemplate=t.template}})}toggle(t){if(this.disabled)return!1;let i=this.findTabIndex();if(this.selected)this.selected=!1,this.accordion.onClose.emit({originalEvent:t,index:i});else{if(!this.accordion.multiple)for(var o=0;o<this.accordion.tabs.length;o++)this.accordion.tabs[o].selected&&(this.accordion.tabs[o].selected=!1,this.accordion.tabs[o].selectedChange.emit(!1),this.accordion.tabs[o].changeDetector.markForCheck());this.selected=!0,this.loaded=!0,this.accordion.onOpen.emit({originalEvent:t,index:i})}this.selectedChange.emit(this.selected),this.accordion.updateActiveIndex(),this.changeDetector.markForCheck(),t.preventDefault()}findTabIndex(){let t=-1;for(var i=0;i<this.accordion.tabs.length;i++)if(this.accordion.tabs[i]==this){t=i;break}return t}get hasHeaderFacet(){return this.headerFacet&&this.headerFacet.length>0}onKeydown(t){(32===t.which||13===t.which)&&(this.toggle(t),t.preventDefault())}ngOnDestroy(){this.accordion.tabs.splice(this.findTabIndex(),1)}static \u0275fac=function(i){return new(i||a)(e.Y36((0,e.Gpc)(()=>E)),e.Y36(e.sBO))};static \u0275cmp=e.Xpm({type:a,selectors:[["p-accordionTab"]],contentQueries:function(i,o,n){if(1&i&&(e.Suo(n,f.h4,4),e.Suo(n,f.jx,4)),2&i){let s;e.iGM(s=e.CRH())&&(o.headerFacet=s),e.iGM(s=e.CRH())&&(o.templates=s)}},hostAttrs:[1,"p-element"],inputs:{header:"header",headerStyle:"headerStyle",tabStyle:"tabStyle",contentStyle:"contentStyle",tabStyleClass:"tabStyleClass",headerStyleClass:"headerStyleClass",contentStyleClass:"contentStyleClass",disabled:"disabled",cache:"cache",transitionOptions:"transitionOptions",iconPos:"iconPos",selected:"selected"},outputs:{selectedChange:"selectedChange"},ngContentSelectors:Fe,decls:12,vars:38,consts:[[1,"p-accordion-tab",3,"ngClass","ngStyle"],[1,"p-accordion-header"],["role","tab",1,"p-accordion-header-link",3,"ngClass","click","keydown"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-accordion-header-text",4,"ngIf"],[4,"ngTemplateOutlet"],["role","region",1,"p-toggleable-content"],[1,"p-accordion-content",3,"ngClass","ngStyle"],[3,"class","ngClass",4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"p-accordion-header-text"]],template:function(i,o){1&i&&(e.F$t(Se),e.TgZ(0,"div",0)(1,"div",1)(2,"a",2),e.NdJ("click",function(s){return o.toggle(s)})("keydown",function(s){return o.onKeydown(s)}),e.YNc(3,Ce,3,2,"ng-container",3),e.YNc(4,Re,1,0,null,4),e.YNc(5,xe,2,1,"span",5),e.YNc(6,Ie,1,0,"ng-container",6),e.YNc(7,qe,1,0,"ng-content",3),e.qZA()(),e.TgZ(8,"div",7)(9,"div",8),e.Hsn(10),e.YNc(11,De,2,1,"ng-container",3),e.qZA()()()),2&i&&(e.ekj("p-accordion-tab-active",o.selected),e.Q6J("ngClass",o.tabStyleClass)("ngStyle",o.tabStyle),e.xp6(1),e.ekj("p-highlight",o.selected)("p-disabled",o.disabled),e.xp6(1),e.Akn(o.headerStyle),e.Q6J("ngClass",o.headerStyleClass),e.uIk("tabindex",o.disabled?null:0)("id",o.id)("aria-controls",o.id+"-content")("aria-expanded",o.selected),e.xp6(1),e.Q6J("ngIf",!o.iconTemplate),e.xp6(1),e.Q6J("ngTemplateOutlet",o.iconTemplate)("ngTemplateOutletContext",e.VKq(28,Me,o.selected)),e.xp6(1),e.Q6J("ngIf",!o.hasHeaderFacet),e.xp6(1),e.Q6J("ngTemplateOutlet",o.headerTemplate),e.xp6(1),e.Q6J("ngIf",o.hasHeaderFacet),e.xp6(1),e.Q6J("@tabContent",o.selected?e.VKq(32,Pe,e.VKq(30,H,o.transitionOptions)):e.VKq(36,Ue,e.VKq(34,H,o.transitionOptions))),e.uIk("id",o.id+"-content")("aria-hidden",!o.selected)("aria-labelledby",o.id),e.xp6(1),e.Q6J("ngClass",o.contentStyleClass)("ngStyle",o.contentStyle),e.xp6(2),e.Q6J("ngIf",o.contentTemplate&&(o.cache?o.loaded:o.selected)))},dependencies:function(){return[h.mk,h.O5,h.tP,h.PC,N.X,k.v]},styles:[".p-accordion-header-link{cursor:pointer;display:flex;align-items:center;-webkit-user-select:none;user-select:none;position:relative;text-decoration:none}.p-accordion-header-link:focus{z-index:1}.p-accordion-header-text{line-height:1}.p-accordion .p-toggleable-content{overflow:hidden}.p-accordion .p-accordion-tab-active>.p-toggleable-content:not(.ng-animating){overflow:inherit}.p-accordion-toggle-icon-end{order:1;margin-left:auto}.p-accordion-toggle-icon{order:0}\n"],encapsulation:2,data:{animation:[(0,g.X$)("tabContent",[(0,g.SB)("hidden",(0,g.oB)({height:"0"})),(0,g.SB)("visible",(0,g.oB)({height:"*"})),(0,g.eR)("visible <=> hidden",[(0,g.jt)("{{transitionParams}}")]),(0,g.eR)("void => *",(0,g.jt)(0))])]},changeDetection:0})}return a})(),E=(()=>{class a{el;changeDetector;multiple=!1;style;styleClass;expandIcon;collapseIcon;get activeIndex(){return this._activeIndex}set activeIndex(t){this._activeIndex=t,this.preventActiveIndexPropagation?this.preventActiveIndexPropagation=!1:this.updateSelectionState()}onClose=new e.vpe;onOpen=new e.vpe;activeIndexChange=new e.vpe;tabList;tabListSubscription=null;_activeIndex;preventActiveIndexPropagation=!1;tabs=[];constructor(t,i){this.el=t,this.changeDetector=i}ngAfterContentInit(){this.initTabs(),this.tabListSubscription=this.tabList.changes.subscribe(t=>{this.initTabs()})}initTabs(){this.tabs=this.tabList.toArray(),this.updateSelectionState(),this.changeDetector.markForCheck()}getBlockableElement(){return this.el.nativeElement.children[0]}updateSelectionState(){if(this.tabs&&this.tabs.length&&null!=this._activeIndex)for(let t=0;t<this.tabs.length;t++){let i=this.multiple?this._activeIndex.includes(t):t===this._activeIndex;i!==this.tabs[t].selected&&(this.tabs[t].selected=i,this.tabs[t].selectedChange.emit(i),this.tabs[t].changeDetector.markForCheck())}}updateActiveIndex(){let t=this.multiple?[]:null;this.tabs.forEach((i,o)=>{if(i.selected){if(!this.multiple)return void(t=o);t.push(o)}}),this.preventActiveIndexPropagation=!0,this.activeIndexChange.emit(t)}ngOnDestroy(){this.tabListSubscription&&this.tabListSubscription.unsubscribe()}static \u0275fac=function(i){return new(i||a)(e.Y36(e.SBq),e.Y36(e.sBO))};static \u0275cmp=e.Xpm({type:a,selectors:[["p-accordion"]],contentQueries:function(i,o,n){if(1&i&&e.Suo(n,Q,4),2&i){let s;e.iGM(s=e.CRH())&&(o.tabList=s)}},hostAttrs:[1,"p-element"],inputs:{multiple:"multiple",style:"style",styleClass:"styleClass",expandIcon:"expandIcon",collapseIcon:"collapseIcon",activeIndex:"activeIndex"},outputs:{onClose:"onClose",onOpen:"onOpen",activeIndexChange:"activeIndexChange"},ngContentSelectors:we,decls:2,vars:4,consts:[["role","tablist",3,"ngClass","ngStyle"]],template:function(i,o){1&i&&(e.F$t(),e.TgZ(0,"div",0),e.Hsn(1),e.qZA()),2&i&&(e.Tol(o.styleClass),e.Q6J("ngClass","p-accordion p-component")("ngStyle",o.style))},dependencies:[h.mk,h.PC],encapsulation:2,changeDetection:0})}return a})(),ke=(()=>{class a{static \u0275fac=function(i){return new(i||a)};static \u0275mod=e.oAB({type:a});static \u0275inj=e.cJS({imports:[h.ez,N.X,k.v,f.m8]})}return a})();var O=c(6263),D=c(4055),S=c(7161);const Ne=["op1"],He=["clienteMultiSelectReservar"],Qe=["clienteMultiSelectTarifa"],Ee=["clienteMultiSelectOcupar"],Le=["tarifaMultiSelectOcupar"];function Ye(a,r){1&a&&e._UZ(0,"i",57)}function Be(a,r){if(1&a&&(e.TgZ(0,"div"),e._UZ(1,"p-tag",68),e.qZA()),2&a){const t=e.oxw().$implicit,i=e.oxw(3);e.xp6(1),e.Q6J("value",i.validarEstado(t.detalle,5))}}function ze(a,r){1&a&&(e.TgZ(0,"div"),e._UZ(1,"p-tag",69),e.qZA())}function je(a,r){1&a&&(e.TgZ(0,"div"),e._UZ(1,"p-tag",70),e.qZA())}function Ge(a,r){1&a&&(e.TgZ(0,"div"),e._UZ(1,"p-tag",71),e.qZA())}function Ve(a,r){1&a&&(e.TgZ(0,"div"),e._UZ(1,"p-tag",72),e.qZA())}function $e(a,r){1&a&&(e.TgZ(0,"div"),e._UZ(1,"p-tag",73),e.qZA())}function Ke(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div",58)(1,"div",59),e._UZ(2,"label",60),e.qZA(),e.TgZ(3,"i",61),e.NdJ("click",function(o){const s=e.CHM(t).$implicit,p=e.oxw(3);return e.KtG(p.abrirMenu(o,s))}),e.qZA(),e.TgZ(4,"p-overlayPanel",62,63)(6,"p-menu",64),e.NdJ("click",function(){const n=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.opcionesHabitacion(n))}),e.qZA()(),e._UZ(7,"br"),e.TgZ(8,"div",12),e._UZ(9,"img",65),e.qZA(),e.TgZ(10,"div",66),e.ynx(11),e.YNc(12,Be,2,1,"div",67),e.YNc(13,ze,2,0,"div",67),e.YNc(14,je,2,0,"div",67),e.YNc(15,Ge,2,0,"div",67),e.YNc(16,Ve,2,0,"div",67),e.YNc(17,$e,2,0,"div",67),e.BQk(),e.qZA()()}if(2&a){const t=r.$implicit,i=e.oxw(3);e.xp6(2),e.Q6J("label",t.nombre),e.xp6(2),e.Q6J("showCloseIcon",!0),e.xp6(2),e.Q6J("model",i.menuHabitacion),e.xp6(3),e.MGl("src","assets/puertas/",t.habitacionNombre,".jpg",e.LSH),e.xp6(3),e.Q6J("ngIf",i.validarEstado(t.detalle,5)),e.xp6(1),e.Q6J("ngIf",i.validarEstado(t.detalle,3)),e.xp6(1),e.Q6J("ngIf",i.validarEstado(t.detalle,4)),e.xp6(1),e.Q6J("ngIf",i.validarEstado(t.detalle,6)),e.xp6(1),e.Q6J("ngIf",i.validarEstado(t.detalle,2)),e.xp6(1),e.Q6J("ngIf",i.validarEstado(t.detalle,7))}}function Xe(a,r){if(1&a&&(e.YNc(0,Ye,1,0,"i",54),e.TgZ(1,"div",55),e.YNc(2,Ke,18,10,"div",56),e.qZA()),2&a){const t=e.oxw().$implicit;e.Q6J("ngIf",t.loading),e.xp6(2),e.Q6J("ngForOf",t.habitaciones)}}function We(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"p-accordion")(1,"p-accordionTab",52),e.NdJ("selectedChange",function(){const n=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.openTag(n.piso))}),e.YNc(2,Xe,3,2,"ng-template",53),e.qZA()()}if(2&a){const t=r.$implicit,i=e.oxw();e.xp6(1),e.Q6J("header","Piso "+t.piso)("selected",t.piso==i.primerPiso)}}function et(a,r){if(1&a&&(e.TgZ(0,"div",74)(1,"span",75),e._uU(2),e.qZA()()),2&a){const t=r.$implicit;e.xp6(2),e.Oqu(t.name)}}function tt(a,r){1&a&&(e.TgZ(0,"div")(1,"h5"),e._uU(2,"Hora"),e.qZA()())}function ot(a,r){1&a&&(e.TgZ(0,"div")(1,"h5"),e._uU(2,"Noche"),e.qZA()())}function it(a,r){if(1&a&&(e.TgZ(0,"div",74)(1,"span",75),e._uU(2),e._UZ(3,"p-tag",76),e.YNc(4,tt,3,0,"div",67),e.YNc(5,ot,3,0,"div",67),e.qZA()()),2&a){const t=r.$implicit;e.xp6(2),e.hij(" ",t.nombre," "),e.xp6(1),e.s9C("icon",t.icon),e.s9C("value",t.valor),e.xp6(1),e.Q6J("ngIf",2==t.tipo),e.xp6(1),e.Q6J("ngIf",1==t.tipo)}}function at(a,r){1&a&&(e.TgZ(0,"div",86),e._uU(1,"Nombre es requerido."),e.qZA())}function nt(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div",77)(1,"div",78)(2,"label",79),e._uU(3,"Monto"),e.qZA(),e._UZ(4,"br"),e.TgZ(5,"input",80),e.NdJ("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.changeMedioPagoReserva())}),e.qZA(),e._UZ(6,"br"),e.YNc(7,at,2,0,"div",34),e.qZA(),e.TgZ(8,"div",78)(9,"label",81),e._uU(10,"Medio Pago"),e.qZA(),e._UZ(11,"br")(12,"p-dropdown",82),e.qZA(),e.TgZ(13,"div",83),e._UZ(14,"label",84)(15,"br"),e.TgZ(16,"p-button",85),e.NdJ("click",function(){const n=e.CHM(t).index,s=e.oxw();return e.KtG(s.eliminarMedioPago(n))}),e.qZA()()()}if(2&a){const t=r.$implicit,i=e.oxw();e.Q6J("formGroup",t),e.xp6(7),e.Q6J("ngIf",null==t||null==t.controls.monto||null==t.controls.monto.errors?null:t.controls.monto.errors.required),e.xp6(5),e.Q6J("options",i.selectMedioPago)}}function rt(a,r){if(1&a&&(e.TgZ(0,"tbody")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA()()),2&a){const t=r.$implicit;e.xp6(2),e.hij(" ",t.nombre," "),e.xp6(2),e.hij(" ",t.valor," ")}}function st(a,r){if(1&a&&(e.TgZ(0,"tbody")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA()()),2&a){const t=r.$implicit;e.xp6(2),e.hij(" ",t.monto," "),e.xp6(2),e.hij(" ",t.medio_pago.nombre," ")}}function lt(a,r){if(1&a&&(e.TgZ(0,"div",74)(1,"span",75),e._uU(2),e.qZA()()),2&a){const t=r.$implicit;e.xp6(2),e.Oqu(t.name)}}function ct(a,r){1&a&&(e.TgZ(0,"div",86),e._uU(1,"Campo requerido"),e.qZA())}function dt(a,r){1&a&&(e.TgZ(0,"div",86),e._uU(1,"Campo requerido"),e.qZA())}function pt(a,r){1&a&&e._UZ(0,"p-message",87)}function ut(a,r){if(1&a&&(e.TgZ(0,"div",74)(1,"span",75),e._uU(2),e.qZA()()),2&a){const t=r.$implicit;e.xp6(2),e.Oqu(t.name)}}function ht(a,r){1&a&&(e.TgZ(0,"div",86),e._uU(1,"Campo requerido"),e.qZA())}function mt(a,r){1&a&&(e.TgZ(0,"div",86),e._uU(1,"Campo requerido"),e.qZA())}function gt(a,r){1&a&&e._UZ(0,"p-message",87)}function ft(a,r){if(1&a&&(e.TgZ(0,"div",74)(1,"span",75),e._uU(2),e.qZA()()),2&a){const t=r.$implicit;e.xp6(2),e.Oqu(t.name)}}function bt(a,r){1&a&&(e.TgZ(0,"div")(1,"h5"),e._uU(2,"Hora"),e.qZA()())}function _t(a,r){1&a&&(e.TgZ(0,"div")(1,"h5"),e._uU(2,"Noche"),e.qZA()())}function vt(a,r){if(1&a&&(e.TgZ(0,"div",74)(1,"span",75),e._uU(2),e._UZ(3,"p-tag",76),e.YNc(4,bt,3,0,"div",67),e.YNc(5,_t,3,0,"div",67),e.qZA()()),2&a){const t=r.$implicit;e.xp6(2),e.hij(" ",t.nombre," "),e.xp6(1),e.s9C("icon",t.icon),e.s9C("value",t.valor),e.xp6(1),e.Q6J("ngIf",2==t.tipo),e.xp6(1),e.Q6J("ngIf",1==t.tipo)}}function Tt(a,r){1&a&&(e.TgZ(0,"div",86),e._uU(1,"Nombre es requerido."),e.qZA())}function Zt(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div",77)(1,"div",78)(2,"label",79),e._uU(3,"Monto"),e.qZA(),e._UZ(4,"br"),e.TgZ(5,"input",80),e.NdJ("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.changeMedioPagoOcupar())}),e.qZA(),e._UZ(6,"br"),e.YNc(7,Tt,2,0,"div",34),e.qZA(),e.TgZ(8,"div",78)(9,"label",81),e._uU(10,"Medio Pago"),e.qZA(),e._UZ(11,"br")(12,"p-dropdown",82),e.qZA(),e.TgZ(13,"div",83),e._UZ(14,"label",84)(15,"br"),e.TgZ(16,"p-button",85),e.NdJ("click",function(){const n=e.CHM(t).index,s=e.oxw();return e.KtG(s.eliminarMedioPagoAbono(n))}),e.qZA()()()}if(2&a){const t=r.$implicit,i=e.oxw();e.Q6J("formGroup",t),e.xp6(7),e.Q6J("ngIf",null==t||null==t.controls.monto||null==t.controls.monto.errors?null:t.controls.monto.errors.required),e.xp6(5),e.Q6J("options",i.selectMedioPago)}}function At(a,r){1&a&&e._UZ(0,"p-message",88)}function Ct(a,r){1&a&&e._UZ(0,"p-message",89)}function yt(a,r){1&a&&e._UZ(0,"p-message",90)}function Rt(a,r){if(1&a&&(e.TgZ(0,"tbody")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA()()),2&a){const t=r.$implicit;e.xp6(2),e.hij(" ",t.nombre," "),e.xp6(2),e.hij(" ",t.valor," ")}}function xt(a,r){if(1&a&&(e.TgZ(0,"tbody")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA()()),2&a){const t=r.$implicit;e.xp6(2),e.hij(" ",t.monto," "),e.xp6(2),e.hij(" ",t.medio_pago.nombre," ")}}const L=function(){return{width:"70vw"}},Y=function(){return{width:"50vw",height:"150vw"}};let It=(()=>{class a{ngOnInit(){this.buildForm(),this.pisoId=1,this.primerPiso=this.pisoId;let t=JSON.parse(localStorage.getItem("currentUser"));this.hotelId=t.usuario.datalle_hoteles[0].hotel_id,this.getRoomsDashboardPisos(),this.clienteData=[],this.ProductoServicioData=[],this.empleadosData=[],this.tarifaData=[],this.hoy=new Date}constructor(t,i,o,n,s){this.dashboardRoomsService=t,this.FB=i,this.spinner=o,this.datePipe=n,this.router=s,this.dayNamesSpanish=["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"],this.dayNamesShortSpanish=["Dom","Lun","Mar","Mi\xe9","Jue","Vie","S\xe1b"],this.monthNamesSpanish=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],this.monthNamesShortSpanish=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],this.localeSettingsSpanish={firstDayOfWeek:1,dayNames:this.dayNamesSpanish,dayNamesShort:this.dayNamesShortSpanish,monthNames:this.monthNamesSpanish,monthNamesShort:this.monthNamesShortSpanish,today:"Hoy",clear:"Borrar",dateFormat:"dd/mm/yy",weekHeader:"Sm"},this.totalPagarReserva=0,this.selectedMulti=[],this.primerPiso=1,this.pisoSeleccionado=1,this.dataRoom=[],this.reservacionModalVisible=!1,this.ProductoServicioDataSeleccionados=[],this.selectMedioPago=[],this.visibleModalLimpieza=!1,this.visibleModalMantenimiento=!1,this.ocuparModalVisible=!1,this.tarifasAgregadasReserva=[],this.productosAgregadosReserva=[],this.tarifasAgregadasOcupar=[],this.productosAgregadosOcupar=[],this.tarifasTotal=0,this.productosTotal=0,this.abonosTotal=0,this.tarifasTotalOcupar=0,this.productosTotalOcupar=0,this.abonosTotalOcupar=0,this.totalPagarOcupar=0,this.disableReserva=!1,this.disableOcupar=!1,this.disableButtonMantenimiento=!1,this.disableButtonLimpieza=!1,this.formReservacionArray=this.FB.array([]),this.formOcuparArray=this.FB.array([])}buildForm(){this.spinner.hide(),this.formLimpieza=this.FB.group({descripcion:["",[l.kI.required]],empleado:["",[l.kI.required]],fechaInicio:["",[l.kI.required]],fechaFinal:["",[l.kI.required]]}),this.formMantenimiento=this.FB.group({descripcion:["",[l.kI.required]],empleado:["",[l.kI.required]],fechaInicio:["",[l.kI.required]],fechaFinal:["",[l.kI.required]]}),this.formReservacion=this.FB.group({habitacion_id:["",[l.kI.required]],hotel_id:["",[l.kI.required]],cliente_id:["",[l.kI.required]],fecha_inicio:["",[l.kI.required]],fecha_final:["",[l.kI.required]]}),this.formReserva=this.FB.group({descripcionReserva:["",l.kI.required]}),this.formOcupar=this.FB.group({descripcionReserva:["",l.kI.required]})}agregarAbono(){let t=this.FB.group({monto:["",[l.kI.required,l.kI.min(0)]],medio_pago:[this.selectMedioPago[0],[l.kI.required,l.kI.min(0)]]});this.formReservacionArray.push(t)}agregarAbonoOcupar(){let t=this.FB.group({monto:["",[l.kI.required,l.kI.min(0)]],medio_pago:[this.selectMedioPago[0],[l.kI.required,l.kI.min(0)]]});this.formOcuparArray.push(t)}getRoomsDashboard(){this.dashboardRoomsService.getDashboardRooms({hotel_id:this.hotelId,piso_id:this.pisoId}).subscribe(i=>{this.dataRoom.forEach(n=>{this.pisoId==n.piso&&(n.habitaciones=[])});let o=this.dataRoom.find(n=>n.piso==this.pisoId);o.loading=!1,i.forEach(n=>{o.habitaciones.push({nombre:n.nombre,json:n.diseno_json,id:n.id,detalle:n.habitacion_estado,tipoHabitacion:n.tipo_habitacion,habitacionNombre:JSON.parse(n.tipo_habitacion.diseno_json).puerta,piso:n.piso,habitacionEstado:n.habitacion_estado})}),this.dataRoom.forEach(n=>{this.pisoId==n.piso&&(n=o)})},i=>{console.log("Error: ",i)})}getRoomsDashboardPisos(){this.dashboardRoomsService.getPisos({hotel_id:this.hotelId,piso_id:this.pisoId}).subscribe(i=>{this.dataRoomsPisos=[],this.dataRoomsPisos=i.pisos,this.dataRoomsPisos.forEach(o=>{this.dataRoom.push({piso:o.piso,habitaciones:[],loading:!0})}),this.getRoomsDashboard()},i=>{console.log("Error: ",i)})}openTag(t){this.pisoId=t,this.getRoomsDashboard()}opcionesHabitacion(t){}opcionSeleccionada(t,i){this.estadoHabitacion=t.item.id,this.formReservacionArray=this.FB.array([]),this.formOcuparArray=this.FB.array([]),setTimeout(()=>{this.accionMenuHabitaciones()},500)}accionMenuHabitaciones(){let t={};5==this.estadoHabitacion?this.reservar():4==this.estadoHabitacion?this.getDataEmpleado({hotel_id:this.habitacionId,estado:4}):6==this.estadoHabitacion?this.getDataEmpleado({hotel_id:this.habitacionId,estado:6}):2==this.estadoHabitacion?this.ocupar():20==this.estadoHabitacion?(t={id_habitacion:this.habitacionId},d().fire({title:"\xbfEstas seguro que deseas desocupar?",text:"",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, Confirmar",cancelButtonText:"Cancelar"}).then(i=>{i.isConfirmed&&this.enviarDesocupar(t)})):50==this.estadoHabitacion?(t={id_habitacion:this.habitacionId},d().fire({title:"\xbfEstas seguro que deseas Anular la reserva?",text:"",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, Confirmar",cancelButtonText:"Cancelar"}).then(i=>{i.isConfirmed&&this.enviarAnularReserva(t)})):40==this.estadoHabitacion?(t={id_habitacion:this.habitacionId},d().fire({title:"\xbfEstas seguro que deseas Anular La impuestos?",text:"",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, Confirmar",cancelButtonText:"Cancelar"}).then(i=>{i.isConfirmed&&this.enviarAnularLimpieza(t)})):60==this.estadoHabitacion?(t={id_habitacion:this.habitacionId},d().fire({title:"\xbfEstas seguro que deseas Anular el mantenimiento?",text:"",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, Confirmar",cancelButtonText:"Cancelar"}).then(i=>{i.isConfirmed&&this.enviarAnularMantenimiento(t)})):8==this.estadoHabitacion?this.router.navigate(["dashboard/dashboardRooms/"+this.habitacionId+"/ocupar"]):console.log("Ninguno")}abrirMenu(t,i){this.op1.toggle(t);let o=[];this.habitacionId=i.id,this.nombreHabitacionReservada=i.nombre,this.tipoHabitacionId=i.tipoHabitacion.id,this.pisoSeleccionado=i.piso,this.estadoHabitacionActual=i.habitacionEstado,this.detalleHabitacion=i.detalle,this.estadoHabitacionActual.forEach(p=>{o.push(p.estado_id)});let n=[];if(console.log(this.estadoHabitacionActual),o.includes(5)||n.push({label:"Reservar",icon:"pi pi-calendar-times",id:"5",command:p=>this.opcionSeleccionada(p,i),visible:!0,disabled:!1}),o.includes(4)||n.push({label:"Limpieza",icon:"pi pi-exclamation-triangle",id:"4",command:p=>this.opcionSeleccionada(p,i),visible:!0,disabled:!!o.includes(2)}),(o.includes(2)||o.includes(7))&&n.push({label:"Ver Ocupacion",icon:"pi pi-book",id:"8",command:p=>this.opcionSeleccionada(p,i),visible:!0,disabled:!o.includes(7)&&!o.includes(2)}),!o.includes(2)){let p=!1;i.detalle&&i.detalle.forEach(u=>{if(5==u.estado_id){let m=new Date(u.fecha_inicio),po=m.getFullYear()+"/"+m.getMonth()+"/"+m.getDate();(new Date).getFullYear()+"/"+(new Date).getMonth()+"/"+(new Date).getDate()==po&&(p=!0)}}),n.push({label:"Ocupar",icon:"pi pi-lock",id:"2",command:u=>this.opcionSeleccionada(u,i),visible:!0,disabled:!!o.includes(7)})}o.includes(6)||n.push({label:"Mantenimiento",icon:"pi pi-wrench",id:"6",command:p=>this.opcionSeleccionada(p,i),visible:!0,disabled:!!o.includes(2)});let s=!1;o.forEach(p=>{switch(p){case 5:s||(n.push({label:"Reservar",icon:"pi pi-calendar-times",id:"5",command:u=>this.opcionSeleccionada(u,i),visible:!0,disabled:!1}),s=!0);break;case 4:n.push({label:"Anular Limpieza",icon:"pi pi-exclamation-triangle",id:"40",command:u=>this.opcionSeleccionada(u,i),visible:!0,disabled:!!o.includes(2)});break;case 6:n.push({label:"Anular Mantenimiento",icon:"pi pi-wrench",id:"60",command:u=>this.opcionSeleccionada(u,i),visible:!0,disabled:!!o.includes(2)});break;case 2:n.push({label:"Desocupar",icon:"pi pi-lock-open",id:"20",command:u=>this.opcionSeleccionada(u,i),visible:!0})}}),this.menuHabitacion=[{label:"Opciones",items:n}]}reservar(){this.getReserva()}enviarReservar(t){this.dashboardRoomsService.reservar(t).subscribe(i=>{let o=i;this.reservacionModalVisible=!1,"success"==o.code?(d().fire({title:"Exito",text:"Reservacion exitosa.",icon:"success"}),this.openTag(this.pisoSeleccionado)):"warning"==o.code?d().fire({title:"Advertencia",text:o.error,icon:"warning"}):d().fire({title:"Error",text:"Error al generar la reserva.",icon:"error"})},i=>{console.log("Error: ",i)})}reservarSubmit(){}enviarDesocupar(t){this.dashboardRoomsService.desocupar(t).subscribe(i=>{let o=i;"success"==o.code?(d().fire({title:"Exito",text:"Anulacion Exitosa.",icon:"success"}),this.openTag(this.pisoSeleccionado)):"warning"==o.code?d().fire({title:"Advertencia",text:o.error,icon:"warning"}):d().fire({title:"Error",text:"Error al anular.",icon:"error"})},i=>{console.log("Error: ",i)})}enviarAnularReserva(t){this.dashboardRoomsService.anularReserva(t).subscribe(i=>{let o=i;"success"==o.code?(d().fire({title:"Exito",text:"Anulacion Exitosa.",icon:"success"}),this.openTag(this.pisoSeleccionado)):"warning"==o.code?d().fire({title:"Advertencia",text:o.error,icon:"warning"}):d().fire({title:"Error",text:"Error al anular.",icon:"error"})},i=>{console.log("Error: ",i)})}enviarAnularLimpieza(t){this.dashboardRoomsService.anularLimpieza(t).subscribe(i=>{let o=i;"success"==o.code?(d().fire({title:"Exito",text:"Anulacion Exitosa.",icon:"success"}),this.openTag(this.pisoSeleccionado)):"warning"==o.code?d().fire({title:"Advertencia",text:o.error,icon:"warning"}):d().fire({title:"Error",text:"Error al anular.",icon:"error"})},i=>{console.log("Error: ",i)})}enviarAnularMantenimiento(t){this.spinner.show(),this.dashboardRoomsService.anularMantenimiento(t).subscribe(i=>{this.spinner.hide();let o=i;"success"==o.code?(d().fire({title:"Exito",text:"Anulacion Exitosa.",icon:"success"}),this.openTag(this.pisoSeleccionado)):"warning"==o.code?d().fire({title:"Advertencia",text:o.error,icon:"warning"}):d().fire({title:"Error",text:"Error al anular.",icon:"error"})},i=>{console.log("Error: ",i)})}enviarMantenimiento(t){this.spinner.show(),this.dashboardRoomsService.mantenimiento(t).subscribe(i=>{this.spinner.hide(),this.visibleModalMantenimiento=!1;let o=i;"success"==o.code?(d().fire({title:"Exito",text:"Registro exitoso.",icon:"success"}),this.openTag(this.pisoSeleccionado)):"warning"==o.code?d().fire({title:"Advertencia",text:o.error,icon:"warning"}):d().fire({title:"Error",text:"Error al registrar.",icon:"error"})},i=>{console.log("Error: ",i)})}enviarOcuparReserva(t){this.spinner.show(),this.dashboardRoomsService.ocuparReserva(t).subscribe(i=>{this.spinner.hide();let o=i;this.ocuparModalVisible=!1,"success"==o.code?(d().fire({title:"Exito",text:"Ocupacion exitosa.",icon:"success"}),this.openTag(this.pisoSeleccionado)):"warning"==o.code?d().fire({title:"Advertencia",text:o.error,icon:"warning"}):d().fire({title:"Error",text:"Error al generar la ocupacion.",icon:"error"})},i=>{console.log("Error: ",i)})}enviarOcupar(t){this.spinner.show(),this.dashboardRoomsService.ocupar(t).subscribe(i=>{this.spinner.hide();let o=i;this.ocuparModalVisible=!1,"success"==o.code?(d().fire({title:"Exito",text:"Ocupacion exitosa.",icon:"success"}),this.openTag(this.pisoSeleccionado)):"warning"==o.code?d().fire({title:"Advertencia",text:o.error,icon:"warning"}):d().fire({title:"Error",text:"Error al generar la ocupacion.",icon:"error"})},i=>{console.log("Error: ",i)})}enviarLimpieza(t){this.spinner.show(),this.dashboardRoomsService.limpieza(t).subscribe(i=>{this.spinner.hide();let o=i;this.visibleModalLimpieza=!1,"success"==o.code?(d().fire({title:"Exito",text:"Registro exitoso.",icon:"success"}),this.openTag(this.pisoSeleccionado)):"warning"==o.code?d().fire({title:"Advertencia",text:o.error,icon:"warning"}):d().fire({title:"Error",text:"Error al registrar.",icon:"error"})},i=>{console.log("Error: ",i)})}ocupar(){let t=[];this.estadoHabitacionActual.forEach(i=>{t.push(i.estado_id)}),this.getReserva()}getReserva(t=""){this.spinner.show(),this.dashboardRoomsService.getReserva({hotel_id:this.hotelId,cliente_busqueda:t,tipo_habitacion:this.tipoHabitacionId}).subscribe(o=>{this.spinner.hide(),this.clienteMultiSelectReservar.checkAll(),this.clienteMultiSelectReservar.uncheckAll(),this.clienteMultiSelectTarifa.checkAll(),this.clienteMultiSelectTarifa.uncheckAll(),this.clienteMultiSelectOcupar.checkAll(),this.clienteMultiSelectOcupar.uncheckAll(),this.tarifaMultiSelectOcupar.checkAll(),this.tarifaMultiSelectOcupar.uncheckAll(),this.selectMedioPago=[],this.tarifaData=[],this.ProductoServicioData=[],this.clienteData=[],this.formReservacionArray=this.FB.array([]),this.formOcuparArray=this.FB.array([]),this.fechaFinal="",this.fechaInicio="",this.descripcionReserva="",this.totalPagarOcupar=0,this.totalPagarReserva=0,this.abonosTotal=0,this.abonosTotalOcupar=0,this.formReserva.reset(),this.formOcupar.reset(),5==this.estadoHabitacion&&(this.reservacionModalVisible=!0,this.validacionesReserva()),2==this.estadoHabitacion&&(this.validacionesOcupacion(),this.ocuparModalVisible=!0);let s=o.metodos_pago,p=o.tarifa;o.cliente.forEach(m=>{this.clienteData.push({name:m.numero_documento+" "+m.nombres+" "+m.apellidos,code:m.numero_documento,id:m.id})}),s.forEach(m=>{this.selectMedioPago.push({nombre:m.nombre,id:m.id})}),p.forEach(m=>{this.tarifaData.push({nombre:m.nombre,id:m.id,tipo:m.tipo,valor:m.valor,icon:1!=m.tipo?"pi pi-hourglass":"pi pi-moon"})}),o.productos.forEach(m=>{this.ProductoServicioData.push({name:m.nombre,code:m.id,valor:m.precio,tipo:m.tipo_producto})})},o=>{this.spinner.hide(),console.log("Error: ",o)})}busquedaCliente(t){this.getReserva(t.filter)}submitAsignarLimpieza(){if(this.formLimpieza.valid){let t={empleado_id:this.formLimpieza.value.empleado[0].code,descripcion:this.formLimpieza.value.descripcion,fecha_final:this.datePipe.transform(this.formLimpieza.value.fechaFinal,"yyyy-MM-dd HH:mm:ss"),fecha_inicio:this.datePipe.transform(this.formLimpieza.value.fechaInicio,"yyyy-MM-dd HH:mm:ss"),habitacion_id:this.habitacionId};this.enviarLimpieza(t)}}eliminarMedioPago(t){this.formReservacionArray.removeAt(t)}eliminarMedioPagoAbono(t){this.formOcuparArray.removeAt(t)}getDataEmpleado(t){this.spinner.show(),this.dashboardRoomsService.getEmpleadoHabitacion(t).subscribe(i=>{this.spinner.hide(),this.empleadosData=[],i.empleados.forEach(o=>{this.empleadosData.push({name:o.nombres+" "+o.apellidos,code:o.id})}),4==t.estado?(this.formLimpieza.reset(),this.visibleModalLimpieza=!0):6==t.estado&&(this.formMantenimiento.reset(),this.visibleModalMantenimiento=!0)},i=>{this.spinner.hide(),console.log("Error: ",i)})}submitAsignarMantenimiento(){if(this.formMantenimiento.valid){let t={empleado_id:this.formMantenimiento.value.empleado[0].code,descripcion:this.formMantenimiento.value.descripcion,fecha_final:this.datePipe.transform(this.formMantenimiento.value.fechaFinal,"yyyy-MM-dd HH:mm:ss"),fecha_inicio:this.datePipe.transform(this.formMantenimiento.value.fechaInicio,"yyyy-MM-dd HH:mm:ss"),habitacion_id:this.habitacionId};this.enviarMantenimiento(t)}}checkTarifaReserva(t){this.tarifasAgregadasReserva=[],this.tarifasAgregadasReserva=t.value,this.calcularTotalTarifaReserva(),this.calcularTotalReserva()}checkProducto(t){this.productosAgregadosReserva=t.value,this.calcularTotalProductosReserva(),this.calcularTotalReserva()}calcularTotalTarifaReserva(){this.tarifasTotal=0,this.tarifasAgregadasReserva.forEach(t=>{this.tarifasTotal=this.tarifasTotal+parseFloat(t.valor)})}calcularTotalReserva(){this.totalPagarReserva=this.tarifasTotal+this.productosTotal,this.validacionesReserva()}calcularTotalProductosReserva(){this.productosTotal=0,this.productosAgregadosReserva.forEach(t=>{this.productosTotal=this.productosTotal+parseFloat(t.valor)})}changeMedioPagoReserva(){this.abonosTotal=0,this.formReservacionArray.value.forEach(t=>{this.abonosTotal=this.abonosTotal+parseFloat(t.monto)}),this.validacionesReserva()}validacionesReserva(){let t=!1;this.abonosTotal>this.totalPagarReserva&&(this.disableReserva=!0,t=!0),this.fechaFinal<this.fechaInicio&&(this.disableReserva=!0,t=!0),this.totalPagarReserva<=0&&(this.disableReserva=!0,t=!0),this.fechaFinal||(this.disableReserva=!0,t=!0),this.fechaInicio||(this.disableReserva=!0,t=!0),this.tarifasAgregadasReserva.length<=0&&(this.disableReserva=!0,t=!0),this.fechaInicio<new Date&&(this.disableReserva=!0,t=!0),t||(this.disableReserva=!1)}fechaInicioChange(){this.validacionesReserva()}fechaFinalChange(){this.validacionesReserva()}checkTarifaOcupar(t){this.tarifasAgregadasOcupar=[],this.tarifasAgregadasOcupar=t.value,this.calcularTotalTarifaOcupar(),this.calcularTotalOcupar()}checkProductoOcupar(t){this.productosAgregadosOcupar=t.value,this.calcularTotalProductosOcupar(),this.calcularTotalOcupar()}calcularTotalProductosOcupar(){this.productosTotalOcupar=0,this.productosAgregadosOcupar.forEach(t=>{this.productosTotalOcupar=this.productosTotalOcupar+parseFloat(t.valor)})}calcularTotalTarifaOcupar(){this.tarifasTotalOcupar=0,this.tarifasAgregadasOcupar.forEach(t=>{this.tarifasTotalOcupar=this.tarifasTotalOcupar+parseFloat(t.valor)})}calcularTotalOcupar(){this.totalPagarOcupar=this.tarifasTotalOcupar+this.productosTotalOcupar,this.validacionesOcupacion()}validacionesOcupacion(){let t=!1;this.abonosTotalOcupar>this.totalPagarOcupar&&(this.disableOcupar=!0,t=!0),this.totalPagarOcupar<=0&&(this.disableOcupar=!0,t=!0),this.tarifasAgregadasOcupar.length<=0&&(this.disableOcupar=!0,t=!0),t||(this.disableOcupar=!1)}changeMedioPagoOcupar(){this.abonosTotalOcupar=0,this.formOcuparArray.value.forEach(t=>{this.abonosTotalOcupar=this.abonosTotalOcupar+parseFloat(t.monto)}),this.validacionesReserva()}submitReserva(){let t=this.datePipe.transform(this.fechaInicio,"yyyy-MM-dd HH:mm:ss"),i=this.datePipe.transform(this.fechaFinal,"yyyy-MM-dd HH:mm:ss");this.enviarReservar({fecha_inicio:t,fecha_final:i,cliente_id:this.clienteMultiSelectReservar.value[0].id,total:this.totalPagarReserva-this.abonosTotal,subtotal:this.totalPagarReserva,tarifas:this.clienteMultiSelectTarifa.value,productos:[],descripcion:this.descripcionReserva,habitacion_id:this.habitacionId,hotel_id:this.hotelId,abonos:this.formReservacionArray.value})}descripcionReservaInput(t){this.descripcionReserva=t}submitOcupar(){let s={cliente_id:this.clienteMultiSelectOcupar.value[0].id,total:this.totalPagarOcupar-this.abonosTotalOcupar,subtotal:this.totalPagarOcupar,tarifas:this.tarifaMultiSelectOcupar.value,productos:[],descripcion:this.formReserva.get("descripcionReserva").value,habitacion_id:this.habitacionId,hotel_id:this.hotelId,abonos:this.formOcuparArray.value};this.enviarOcupar(s)}changeFechaMantenimiento(){let t=this.formMantenimiento.get("fechaInicio").value,i=this.formMantenimiento.get("fechaFinal").value;this.disableButtonMantenimiento=t>i}changeFechaLimpieza(t){let i=this.formLimpieza.get("fechaInicio").value,o=this.formLimpieza.get("fechaFinal").value;this.disableButtonLimpieza=i>o}validarEstado(t,i){return t.filter(n=>n.estado_id==i).length}static#e=this.\u0275fac=function(i){return new(i||a)(e.Y36(I.y),e.Y36(l.qu),e.Y36(Z.t2),e.Y36(h.uU),e.Y36(_.F0))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-dashboard-rooms"]],viewQuery:function(i,o){if(1&i&&(e.Gf(Ne,5),e.Gf(He,5),e.Gf(Qe,5),e.Gf(Ee,5),e.Gf(Le,5)),2&i){let n;e.iGM(n=e.CRH())&&(o.op1=n.first),e.iGM(n=e.CRH())&&(o.clienteMultiSelectReservar=n.first),e.iGM(n=e.CRH())&&(o.clienteMultiSelectTarifa=n.first),e.iGM(n=e.CRH())&&(o.clienteMultiSelectOcupar=n.first),e.iGM(n=e.CRH())&&(o.tarifaMultiSelectOcupar=n.first)}},decls:227,vars:83,consts:[["type","ball-scale-multiple","fullScreen","true"],[1,"card"],["icon","pi pi-calendar-times","value","Reservada",1,"padding"],["icon","pi pi-lock-open","severity","success","value","Disponible",1,"padding"],["icon","pi pi-exclamation-triangle","severity","info","value","Limpieza",1,"padding"],["icon","pi pi-wrench","severity","warning","value","Mantenimiento",1,"padding"],["icon","pi pi-lock","severity","danger","value","Ocupada",1,"padding"],["icon","pi pi-dollar","severity","success","value","Facturar",1,"padding"],[4,"ngFor","ngForOf"],["header","Reservar",3,"visible","modal","draggable","resizable","visibleChange"],[1,"col-12"],[3,"ngSubmit"],[2,"text-align","center"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-12"],["for","cliente"],["selectionLimit","1","optionLabel","name","placeholder","Buscar cliente","optionLabel","name","display","chip","emptyMessage","Cliente no encontrado",1,"multiselect-custom",3,"options","onFilter"],["clienteMultiSelectReservar",""],["pTemplate","item"],["optionLabel","nombre","placeholder","Buscar Tarifa","optionLabel","nombre","emptyMessage","Tarifa no encontrada","display","chip",1,"multiselect-custom",3,"options","onChange"],["clienteMultiSelectTarifa",""],[3,"header","toggleable","collapsed"],["pButton","","pRipple","","type","button","icon","pi pi-plus",1,"p-button-rounded",3,"click"],["style","margin-top: 5%;","class","grid formgrid",3,"formGroup",4,"ngFor","ngForOf"],[1,"field","col-12","md:col-6"],["locale","localeSettingsSpanish","inputId","fechaInicio","showTime","true","dateFormat","dd/mm/yy",1,"ng-dirty",3,"minDate","ngModel","showIcon","ngModelChange","onSelect"],["locale","localeSettingsSpanish","inputId","fechaFinal","showTime","true",1,"ng-dirty",3,"minDate","ngModel","showIcon","ngModelChange","onSelect"],[3,"formGroup"],["formControlName","descripcionReserva","pInputTextarea","","required","","rows","3","cols","20",3,"input"],[2,"width","20%"],["pButton","","pRipple","","label","Crear Reserva","showTime","true","icon","pi pi-calendar-times","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl",3,"disabled","click"],["header","Asignar Limpieza","dateFormat","dd/mm/yy",3,"visible","modal","draggable","resizable","visibleChange"],[3,"formGroup","ngSubmit"],["formControlName","empleado","selectionLimit","1","optionLabel","name","placeholder","Buscar Empleados","optionLabel","name","display","chip","emptyMessage","Empleado no encontrado",1,"multiselect-custom",3,"options"],["style","color: red;",4,"ngIf"],["locale","localeSettingsSpanish","inputId","fechaInicioLimpieza","formControlName","fechaInicio","showTime","true",1,"ng-dirty",3,"showIcon","onSelect"],["locale","localeSettingsSpanish","inputId","fechaFinalLimpieza","formControlName","fechaFinal","showTime","true",1,"ng-dirty",3,"showIcon","onSelect"],["formControlName","descripcion","pInputTextarea","","required","","rows","3","cols","20"],["severity","error","class","padding","text","La fecha final es mayor a la fecha inicial",4,"ngIf"],["pButton","","pRipple","","label","Asignar limpieza","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl",3,"disabled"],["header","Asignar Mantenimiento",3,"visible","modal","draggable","resizable","visibleChange"],["locale","localeSettingsSpanish","inputId","fechaInicioMantenimiento","formControlName","fechaInicio","showTime","true",1,"ng-dirty",3,"showIcon","onSelect"],["locale","localeSettingsSpanish","inputId","fechaFinalMantenimiento","formControlName","fechaFinal","showTime","true",1,"ng-dirty",3,"showIcon","onSelect"],["pButton","","pRipple","","label","Asignar Mantenimiento","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl",3,"disabled"],["header","Ocupar ",3,"visible","modal","draggable","resizable","visibleChange"],["clienteMultiSelectOcupar",""],["tarifaMultiSelectOcupar",""],["header","Abonos",3,"toggleable","collapsed"],["severity","error","class","padding","text","El abono es mayor a la cantidad agregada",4,"ngIf"],["severity","error","class","padding","text","El total a reservar debe ser mayor a 0",4,"ngIf"],["severity","error","class","padding","text","La tarifa es obligatoria",4,"ngIf"],["pButton","","pRipple","","label","Crear Ocupacion","icon","pi pi-calendar-times","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl",3,"disabled","click"],[1,"line-height-3","m-0",3,"header","selected","selectedChange"],["pTemplate","listItem"],["class","pi pi-spin pi-spinner","style","font-size: 4em;",4,"ngIf"],[1,"grid","p-fluid","mt-3"],["class","field col-12 md:col-3",4,"ngFor","ngForOf"],[1,"pi","pi-spin","pi-spinner",2,"font-size","4em"],[1,"field","col-12","md:col-3"],[1,"nomeRoome"],["pButton","","icon","pi pi-clock",3,"label"],[1,"pi","pi-ellipsis-v",2,"font-size","2rem","margin-top","4%","cursor","pointer",3,"click"],[3,"showCloseIcon"],["op1",""],[3,"model","click"],["width","80%","height","80%",1,"rooms",3,"src"],[1,"flex","flex-wrap","gap-2",2,"margin-left","20%"],[4,"ngIf"],["icon","pi pi-calendar-times",3,"value"],["icon","pi pi-lock-open","severity","success"],["icon","pi pi-exclamation-triangle","severity","info"],["icon","pi pi-wrench","severity","warning"],["icon","pi pi-lock","severity","danger"],["icon","pi pi-dollar","severity","success"],[1,"flex","align-items-center"],[1,"ml-2"],[1,"padding",3,"icon","value"],[1,"grid","formgrid",2,"margin-top","5%",3,"formGroup"],[1,"col-12","mb-2","lg:col-5","lg:mb-0"],["for","monto"],["type","number","id","monto","formControlName","monto","pInputText","","placeholder","Valor",3,"input"],["htmlFor","medioPago"],["formControlName","medio_pago","id","medioPago","optionLabel","nombre",3,"options"],[1,"col-12","mb-2","lg:col-2","lg:mb-0"],["htmlFor","opciones"],["id","opciones","icon","pi pi-trash","severity","danger",3,"click"],[2,"color","red"],["severity","error","text","La fecha final es mayor a la fecha inicial",1,"padding"],["severity","error","text","El abono es mayor a la cantidad agregada",1,"padding"],["severity","error","text","El total a reservar debe ser mayor a 0",1,"padding"],["severity","error","text","La tarifa es obligatoria",1,"padding"]],template:function(i,o){1&i&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"div"),e._UZ(3,"p-tag",2)(4,"p-tag",3)(5,"p-tag",4)(6,"p-tag",5)(7,"p-tag",6)(8,"p-tag",7),e.qZA(),e.TgZ(9,"h5"),e._uU(10,"Habitaciones"),e.qZA(),e.YNc(11,We,3,2,"p-accordion",8),e.qZA(),e.TgZ(12,"p-dialog",9),e.NdJ("visibleChange",function(s){return o.reservacionModalVisible=s}),e.TgZ(13,"div",10)(14,"div",11),e.NdJ("ngSubmit",function(){return o.reservarSubmit()}),e.TgZ(15,"h2",12),e._uU(16),e.qZA(),e.TgZ(17,"div",13)(18,"div",14)(19,"label",15),e._uU(20,"Cliente"),e.qZA(),e.TgZ(21,"p-multiSelect",16,17),e.NdJ("onFilter",function(s){return o.busquedaCliente(s)}),e.YNc(23,et,3,1,"ng-template",18),e.qZA()(),e.TgZ(24,"div",14)(25,"label",15),e._uU(26,"Tarifa"),e.qZA(),e.TgZ(27,"p-multiSelect",19,20),e.NdJ("onChange",function(s){return o.checkTarifaReserva(s)}),e.YNc(29,it,6,5,"ng-template",18),e.qZA()(),e.TgZ(30,"div",14)(31,"p-panel",21)(32,"button",22),e.NdJ("click",function(){return o.agregarAbono()}),e.qZA(),e.YNc(33,nt,17,3,"div",23),e.qZA()(),e.TgZ(34,"div",24)(35,"label"),e._uU(36,"Fecha Inicio "),e.qZA(),e.TgZ(37,"p-calendar",25),e.NdJ("ngModelChange",function(s){return o.fechaInicio=s})("onSelect",function(){return o.fechaInicioChange()}),e.qZA()(),e.TgZ(38,"div",24)(39,"label"),e._uU(40,"Fecha Final"),e.qZA(),e.TgZ(41,"p-calendar",26),e.NdJ("ngModelChange",function(s){return o.fechaFinal=s})("onSelect",function(){return o.fechaFinalChange()}),e.qZA()(),e.TgZ(42,"div",14)(43,"label"),e._uU(44,"Descripcion"),e.qZA(),e.TgZ(45,"form",27)(46,"textarea",28),e.NdJ("input",function(s){return o.descripcionReservaInput(s.target.value)}),e.qZA()()(),e.TgZ(47,"div",14)(48,"table")(49,"tr")(50,"th",29),e._uU(51,"Nombre"),e.qZA(),e.TgZ(52,"th"),e._uU(53,"Valores"),e.qZA(),e.TgZ(54,"td"),e._uU(55,"Detalle"),e.qZA()(),e.TgZ(56,"tr")(57,"th"),e._uU(58," Tarifas"),e.qZA(),e.TgZ(59,"th"),e._uU(60),e.qZA(),e.TgZ(61,"td")(62,"table")(63,"thead")(64,"th"),e._uU(65,"Nombre"),e.qZA(),e.TgZ(66,"th"),e._uU(67,"Precio"),e.qZA()(),e.YNc(68,rt,5,2,"tbody",8),e.qZA()()(),e.TgZ(69,"tr")(70,"th"),e._uU(71," Abonos"),e.qZA(),e.TgZ(72,"th"),e._uU(73),e.qZA(),e.TgZ(74,"td")(75,"table")(76,"thead")(77,"th"),e._uU(78,"Monto"),e.qZA(),e.TgZ(79,"th"),e._uU(80,"Metodo Pago"),e.qZA()(),e.YNc(81,st,5,2,"tbody",8),e.qZA()()(),e.TgZ(82,"tr")(83,"th"),e._uU(84," Sub Total"),e.qZA(),e.TgZ(85,"th"),e._uU(86),e.qZA(),e._UZ(87,"td"),e.qZA(),e.TgZ(88,"tr")(89,"th"),e._uU(90," Total"),e.qZA(),e.TgZ(91,"th"),e._uU(92),e.qZA(),e._UZ(93,"td"),e.qZA()()(),e.TgZ(94,"div",14)(95,"button",30),e.NdJ("click",function(){return o.submitReserva()}),e.qZA()()()()()(),e.TgZ(96,"p-dialog",31),e.NdJ("visibleChange",function(s){return o.visibleModalLimpieza=s}),e.TgZ(97,"div",10)(98,"h5"),e._uU(99,"Completa el formulario"),e.qZA(),e.TgZ(100,"form",32),e.NdJ("ngSubmit",function(){return o.submitAsignarLimpieza()}),e.TgZ(101,"div",13)(102,"div",14)(103,"p-multiSelect",33),e.YNc(104,lt,3,1,"ng-template",18),e.qZA(),e.YNc(105,ct,2,0,"div",34),e.qZA(),e.TgZ(106,"div",24)(107,"label"),e._uU(108,"Fecha Inicio "),e.qZA(),e.TgZ(109,"p-calendar",35),e.NdJ("onSelect",function(s){return o.changeFechaLimpieza(s)}),e.qZA()(),e.TgZ(110,"div",24)(111,"label"),e._uU(112,"Fecha Final"),e.qZA(),e.TgZ(113,"p-calendar",36),e.NdJ("onSelect",function(s){return o.changeFechaLimpieza(s)}),e.qZA()(),e.TgZ(114,"div",14)(115,"label"),e._uU(116,"Descripcion"),e.qZA(),e._UZ(117,"textarea",37),e.YNc(118,dt,2,0,"div",34),e.qZA(),e.YNc(119,pt,1,0,"p-message",38),e.TgZ(120,"div",14),e._UZ(121,"button",39),e.qZA()(),e._UZ(122,"br"),e.qZA()()(),e.TgZ(123,"p-dialog",40),e.NdJ("visibleChange",function(s){return o.visibleModalMantenimiento=s}),e.TgZ(124,"div",10)(125,"form",32),e.NdJ("ngSubmit",function(){return o.submitAsignarMantenimiento()}),e.TgZ(126,"div",13)(127,"div",14)(128,"p-multiSelect",33),e.YNc(129,ut,3,1,"ng-template",18),e.qZA(),e.YNc(130,ht,2,0,"div",34),e.qZA(),e.TgZ(131,"div",24)(132,"label"),e._uU(133,"Fecha Inicio "),e.qZA(),e.TgZ(134,"p-calendar",41),e.NdJ("onSelect",function(){return o.changeFechaMantenimiento()}),e.qZA()(),e.TgZ(135,"div",24)(136,"label"),e._uU(137,"Fecha Final"),e.qZA(),e.TgZ(138,"p-calendar",42),e.NdJ("onSelect",function(){return o.changeFechaMantenimiento()}),e.qZA()(),e.TgZ(139,"div",14)(140,"label"),e._uU(141,"Descripcion"),e.qZA(),e._UZ(142,"textarea",37),e.YNc(143,mt,2,0,"div",34),e.qZA(),e.YNc(144,gt,1,0,"p-message",38),e.TgZ(145,"div",14),e._UZ(146,"button",43),e.qZA()(),e._UZ(147,"br"),e.qZA()()(),e.TgZ(148,"p-dialog",44),e.NdJ("visibleChange",function(s){return o.ocuparModalVisible=s}),e.TgZ(149,"div",10)(150,"div")(151,"h2",12),e._uU(152),e.qZA(),e.TgZ(153,"div",13)(154,"div",14)(155,"label",15),e._uU(156,"Cliente"),e.qZA(),e.TgZ(157,"p-multiSelect",16,45),e.NdJ("onFilter",function(s){return o.busquedaCliente(s)}),e.YNc(159,ft,3,1,"ng-template",18),e.qZA()(),e.TgZ(160,"div",14)(161,"label",15),e._uU(162,"Tarifa"),e.qZA(),e.TgZ(163,"p-multiSelect",19,46),e.NdJ("onChange",function(s){return o.checkTarifaOcupar(s)}),e.YNc(165,vt,6,5,"ng-template",18),e.qZA()(),e.TgZ(166,"div",14)(167,"p-panel",47)(168,"button",22),e.NdJ("click",function(){return o.agregarAbonoOcupar()}),e.qZA(),e.YNc(169,Zt,17,3,"div",23),e.qZA()(),e.TgZ(170,"div",14)(171,"label"),e._uU(172,"Descripcion"),e.qZA(),e.TgZ(173,"form",27)(174,"textarea",28),e.NdJ("input",function(s){return o.descripcionReservaInput(s.target.value)}),e.qZA()()(),e.YNc(175,At,1,0,"p-message",48),e.YNc(176,Ct,1,0,"p-message",49),e.YNc(177,yt,1,0,"p-message",50),e.TgZ(178,"div",14)(179,"table")(180,"tr")(181,"th",29),e._uU(182,"Nombre"),e.qZA(),e.TgZ(183,"th"),e._uU(184,"Valores"),e.qZA(),e.TgZ(185,"td"),e._uU(186,"Detalle"),e.qZA()(),e.TgZ(187,"tr")(188,"th"),e._uU(189," Tarifas"),e.qZA(),e.TgZ(190,"th"),e._uU(191),e.qZA(),e.TgZ(192,"td")(193,"table")(194,"thead")(195,"th"),e._uU(196,"Nombre"),e.qZA(),e.TgZ(197,"th"),e._uU(198,"Precio"),e.qZA()(),e.YNc(199,Rt,5,2,"tbody",8),e.qZA()()(),e.TgZ(200,"tr")(201,"th"),e._uU(202," Abonos"),e.qZA(),e.TgZ(203,"th"),e._uU(204),e.qZA(),e.TgZ(205,"td")(206,"table")(207,"thead")(208,"th"),e._uU(209,"Monto"),e.qZA(),e.TgZ(210,"th"),e._uU(211,"Metodo Pago"),e.qZA()(),e.YNc(212,xt,5,2,"tbody",8),e.qZA()()(),e.TgZ(213,"tr")(214,"th"),e._uU(215," Sub Total"),e.qZA(),e.TgZ(216,"th"),e._uU(217),e.qZA(),e._UZ(218,"td"),e.qZA(),e.TgZ(219,"tr")(220,"th"),e._uU(221," Total"),e.qZA(),e.TgZ(222,"th"),e._uU(223),e.qZA(),e._UZ(224,"td"),e.qZA()()(),e.TgZ(225,"div",14)(226,"button",51),e.NdJ("click",function(){return o.submitOcupar()}),e.qZA()()()()()()),2&i&&(e.xp6(11),e.Q6J("ngForOf",o.dataRoom),e.xp6(1),e.Akn(e.DdM(79,L)),e.Q6J("visible",o.reservacionModalVisible)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(4),e.hij("",o.nombreHabitacionReservada," "),e.xp6(5),e.Q6J("options",o.clienteData),e.xp6(6),e.Q6J("options",o.tarifaData),e.xp6(4),e.MGl("header","Abonos $ ",o.abonosTotal,""),e.Q6J("toggleable",!0)("collapsed",!0),e.xp6(2),e.Q6J("ngForOf",o.formReservacionArray.controls),e.xp6(4),e.Q6J("minDate",o.hoy)("ngModel",o.fechaInicio)("showIcon",!0),e.xp6(4),e.Q6J("minDate",o.hoy)("ngModel",o.fechaFinal)("showIcon",!0),e.xp6(4),e.Q6J("formGroup",o.formReserva),e.xp6(15),e.hij(" $ ",o.tarifasTotal," "),e.xp6(8),e.Q6J("ngForOf",o.tarifasAgregadasReserva),e.xp6(5),e.hij(" $ ",o.abonosTotal," "),e.xp6(8),e.Q6J("ngForOf",o.formReservacionArray.value),e.xp6(5),e.hij(" $ ",o.totalPagarReserva<=0?0:o.totalPagarReserva," "),e.xp6(6),e.hij(" $ ",o.totalPagarReserva-o.abonosTotal<=0?0:o.totalPagarReserva-o.abonosTotal," "),e.xp6(3),e.Q6J("disabled",o.disableReserva||o.formReservacionArray.invalid),e.xp6(1),e.Akn(e.DdM(80,Y)),e.Q6J("visible",o.visibleModalLimpieza)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(4),e.Q6J("formGroup",o.formLimpieza),e.xp6(3),e.Q6J("options",o.empleadosData),e.xp6(2),e.Q6J("ngIf",o.formLimpieza.get("empleado").hasError("required")),e.xp6(4),e.Q6J("showIcon",!0),e.xp6(4),e.Q6J("showIcon",!0),e.xp6(5),e.Q6J("ngIf",o.formLimpieza.get("descripcion").hasError("required")),e.xp6(1),e.Q6J("ngIf",o.formLimpieza.get("fechaInicio").value>o.formLimpieza.get("fechaFinal").value),e.xp6(2),e.Q6J("disabled",o.formLimpieza.invalid||o.disableButtonLimpieza),e.xp6(2),e.Akn(e.DdM(81,Y)),e.Q6J("visible",o.visibleModalMantenimiento)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(2),e.Q6J("formGroup",o.formMantenimiento),e.xp6(3),e.Q6J("options",o.empleadosData),e.xp6(2),e.Q6J("ngIf",o.formMantenimiento.get("empleado").hasError("required")),e.xp6(4),e.Q6J("showIcon",!0),e.xp6(4),e.Q6J("showIcon",!0),e.xp6(5),e.Q6J("ngIf",o.formMantenimiento.get("descripcion").hasError("required")),e.xp6(1),e.Q6J("ngIf",o.formMantenimiento.get("fechaInicio").value>o.formMantenimiento.get("fechaFinal").value),e.xp6(2),e.Q6J("disabled",o.formMantenimiento.invalid||o.disableButtonMantenimiento),e.xp6(2),e.Akn(e.DdM(82,L)),e.Q6J("visible",o.ocuparModalVisible)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(4),e.hij("",o.nombreHabitacionReservada," "),e.xp6(5),e.Q6J("options",o.clienteData),e.xp6(6),e.Q6J("options",o.tarifaData),e.xp6(4),e.Q6J("toggleable",!0)("collapsed",!0),e.xp6(2),e.Q6J("ngForOf",o.formOcuparArray.controls),e.xp6(4),e.Q6J("formGroup",o.formOcupar),e.xp6(2),e.Q6J("ngIf",o.abonosTotalOcupar>o.totalPagarOcupar),e.xp6(1),e.Q6J("ngIf",o.totalPagarOcupar<=0),e.xp6(1),e.Q6J("ngIf",o.tarifasAgregadasOcupar.length<=0),e.xp6(14),e.hij(" $ ",o.tarifasTotalOcupar," "),e.xp6(8),e.Q6J("ngForOf",o.tarifasAgregadasOcupar),e.xp6(5),e.hij(" $ ",o.abonosTotalOcupar," "),e.xp6(8),e.Q6J("ngForOf",o.formOcuparArray.value),e.xp6(5),e.hij(" $ ",o.totalPagarOcupar<=0?0:o.totalPagarOcupar," "),e.xp6(6),e.hij(" $ ",o.totalPagarOcupar-o.abonosTotalOcupar<=0?0:o.totalPagarOcupar-o.abonosTotalOcupar," "),e.xp6(3),e.Q6J("disabled",o.disableOcupar||o.formOcuparArray.invalid))},dependencies:[F.s,f.jx,h.sg,h.O5,v.Hq,v.zx,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.Q7,l.On,w.v2,T.H,y.o,R.g,A.Lt,ge,x.V,l.sg,l.u,Z.Ro,E,Q,O.V,U.f,D.NU,S.q],styles:[".rooms[_ngcontent-%COMP%]{cursor:pointer}.tag[_ngcontent-%COMP%]{padding:.5%;display:flex;text-align:center}.nomeRoome[_ngcontent-%COMP%]{text-align:center}.padding[_ngcontent-%COMP%]{padding:1%}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #dddddd;text-align:left;padding:8px}th[_ngcontent-%COMP%]{background-color:#f2f2f2}"]})}return a})();var qt=c(4444),Ot=c(6401),B=c(3173),z=c(5609);function Dt(a,r){1&a&&e._UZ(0,"p-message",51)}function St(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div",52)(1,"button",53),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.addTarifa())}),e.qZA()()}}function Mt(a,r){1&a&&(e.TgZ(0,"th"),e._uU(1,"Opcion"),e.qZA())}function Pt(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"td")(1,"p-button",54),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,n=e.oxw();return e.KtG(n.confirmDeleteTarifa(o.id))}),e.qZA()()}}function Ut(a,r){if(1&a&&(e.TgZ(0,"tbody")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"number"),e.qZA(),e.YNc(6,Pt,2,0,"td",22),e.qZA()),2&a){const t=r.$implicit,i=e.oxw();e.xp6(2),e.hij(" ",null==t?null:t.nombre," "),e.xp6(2),e.hij(" ",e.lcZ(5,3,null==t?null:t.valor)," "),e.xp6(2),e.Q6J("ngIf",2==(null==i.estadoHabitacion?null:i.estadoHabitacion.estado_id))}}function Ft(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div",52)(1,"button",53),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.addProductos())}),e.qZA()()}}function wt(a,r){1&a&&(e.TgZ(0,"th"),e._uU(1,"Opcion"),e.qZA())}function Jt(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"td")(1,"p-button",54),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,n=e.oxw();return e.KtG(n.confirmDeleteProductos(o.identificador))}),e.qZA()()}}function kt(a,r){if(1&a&&(e.TgZ(0,"tbody")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"number"),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.ALo(8,"number"),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.YNc(11,Jt,2,0,"td",22),e.qZA()),2&a){const t=r.$implicit,i=e.oxw();e.xp6(2),e.hij(" ",null==t?null:t.nombre," "),e.xp6(2),e.hij(" ",e.lcZ(5,5,null==t?null:t.valor)," "),e.xp6(3),e.hij(" ",e.lcZ(8,7,null==t?null:t.valorImpuesto)," "),e.xp6(3),e.hij(" ",null==t?null:t.cantidad," "),e.xp6(1),e.Q6J("ngIf",2==(null==i.estadoHabitacion?null:i.estadoHabitacion.estado_id))}}function Nt(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div",52)(1,"button",53),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.addRecetas())}),e.qZA()()}}function Ht(a,r){1&a&&(e.TgZ(0,"th"),e._uU(1,"Opcion"),e.qZA())}function Qt(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"td")(1,"p-button",54),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,n=e.oxw();return e.KtG(n.confirmDeleteRecetas(o.identificador))}),e.qZA()()}}function Et(a,r){if(1&a&&(e.TgZ(0,"tbody")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"number"),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.ALo(8,"number"),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.YNc(11,Qt,2,0,"td",22),e.qZA()),2&a){const t=r.$implicit,i=e.oxw();e.xp6(2),e.hij(" ",null==t?null:t.nombre," "),e.xp6(2),e.hij(" ",e.lcZ(5,5,null==t?null:t.valor)," "),e.xp6(3),e.hij(" ",e.lcZ(8,7,null==t?null:t.valorImpuesto)," "),e.xp6(3),e.hij(" ",null==t?null:t.cantidad," "),e.xp6(1),e.Q6J("ngIf",2==(null==i.estadoHabitacion?null:i.estadoHabitacion.estado_id))}}function Lt(a,r){1&a&&e._UZ(0,"div",52)}function Yt(a,r){1&a&&(e.TgZ(0,"th"),e._uU(1,"Opcion"),e.qZA())}function Bt(a,r){1&a&&e._UZ(0,"td")}function zt(a,r){if(1&a&&(e.TgZ(0,"tbody")(1,"td"),e._uU(2),e.ALo(3,"number"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.YNc(6,Bt,1,0,"td",22),e.qZA()),2&a){const t=r.$implicit,i=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,3,null==t?null:t.valor)," "),e.xp6(3),e.hij(" ",null==t?null:t.nombre," "),e.xp6(1),e.Q6J("ngIf",2==(null==i.estadoHabitacion?null:i.estadoHabitacion.estado_id))}}function jt(a,r){1&a&&(e.TgZ(0,"div")(1,"h5"),e._uU(2,"Hora"),e.qZA()())}function Gt(a,r){1&a&&(e.TgZ(0,"div")(1,"h5"),e._uU(2,"Noche"),e.qZA()())}function Vt(a,r){if(1&a&&(e.TgZ(0,"div",55)(1,"span",56),e._uU(2),e._UZ(3,"p-tag",57),e.YNc(4,jt,3,0,"div",22),e.YNc(5,Gt,3,0,"div",22),e.qZA()()),2&a){const t=r.$implicit;e.xp6(2),e.hij(" ",t.nombre," "),e.xp6(1),e.s9C("icon",t.icon),e.s9C("value",t.valor),e.xp6(1),e.Q6J("ngIf",2==t.tipo),e.xp6(1),e.Q6J("ngIf",1==t.tipo)}}function $t(a,r){if(1&a&&(e.TgZ(0,"div",55)(1,"span",56),e._uU(2),e.qZA(),e._UZ(3,"p-tag",58),e.qZA()),2&a){const t=r.$implicit;e.xp6(2),e.Oqu(t.nombre),e.xp6(1),e.s9C("value",t.valor)}}function Kt(a,r){1&a&&(e.TgZ(0,"small"),e._uU(1,"Producto es requerido."),e.qZA())}function Xt(a,r){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,Kt,2,0,"small",22),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formProducto.get("producto_id").hasError("required"))}}function Wt(a,r){if(1&a&&(e.TgZ(0,"div",55)(1,"span",56),e._uU(2),e.qZA(),e._UZ(3,"p-tag",58),e.qZA()),2&a){const t=r.$implicit;e.xp6(2),e.Oqu(t.nombre),e.xp6(1),e.s9C("value",t.precio)}}function eo(a,r){if(1&a&&(e.TgZ(0,"div",55)(1,"span",56),e._uU(2),e.qZA()()),2&a){const t=r.$implicit;e.xp6(2),e.Oqu(t.nombre)}}function to(a,r){1&a&&(e.TgZ(0,"div",70),e._uU(1,"Nombre es requerido."),e.qZA())}function oo(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div",59)(1,"div",60)(2,"label",61),e._uU(3,"Monto"),e.qZA(),e._UZ(4,"br"),e.TgZ(5,"input",62),e.NdJ("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.changeMedioPagoFactura())}),e.qZA(),e._UZ(6,"br"),e.YNc(7,to,2,0,"div",63),e.qZA(),e.TgZ(8,"div",64)(9,"label",65),e._uU(10,"Medio Pago"),e.qZA(),e._UZ(11,"br")(12,"p-dropdown",66),e.qZA(),e.TgZ(13,"div",67),e._UZ(14,"label",68)(15,"br"),e.TgZ(16,"p-button",69),e.NdJ("click",function(){const n=e.CHM(t).index,s=e.oxw();return e.KtG(s.eliminarMedioPagoAbono(n))}),e.qZA()()()}if(2&a){const t=r.$implicit,i=e.oxw();e.Q6J("formGroup",t),e.xp6(7),e.Q6J("ngIf",null==t||null==t.controls.monto||null==t.controls.monto.errors?null:t.controls.monto.errors.required),e.xp6(5),e.Q6J("options",i.dataMetodosPago)}}function io(a,r){1&a&&e._UZ(0,"p-message",71)}const C=function(){return{width:"50vw",height:"40vw"}},ao=function(){return{width:"40vw",height:"40vw"}};let no=(()=>{class a{constructor(t,i,o,n,s,p,u){this.dashboardRoomsService=t,this.FB=i,this.spinner=o,this.datePipe=n,this.router=s,this.route=p,this.appComponent=u,this.dataTarifa=[],this.dataAbonos=[],this.tarifasTotal=0,this.abonosTotal=0,this.items=[],this.totalPagarReserva=0,this.subtotaltotalPagarReserva=0,this.totalProductos=0,this.dataProductos=[],this.dataReceta=[],this.tarifaVisible=!1,this.productoVisible=!1,this.abonoVisible=!1,this.recetaVisible=!1,this.allTarifas=[],this.allTarifasDefault=[],this.productoData=[],this.totalFactura=0,this.totalImpuestos=0,this.impuestosData=[],this.detalleId=0,this.hotelId=0,this.clienteId=0,this.impuestos_save=[],this.totalRecetas=0,this.recetasData=[],this.formFacturacionMediosPago=this.FB.array([]),this.baseUrl=qt.D.url,this.token=u.getToken()}ngOnInit(){this.spinner.hide(),this.dataRoomDetail=[],this.habitacionId=parseFloat(this.route.snapshot.paramMap.get("idHabitacion")),this.buildForm(),this.getRoomOcupar()}cargarItems(){this.items=[{label:"Facturar",icon:"pi pi-dollar",disabled:this.disableFactura,command:t=>this.opcionSelect(t,"facturar")},{label:"Desocupar",disabled:2!=this.estadoHabitacion?.estado_id,icon:"pi pi-lock-open",command:t=>this.opcionSelect(t,"desocupar")}]}buildForm(){this.form=this.FB.group({nombreHabitacion:[this.dataRoomDetail?.detalleHabitacion?.habitacion?.nombre,[]],descripcion:[this.dataRoomDetail?.detalleHabitacion?.descripcion,[]],nombreCliente:[this.dataRoomDetail?.detalleHabitacion?.cliente?.nombres+" "+this.dataRoomDetail?.detalleHabitacion?.cliente?.apellidos,[]],desde:[this.dataRoomDetail?.detalleHabitacion?.checkin,[]],hasta:[this.dataRoomDetail?.detalleHabitacion?.checkout,[]]}),this.formTarifa=this.FB.group({tarifa_id:[this.allTarifasDefault,[l.kI.required]]}),this.formProducto=this.FB.group({producto_id:[null,[l.kI.required]],cantidad:[1,[l.kI.required,l.kI.min(1)]]}),this.formMetodoPago=this.FB.group({metodo_pago_id:[null,[l.kI.required]],valor:[null,[l.kI.required,l.kI.min(1)]]}),this.formReceta=this.FB.group({receta_id:[null,[l.kI.required]],cantidad:[1,[l.kI.required,l.kI.min(1)]]});let t=this.FB.group({monto:["",[l.kI.required,l.kI.min(0)]],medio_pago:[this.dataMetodosPago?this.dataMetodosPago[0]:null,[l.kI.required,l.kI.min(1)]]});this.formFacturacionMediosPago=this.FB.array([]),this.formFacturacionMediosPago.push(t),this.formFacturar=this.FB.group({isFacturaElectronica:[""]}),this.form.disable()}getRoomOcupar(){let t={habitacion_id:this.habitacionId};this.spinner.show(),this.dashboardRoomsService.getOcuparHabitacion(t).subscribe(i=>{this.spinner.hide(),this.dataRoomDetail=i,this.estadoHabitacion=this.dataRoomDetail.estadoHabitacion,this.impuestos=this.dataRoomDetail.impuesto,this.recetasData=this.dataRoomDetail.recetas,console.log(this.recetasData),this.allTarifasDefault=[],this.dataRoomDetail.tarifasHabitacion.forEach(o=>{this.dataTarifa.push({valor:o.valor,nombre:o.tarifa?.nombre,tipo:o.tipo,id:o.item_id})}),this.dataRoomDetail.recetasHabitacion.forEach(o=>{let n="receta"+this.generarIdAleatorio(),s=0;o?.recetas?.impuestos.forEach(p=>{let u=parseInt(p?.impuesto?.porcentaje)*(parseFloat(o?.recetas.precio)*parseInt(o?.cantidad))/100;s+=u,this.impuestos_save.push({valor:u,porcentaje:p?.impuesto?.porcentaje,cantidad:o?.cantidad,id:p?.impuesto.id,item_id:o?.item_id,tipo:"4",identificador:n})}),this.dataReceta.push({nombre:o?.recetas?.nombre,valor:o?.recetas?.precio,valorImpuesto:s+parseFloat(o?.recetas?.precio),cantidad:o?.cantidad,id:o?.item_id,identificador:n,impuestos:o.recetas?.impuestos}),this.totalRecetas=this.totalRecetas+s+parseFloat(o?.recetas?.precio)}),this.dataMetodosPago=this.dataRoomDetail.metodos_pago,this.dataRoomDetail.productosHabitacion.forEach(o=>{let n=0,s="productos"+this.generarIdAleatorio();o.productos.impuestos.forEach(p=>{let u=parseInt(p.impuesto.porcentaje)*parseFloat(o?.valor)/100;n+=u,this.impuestos_save.push({valor:u,porcentaje:p.impuesto.porcentaje,cantidad:o?.cantidad,id:p.impuesto.id,item_id:o?.item_id,tipo:"1",identificador:s})}),this.dataProductos.push({nombre:o?.productos.nombre,valor:o?.valor,valorImpuesto:n+parseFloat(o?.valor),cantidad:o?.cantidad,id:o?.item_id,identificador:s,tipoProducto:o?.productos.tipo_producto,impuestos:o.productos.impuestos})}),this.dataRoomDetail.abonoHabitacion.forEach(o=>{this.dataAbonos.push({valor:o.valor,nombre:o.metodo_pago.nombre,id:o.id,metodo_pago_id:o?.metodo_pago.id,identificador:"abonos"+this.generarIdAleatorio()})}),this.dataRoomDetail.tarifas.forEach(o=>{this.allTarifas.push({valor:o.valor,nombre:o.nombre,tipo:o.tipo,id:o.id}),this.dataRoomDetail.tarifasHabitacion.filter(n=>n?.tarifa?.id==o.id).length>0&&this.allTarifasDefault.push({valor:o.valor,nombre:o.nombre,tipo:o.tipo,id:o.id})}),this.dataRoomDetail.productos.forEach(o=>{this.productoData.push({id:o.id,nombre:o.nombre,valor:o.precio,tipo:o.tipo_producto,impuestos:o.impuestos})}),this.detalleId=this.dataRoomDetail?.detalleHabitacion.id,this.hotelId=this.dataRoomDetail?.detalleHabitacion.hotel_id,this.clienteId=this.dataRoomDetail?.detalleHabitacion.cliente?.id,this.buildForm(),this.recalcular(),this.cargarItems()})}recalcular(){this.tarifasTotal=0,this.totalProductos=0,this.abonosTotal=0,this.totalPagarReserva=0,this.totalImpuestos=0,this.totalRecetas=0,this.dataTarifa.forEach(i=>{this.tarifasTotal=this.tarifasTotal+parseFloat(i.valor)}),this.dataProductos.forEach(i=>{let o=0;o=parseFloat(i?.valorImpuesto),this.totalImpuestos=this.totalImpuestos+o-i?.valor,this.totalProductos=this.totalProductos+o}),this.dataReceta.forEach(i=>{let o=parseFloat(i?.valorImpuesto);this.totalRecetas=this.totalRecetas+o,this.totalImpuestos=this.totalImpuestos+o-i?.valor}),this.dataAbonos.forEach(i=>{this.abonosTotal=this.abonosTotal+parseFloat(i.valor)}),this.totalPagarReserva=this.tarifasTotal+this.totalProductos+this.totalRecetas-this.abonosTotal,this.subtotaltotalPagarReserva=this.tarifasTotal+this.totalProductos+this.totalRecetas-this.totalImpuestos,this.validaciones()}opcionSelect(t,i){"desocupar"==i&&this.desocuparHabitacion(),"facturar"==i&&this.facturacion()}confirmDeleteAbono(t){this.dataAbonos=this.dataAbonos.filter(i=>i.identificador!=t),this.recalcular()}confirmDeleteTarifa(t){this.dataTarifa=this.dataTarifa.filter(i=>i.id!=t),this.allTarifasDefault=this.dataTarifa,this.buildForm(),this.recalcular()}confirmDeleteProductos(t){this.dataProductos=this.dataProductos.filter(i=>i.identificador!=t),this.impuestos_save=this.impuestos_save.filter(i=>i.identificador!=t),this.recalcular()}confirmDeleteRecetas(t){this.dataReceta=this.dataReceta.filter(i=>i.identificador!=t),this.impuestos_save=this.impuestos_save.filter(i=>i.identificador!=t),this.recalcular()}addTarifa(){this.tarifaVisible=!0}addProductos(){this.productoVisible=!0,this.formProducto.reset(),this.recalcular()}addAbonos(){this.abonoVisible=!0}submitTarifa(){this.recargarTablaTarifa(),this.tarifaVisible=!1,this.recalcular()}submitProducto(){this.recargarTablaProducto(),this.productoVisible=!1,this.recalcular()}submitReceta(){this.recetaVisible=!1,this.recargarTablaReceta(),this.recalcular()}recargarTablaReceta(){let t=this.formReceta.get("receta_id")?.value,i=this.formReceta.get("cantidad")?.value,o="receta"+this.generarIdAleatorio(),n=0;t.impuestos.forEach(s=>{let p=parseInt(s.impuesto.porcentaje)*(parseFloat(t.precio)*parseInt(i))/100;n+=p,this.impuestos_save.push({valor:p,porcentaje:s?.impuesto?.porcentaje,cantidad:i,id:s?.impuesto.id,item_id:t.id,tipo:"4",identificador:o})}),this.dataReceta.push({nombre:t.nombre,valor:t.precio*i,valorImpuesto:t.precio*i+n,cantidad:i,id:t.id,identificador:o,impuestos:t.impuestos})}recargarTablaProducto(){let t=this.formProducto.get("producto_id")?.value,i=this.formProducto.get("cantidad").value,o=0,n=t.tipo,s="productos"+this.generarIdAleatorio();t.impuestos.forEach(p=>{let u=parseInt(p.impuesto.porcentaje)*(parseFloat(t.valor)*parseInt(i))/100;o+=u,this.impuestos_save.push({valor:u,porcentaje:p.impuesto.porcentaje,cantidad:i,id:p.impuesto.id,item_id:t.id,tipo:"1",identificador:s})}),this.dataProductos.push({nombre:t.nombre,valor:t.valor*i,valorImpuesto:t.valor*i+o,cantidad:i,tipoProducto:n,id:t.id,identificador:s}),this.formProducto.reset()}recargarTablaTarifa(){let t=this.formTarifa.get("tarifa_id").value;this.dataTarifa=[],this.allTarifasDefault=[],t.forEach(i=>{this.dataTarifa.push({valor:i.valor,nombre:i.nombre,tipo:i.tipo,id:i.id}),this.allTarifasDefault.push({valor:i.valor,nombre:i.nombre,tipo:i.tipo,id:i.id})})}recargarTablaAbonos(){let t=this.formMetodoPago.get("metodo_pago_id").value[0],i=parseFloat(this.formMetodoPago.get("valor").value);this.dataAbonos.push({valor:i,nombre:t.nombre,id:t.id,metodo_pago_id:t.id,identificador:"abonos"+this.generarIdAleatorio()})}submitAbono(){this.abonoVisible=!1,this.recargarTablaAbonos(),this.recalcular()}submitAll(){2==this.estadoHabitacion?.estado_id&&this.envirRoomDetalle({tarifas:this.dataTarifa,productos:this.dataProductos,abonos:this.dataAbonos,detalleId:this.detalleId,hotelId:this.hotelId,clienteId:this.clienteId,receta:this.dataReceta,habitacion_id:this.habitacionId})}envirRoomDetalle(t){this.spinner.show(),this.dashboardRoomsService.saveDetalleHabitacion(t).subscribe(i=>{this.spinner.hide();let o=i;"success"==o.code?(d().fire({title:"Exito",text:o.msm,icon:"success"}),this.router.navigate(["dashboard/dashboardRooms"])):"warning"==o.code?d().fire({title:"Advertencia",text:o.msm,icon:"warning"}):d().fire({title:"Error",text:"Error al anular.",icon:"error"})})}envirRoomDetalleFactura(t){this.spinner.show(),this.dashboardRoomsService.saveDetalleHabitacion(t).subscribe(i=>{if("warning"==t.code)d().fire({title:"Advertencia",text:t.msm,icon:"warning"});else{let o=this.formFacturar.get("isFacturaElectronica").value;this.enviarFacturacion({detalle_id:this.detalleId,metodos_pagos:this.formFacturacionMediosPago.value,concepto:"Factura Habitacion",hotel_id:this.hotelId,cliente_id:this.clienteId,porcentaje_descuento:0,subtotal:this.subtotaltotalPagarReserva,total:this.totalPagarReserva+this.abonosTotal,impuesto_total:this.totalImpuestos,detalleId:this.detalleId,hotelId:this.hotelId,clienteId:this.clienteId,receta:this.dataReceta,impuesto:this.impuestos_save,habitacion_id:this.habitacionId,is_factura_electronica:o})}})}desocuparHabitacion(){let t={id_habitacion:this.habitacionId};d().fire({title:"\xbfEstas seguro que deseas desocupar esta habitacion?",text:"",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, Confirmar",cancelButtonText:"Cancelar"}).then(i=>{i.isConfirmed&&(this.spinner.show(),this.enviarDesocupar(t))})}facturacion(){this.facturarVisible=!0}enviarDesocupar(t){this.dashboardRoomsService.desocupar(t).subscribe(i=>{let o=i;this.spinner.hide(),"success"==o.code?(d().fire({title:"Exito",text:"Anulacion Exitosa.",icon:"success"}),this.router.navigate(["dashboard/dashboardRooms"])):"warning"==o.code?d().fire({title:"Advertencia",text:o.error,icon:"warning"}):d().fire({title:"Error",text:"Error al anular.",icon:"error"})},i=>{console.log("Error: ",i)})}validaciones(){this.disableFactura=!1,this.abonosTotal>this.tarifasTotal&&(this.disableFactura=!0,this.cargarItems())}eliminarMedioPagoAbono(t){this.formFacturacionMediosPago.removeAt(t),this.changeMedioPagoFactura()}agregarAbonoOcupar(){let t=this.FB.group({monto:["",[l.kI.required,l.kI.min(1)]],medio_pago:[this.dataMetodosPago[0],[l.kI.required,l.kI.min(0)]]});this.formFacturacionMediosPago.push(t)}changeMedioPagoFactura(){this.totalFactura=0,this.formFacturacionMediosPago.value.forEach(t=>{this.totalFactura=this.totalFactura+parseFloat(t.monto)})}submitFactura(){this.envirRoomDetalleFactura({tarifas:this.dataTarifa,productos:this.dataProductos,abonos:this.dataAbonos,detalleId:this.detalleId,hotelId:this.hotelId,clienteId:this.clienteId,receta:this.dataReceta,impuesto:this.impuestos_save,habitacion_id:this.habitacionId})}enviarFacturacion(t){this.spinner.show(),this.dashboardRoomsService.facturar(t).subscribe(i=>{let o=i;if(this.facturarVisible=!1,this.spinner.hide(),console.log(o),"success"==o.code){d().fire({title:"Exito",text:o.msm,icon:"success"});let n=o.factura,s=n.id;console.log(s),console.log(n),console.log(o),window.open(this.baseUrl+"/facturaRemisionPdf/"+s+"?token="+this.token,"_blank"),this.router.navigate(["dashboard/dashboardRooms"])}else"warning"==o.code?d().fire({title:"Advertencia",text:o.msm,icon:"warning"}):d().fire({title:"Error",text:"Error al Facturar.",icon:"error"})},i=>{console.log("Error: ",i)})}addRecetas(){this.recetaVisible=!0}generarIdAleatorio(){let o="";for(let n=0;n<10;n++)o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return o}static#e=this.\u0275fac=function(i){return new(i||a)(e.Y36(I.y),e.Y36(l.qu),e.Y36(Z.t2),e.Y36(h.uU),e.Y36(_.F0),e.Y36(_.gz),e.Y36(Ot.y))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-dashboard-rooms-ocupar"]],decls:210,vars:94,consts:[["type","ball-scale-multiple","fullScreen","true"],[1,"surface-section","px-4","py-5","md:px-6","lg:px-8"],[1,"flex","align-items-start","flex-column","lg:justify-content-between","lg:flex-row"],[1,"font-medium","text-3xl","text-900"],["pButton","","pRipple","","label","","icon","pi pi-arrow-left",1,"p-button-outlined","mr-2",3,"routerLink"],[1,"card","mt-3"],[1,"p-toolbar-group-left","flex","flex-wrap"],[1,"p-toolbar-group-right"],[3,"label","disabled","model","onClick"],[3,"formGroup"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-3"],["type","text","formControlName","nombreHabitacion","pInputText","",1,"w-full","mb-3","border-round-3xl"],["type","text","formControlName","desde","pInputText","",1,"w-full","mb-3","border-round-3xl"],["type","text","formControlName","hasta","pInputText","",1,"w-full","mb-3","border-round-3xl"],["type","text","formControlName","nombreCliente","pInputText","",1,"w-full","mb-3","border-round-3xl"],[1,"field","col-12","md:col-12"],["formControlName","descripcion","pInputTextarea","","required","","rows","3","cols","20"],["severity","error","class","padding","text","El total de abonos no puede ser mallor al total a pagar",4,"ngIf"],[1,"card","field","col-12","md:col-12"],[2,"width","20%"],["class","ordenAdd",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],["header","Agregar Tarifa",3,"visible","modal","draggable","resizable","visibleChange"],[1,"col-12"],[3,"formGroup","ngSubmit"],["formControlName","tarifa_id","optionLabel","nombre","placeholder","Buscar Tarifa","optionLabel","nombre","emptyMessage","Tarifa no encontrada","display","chip",1,"multiselect-custom",3,"options"],["pTemplate","item"],["pButton","","pRipple","","label","Agregar","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl",3,"disabled"],["header","Agregar Producto",3,"visible","modal","draggable","resizable","visibleChange"],[1,"field","col-12","md:col-6"],["for","producto_id"],["formControlName","producto_id","limoptionLabel","nombre","placeholder","Buscar Producto/Servicio","optionLabel","nombre","emptyMessage","Producto no encontrado","display","chip",1,"multiselect-custom",3,"options"],["type","number","formControlName","cantidad","pInputText","",1,"w-full","mb-3","border-round-3xl"],["header","Agregar Receta",3,"visible","modal","draggable","resizable","visibleChange"],["for","cliente"],["formControlName","receta_id","limoptionLabel","nombre","placeholder","Buscar Receta","optionLabel","nombre","emptyMessage","Producto no encontrado","display","chip",1,"multiselect-custom",3,"options"],["header","Abonos ",3,"visible","modal","draggable","resizable","visibleChange"],["formControlName","metodo_pago_id","selectionLimit","1","limoptionLabel","nombre","placeholder","Metodo pago","optionLabel","nombre","emptyMessage","Producto no encontrado","display","chip",1,"multiselect-custom",3,"options"],["type","number","formControlName","valor","pInputText","",1,"w-full","mb-3","border-round-3xl"],["header","Facturar ",3,"visible","modal","draggable","resizable","visibleChange"],["pButton","","pRipple","","type","button","icon","pi pi-plus",1,"p-button-rounded",3,"click"],[2,"display","flex"],[2,"text-align","left"],["severity","info","text","Generar Factura electronica",1,"padding"],[2,"margin-left","20%"],["formControlName","isFacturaElectronica"],["class","grid formgrid",3,"formGroup",4,"ngFor","ngForOf"],["severity","info","class","padding","text","El total ingresado no es igual al total a Pagar",4,"ngIf"],["pButton","","pRipple","","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl",3,"label","disabled","click"],["severity","error","text","El total de abonos no puede ser mallor al total a pagar",1,"padding"],[1,"ordenAdd"],["pButton","","pRipple","","icon","pi pi-plus",1,"p-button",3,"click"],["icon","pi pi-trash","severity","danger",3,"click"],[1,"flex","align-items-center"],[1,"ml-2"],[1,"padding",3,"icon","value"],[1,"padding",3,"value"],[1,"grid","formgrid",3,"formGroup"],[1,"col-12","mb-5","lg:col-5","lg:mb-5"],["for","monto"],["type","number","id","monto","formControlName","monto","pInputText","","placeholder","Valor",1,"expandir",3,"input"],["style","color: red;",4,"ngIf"],[1,"col-12","mb-5","lg:col-5","lg:mb-5",2,"width","auto"],["htmlFor","medioPago"],["formControlName","medio_pago","id","medioPago","optionLabel","nombre",1,"expandir",3,"options"],[1,"col-12","mb-2","lg:col-2","lg:mb-5"],["htmlFor","opciones"],["id","opciones","icon","pi pi-trash","severity","danger",3,"click"],[2,"color","red"],["severity","info","text","El total ingresado no es igual al total a Pagar",1,"padding"]],template:function(i,o){1&i&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div")(4,"div",3),e._uU(5,"Detalle Ocupacion"),e.qZA()(),e.TgZ(6,"div"),e._UZ(7,"button",4),e.qZA()()(),e.TgZ(8,"div",5)(9,"p-toolbar"),e._UZ(10,"div",6),e.TgZ(11,"div",7)(12,"p-splitButton",8),e.NdJ("onClick",function(){return o.submitAll()}),e.qZA()(),e.TgZ(13,"form",9)(14,"div",10)(15,"div",11)(16,"label"),e._uU(17,"Nombre Habitacion"),e.qZA(),e._UZ(18,"input",12),e.qZA(),e.TgZ(19,"div",11)(20,"label"),e._uU(21," CheckIn "),e.qZA(),e._UZ(22,"input",13),e.qZA(),e.TgZ(23,"div",11)(24,"label"),e._uU(25," CheckOut "),e.qZA(),e._UZ(26,"input",14),e.qZA(),e.TgZ(27,"div",11)(28,"label"),e._uU(29,"Nombre Cliente"),e.qZA(),e._UZ(30,"input",15),e.qZA(),e.TgZ(31,"div",16)(32,"label"),e._uU(33,"Descripcion"),e.qZA(),e._UZ(34,"textarea",17),e.qZA()()(),e.YNc(35,Dt,1,0,"p-message",18),e.qZA()(),e.TgZ(36,"div",19)(37,"table")(38,"tr")(39,"th",20),e._uU(40,"Nombre"),e.qZA(),e.TgZ(41,"th"),e._uU(42,"Valores"),e.qZA(),e.TgZ(43,"th"),e._uU(44,"Detalle"),e.qZA()(),e.TgZ(45,"tr")(46,"th"),e._uU(47," Tarifas"),e.qZA(),e.TgZ(48,"th"),e._uU(49),e.ALo(50,"number"),e.qZA(),e.TgZ(51,"td"),e.YNc(52,St,2,0,"div",21),e.TgZ(53,"table")(54,"thead")(55,"th"),e._uU(56,"Nombre"),e.qZA(),e.TgZ(57,"th"),e._uU(58,"Precio"),e.qZA(),e.YNc(59,Mt,2,0,"th",22),e.qZA(),e.YNc(60,Ut,7,5,"tbody",23),e.qZA()()(),e.TgZ(61,"tr")(62,"th"),e._uU(63," Productos / Servicios"),e.qZA(),e.TgZ(64,"th"),e._uU(65),e.ALo(66,"number"),e.qZA(),e.TgZ(67,"td"),e.YNc(68,Ft,2,0,"div",21),e.TgZ(69,"table")(70,"thead")(71,"th"),e._uU(72,"Nombre"),e.qZA(),e.TgZ(73,"th"),e._uU(74,"Precio "),e.qZA(),e.TgZ(75,"th"),e._uU(76,"Precio con Impuesto"),e.qZA(),e.TgZ(77,"th"),e._uU(78,"Cantidad"),e.qZA(),e.YNc(79,wt,2,0,"th",22),e.qZA(),e.YNc(80,kt,12,9,"tbody",23),e.qZA()()(),e.TgZ(81,"tr")(82,"th"),e._uU(83,"Recetas"),e.qZA(),e.TgZ(84,"th"),e._uU(85),e.ALo(86,"number"),e.qZA(),e.TgZ(87,"td"),e.YNc(88,Nt,2,0,"div",21),e.TgZ(89,"table")(90,"thead")(91,"th"),e._uU(92,"Nombre"),e.qZA(),e.TgZ(93,"th"),e._uU(94,"Precio"),e.qZA(),e.TgZ(95,"th"),e._uU(96,"Precio con Impuesto"),e.qZA(),e.TgZ(97,"th"),e._uU(98,"Cantidad"),e.qZA(),e.YNc(99,Ht,2,0,"th",22),e.qZA(),e.YNc(100,Et,12,9,"tbody",23),e.qZA()()(),e.TgZ(101,"tr")(102,"th"),e._uU(103," Abonos"),e.qZA(),e.TgZ(104,"th"),e._uU(105),e.ALo(106,"number"),e.qZA(),e.TgZ(107,"td"),e.YNc(108,Lt,1,0,"div",21),e.TgZ(109,"table")(110,"thead")(111,"th"),e._uU(112,"Monto"),e.qZA(),e.TgZ(113,"th"),e._uU(114,"Metodo Pago"),e.qZA(),e.YNc(115,Yt,2,0,"th",22),e.qZA(),e.YNc(116,zt,7,5,"tbody",23),e.qZA()()(),e.TgZ(117,"tr")(118,"th"),e._uU(119," Impuestos "),e.qZA(),e.TgZ(120,"th"),e._uU(121),e.ALo(122,"number"),e.qZA(),e._UZ(123,"th"),e.qZA(),e.TgZ(124,"tr")(125,"th"),e._uU(126," Sub Total"),e.qZA(),e.TgZ(127,"th"),e._uU(128),e.ALo(129,"number"),e.qZA(),e._UZ(130,"td"),e.qZA(),e.TgZ(131,"tr")(132,"th"),e._uU(133," Total"),e.qZA(),e.TgZ(134,"th"),e._uU(135),e.ALo(136,"number"),e.qZA(),e._UZ(137,"td"),e.qZA()()(),e.TgZ(138,"p-dialog",24),e.NdJ("visibleChange",function(s){return o.tarifaVisible=s}),e.TgZ(139,"div",25)(140,"form",26),e.NdJ("ngSubmit",function(){return o.submitTarifa()}),e.TgZ(141,"div",10)(142,"div",16)(143,"label"),e._uU(144,"Tarifa"),e.qZA(),e.TgZ(145,"p-multiSelect",27),e.YNc(146,Vt,6,5,"ng-template",28),e.qZA()(),e.TgZ(147,"div",16),e._UZ(148,"button",29),e.qZA()()()()(),e.TgZ(149,"p-dialog",30),e.NdJ("visibleChange",function(s){return o.productoVisible=s}),e.TgZ(150,"div",25)(151,"form",26),e.NdJ("ngSubmit",function(){return o.submitProducto()}),e.TgZ(152,"div",10)(153,"div",31)(154,"label",32),e._uU(155,"Producto / Servicio"),e.qZA(),e.TgZ(156,"p-dropdown",33),e.YNc(157,$t,4,2,"ng-template",28),e.qZA(),e.YNc(158,Xt,2,1,"div",22),e.qZA(),e.TgZ(159,"div",31)(160,"label"),e._uU(161,"Cantidad"),e.qZA(),e._UZ(162,"input",34),e.qZA(),e.TgZ(163,"div",16),e._UZ(164,"button",29),e.qZA()()()()(),e.TgZ(165,"p-dialog",35),e.NdJ("visibleChange",function(s){return o.recetaVisible=s}),e.TgZ(166,"div",25)(167,"form",26),e.NdJ("ngSubmit",function(){return o.submitReceta()}),e.TgZ(168,"div",10)(169,"div",31)(170,"label",36),e._uU(171,"Receta"),e.qZA(),e.TgZ(172,"p-dropdown",37),e.YNc(173,Wt,4,2,"ng-template",28),e.qZA()(),e.TgZ(174,"div",31)(175,"label"),e._uU(176,"Cantidad"),e.qZA(),e._UZ(177,"input",34),e.qZA(),e.TgZ(178,"div",16),e._UZ(179,"button",29),e.qZA()()()()(),e.TgZ(180,"p-dialog",38),e.NdJ("visibleChange",function(s){return o.abonoVisible=s}),e.TgZ(181,"div",25)(182,"form",26),e.NdJ("ngSubmit",function(){return o.submitAbono()}),e.TgZ(183,"div",10)(184,"div",31)(185,"label",36),e._uU(186,"Metodo Pago"),e.qZA(),e.TgZ(187,"p-multiSelect",39),e.YNc(188,eo,3,1,"ng-template",28),e.qZA()(),e.TgZ(189,"div",31)(190,"label"),e._uU(191,"Monto"),e.qZA(),e._UZ(192,"input",40),e.qZA(),e.TgZ(193,"div",16),e._UZ(194,"button",29),e.qZA()()()()(),e.TgZ(195,"p-dialog",41),e.NdJ("visibleChange",function(s){return o.facturarVisible=s}),e.TgZ(196,"button",42),e.NdJ("click",function(){return o.agregarAbonoOcupar()}),e.qZA(),e._UZ(197,"br"),e.TgZ(198,"div",43)(199,"div",44),e._UZ(200,"p-message",45),e.qZA(),e.TgZ(201,"div",46)(202,"form",26),e.NdJ("ngSubmit",function(){return o.submitAbono()}),e._UZ(203,"p-inputSwitch",47),e.qZA()()(),e._UZ(204,"br"),e.YNc(205,oo,17,3,"div",48),e.YNc(206,io,1,0,"p-message",49),e.TgZ(207,"div",16)(208,"button",50),e.NdJ("click",function(){return o.submitFactura()}),e.ALo(209,"number"),e.qZA()()()),2&i&&(e.xp6(7),e.Q6J("routerLink","/dashboard/dashboardRooms"),e.xp6(5),e.Q6J("label",2==(null==o.estadoHabitacion?null:o.estadoHabitacion.estado_id)?"Guardar":void 0)("disabled",o.totalPagarReserva<=0)("model",o.items),e.xp6(1),e.Q6J("formGroup",o.form),e.xp6(22),e.Q6J("ngIf",o.abonosTotal>o.tarifasTotal),e.xp6(14),e.hij(" $ ",e.lcZ(50,73,o.tarifasTotal)," "),e.xp6(3),e.Q6J("ngIf",2==(null==o.estadoHabitacion?null:o.estadoHabitacion.estado_id)),e.xp6(7),e.Q6J("ngIf",2==(null==o.estadoHabitacion?null:o.estadoHabitacion.estado_id)),e.xp6(1),e.Q6J("ngForOf",o.dataTarifa),e.xp6(5),e.hij(" $ ",e.lcZ(66,75,o.totalProductos)," "),e.xp6(3),e.Q6J("ngIf",2==(null==o.estadoHabitacion?null:o.estadoHabitacion.estado_id)),e.xp6(11),e.Q6J("ngIf",2==(null==o.estadoHabitacion?null:o.estadoHabitacion.estado_id)),e.xp6(1),e.Q6J("ngForOf",o.dataProductos),e.xp6(5),e.hij(" $ ",e.lcZ(86,77,o.totalRecetas)," "),e.xp6(3),e.Q6J("ngIf",2==(null==o.estadoHabitacion?null:o.estadoHabitacion.estado_id)),e.xp6(11),e.Q6J("ngIf",2==(null==o.estadoHabitacion?null:o.estadoHabitacion.estado_id)),e.xp6(1),e.Q6J("ngForOf",o.dataReceta),e.xp6(5),e.hij(" $ ",e.lcZ(106,79,o.abonosTotal)," "),e.xp6(3),e.Q6J("ngIf",2==(null==o.estadoHabitacion?null:o.estadoHabitacion.estado_id)),e.xp6(7),e.Q6J("ngIf",2==(null==o.estadoHabitacion?null:o.estadoHabitacion.estado_id)),e.xp6(1),e.Q6J("ngForOf",o.dataAbonos),e.xp6(5),e.hij(" $ ",e.lcZ(122,81,o.totalImpuestos)," "),e.xp6(7),e.hij(" $ ",o.subtotaltotalPagarReserva<=0?0:e.lcZ(129,83,o.subtotaltotalPagarReserva)," "),e.xp6(7),e.hij(" $ ",o.totalPagarReserva<=0?0:e.lcZ(136,85,o.totalPagarReserva)," "),e.xp6(3),e.Akn(e.DdM(89,C)),e.Q6J("visible",o.tarifaVisible)("modal",!0)("draggable",!0)("resizable",!0),e.xp6(2),e.Q6J("formGroup",o.formTarifa),e.xp6(5),e.Q6J("options",o.allTarifas),e.xp6(3),e.Q6J("disabled",o.formTarifa.invalid),e.xp6(1),e.Akn(e.DdM(90,C)),e.Q6J("visible",o.productoVisible)("modal",!0)("draggable",!0)("resizable",!0),e.xp6(2),e.Q6J("formGroup",o.formProducto),e.xp6(5),e.Q6J("options",o.productoData),e.xp6(2),e.Q6J("ngIf",o.formProducto.get("producto_id").errors&&(o.formProducto.get("producto_id").dirty||o.formProducto.get("producto_id").touched)),e.xp6(6),e.Q6J("disabled",o.formProducto.invalid),e.xp6(1),e.Akn(e.DdM(91,C)),e.Q6J("visible",o.recetaVisible)("modal",!0)("draggable",!0)("resizable",!0),e.xp6(2),e.Q6J("formGroup",o.formReceta),e.xp6(5),e.Q6J("options",o.recetasData),e.xp6(7),e.Q6J("disabled",o.formReceta.invalid),e.xp6(1),e.Akn(e.DdM(92,C)),e.Q6J("visible",o.abonoVisible)("modal",!0)("draggable",!0)("resizable",!0),e.xp6(2),e.Q6J("formGroup",o.formMetodoPago),e.xp6(5),e.Q6J("options",o.dataMetodosPago),e.xp6(7),e.Q6J("disabled",o.formMetodoPago.invalid),e.xp6(1),e.Akn(e.DdM(93,ao)),e.Q6J("visible",o.facturarVisible)("modal",!0)("draggable",!0)("resizable",!0),e.xp6(7),e.Q6J("formGroup",o.formFacturar),e.xp6(3),e.Q6J("ngForOf",o.formFacturacionMediosPago.controls),e.xp6(1),e.Q6J("ngIf",o.totalFactura!=o.totalPagarReserva),e.xp6(2),e.Q6J("label","Pagar "+e.lcZ(209,87,o.totalPagarReserva))("disabled",o.formFacturacionMediosPago.invalid||o.totalFactura!=o.totalPagarReserva))},dependencies:[f.jx,h.sg,h.O5,v.Hq,v.zx,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.Q7,_.rH,T.H,P.o,y.o,R.g,A.Lt,x.V,l.sg,l.u,Z.Ro,O.V,D.NU,S.q,B.a,z.Ql,h.JJ],styles:["table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #dddddd;text-align:left;padding:8px}th[_ngcontent-%COMP%]{background-color:#f2f2f2}.ordenAdd[_ngcontent-%COMP%]{padding:1%;text-align:right}.padding[_ngcontent-%COMP%]{padding:1%}.expandir[_ngcontent-%COMP%]{width:100%}"]})}return a})();var j=c(2506);let ro=(()=>{class a{static#e=this.\u0275fac=function(i){return new(i||a)};static#t=this.\u0275mod=e.oAB({type:a});static#o=this.\u0275inj=e.cJS({imports:[_.Bz.forChild([{path:"",component:It,canActivate:[j.a],data:{permissions:["dashboard.habitacion"]}},{path:":idHabitacion/ocupar",component:no,canActivate:[j.a],data:{permissions:["dashboard.habitacion"]}}]),_.Bz]})}return a})();var so=c(2169),lo=c(1480);let co=(()=>{class a{static#e=this.\u0275fac=function(i){return new(i||a)};static#t=this.\u0275mod=e.oAB({type:a});static#o=this.\u0275inj=e.cJS({providers:[{provide:ee.TP,useClass:te.n,multi:!0},I.y,h.uU],imports:[F.Q,h.ez,G.U$,V.O,l.u5,w.$9,v.hJ,T.T,$.EV,P.V,K.Xt,y.j,R.A,A.kW,X.cc,fe,W.L$,x.S,oe.ii.forRoot(),l.UX,Z.ef,ie.U,ro,ke,O.W,U._8,D.q4,so.o,lo.Gg,S.O,B.l,A.kW,z.Iu]})}return a})()}}]);