"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[831],{5831:(re,f,r)=>{r.r(f),r.d(f,{TypeRoomsModule:()=>ne});var d=r(177),s=r(4341),b=r(3386),k=r(5493),c=r(1141),v=r(563),F=r(9998),x=r(1830),I=r(4714),R=r(2242),G=r(1305),T=r(9883),y=r(494),$=r(981),C=r(1570),u=r(1626),P=r(635),N=r(4058),h=r(6554),B=r(6627),E=r(3091),g=r(5989),D=r(8032),p=r.n(D),e=r(540),M=r(306);let j=(()=>{class o{constructor(t){this.httpClient=t,this.baseUrl=M.T.url,this.endpointListar="/tipoHabitacionListar",this.endpointTypeRoomGet="/tipoHabitacionEditar/",this.endpointTypeRoomUpdate="/tipoHabitacionActualizar",this.endpointTypeRoomCreate="/tipoHabitacionCrear",this.endpointDelete="/tipoHabitacionEliminar/"}getTypeRoom(t){return this.httpClient.get(`${this.baseUrl+this.endpointTypeRoomGet+t}`)}getAll(t,n="",i=1){const a={headers:new u.Lr({"Content-Type":"application/json"})};return this.httpClient.post(`${this.baseUrl+this.endpointListar}?per_page=${t}&page=${i}&search=${n}`,a)}createTypeRoom(t){return this.httpClient.post(`${this.baseUrl+this.endpointTypeRoomCreate}`,t)}updateTypeRoom(t){return this.httpClient.post(`${this.baseUrl+this.endpointTypeRoomUpdate}`,t)}deleteTypeRoom(t){return this.httpClient.post(`${this.baseUrl+this.endpointDelete}`,t)}static{this.\u0275fac=function(n){return new(n||o)(e.KVO(u.Qq))}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var Y=r(5779);function A(o,l){if(1&o){const t=e.RV6();e.j41(0,"button",45),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.openModal())}),e.k0s()}}function w(o,l){if(1&o){const t=e.RV6();e.j41(0,"div",46),e.nrm(1,"span"),e.j41(2,"span",47)(3,"form",22)(4,"div",48)(5,"input",49),e.bIt("keyup.enter",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.buscarPorTecla(i))})("input",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.searchInput())}),e.k0s(),e.j41(6,"button",50),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.search(i.dt))}),e.k0s()()()()()}if(2&o){const t=e.XpG();e.R7$(3),e.Y8G("formGroup",t.formSearch)}}function H(o,l){1&o&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"Nombre"),e.k0s(),e.j41(3,"th"),e.EFF(4,"Hotel"),e.k0s(),e.j41(5,"th"),e.EFF(6,"Acciones"),e.k0s()())}function S(o,l){if(1&o){const t=e.RV6();e.j41(0,"p-button",54),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,a=e.XpG();return e.Njj(a.editTypeRoom(i.id))}),e.k0s()}}function X(o,l){if(1&o){const t=e.RV6();e.j41(0,"p-button",55),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,a=e.XpG();return e.Njj(a.confirmDelete(i.id))}),e.k0s()}}function V(o,l){if(1&o&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.nI1(3,"titlecase"),e.k0s(),e.j41(4,"td"),e.EFF(5),e.nI1(6,"titlecase"),e.k0s(),e.j41(7,"td",51),e.DNE(8,S,1,0,"p-button",52),e.nrm(9,"p-confirmDialog"),e.DNE(10,X,1,0,"p-button",53),e.k0s()()),2&o){const t=l.$implicit,n=e.XpG();e.R7$(2),e.JRh(e.bMT(3,4,t.nombre)),e.R7$(3),e.JRh(e.bMT(6,6,t.hotel.nombre)),e.R7$(3),e.Y8G("ngIf",n.permisoActualizar),e.R7$(2),e.Y8G("ngIf",n.permisoEliminar)}}function U(o,l){1&o&&(e.j41(0,"tr")(1,"td",56),e.EFF(2,"Cargando informacion porfavor espere ..."),e.k0s()())}function L(o,l){1&o&&(e.j41(0,"div",57),e.EFF(1,"Campo requerido"),e.k0s())}function z(o,l){1&o&&(e.j41(0,"div",57),e.EFF(1,"M\xe1ximo 50 caracteres"),e.k0s())}function J(o,l){if(1&o&&(e.j41(0,"div"),e.DNE(1,L,2,0,"div",28),e.DNE(2,z,2,0,"div",28),e.k0s()),2&o){const t=e.XpG();e.R7$(1),e.Y8G("ngIf",t.formCreateTypeRoom.get("nombre").hasError("required")),e.R7$(1),e.Y8G("ngIf",t.formCreateTypeRoom.get("nombre").hasError("maxlength"))}}function O(o,l){1&o&&(e.j41(0,"div",57),e.EFF(1,"Campo requerido"),e.k0s())}function K(o,l){1&o&&(e.j41(0,"div",57),e.EFF(1,"Campo requerido"),e.k0s())}function Z(o,l){1&o&&(e.j41(0,"div",57),e.EFF(1,"M\xe1ximo 50 caracteres"),e.k0s())}function Q(o,l){if(1&o&&(e.j41(0,"div"),e.DNE(1,K,2,0,"div",28),e.DNE(2,Z,2,0,"div",28),e.k0s()),2&o){const t=e.XpG();e.R7$(1),e.Y8G("ngIf",t.formEditTypeRoom.get("nombre").hasError("required")),e.R7$(1),e.Y8G("ngIf",t.formEditTypeRoom.get("nombre").hasError("maxlength"))}}function W(o,l){1&o&&(e.j41(0,"div",57),e.EFF(1,"Campo requerido"),e.k0s())}const q=function(){return{"min-width":"50rem"}},ee=function(){return["nombre","Hotel","acciones"]},_=function(){return{width:"95vw"}};let te=(()=>{class o{constructor(t,n,i){this.FB=t,this.spinner=n,this.typeRoomService=i,this.permisoCrear=g.u.hasPermission(["administracion.tipoHabitacion.crear"]),this.permisoActualizar=g.u.hasPermission(["administracion.tipoHabitacion.actualizar"]),this.permisoEliminar=g.u.hasPermission(["administracion.tipoHabitacion.eliminar"]),this.loadingTable=!1,this.pageCount=10,this.visibleModalTypeRoom=!0,this.imagen=null,this.visibleModalTypeRoomEditar=!1,this.idEditando=0,this.first=0,this.rows=8,this.pageActual=1,this.ultimaPage=1,this.disablePageLeft=!1,this.disablePageRight=!1}ngOnInit(){this.buildForm(),this.getIndex(),this.visibleModalTypeRoom=!1}buildForm(){this.formSearch=this.FB.group({search:["",[]]}),this.formCreateTypeRoom=this.FB.group({nombre:["",[s.k0.required,s.k0.maxLength(50)]],hotel_id:["",[s.k0.required]],puerta:["",[s.k0.required]]}),this.formEditTypeRoom=this.FB.group({nombre:["",[s.k0.required,s.k0.maxLength(50)]],hotel_id:["",[s.k0.required]],puerta:["",[s.k0.required]]})}openModal(){this.onCreate()}onCreate(){this.formCreateTypeRoom.reset(),this.typeRoomService.getTypeRoom(0).subscribe(t=>{this.hotel=t.hotel,this.visibleModalTypeRoom=!0},t=>{console.log("Error: ",t)})}onRemove(t){this.imagen=null}onSelect(t){this.imagen=t.currentFiles[0]}onPage(t){this.pageCount=t.rows,this.getIndex("",this.pageCount)}submitCreate(){console.log(this.formCreateTypeRoom.valid),this.formCreateTypeRoom.valid?this.newTypeRoom():this.formCreateTypeRoom.markAllAsTouched()}newTypeRoom(){this.visibleModalTypeRoom=!0,this.spinner.show();let t={puerta:this.formCreateTypeRoom.get("puerta").value},n=this.formCreateTypeRoom.value;n.hotel_id=n.hotel_id.id,n.estado=1,n.diseno_json=JSON.stringify(t),this.typeRoomService.createTypeRoom(n).subscribe(i=>{this.spinner.hide(),this.imagen=null,this.visibleModalTypeRoom=!1,"success"==i.code?(p().fire({title:"Exito",text:"Tipo de habitaci\xf3n creado exitosamente.",icon:"success"}),this.getIndex()):p().fire({title:"Error",text:"Error al crear el tipo de habitaci\xf3n.",icon:"error"})},i=>{console.log("Error: ",i)})}editTypeRoom(t){this.idEditando=t,this.spinner.show(),this.typeRoomService.getTypeRoom(t).subscribe(n=>{this.spinner.hide(),this.hotel=n.hotel,this.dataEditarInfoTypeRoom=n.typeRoom,this.formEditTypeRoom.get("nombre").setValue(n.tiposHabitaciones.nombre),this.formEditTypeRoom.get("puerta").setValue(JSON.parse(n.tiposHabitaciones.diseno_json).puerta),setTimeout(()=>{this.visibleModalTypeRoomEditar=!0},1)},n=>{console.log("Error: ",n)})}updateTypeRoom(){this.spinner.show();let t=this.formEditTypeRoom.value;t.hotel_id=t.hotel_id.id,t.id=this.idEditando,t.estado=1;let n={puerta:this.formEditTypeRoom.get("puerta").value};t.diseno_json=JSON.stringify(n),this.typeRoomService.updateTypeRoom(t).subscribe(i=>{this.spinner.hide(),this.imagen=null,this.visibleModalTypeRoomEditar=!1,"success"==i.code?(p().fire({title:"Exito",text:"Tipo de habitaci\xf3n actualizada exitosamente.",icon:"success"}),this.getIndex()):p().fire({title:"Error",text:"Error al actualizar el tipo de habitaci\xf3n.",icon:"error"})},i=>{console.log("Error: ",i)})}submitUpdate(){this.formEditTypeRoom.valid&&this.updateTypeRoom()}confirmDelete(t){p().fire({title:"\xbfEstas seguro que deseas eliminar el tipo de habitaci\xf3n?",text:"Ten cuidado esta acci\xf3n no se prodr\xe1 reversar",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, Confirmar",cancelButtonText:"Cancelar"}).then(n=>{n.isConfirmed&&(this.spinner.show(),this.typeRoomService.deleteTypeRoom({id:t}).subscribe(i=>{this.spinner.hide(),"success"==i.code?(p().fire({title:"Exito",text:"Tipo de habitaci\xf3n eliminada exitosamente.",icon:"success"}),this.getIndex()):p().fire({title:"Error",text:"Error al eliminar el tipo de habitaci\xf3n.",icon:"error"})},i=>{console.log("Error: ",i)}))})}getIndex(t="",n=this.pageCount,i=1){this.spinner.show(),this.loadingTable=!0,this.typeRoomService.getAll(n,t,i).subscribe(a=>{this.loadingTable=!1,this.typeRoomData=a.data,this.countRegisters=a.total,this.ultimaPage=a.last_page,a.total>n&&(this.disablePageRight=!0),this.validatePage(),this.spinner.hide()},a=>{console.log("Error: ",a),this.spinner.hide()})}searchInput(){let t=this.formSearch.get("search").value;this.pageActual=1,""==t&&this.getIndex(t)}search(){let t=this.formSearch.get("search").value;this.getIndex(t)}onPageChange(t){this.first=t.first,this.rows=t.rows}leftTable(){this.pageActual=this.pageActual-1,this.getIndex("",this.pageCount,this.pageActual),this.validatePage()}rightTable(){this.pageActual=this.pageActual+1,this.getIndex("",this.pageCount,this.pageActual),this.validatePage()}validatePage(){1==this.pageActual&&(this.disablePageLeft=!1),this.pageActual>1&&(this.disablePageLeft=!0),this.ultimaPage==this.pageActual&&(this.disablePageRight=!1),this.ultimaPage>this.pageActual&&(this.disablePageRight=!0)}buscarPorTecla(t){"Enter"==t.code&&this.search()}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(s.ok),e.rXU(h.ex),e.rXU(j))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-type-rooms"]],decls:96,vars:36,consts:[["type","ball-scale-multiple","size","large","bdColor","rgba(192,192,192,0.8)","template","<img src='assets/loading/cargando.gif' />"],[1,"surface-section","px-4","py-5","md:px-6","lg:px-8"],[1,"flex","align-items-start","flex-column","lg:justify-content-between","lg:flex-row"],[1,"font-medium","text-3xl","text-900"],[1,"flex","align-items-center","text-700","flex-wrap"],[1,"mr-5","flex","align-items-center","mt-3"],[1,"mt-3","lg:mt-0"],["pButton","","pRipple","","label","Crear","class","p-button-outlined mr-2","icon","",3,"click",4,"ngIf"],[1,"grid","mt-3"],[1,"col-12"],[1,"card","px-3","py-3"],["responsiveLayout","scroll","selectionMode","multiple","dataKey","usuario",3,"value","tableStyle","loading","rows","globalFilterFields","rowHover","onPage"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","loadingbody"],[2,"text-align","center"],[1,"p-buttonset"],["pButton","","pRipple","","label","","icon","pi pi-arrow-left",3,"disabled","click"],["pButton","","pRipple","",3,"label"],["pButton","","pRipple","","label","","icon","pi pi-arrow-right",3,"disabled","click"],["header","Nuevo Tipo de Habitaci\xf3n",3,"visible","modal","draggable","resizable","visibleChange"],[3,"formGroup"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-6"],["type","text","pInputText","","formControlName","nombre",1,"w-full","mb-3","border-round-3xl"],[4,"ngIf"],["optionLabel","nombre","formControlName","hotel_id",3,"options"],["style","color: red;",4,"ngIf"],[1,"grid","formgrid",2,"text-align","center"],[1,"col-12","md:col-2"],["name","puerta","value","puerta1","formControlName","puerta","id","puerta1"],["for","puerta1"],[1,"field-radiobutton"],["src","assets/puertas/puerta1.jpg","width","100%","height","80%"],["name","puerta","value","puerta2","formControlName","puerta","id","puerta2"],["for","puerta3"],["src","assets/puertas/puerta2.jpg","width","100%","height","80%"],["name","puerta","value","puerta3","formControlName","puerta","id","puerta3"],["for","puerta2"],["src","assets/puertas/puerta3.jpg","width","100%","height","80%"],[1,"field","col-12","md:col-12"],["pButton","","pRipple","","label","Crear Tipo de Habitaci\xf3n","icon","","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl",3,"disabled","click"],["header","Editar Tipo de Hotel",3,"visible","modal","draggable","resizable","visibleChange"],["pButton","","pRipple","","label","Editar Tipo de Habitaci\xf3n","icon","","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl",3,"disabled","click"],["pButton","","pRipple","","label","Crear","icon","",1,"p-button-outlined","mr-2",3,"click"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[1,"p-inputgroup"],["formControlName","search","pInputText","","type","text","placeholder","Buscar...",1,"w-full","sm:w-auto",3,"keyup.enter","input"],["type","button","pButton","","pRipple","",1,"pi","pi-search",3,"click"],[1,"flex","gap-2"],["icon","pi pi-pencil","severity","info",3,"click",4,"ngIf"],["icon","pi pi-trash","severity","danger",3,"click",4,"ngIf"],["icon","pi pi-pencil","severity","info",3,"click"],["icon","pi pi-trash","severity","danger",3,"click"],["colspan","8"],[2,"color","red"]],template:function(n,i){1&n&&(e.nrm(0,"ngx-spinner",0),e.j41(1,"div",1)(2,"div",2)(3,"div")(4,"div",3),e.EFF(5,"Tipos de habitaciones"),e.k0s(),e.j41(6,"div",4),e.nrm(7,"div",5),e.k0s()(),e.j41(8,"div",6),e.DNE(9,A,1,0,"button",7),e.k0s()()(),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"p-table",11),e.bIt("onPage",function(m){return i.onPage(m)}),e.DNE(14,w,7,1,"ng-template",12),e.DNE(15,H,7,0,"ng-template",13),e.DNE(16,V,11,8,"ng-template",14),e.DNE(17,U,3,0,"ng-template",15),e.k0s(),e.nrm(18,"br"),e.j41(19,"div",16)(20,"span",17)(21,"button",18),e.bIt("click",function(){return i.leftTable()}),e.k0s(),e.nrm(22,"button",19),e.j41(23,"button",20),e.bIt("click",function(){return i.rightTable()}),e.k0s()()()()()(),e.j41(24,"p-dialog",21),e.bIt("visibleChange",function(m){return i.visibleModalTypeRoom=m}),e.j41(25,"div",9)(26,"form",22)(27,"div",23)(28,"div",24)(29,"label"),e.EFF(30,"Nombre"),e.k0s(),e.nrm(31,"input",25),e.DNE(32,J,3,2,"div",26),e.k0s(),e.j41(33,"div",24)(34,"label"),e.EFF(35,"Hotel"),e.k0s(),e.nrm(36,"p-dropdown",27),e.DNE(37,O,2,0,"div",28),e.k0s()(),e.nrm(38,"br"),e.j41(39,"div",29)(40,"div",30),e.nrm(41,"p-radioButton",31),e.j41(42,"label",32),e.EFF(43," Puerta 1 "),e.k0s(),e.j41(44,"div",33),e.nrm(45,"img",34),e.k0s()(),e.j41(46,"div",30),e.nrm(47,"p-radioButton",35),e.j41(48,"label",36),e.EFF(49," Puerta 2 "),e.k0s(),e.j41(50,"div",33),e.nrm(51,"img",37),e.k0s()(),e.j41(52,"div",30),e.nrm(53,"p-radioButton",38),e.j41(54,"label",39),e.EFF(55," Puerta 3 "),e.k0s(),e.j41(56,"div",33),e.nrm(57,"img",40),e.k0s()()(),e.j41(58,"div",41)(59,"button",42),e.bIt("click",function(){return i.submitCreate()}),e.k0s()()()()(),e.j41(60,"p-dialog",43),e.bIt("visibleChange",function(m){return i.visibleModalTypeRoomEditar=m}),e.j41(61,"div",9)(62,"form",22)(63,"div",23)(64,"div",24)(65,"label"),e.EFF(66,"Nombre"),e.k0s(),e.nrm(67,"input",25),e.DNE(68,Q,3,2,"div",26),e.k0s(),e.j41(69,"div",24)(70,"label"),e.EFF(71,"Hotel"),e.k0s(),e.nrm(72,"p-dropdown",27),e.DNE(73,W,2,0,"div",28),e.k0s()(),e.nrm(74,"br"),e.j41(75,"div",29)(76,"div",30),e.nrm(77,"p-radioButton",31),e.j41(78,"label",32),e.EFF(79," Puerta 1 "),e.k0s(),e.j41(80,"div",33),e.nrm(81,"img",34),e.k0s()(),e.j41(82,"div",30),e.nrm(83,"p-radioButton",35),e.j41(84,"label",36),e.EFF(85," Puerta 2 "),e.k0s(),e.j41(86,"div",33),e.nrm(87,"img",37),e.k0s()(),e.j41(88,"div",30),e.nrm(89,"p-radioButton",38),e.j41(90,"label",39),e.EFF(91," Puerta 3 "),e.k0s(),e.j41(92,"div",33),e.nrm(93,"img",40),e.k0s()()(),e.j41(94,"div",41)(95,"button",44),e.bIt("click",function(){return i.submitUpdate()}),e.k0s()()()()()),2&n&&(e.R7$(9),e.Y8G("ngIf",i.permisoCrear),e.R7$(4),e.Y8G("value",i.typeRoomData)("tableStyle",e.lJ4(32,q))("loading",i.loadingTable)("rows",8)("globalFilterFields",e.lJ4(33,ee))("rowHover",!0),e.R7$(8),e.Y8G("disabled",!i.disablePageLeft),e.R7$(1),e.Y8G("label",i.pageActual),e.R7$(1),e.Y8G("disabled",!i.disablePageRight),e.R7$(1),e.Aen(e.lJ4(34,_)),e.Y8G("visible",i.visibleModalTypeRoom)("modal",!0)("draggable",!1)("resizable",!1),e.R7$(2),e.Y8G("formGroup",i.formCreateTypeRoom),e.R7$(6),e.Y8G("ngIf",i.formCreateTypeRoom.get("nombre").invalid&&(i.formCreateTypeRoom.get("nombre").dirty||i.formCreateTypeRoom.get("nombre").touched)),e.R7$(4),e.Y8G("options",i.hotel),e.R7$(1),e.Y8G("ngIf",i.formCreateTypeRoom.get("hotel_id").hasError("required")),e.R7$(22),e.Y8G("disabled",i.formCreateTypeRoom.invalid),e.R7$(1),e.Aen(e.lJ4(35,_)),e.Y8G("visible",i.visibleModalTypeRoomEditar)("modal",!0)("draggable",!1)("resizable",!1),e.R7$(2),e.Y8G("formGroup",i.formEditTypeRoom),e.R7$(6),e.Y8G("ngIf",i.formEditTypeRoom.get("nombre").invalid&&(i.formEditTypeRoom.get("nombre").dirty||i.formEditTypeRoom.get("nombre").touched)),e.R7$(4),e.Y8G("options",i.hotel),e.R7$(1),e.Y8G("ngIf",i.formEditTypeRoom.get("hotel_id").hasError("required")),e.R7$(22),e.Y8G("disabled",i.formEditTypeRoom.invalid))},dependencies:[d.bT,b.XI,Y.Ei,c._f,c.$n,s.qT,s.me,s.BC,s.cb,v.n,R.S,T.ms,y.a,C.l,s.j4,s.JD,h.et,d.PV],styles:["svg[_ngcontent-%COMP%]{width:45%}"]})}}return o})();var ie=r(1765);let oe=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=e.$C({type:o})}static{this.\u0275inj=e.G2t({imports:[E.iI.forChild([{path:"",component:te,canActivate:[ie.q],data:{permissions:["administracion.tipoHabitacion"]}}]),E.iI]})}}return o})(),ne=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=e.$C({type:o})}static{this.\u0275inj=e.G2t({providers:[{provide:u.a7,useClass:P.R,multi:!0},j],imports:[d.MD,oe,b.bG,k.e,s.YN,c.tm,v.Z,F.MB,x.m,I.wZ,R.u,G.f,T.kr,y.Ko,$.O3,C.P,N.RZ.forRoot(),s.X1,h.PO,B.I]})}}return o})()}}]);