"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[91],{4091:(va,U,p)=>{p.r(U),p.d(U,{DashboardRoomsModule:()=>ba});var h=p(6814),d=p(95),I=p(9664),it=p(6068),T=p(707),Z=p(4480),nt=p(4104),F=p(6340),rt=p(6022),y=p(3714),R=p(6218),x=p(2160),st=p(1865),lt=p(354),D=p(7213),ct=p(9862),dt=p(8712),pt=p(5722),A=p(8672),ut=p(1712),N=p(1532),v=p(228),mt=p(3519),m=p.n(mt),t=p(4946),q=p(8663),J=p(3859),P=p(1230),f=p(5219),E=p(1122),_=p(6825),b=p(2076),Q=p(7778),w=p(2332);function ht(a,r){1&a&&t.GkF(0)}function _t(a,r){1&a&&t._UZ(0,"TimesIcon",8),2&a&&t.Q6J("styleClass","p-overlaypanel-close-icon")}function gt(a,r){}function ft(a,r){1&a&&t.YNc(0,gt,0,0,"ng-template")}function bt(a,r){if(1&a&&(t.TgZ(0,"span",9),t.YNc(1,ft,1,0,null,3),t.qZA()),2&a){const e=t.oxw(3);t.xp6(1),t.Q6J("ngTemplateOutlet",e.closeIconTemplate)}}function vt(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",5),t.NdJ("click",function(o){t.CHM(e);const n=t.oxw(2);return t.KtG(n.onCloseClick(o))})("keydown.enter",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.hide())}),t.YNc(1,_t,1,1,"TimesIcon",6),t.YNc(2,bt,2,1,"span",7),t.qZA()}if(2&a){const e=t.oxw(2);t.uIk("aria-label",e.ariaCloseLabel),t.xp6(1),t.Q6J("ngIf",!e.closeIconTemplate),t.xp6(1),t.Q6J("ngIf",e.closeIconTemplate)}}const Tt=function(a,r){return{showTransitionParams:a,hideTransitionParams:r}},Zt=function(a,r){return{value:a,params:r}};function At(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",1),t.NdJ("click",function(o){t.CHM(e);const n=t.oxw();return t.KtG(n.onOverlayClick(o))})("@animation.start",function(o){t.CHM(e);const n=t.oxw();return t.KtG(n.onAnimationStart(o))})("@animation.done",function(o){t.CHM(e);const n=t.oxw();return t.KtG(n.onAnimationEnd(o))}),t.TgZ(1,"div",2),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onContentClick())})("mousedown",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onContentClick())}),t.Hsn(2),t.YNc(3,ht,1,0,"ng-container",3),t.qZA(),t.YNc(4,vt,3,3,"button",4),t.qZA()}if(2&a){const e=t.oxw();t.Tol(e.styleClass),t.Q6J("ngClass","p-overlaypanel p-component")("ngStyle",e.style)("@animation",t.WLB(10,Zt,e.overlayVisible?"open":"close",t.WLB(7,Tt,e.showTransitionOptions,e.hideTransitionOptions))),t.xp6(3),t.Q6J("ngTemplateOutlet",e.contentTemplate),t.xp6(1),t.Q6J("ngIf",e.showCloseIcon)}}const xt=["*"];let Ct=(()=>{class a{document;platformId;el;renderer;cd;zone;config;overlayService;dismissable=!0;showCloseIcon;style;styleClass;appendTo="body";autoZIndex=!0;ariaCloseLabel;baseZIndex=0;focusOnShow=!0;showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)";hideTransitionOptions=".1s linear";onShow=new t.vpe;onHide=new t.vpe;templates;container;overlayVisible=!1;render=!1;isOverlayAnimationInProgress=!1;selfClick=!1;documentClickListener;target;willHide;scrollHandler;documentResizeListener;contentTemplate;closeIconTemplate;destroyCallback;overlayEventListener;overlaySubscription;constructor(e,i,o,n,s,c,l,u){this.document=e,this.platformId=i,this.el=o,this.renderer=n,this.cd=s,this.zone=c,this.config=l,this.overlayService=u}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"content":default:this.contentTemplate=e.template;break;case"closeicon":this.closeIconTemplate=e.template}this.cd.markForCheck()})}bindDocumentClickListener(){(0,h.NF)(this.platformId)&&!this.documentClickListener&&this.dismissable&&this.zone.runOutsideAngular(()=>{let e=b.p.isIOS()?"touchstart":"click";this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:this.document,e,o=>{!this.container?.contains(o.target)&&this.target!==o.target&&!this.target.contains(o.target)&&!this.selfClick&&this.zone.run(()=>{this.hide()}),this.selfClick=!1,this.cd.markForCheck()})})}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null,this.selfClick=!1)}toggle(e,i){this.isOverlayAnimationInProgress||(this.overlayVisible?(this.hasTargetChanged(e,i)&&(this.destroyCallback=()=>{this.show(null,i||e.currentTarget||e.target)}),this.hide()):this.show(e,i))}show(e,i){i&&e&&e.stopPropagation(),!this.isOverlayAnimationInProgress&&(this.target=i||e.currentTarget||e.target,this.overlayVisible=!0,this.render=!0,this.cd.markForCheck())}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement}),this.selfClick=!0}onContentClick(){this.selfClick=!0}hasTargetChanged(e,i){return null!=this.target&&this.target!==(i||e.currentTarget||e.target)}appendContainer(){this.appendTo&&("body"===this.appendTo?this.renderer.appendChild(this.document.body,this.container):b.p.appendChild(this.container,this.appendTo))}restoreAppend(){this.container&&this.appendTo&&this.renderer.appendChild(this.el.nativeElement,this.container)}align(){this.autoZIndex&&w.P9.set("overlay",this.container,this.baseZIndex+this.config.zIndex.overlay),b.p.absolutePosition(this.container,this.target);const e=b.p.getOffset(this.container),i=b.p.getOffset(this.target),o=this.document.defaultView?.getComputedStyle(this.container).getPropertyValue("border-radius");let n=0;e.left<i.left&&(n=i.left-e.left-2*parseFloat(o)),this.container?.style.setProperty("--overlayArrowLeft",`${n}px`),e.top<i.top&&(b.p.addClass(this.container,"p-overlaypanel-flipped"),this.showCloseIcon&&this.renderer.setStyle(this.container,"margin-top","-30px"))}onAnimationStart(e){"open"===e.toState&&(this.container=e.element,this.appendContainer(),this.align(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.focusOnShow&&this.focus(),this.overlayEventListener=i=>{this.container&&this.container.contains(i.target)&&(this.selfClick=!0)},this.overlaySubscription=this.overlayService.clickObservable.subscribe(this.overlayEventListener),this.onShow.emit(null)),this.isOverlayAnimationInProgress=!0}onAnimationEnd(e){switch(e.toState){case"void":this.destroyCallback&&(this.destroyCallback(),this.destroyCallback=null),this.overlaySubscription&&this.overlaySubscription.unsubscribe();break;case"close":this.autoZIndex&&w.P9.clear(this.container),this.overlaySubscription&&this.overlaySubscription.unsubscribe(),this.onContainerDestroy(),this.onHide.emit({}),this.render=!1}this.isOverlayAnimationInProgress=!1}focus(){let e=b.p.findSingle(this.container,"[autofocus]");e&&this.zone.runOutsideAngular(()=>{setTimeout(()=>e.focus(),5)})}hide(){this.overlayVisible=!1,this.cd.markForCheck()}onCloseClick(e){this.hide(),e.preventDefault()}onWindowResize(){this.overlayVisible&&!b.p.isTouchDevice()&&this.hide()}bindDocumentResizeListener(){(0,h.NF)(this.platformId)&&!this.documentResizeListener&&(this.documentResizeListener=this.renderer.listen(this.document.defaultView,"resize",this.onWindowResize.bind(this)))}unbindDocumentResizeListener(){this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}bindScrollListener(){(0,h.NF)(this.platformId)&&(this.scrollHandler||(this.scrollHandler=new b.V(this.target,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener())}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}onContainerDestroy(){this.cd.destroyed||(this.target=null),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener()}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.container&&this.autoZIndex&&w.P9.clear(this.container),this.cd.destroyed||(this.target=null),this.destroyCallback=null,this.container&&(this.restoreAppend(),this.onContainerDestroy()),this.overlaySubscription&&this.overlaySubscription.unsubscribe()}static \u0275fac=function(i){return new(i||a)(t.Y36(h.K0),t.Y36(t.Lbi),t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(t.sBO),t.Y36(t.R0b),t.Y36(f.b4),t.Y36(f.F0))};static \u0275cmp=t.Xpm({type:a,selectors:[["p-overlayPanel"]],contentQueries:function(i,o,n){if(1&i&&t.Suo(n,f.jx,4),2&i){let s;t.iGM(s=t.CRH())&&(o.templates=s)}},hostAttrs:[1,"p-element"],inputs:{dismissable:"dismissable",showCloseIcon:"showCloseIcon",style:"style",styleClass:"styleClass",appendTo:"appendTo",autoZIndex:"autoZIndex",ariaCloseLabel:"ariaCloseLabel",baseZIndex:"baseZIndex",focusOnShow:"focusOnShow",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onShow:"onShow",onHide:"onHide"},ngContentSelectors:xt,decls:1,vars:1,consts:[[3,"ngClass","ngStyle","class","click",4,"ngIf"],[3,"ngClass","ngStyle","click"],[1,"p-overlaypanel-content",3,"click","mousedown"],[4,"ngTemplateOutlet"],["type","button","class","p-overlaypanel-close p-link","pRipple","",3,"click","keydown.enter",4,"ngIf"],["type","button","pRipple","",1,"p-overlaypanel-close","p-link",3,"click","keydown.enter"],[3,"styleClass",4,"ngIf"],["class","p-overlaypanel-close-icon",4,"ngIf"],[3,"styleClass"],[1,"p-overlaypanel-close-icon"]],template:function(i,o){1&i&&(t.F$t(),t.YNc(0,At,5,13,"div",0)),2&i&&t.Q6J("ngIf",o.render)},dependencies:function(){return[h.mk,h.O5,h.tP,h.PC,Z.H,Q.q]},styles:['.p-overlaypanel{position:absolute;margin-top:10px;top:0;left:0}.p-overlaypanel-flipped{margin-top:0;margin-bottom:10px}.p-overlaypanel-close{display:flex;justify-content:center;align-items:center;overflow:hidden;position:relative}.p-overlaypanel:after,.p-overlaypanel:before{bottom:100%;left:calc(var(--overlayArrowLeft, 0) + 1.25rem);content:" ";height:0;width:0;position:absolute;pointer-events:none}.p-overlaypanel:after{border-width:8px;margin-left:-8px}.p-overlaypanel:before{border-width:10px;margin-left:-10px}.p-overlaypanel-shifted:after,.p-overlaypanel-shifted:before{left:auto;right:1.25em;margin-left:auto}.p-overlaypanel-flipped:after,.p-overlaypanel-flipped:before{bottom:auto;top:100%}.p-overlaypanel.p-overlaypanel-flipped:after{border-bottom-color:transparent}.p-overlaypanel.p-overlaypanel-flipped:before{border-bottom-color:transparent}\n'],encapsulation:2,data:{animation:[(0,_.X$)("animation",[(0,_.SB)("void",(0,_.oB)({transform:"scaleY(0.8)",opacity:0})),(0,_.SB)("close",(0,_.oB)({opacity:0})),(0,_.SB)("open",(0,_.oB)({transform:"translateY(0)",opacity:1})),(0,_.eR)("void => open",(0,_.jt)("{{showTransitionParams}}")),(0,_.eR)("open => close",(0,_.jt)("{{hideTransitionParams}}"))])]},changeDetection:0})}return a})(),It=(()=>{class a{static \u0275fac=function(i){return new(i||a)};static \u0275mod=t.oAB({type:a});static \u0275inj=t.cJS({imports:[h.ez,Z.T,f.m8,Q.q,f.m8]})}return a})();var H=p(6005),Y=p(4562);function yt(a,r){if(1&a&&t._UZ(0,"span",11),2&a){const e=t.oxw(3);t.Tol(e.accordion.collapseIcon),t.Q6J("ngClass",e.iconClass)}}function Rt(a,r){if(1&a&&t._UZ(0,"ChevronDownIcon",11),2&a){const e=t.oxw(3);t.Q6J("ngClass",e.iconClass)}}function Dt(a,r){if(1&a&&(t.ynx(0),t.YNc(1,yt,1,3,"span",9),t.YNc(2,Rt,1,1,"ChevronDownIcon",10),t.BQk()),2&a){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.accordion.collapseIcon),t.xp6(1),t.Q6J("ngIf",!e.accordion.collapseIcon)}}function qt(a,r){if(1&a&&t._UZ(0,"span",11),2&a){const e=t.oxw(3);t.Tol(e.accordion.expandIcon),t.Q6J("ngClass",e.iconClass)}}function wt(a,r){if(1&a&&t._UZ(0,"ChevronRightIcon",11),2&a){const e=t.oxw(3);t.Q6J("ngClass",e.iconClass)}}function kt(a,r){if(1&a&&(t.ynx(0),t.YNc(1,qt,1,3,"span",9),t.YNc(2,wt,1,1,"ChevronRightIcon",10),t.BQk()),2&a){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.accordion.expandIcon),t.xp6(1),t.Q6J("ngIf",!e.accordion.expandIcon)}}function Mt(a,r){if(1&a&&(t.ynx(0),t.YNc(1,Dt,3,2,"ng-container",3),t.YNc(2,kt,3,2,"ng-container",3),t.BQk()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.selected),t.xp6(1),t.Q6J("ngIf",!e.selected)}}function Ot(a,r){}function St(a,r){1&a&&t.YNc(0,Ot,0,0,"ng-template")}function Ut(a,r){if(1&a&&(t.TgZ(0,"span",12),t._uU(1),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.hij(" ",e.header," ")}}function Ft(a,r){1&a&&t.GkF(0)}function Nt(a,r){1&a&&t.Hsn(0,1,["*ngIf","hasHeaderFacet"])}function Jt(a,r){1&a&&t.GkF(0)}function Pt(a,r){if(1&a&&(t.ynx(0),t.YNc(1,Jt,1,0,"ng-container",6),t.BQk()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",e.contentTemplate)}}const Et=["*",[["p-header"]]],Qt=function(a){return{$implicit:a}},L=function(a){return{transitionParams:a}},Ht=function(a){return{value:"visible",params:a}},Yt=function(a){return{value:"hidden",params:a}},Lt=["*","p-header"],Bt=["*"];let zt=0,B=(()=>{class a{changeDetector;header;headerStyle;tabStyle;contentStyle;tabStyleClass;headerStyleClass;contentStyleClass;disabled;cache=!0;transitionOptions="400ms cubic-bezier(0.86, 0, 0.07, 1)";iconPos="start";selectedChange=new t.vpe;headerFacet;templates;_selected=!1;get selected(){return this._selected}set selected(e){this._selected=e,this.loaded||(this._selected&&this.cache&&(this.loaded=!0),this.changeDetector.detectChanges())}get iconClass(){return"end"===this.iconPos?"p-accordion-toggle-icon-end":"p-accordion-toggle-icon"}contentTemplate;headerTemplate;iconTemplate;id="p-accordiontab-"+zt++;loaded=!1;accordion;constructor(e,i){this.changeDetector=i,this.accordion=e}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"content":default:this.contentTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"icon":this.iconTemplate=e.template}})}toggle(e){if(this.disabled)return!1;let i=this.findTabIndex();if(this.selected)this.selected=!1,this.accordion.onClose.emit({originalEvent:e,index:i});else{if(!this.accordion.multiple)for(var o=0;o<this.accordion.tabs.length;o++)this.accordion.tabs[o].selected&&(this.accordion.tabs[o].selected=!1,this.accordion.tabs[o].selectedChange.emit(!1),this.accordion.tabs[o].changeDetector.markForCheck());this.selected=!0,this.loaded=!0,this.accordion.onOpen.emit({originalEvent:e,index:i})}this.selectedChange.emit(this.selected),this.accordion.updateActiveIndex(),this.changeDetector.markForCheck(),e.preventDefault()}findTabIndex(){let e=-1;for(var i=0;i<this.accordion.tabs.length;i++)if(this.accordion.tabs[i]==this){e=i;break}return e}get hasHeaderFacet(){return this.headerFacet&&this.headerFacet.length>0}onKeydown(e){(32===e.which||13===e.which)&&(this.toggle(e),e.preventDefault())}ngOnDestroy(){this.accordion.tabs.splice(this.findTabIndex(),1)}static \u0275fac=function(i){return new(i||a)(t.Y36((0,t.Gpc)(()=>z)),t.Y36(t.sBO))};static \u0275cmp=t.Xpm({type:a,selectors:[["p-accordionTab"]],contentQueries:function(i,o,n){if(1&i&&(t.Suo(n,f.h4,4),t.Suo(n,f.jx,4)),2&i){let s;t.iGM(s=t.CRH())&&(o.headerFacet=s),t.iGM(s=t.CRH())&&(o.templates=s)}},hostAttrs:[1,"p-element"],inputs:{header:"header",headerStyle:"headerStyle",tabStyle:"tabStyle",contentStyle:"contentStyle",tabStyleClass:"tabStyleClass",headerStyleClass:"headerStyleClass",contentStyleClass:"contentStyleClass",disabled:"disabled",cache:"cache",transitionOptions:"transitionOptions",iconPos:"iconPos",selected:"selected"},outputs:{selectedChange:"selectedChange"},ngContentSelectors:Lt,decls:12,vars:38,consts:[[1,"p-accordion-tab",3,"ngClass","ngStyle"],[1,"p-accordion-header"],["role","tab",1,"p-accordion-header-link",3,"ngClass","click","keydown"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-accordion-header-text",4,"ngIf"],[4,"ngTemplateOutlet"],["role","region",1,"p-toggleable-content"],[1,"p-accordion-content",3,"ngClass","ngStyle"],[3,"class","ngClass",4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"p-accordion-header-text"]],template:function(i,o){1&i&&(t.F$t(Et),t.TgZ(0,"div",0)(1,"div",1)(2,"a",2),t.NdJ("click",function(s){return o.toggle(s)})("keydown",function(s){return o.onKeydown(s)}),t.YNc(3,Mt,3,2,"ng-container",3),t.YNc(4,St,1,0,null,4),t.YNc(5,Ut,2,1,"span",5),t.YNc(6,Ft,1,0,"ng-container",6),t.YNc(7,Nt,1,0,"ng-content",3),t.qZA()(),t.TgZ(8,"div",7)(9,"div",8),t.Hsn(10),t.YNc(11,Pt,2,1,"ng-container",3),t.qZA()()()),2&i&&(t.ekj("p-accordion-tab-active",o.selected),t.Q6J("ngClass",o.tabStyleClass)("ngStyle",o.tabStyle),t.xp6(1),t.ekj("p-highlight",o.selected)("p-disabled",o.disabled),t.xp6(1),t.Akn(o.headerStyle),t.Q6J("ngClass",o.headerStyleClass),t.uIk("tabindex",o.disabled?null:0)("id",o.id)("aria-controls",o.id+"-content")("aria-expanded",o.selected),t.xp6(1),t.Q6J("ngIf",!o.iconTemplate),t.xp6(1),t.Q6J("ngTemplateOutlet",o.iconTemplate)("ngTemplateOutletContext",t.VKq(28,Qt,o.selected)),t.xp6(1),t.Q6J("ngIf",!o.hasHeaderFacet),t.xp6(1),t.Q6J("ngTemplateOutlet",o.headerTemplate),t.xp6(1),t.Q6J("ngIf",o.hasHeaderFacet),t.xp6(1),t.Q6J("@tabContent",o.selected?t.VKq(32,Ht,t.VKq(30,L,o.transitionOptions)):t.VKq(36,Yt,t.VKq(34,L,o.transitionOptions))),t.uIk("id",o.id+"-content")("aria-hidden",!o.selected)("aria-labelledby",o.id),t.xp6(1),t.Q6J("ngClass",o.contentStyleClass)("ngStyle",o.contentStyle),t.xp6(2),t.Q6J("ngIf",o.contentTemplate&&(o.cache?o.loaded:o.selected)))},dependencies:function(){return[h.mk,h.O5,h.tP,h.PC,Y.X,H.v]},styles:[".p-accordion-header-link{cursor:pointer;display:flex;align-items:center;-webkit-user-select:none;user-select:none;position:relative;text-decoration:none}.p-accordion-header-link:focus{z-index:1}.p-accordion-header-text{line-height:1}.p-accordion .p-toggleable-content{overflow:hidden}.p-accordion .p-accordion-tab-active>.p-toggleable-content:not(.ng-animating){overflow:inherit}.p-accordion-toggle-icon-end{order:1;margin-left:auto}.p-accordion-toggle-icon{order:0}\n"],encapsulation:2,data:{animation:[(0,_.X$)("tabContent",[(0,_.SB)("hidden",(0,_.oB)({height:"0"})),(0,_.SB)("visible",(0,_.oB)({height:"*"})),(0,_.eR)("visible <=> hidden",[(0,_.jt)("{{transitionParams}}")]),(0,_.eR)("void => *",(0,_.jt)(0))])]},changeDetection:0})}return a})(),z=(()=>{class a{el;changeDetector;multiple=!1;style;styleClass;expandIcon;collapseIcon;get activeIndex(){return this._activeIndex}set activeIndex(e){this._activeIndex=e,this.preventActiveIndexPropagation?this.preventActiveIndexPropagation=!1:this.updateSelectionState()}onClose=new t.vpe;onOpen=new t.vpe;activeIndexChange=new t.vpe;tabList;tabListSubscription=null;_activeIndex;preventActiveIndexPropagation=!1;tabs=[];constructor(e,i){this.el=e,this.changeDetector=i}ngAfterContentInit(){this.initTabs(),this.tabListSubscription=this.tabList.changes.subscribe(e=>{this.initTabs()})}initTabs(){this.tabs=this.tabList.toArray(),this.updateSelectionState(),this.changeDetector.markForCheck()}getBlockableElement(){return this.el.nativeElement.children[0]}updateSelectionState(){if(this.tabs&&this.tabs.length&&null!=this._activeIndex)for(let e=0;e<this.tabs.length;e++){let i=this.multiple?this._activeIndex.includes(e):e===this._activeIndex;i!==this.tabs[e].selected&&(this.tabs[e].selected=i,this.tabs[e].selectedChange.emit(i),this.tabs[e].changeDetector.markForCheck())}}updateActiveIndex(){let e=this.multiple?[]:null;this.tabs.forEach((i,o)=>{if(i.selected){if(!this.multiple)return void(e=o);e.push(o)}}),this.preventActiveIndexPropagation=!0,this.activeIndexChange.emit(e)}ngOnDestroy(){this.tabListSubscription&&this.tabListSubscription.unsubscribe()}static \u0275fac=function(i){return new(i||a)(t.Y36(t.SBq),t.Y36(t.sBO))};static \u0275cmp=t.Xpm({type:a,selectors:[["p-accordion"]],contentQueries:function(i,o,n){if(1&i&&t.Suo(n,B,4),2&i){let s;t.iGM(s=t.CRH())&&(o.tabList=s)}},hostAttrs:[1,"p-element"],inputs:{multiple:"multiple",style:"style",styleClass:"styleClass",expandIcon:"expandIcon",collapseIcon:"collapseIcon",activeIndex:"activeIndex"},outputs:{onClose:"onClose",onOpen:"onOpen",activeIndexChange:"activeIndexChange"},ngContentSelectors:Bt,decls:2,vars:4,consts:[["role","tablist",3,"ngClass","ngStyle"]],template:function(i,o){1&i&&(t.F$t(),t.TgZ(0,"div",0),t.Hsn(1),t.qZA()),2&i&&(t.Tol(o.styleClass),t.Q6J("ngClass","p-accordion p-component")("ngStyle",o.style))},dependencies:[h.mk,h.PC],encapsulation:2,changeDetection:0})}return a})(),jt=(()=>{class a{static \u0275fac=function(i){return new(i||a)};static \u0275mod=t.oAB({type:a});static \u0275inj=t.cJS({imports:[h.ez,Y.X,H.v,f.m8]})}return a})();var k=p(6263),M=p(4055),O=p(7161),Gt=p(8725);const $t=["op1"];function Vt(a,r){1&a&&t._UZ(0,"i",32)}function Kt(a,r){1&a&&t._UZ(0,"i",32)}function Wt(a,r){1&a&&t._UZ(0,"i",32)}function Xt(a,r){1&a&&t._UZ(0,"i",32)}function te(a,r){1&a&&t._UZ(0,"i",32)}function ee(a,r){1&a&&t._UZ(0,"i",32)}function oe(a,r){1&a&&t._UZ(0,"i",32)}function ae(a,r){1&a&&t._UZ(0,"i",38)}const j=function(){return{background:"blue",color:"white"}};function ie(a,r){if(1&a&&(t.TgZ(0,"div"),t._UZ(1,"p-tag",50),t.qZA()),2&a){const e=t.oxw().$implicit,i=t.oxw(3);t.xp6(1),t.Akn(t.DdM(3,j)),t.Q6J("value",i.validarEstado(e.detalle,5))}}const G=function(){return{background:"#03c077",color:"white"}};function ne(a,r){1&a&&(t.TgZ(0,"div"),t._UZ(1,"p-tag",51),t.qZA()),2&a&&(t.xp6(1),t.Akn(t.DdM(2,G)))}const $=function(){return{background:"#680194",color:"white"}};function re(a,r){1&a&&(t.TgZ(0,"div"),t._UZ(1,"p-tag",52),t.qZA()),2&a&&(t.xp6(1),t.Akn(t.DdM(2,$)))}const V=function(){return{background:"orange",color:"white"}};function se(a,r){1&a&&(t.TgZ(0,"div"),t._UZ(1,"p-tag",53),t.qZA()),2&a&&(t.xp6(1),t.Akn(t.DdM(2,V)))}const K=function(){return{background:"red",color:"white"}};function le(a,r){1&a&&(t.TgZ(0,"div"),t._UZ(1,"p-tag",54),t.qZA()),2&a&&(t.xp6(1),t.Akn(t.DdM(2,K)))}const W=function(){return{background:"green",color:"white"}};function ce(a,r){1&a&&(t.TgZ(0,"div"),t._UZ(1,"p-tag",55),t.qZA()),2&a&&(t.xp6(1),t.Akn(t.DdM(2,W)))}function de(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",39)(1,"div",40),t._UZ(2,"label",41),t.qZA(),t.TgZ(3,"i",42),t.NdJ("click",function(o){const s=t.CHM(e).$implicit,c=t.oxw(3);return t.KtG(c.abrirMenu(o,s))}),t.qZA(),t.TgZ(4,"p-overlayPanel",43,44)(6,"p-menu",45),t.NdJ("click",function(){const n=t.CHM(e).$implicit,s=t.oxw(3);return t.KtG(s.opcionesHabitacion(n))}),t.qZA()(),t._UZ(7,"br"),t.TgZ(8,"div",46),t._UZ(9,"img",47),t.qZA(),t.TgZ(10,"div",48),t.ynx(11),t.YNc(12,ie,2,4,"div",49),t.YNc(13,ne,2,3,"div",49),t.YNc(14,re,2,3,"div",49),t.YNc(15,se,2,3,"div",49),t.YNc(16,le,2,3,"div",49),t.YNc(17,ce,2,3,"div",49),t.BQk(),t.qZA()()}if(2&a){const e=r.$implicit,i=t.oxw(3);t.xp6(2),t.Q6J("label",e.nombre),t.xp6(2),t.Q6J("showCloseIcon",!0),t.xp6(2),t.Q6J("model",i.menuHabitacion),t.xp6(3),t.MGl("src","assets/puertas/",e.habitacionNombre,".jpg",t.LSH),t.xp6(3),t.Q6J("ngIf",i.validarEstado(e.detalle,5)),t.xp6(1),t.Q6J("ngIf",i.validarEstado(e.detalle,3)),t.xp6(1),t.Q6J("ngIf",i.validarEstado(e.detalle,4)),t.xp6(1),t.Q6J("ngIf",i.validarEstado(e.detalle,6)),t.xp6(1),t.Q6J("ngIf",i.validarEstado(e.detalle,2)),t.xp6(1),t.Q6J("ngIf",i.validarEstado(e.detalle,7))}}function pe(a,r){if(1&a&&(t.YNc(0,ae,1,0,"i",35),t.TgZ(1,"div",36),t.YNc(2,de,18,10,"div",37),t.qZA()),2&a){const e=t.oxw().$implicit;t.Q6J("ngIf",e.loading),t.xp6(2),t.Q6J("ngForOf",e.habitaciones)}}function ue(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"p-accordion"),t._UZ(1,"br"),t.TgZ(2,"p-accordionTab",33),t.NdJ("selectedChange",function(){const n=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.openTag(n.piso))}),t.YNc(3,pe,3,2,"ng-template",34),t.qZA()()}if(2&a){const e=r.$implicit,i=t.oxw();t.xp6(2),t.Q6J("header","Piso "+e.piso)("selected",e.piso==i.primerPiso)}}function me(a,r){1&a&&(t.TgZ(0,"div",74),t._uU(1,"La fecha de inicio no puede ser mayor a la fecha final"),t.qZA())}function he(a,r){1&a&&(t.TgZ(0,"div",74),t._uU(1,"Debe reservar por al menos una hora"),t.qZA())}function _e(a,r){if(1&a&&(t.TgZ(0,"div",75)(1,"span",76),t._uU(2),t.qZA()()),2&a){const e=r.$implicit;t.xp6(2),t.Oqu(e.nombre)}}function ge(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",77),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.crearCliente())}),t.qZA()}}function fe(a,r){1&a&&(t.TgZ(0,"div",74),t._uU(1,"Seleccione el cliente"),t.qZA())}function be(a,r){1&a&&(t.TgZ(0,"div")(1,"h5"),t._uU(2,"Hora"),t.qZA()())}function ve(a,r){1&a&&(t.TgZ(0,"div")(1,"h5"),t._uU(2,"Noche"),t.qZA()())}function Te(a,r){if(1&a&&(t.TgZ(0,"div",75)(1,"span",76),t._uU(2),t._UZ(3,"p-tag",78),t.YNc(4,be,3,0,"div",49),t.YNc(5,ve,3,0,"div",49),t.qZA()()),2&a){const e=r.$implicit;t.xp6(2),t.hij(" ",e.nombre," "),t.xp6(1),t.s9C("icon",e.icon),t.s9C("value",e.valor),t.xp6(1),t.Q6J("ngIf",2==e.tipo),t.xp6(1),t.Q6J("ngIf",1==e.tipo)}}function Ze(a,r){1&a&&(t.TgZ(0,"div",74),t._uU(1,"Seleccione la tarifa"),t.qZA())}function Ae(a,r){1&a&&(t.TgZ(0,"div",74),t._uU(1,"Monto es requerido"),t.qZA())}function xe(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",79)(1,"div",80)(2,"label",81),t._uU(3,"Monto"),t.qZA(),t._UZ(4,"br"),t.TgZ(5,"input",82),t.NdJ("input",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.checkAbonos())}),t.qZA(),t._UZ(6,"br"),t.YNc(7,Ae,2,0,"div",19),t.qZA(),t.TgZ(8,"div",80)(9,"label",83),t._uU(10,"Medio Pago"),t.qZA(),t._UZ(11,"br")(12,"p-dropdown",84),t.qZA(),t.TgZ(13,"div",85),t._UZ(14,"label",86)(15,"br"),t.TgZ(16,"p-button",87),t.NdJ("click",function(){const n=t.CHM(e).index,s=t.oxw(2);return t.KtG(s.eliminarAbono(n))}),t.qZA()()()}if(2&a){const e=r.$implicit,i=t.oxw(2);t.Q6J("formGroup",e),t.xp6(7),t.Q6J("ngIf",null==e||null==e.controls.monto||null==e.controls.monto.errors?null:e.controls.monto.errors.required),t.xp6(5),t.Q6J("options",i.selectMedioPago)}}function Ce(a,r){1&a&&t._UZ(0,"p-message",88)}function Ie(a,r){if(1&a&&(t.TgZ(0,"tbody")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA()()),2&a){const e=r.$implicit;t.xp6(2),t.hij(" ",e.nombre," "),t.xp6(2),t.hij(" ",e.valor," ")}}function ye(a,r){if(1&a&&(t.TgZ(0,"tbody")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA()()),2&a){const e=r.$implicit;t.xp6(2),t.hij(" ",e.monto," "),t.xp6(2),t.hij(" ",e.medio_pago.nombre," ")}}const Re=function(){return{width:"95vw"}};function De(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"p-dialog",56),t.NdJ("visibleChange",function(o){t.CHM(e);const n=t.oxw();return t.KtG(n.reservacionModalVisible=o)}),t.TgZ(1,"div",13)(2,"div",57)(3,"div",58)(4,"h4",59)(5,"strong"),t._uU(6),t.qZA()()(),t.TgZ(7,"div",60)(8,"button",61),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.hideDialog())}),t.qZA()()(),t.TgZ(9,"div",14),t.NdJ("ngSubmit",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.enviarReservar())}),t.TgZ(10,"div",15)(11,"div",20)(12,"label"),t._uU(13,"Fecha Inicio"),t.qZA(),t._UZ(14,"p-calendar",62),t.YNc(15,me,2,0,"div",19),t.qZA(),t.TgZ(16,"div",20)(17,"label"),t._uU(18,"Fecha Final"),t.qZA(),t._UZ(19,"p-calendar",63),t.YNc(20,he,2,0,"div",19),t.qZA(),t.TgZ(21,"div",15)(22,"div",16)(23,"label",64),t._uU(24,"Cliente"),t.qZA(),t.TgZ(25,"p-multiSelect",65),t.NdJ("onFilter",function(o){t.CHM(e);const n=t.oxw();return t.KtG(n.busquedaCliente(o))}),t.YNc(26,_e,3,1,"ng-template",18),t.YNc(27,ge,1,0,"ng-template",66),t.qZA(),t.YNc(28,fe,2,0,"div",19),t.qZA(),t.TgZ(29,"div",16)(30,"label",64),t._uU(31,"Tarifa"),t.qZA(),t.TgZ(32,"p-multiSelect",67),t.NdJ("onChange",function(o){t.CHM(e);const n=t.oxw();return t.KtG(n.checkTarifaReserva(o))}),t.YNc(33,Te,6,5,"ng-template",18),t.qZA(),t.YNc(34,Ze,2,0,"div",19),t.qZA(),t.TgZ(35,"div",16)(36,"p-panel",68)(37,"button",69),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.agregarAbono())}),t.qZA(),t.YNc(38,xe,17,3,"div",70),t.qZA()(),t.TgZ(39,"div",16)(40,"label"),t._uU(41,"Descripci\xf3n"),t.qZA(),t._UZ(42,"textarea",23),t.qZA(),t.YNc(43,Ce,1,0,"p-message",71),t.TgZ(44,"div",16)(45,"table")(46,"tr")(47,"th",72),t._uU(48,"Nombre"),t.qZA(),t.TgZ(49,"th"),t._uU(50,"Valores"),t.qZA(),t.TgZ(51,"td"),t._uU(52,"Detalle"),t.qZA()(),t.TgZ(53,"tr")(54,"th"),t._uU(55," Tarifas"),t.qZA(),t.TgZ(56,"th"),t._uU(57),t.qZA(),t.TgZ(58,"td")(59,"table")(60,"thead")(61,"th"),t._uU(62,"Nombre"),t.qZA(),t.TgZ(63,"th"),t._uU(64,"Precio"),t.qZA()(),t.YNc(65,Ie,5,2,"tbody",10),t.qZA()()(),t.TgZ(66,"tr")(67,"th"),t._uU(68," Abonos"),t.qZA(),t.TgZ(69,"th"),t._uU(70),t.qZA(),t.TgZ(71,"td")(72,"table")(73,"thead")(74,"th"),t._uU(75,"Monto"),t.qZA(),t.TgZ(76,"th"),t._uU(77,"Metodo de pago"),t.qZA()(),t.YNc(78,ye,5,2,"tbody",10),t.qZA()()(),t.TgZ(79,"tr")(80,"th"),t._uU(81," Sub total"),t.qZA(),t.TgZ(82,"th"),t._uU(83),t.qZA(),t._UZ(84,"td"),t.qZA(),t.TgZ(85,"tr")(86,"th"),t._uU(87," Total"),t.qZA(),t.TgZ(88,"th"),t._uU(89),t.qZA(),t._UZ(90,"td"),t.qZA()()(),t.TgZ(91,"div",16)(92,"button",73),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.enviarReservar())}),t.qZA()()()()()()()}if(2&a){const e=t.oxw();t.Akn(t.DdM(31,Re)),t.Q6J("showHeader",!1)("visible",e.reservacionModalVisible)("modal",!0)("draggable",!1)("resizable",!1),t.xp6(6),t.hij("Reservar ",e.nombreHabitacionReservada," "),t.xp6(3),t.Q6J("formGroup",e.reservaForm),t.xp6(5),t.Q6J("minDate",e.hoy)("showIcon",!0),t.xp6(1),t.Q6J("ngIf",e.reservaForm.get("fechaFinal").value<e.reservaForm.get("fechaInicio").value&&e.reservaForm.get("fechaFinal").value),t.xp6(4),t.Q6J("minDate",e.hoy)("showIcon",!0),t.xp6(1),t.Q6J("ngIf",e.reservaForm.get("fechaFinal").value<=e.reservaForm.get("fechaInicio").value&&e.reservaForm.get("fechaFinal").value),t.xp6(5),t.Q6J("options",e.clienteData),t.xp6(3),t.Q6J("ngIf",e.reservaForm.get("cliente_id").hasError("required")),t.xp6(4),t.Q6J("options",e.tarifaData),t.xp6(2),t.Q6J("ngIf",e.reservaForm.get("tarifa_id").hasError("required")),t.xp6(2),t.MGl("header","Abonos $ ",e.abonosTotal||0,""),t.Q6J("toggleable",!0)("collapsed",e.collapsed),t.xp6(2),t.Q6J("ngForOf",e.formAbonosArray.controls),t.xp6(5),t.Q6J("ngIf",e.abonosTotal>e.totalPagarReserva),t.xp6(14),t.hij(" $ ",e.tarifasTotal," "),t.xp6(8),t.Q6J("ngForOf",e.reservaForm.get("tarifa_id").value),t.xp6(5),t.hij(" $ ",e.abonosTotal," "),t.xp6(8),t.Q6J("ngForOf",e.formAbonosArray.value),t.xp6(5),t.hij(" $ ",e.totalPagarReserva<=0?0:e.totalPagarReserva," "),t.xp6(6),t.hij(" $ ",e.totalPagarReserva-e.abonosTotal<=0?0:e.totalPagarReserva-e.abonosTotal," "),t.xp6(3),t.Q6J("disabled",e.reservaForm.invalid||e.formAbonosArray.invalid||e.abonosTotal>e.totalPagarReserva||e.reservaForm.get("fechaFinal").value<=e.reservaForm.get("fechaInicio").value)}}function qe(a,r){if(1&a&&(t.TgZ(0,"div",75)(1,"span",76),t._uU(2),t.qZA()()),2&a){const e=r.$implicit;t.xp6(2),t.Oqu(e.name)}}function we(a,r){1&a&&(t.TgZ(0,"div",74),t._uU(1,"Campo requerido"),t.qZA())}function ke(a,r){1&a&&(t.TgZ(0,"div",74),t._uU(1,"Campo requerido"),t.qZA())}function Me(a,r){1&a&&t._UZ(0,"p-message",89)}function Oe(a,r){if(1&a&&(t.TgZ(0,"div",75)(1,"span",76),t._uU(2),t.qZA()()),2&a){const e=r.$implicit;t.xp6(2),t.Oqu(e.name)}}function Se(a,r){1&a&&(t.TgZ(0,"div",74),t._uU(1,"Campo requerido"),t.qZA())}function Ue(a,r){1&a&&(t.TgZ(0,"div",74),t._uU(1,"Campo requerido"),t.qZA())}function Fe(a,r){1&a&&t._UZ(0,"p-message",89)}function Ne(a,r){if(1&a&&(t.TgZ(0,"div",75)(1,"span",76),t._uU(2),t.qZA()()),2&a){const e=r.$implicit;t.xp6(2),t.Oqu(e.nombre)}}function Je(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",77),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.crearCliente())}),t.qZA()}}function Pe(a,r){1&a&&(t.TgZ(0,"div",74),t._uU(1,"Seleccione el cliente"),t.qZA())}function Ee(a,r){1&a&&(t.TgZ(0,"div")(1,"h5"),t._uU(2,"Hora"),t.qZA()())}function Qe(a,r){1&a&&(t.TgZ(0,"div")(1,"h5"),t._uU(2,"Noche"),t.qZA()())}function He(a,r){if(1&a&&(t.TgZ(0,"div",75)(1,"span",76),t._uU(2),t._UZ(3,"p-tag",78),t.YNc(4,Ee,3,0,"div",49),t.YNc(5,Qe,3,0,"div",49),t.qZA()()),2&a){const e=r.$implicit;t.xp6(2),t.hij(" ",e.nombre," "),t.xp6(1),t.s9C("icon",e.icon),t.s9C("value",e.valor),t.xp6(1),t.Q6J("ngIf",2==e.tipo),t.xp6(1),t.Q6J("ngIf",1==e.tipo)}}function Ye(a,r){1&a&&(t.TgZ(0,"div",74),t._uU(1,"Seleccione la tarifa"),t.qZA())}function Le(a,r){1&a&&(t.TgZ(0,"div",74),t._uU(1,"Monto es requerido."),t.qZA())}function Be(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",79)(1,"div",80)(2,"label",81),t._uU(3,"Monto"),t.qZA(),t._UZ(4,"br"),t.TgZ(5,"input",82),t.NdJ("input",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.checkAbonoOcupar())}),t.qZA(),t._UZ(6,"br"),t.YNc(7,Le,2,0,"div",19),t.qZA(),t.TgZ(8,"div",80)(9,"label",83),t._uU(10,"Medio Pago"),t.qZA(),t._UZ(11,"br")(12,"p-dropdown",84),t.qZA(),t.TgZ(13,"div",85),t._UZ(14,"label",86)(15,"br"),t.TgZ(16,"p-button",87),t.NdJ("click",function(){const n=t.CHM(e).index,s=t.oxw(2);return t.KtG(s.eliminarAbonoOcupar(n))}),t.qZA()()()}if(2&a){const e=r.$implicit,i=t.oxw(2);t.Q6J("formGroup",e),t.xp6(7),t.Q6J("ngIf",null==e||null==e.controls.monto||null==e.controls.monto.errors?null:e.controls.monto.errors.required),t.xp6(5),t.Q6J("options",i.selectMedioPago)}}function ze(a,r){1&a&&t._UZ(0,"p-message",88)}function je(a,r){1&a&&(t.TgZ(0,"th"),t._UZ(1,"span"),t.qZA(),t.TgZ(2,"th"),t._UZ(3,"span"),t.qZA())}function Ge(a,r){1&a&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Metodo de pago"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Monto"),t.qZA(),t.YNc(5,je,4,0,"ng-template",null,98,t.W1O),t.qZA())}function $e(a,r){1&a&&(t.TgZ(0,"td"),t._UZ(1,"span"),t.qZA(),t.TgZ(2,"td"),t._UZ(3,"span"),t.qZA())}function Ve(a,r){if(1&a&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.YNc(5,$e,4,0,"ng-template",null,98,t.W1O),t.qZA()),2&a){const e=r.$implicit;t.xp6(2),t.Oqu(e.medio_pago.nombre),t.xp6(2),t.hij("$ ",e.monto,"")}}function Ke(a,r){1&a&&(t.TgZ(0,"td"),t._UZ(1,"span"),t.qZA(),t.TgZ(2,"td"),t._UZ(3,"span"),t.qZA())}function We(a,r){if(1&a&&(t.TgZ(0,"tr")(1,"td",99),t._uU(2,"Total"),t.qZA(),t.TgZ(3,"td",99),t._uU(4),t.ALo(5,"number"),t.qZA(),t.YNc(6,Ke,4,0,"ng-template",null,98,t.W1O),t.qZA()),2&a){const e=t.oxw(2);t.xp6(4),t.hij(" $",t.lcZ(5,1,e.abonosTotalOcupar),"")}}function Xe(a,r){1&a&&(t.TgZ(0,"th"),t._UZ(1,"span"),t.qZA(),t.TgZ(2,"th"),t._UZ(3,"span"),t.qZA())}function to(a,r){1&a&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Nombre"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Precio"),t.qZA(),t.YNc(5,Xe,4,0,"ng-template",null,98,t.W1O),t.qZA())}function eo(a,r){1&a&&(t.TgZ(0,"td"),t._UZ(1,"span"),t.qZA(),t.TgZ(2,"td"),t._UZ(3,"span"),t.qZA())}function oo(a,r){if(1&a&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"number"),t.qZA(),t.YNc(6,eo,4,0,"ng-template",null,98,t.W1O),t.qZA()),2&a){const e=r.$implicit;t.xp6(2),t.Oqu(e.nombre),t.xp6(2),t.hij("$",t.lcZ(5,2,e.valor),"")}}function ao(a,r){1&a&&(t.TgZ(0,"td"),t._UZ(1,"span"),t.qZA(),t.TgZ(2,"td"),t._UZ(3,"span"),t.qZA())}function io(a,r){if(1&a&&(t.TgZ(0,"tr")(1,"td",99),t._uU(2,"Total"),t.qZA(),t.TgZ(3,"td",99),t._uU(4),t.ALo(5,"number"),t.qZA(),t.YNc(6,ao,4,0,"ng-template",null,98,t.W1O),t.qZA()),2&a){const e=t.oxw(2);t.xp6(4),t.hij(" $",t.lcZ(5,1,e.tarifasTotalOcupar),"")}}function no(a,r){1&a&&(t.TgZ(0,"th"),t._UZ(1,"span"),t.qZA(),t.TgZ(2,"th"),t._UZ(3,"span"),t.qZA())}function ro(a,r){1&a&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Subtotal"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Total"),t.qZA(),t.YNc(5,no,4,0,"ng-template",null,98,t.W1O),t.qZA())}function so(a,r){1&a&&(t.TgZ(0,"td"),t._UZ(1,"span"),t.qZA(),t.TgZ(2,"td"),t._UZ(3,"span"),t.qZA())}function lo(a,r){if(1&a&&(t.TgZ(0,"tr")(1,"td",99),t._uU(2),t.qZA(),t.TgZ(3,"td",99),t._uU(4),t.qZA(),t.YNc(5,so,4,0,"ng-template",null,98,t.W1O),t.qZA()),2&a){const e=t.oxw(2);t.xp6(2),t.hij("$ ",e.totalPagarOcupar<=0?0:e.totalPagarOcupar," "),t.xp6(2),t.hij("$ ",e.totalPagarOcupar-e.abonosTotalOcupar<=0?0:e.totalPagarOcupar-e.abonosTotalOcupar," ")}}const co=function(){return{width:"70vw"}},S=function(){return{"min-width":"25rem"}},po=function(){return[]};function uo(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"p-dialog",90),t.NdJ("visibleChange",function(o){t.CHM(e);const n=t.oxw();return t.KtG(n.ocuparModalVisible=o)}),t.TgZ(1,"div",13)(2,"div",14),t.NdJ("ngSubmit",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.enviarOcupar())}),t.TgZ(3,"h2",46),t._uU(4),t.qZA(),t.TgZ(5,"div",15)(6,"div",16)(7,"label",64),t._uU(8,"Cliente"),t.qZA(),t.TgZ(9,"p-multiSelect",91),t.NdJ("onFilter",function(o){t.CHM(e);const n=t.oxw();return t.KtG(n.busquedaCliente(o))}),t.YNc(10,Ne,3,1,"ng-template",18),t.YNc(11,Je,1,0,"ng-template",66),t.qZA(),t.YNc(12,Pe,2,0,"div",19),t.qZA(),t.TgZ(13,"div",16)(14,"label",64),t._uU(15,"Tarifa"),t.qZA(),t.TgZ(16,"p-multiSelect",67),t.NdJ("onChange",function(o){t.CHM(e);const n=t.oxw();return t.KtG(n.checkTarifaOcupar(o))}),t.YNc(17,He,6,5,"ng-template",18),t.qZA(),t.YNc(18,Ye,2,0,"div",19),t.qZA(),t.TgZ(19,"div",16)(20,"p-panel",68)(21,"button",69),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.agregarAbonoOcupar())}),t.qZA(),t.YNc(22,Be,17,3,"div",70),t.qZA()(),t.TgZ(23,"div",16)(24,"label"),t._uU(25,"Descripci\xf3n"),t.qZA(),t._UZ(26,"textarea",23),t.qZA(),t.YNc(27,ze,1,0,"p-message",71),t.TgZ(28,"div",92)(29,"div",93)(30,"h5"),t._uU(31,"Abonos"),t.qZA(),t.TgZ(32,"p-table",94),t.YNc(33,Ge,7,0,"ng-template",95),t.YNc(34,Ve,7,2,"ng-template",96),t.YNc(35,We,8,3,"ng-template",66),t.qZA()()(),t._UZ(36,"hr"),t.TgZ(37,"div",92)(38,"div",93)(39,"h5"),t._uU(40,"Tarifas"),t.qZA(),t.TgZ(41,"p-table",94),t.YNc(42,to,7,0,"ng-template",95),t.YNc(43,oo,8,4,"ng-template",96),t.YNc(44,io,8,3,"ng-template",66),t.qZA()()(),t.TgZ(45,"div",92)(46,"div",93)(47,"h5"),t._uU(48,"Totales"),t.qZA(),t.TgZ(49,"p-table",94),t.YNc(50,ro,7,0,"ng-template",95),t.YNc(51,lo,7,2,"ng-template",66),t.qZA()()(),t.TgZ(52,"div",16)(53,"button",97),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.enviarOcupar())}),t.qZA()()()()()()}if(2&a){const e=t.oxw();t.Akn(t.DdM(27,co)),t.Q6J("visible",e.ocuparModalVisible)("modal",!0)("draggable",!1)("resizable",!1),t.xp6(2),t.Q6J("formGroup",e.ocuparForm),t.xp6(2),t.hij("",e.nombreHabitacionReservada," "),t.xp6(5),t.Q6J("options",e.clienteData),t.xp6(3),t.Q6J("ngIf",e.ocuparForm.get("cliente_id").hasError("required")),t.xp6(4),t.Q6J("options",e.tarifaData),t.xp6(2),t.Q6J("ngIf",e.ocuparForm.get("tarifa_id").hasError("required")),t.xp6(2),t.MGl("header","Abonos $ ",e.abonosTotalOcupar||0,""),t.Q6J("toggleable",!0)("collapsed",e.collapsed),t.xp6(2),t.Q6J("ngForOf",e.formAbonoOcuparArray.controls),t.xp6(5),t.Q6J("ngIf",e.abonosTotalOcupar>e.totalPagarOcupar),t.xp6(5),t.Q6J("value",e.formAbonoOcuparArray.value)("tableStyle",t.DdM(28,S))("rows",5),t.xp6(9),t.Q6J("value",e.ocuparForm.get("tarifa_id").value)("tableStyle",t.DdM(29,S))("rows",5),t.xp6(8),t.Q6J("value",t.DdM(30,po))("tableStyle",t.DdM(31,S))("rows",5),t.xp6(4),t.Q6J("disabled",e.ocuparForm.invalid||e.formAbonoOcuparArray.invalid||e.abonosTotalOcupar>e.totalPagarOcupar)}}function mo(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"app-clientes",100,101),t.NdJ("clienteCreado",function(o){t.CHM(e);const n=t.oxw();return t.KtG(n.handleClienteCreado(o))}),t.qZA()}if(2&a){const e=t.oxw();t.Q6J("vieneDeHabitaciones",e.creandoCliente)}}const ho=function(){return{background:"#b3009e",color:"white"}},X=function(){return{width:"95vw",height:"195vw"}};let _o=(()=>{class a{ngOnInit(){this.creandoCliente=!1,this.buildForm(),this.pisoId=1,this.primerPiso=this.pisoId;let e=JSON.parse(localStorage.getItem("currentUser"));this.hotelId=e.usuario.datalle_hoteles[0].hotel_id,this.getRoomsDashboardPisos(),this.clienteData=[],this.ProductoServicioData=[],this.empleadosData=[],this.tarifaData=[],this.hoy=new Date}constructor(e,i,o,n,s,c){this.dashboardRoomsService=e,this.FB=i,this.spinner=o,this.datePipe=n,this.router=s,this.layoutService=c,this.dayNamesSpanish=["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"],this.dayNamesShortSpanish=["Dom","Lun","Mar","Mi\xe9","Jue","Vie","S\xe1b"],this.monthNamesSpanish=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],this.monthNamesShortSpanish=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],this.localeSettingsSpanish={firstDayOfWeek:1,dayNames:this.dayNamesSpanish,dayNamesShort:this.dayNamesShortSpanish,monthNames:this.monthNamesSpanish,monthNamesShort:this.monthNamesShortSpanish,today:"Hoy",clear:"Borrar",dateFormat:"dd/mm/yy",weekHeader:"Sm"},this.selectedMulti=[],this.primerPiso=1,this.pisoSeleccionado=1,this.dataRoom=[],this.ProductoServicioDataSeleccionados=[],this.visibleModalLimpieza=!1,this.visibleModalMantenimiento=!1,this.selectMedioPago=[],this.reservacionModalVisible=!1,this.ocuparModalVisible=!1,this.tarifaData=[],this.tarifasTotal=0,this.abonosTotal=0,this.totalPagarReserva=0,this.tarifasTotalOcupar=0,this.abonosTotalOcupar=0,this.totalPagarOcupar=0,this.disableButtonMantenimiento=!1,this.disableButtonLimpieza=!1,this.creandoCliente=!1,this.collapsed=!0,this.selectedFilter=null}buildForm(){this.spinner.hide(),this.formLimpieza=this.FB.group({descripcion:["",[]],empleado:["",[d.kI.required]],fechaInicio:["",[d.kI.required]],fechaFinal:["",[d.kI.required]]}),this.formMantenimiento=this.FB.group({descripcion:["",[]],empleado:["",[d.kI.required]],fechaInicio:["",[d.kI.required]],fechaFinal:["",[d.kI.required]]}),this.reservaForm=this.FB.group({cliente_id:["",[d.kI.required]],tarifa_id:["",[d.kI.required]],producto_id:["",[]],abonos:this.formAbonosArray,descripcion:["",[]],fechaInicio:["",[d.kI.required]],fechaFinal:["",[d.kI.required]]}),this.ocuparForm=this.FB.group({cliente_id:["",[d.kI.required]],tarifa_id:["",[d.kI.required]],producto_id:["",[]],abonos:this.formAbonoOcuparArray,descripcion:["",[]]}),this.formAbonosArray=this.FB.array([]),this.formAbonoOcuparArray=this.FB.array([])}getRoomsDashboard(e=0){this.dashboardRoomsService.getDashboardRooms({hotel_id:this.hotelId,piso_id:this.pisoId,estado_id:e}).subscribe(o=>{this.dataRoom.forEach(s=>{this.pisoId==s.piso&&(s.habitaciones=[])});let n=this.dataRoom.find(s=>s.piso==this.pisoId);n.loading=!1,o.forEach(s=>{n.habitaciones.push({nombre:s.nombre,json:s.diseno_json,id:s.id,detalle:s.habitacion_estado,tipoHabitacion:s.tipo_habitacion,habitacionNombre:JSON.parse(s.tipo_habitacion.diseno_json).puerta,piso:s.piso,habitacionEstado:s.habitacion_estado})}),this.dataRoom.forEach(s=>{this.pisoId==s.piso&&(s=n)})},o=>{console.log("Error: ",o)})}getRoomsDashboardPisos(e=0){this.dashboardRoomsService.getPisos({hotel_id:this.hotelId,piso_id:this.pisoId,estado_id:e}).subscribe(o=>{this.dataRoomsPisos=[],this.dataRoomsPisos=o.pisos,this.dataRoomsPisos.forEach(n=>{this.dataRoom.push({piso:n.piso,habitaciones:[],loading:!0})}),this.getRoomsDashboard(e)},o=>{console.log("Error: ",o)})}openTag(e){this.pisoId=e,this.getRoomsDashboard()}opcionSeleccionada(e,i){this.estadoHabitacion=e.item.id,this.formAbonosArray=this.FB.array([]),this.formAbonoOcuparArray=this.FB.array([]),setTimeout(()=>{this.accionMenuHabitaciones()},500)}accionMenuHabitaciones(){let e={};if(5==this.estadoHabitacion){const i=(new Date).setDate((new Date).getDate()+1);this.reservaForm.reset(),this.formAbonosArray.clear(),this.abonosTotal=0,this.tarifasTotal=0,this.totalPagarReserva=0,this.collapsed=!0,this.getReserva(),this.reservaForm.get("fechaInicio").setValue(new Date),this.reservaForm.get("fechaFinal").setValue(new Date(i)),this.reservacionModalVisible=!0}else 2==this.estadoHabitacion?(this.ocuparForm.reset(),this.formAbonoOcuparArray.clear(),this.abonosTotalOcupar=0,this.tarifasTotalOcupar=0,this.totalPagarOcupar=0,this.collapsed=!0,this.getReserva(),this.ocuparModalVisible=!0):4==this.estadoHabitacion?this.getDataEmpleado({hotel_id:this.habitacionId,estado:4}):6==this.estadoHabitacion?this.getDataEmpleado({hotel_id:this.habitacionId,estado:6}):20==this.estadoHabitacion?(e={id_habitacion:this.habitacionId},m().fire({title:"\xbfEstas seguro que deseas Salir (Check Out)?",text:"",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, Confirmar",cancelButtonText:"Cancelar"}).then(i=>{i.isConfirmed&&this.enviarDesocupar(e)})):50==this.estadoHabitacion?(e={id_habitacion:this.habitacionId},m().fire({title:"\xbfEstas seguro que deseas Anular la reserva?",text:"",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, Confirmar",cancelButtonText:"Cancelar"}).then(i=>{i.isConfirmed&&this.enviarAnularReserva(e)})):40==this.estadoHabitacion?(e={id_habitacion:this.habitacionId},m().fire({title:"\xbfEstas seguro que deseas Anular La Limpieza?",text:"",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, Confirmar",cancelButtonText:"Cancelar"}).then(i=>{i.isConfirmed&&this.enviarAnularLimpieza(e)})):60==this.estadoHabitacion?(e={id_habitacion:this.habitacionId},m().fire({title:"\xbfEstas seguro que deseas Anular el mantenimiento?",text:"",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, Confirmar",cancelButtonText:"Cancelar"}).then(i=>{i.isConfirmed&&this.enviarAnularMantenimiento(e)})):8==this.estadoHabitacion&&this.router.navigate(["dashboard/dashboardRooms/"+this.habitacionId+"/ocupar"])}abrirMenu(e,i){this.op1.toggle(e);let o=[];this.habitacionId=i.id,this.nombreHabitacionReservada=i.nombre,this.tipoHabitacionId=i.tipoHabitacion.id,this.pisoSeleccionado=i.piso,this.estadoHabitacionActual=i.habitacionEstado,this.detalleHabitacion=i.detalle,this.estadoHabitacionActual.forEach(c=>{o.push(c.estado_id)});let n=[];if(o.includes(5)||n.push({label:"Reservar",icon:"pi pi-calendar-times",id:"5",command:c=>this.opcionSeleccionada(c,i),visible:!0,disabled:!1}),o.includes(4)||n.push({label:"Limpieza",icon:"pi pi-exclamation-triangle",id:"4",command:c=>this.opcionSeleccionada(c,i),visible:!0,disabled:!!o.includes(2)}),(o.includes(2)||o.includes(7))&&n.push({label:"Ver Ingreso",icon:"pi pi-book",id:"8",command:c=>this.opcionSeleccionada(c,i),visible:!0,disabled:!o.includes(7)&&!o.includes(2)}),!o.includes(2)){let c=!1;i.detalle&&i.detalle.forEach(l=>{if(5==l.estado_id){let u=new Date(l.fecha_inicio),g=u.getFullYear()+"/"+u.getMonth()+"/"+u.getDate();(new Date).getFullYear()+"/"+(new Date).getMonth()+"/"+(new Date).getDate()==g&&(c=!0)}}),n.push({label:"Ingresar (Check-in)",icon:"pi pi-lock",id:"2",command:l=>this.opcionSeleccionada(l,i),visible:!0,disabled:!!o.includes(7)||o.includes(4)||o.includes(6)})}o.includes(6)||n.push({label:"Mantenimiento",icon:"pi pi-wrench",id:"6",command:c=>this.opcionSeleccionada(c,i),visible:!0,disabled:!!o.includes(2)});let s=!1;o.forEach(c=>{switch(c){case 5:s||(n.push({label:"Reservar",icon:"pi pi-calendar-times",id:"5",command:l=>this.opcionSeleccionada(l,i),visible:!0,disabled:!1}),s=!0);break;case 4:n.push({label:"Anular Limpieza",icon:"pi pi-exclamation-triangle",id:"40",command:l=>this.opcionSeleccionada(l,i),visible:!0,disabled:!!o.includes(2)});break;case 6:n.push({label:"Anular Mantenimiento",icon:"pi pi-wrench",id:"60",command:l=>this.opcionSeleccionada(l,i),visible:!0,disabled:!!o.includes(2)});break;case 2:n.push({label:"Salir (Check Out)",icon:"pi pi-lock-open",id:"20",command:l=>this.opcionSeleccionada(l,i),visible:!0})}}),this.menuHabitacion=[{label:"Opciones",items:n}]}enviarDesocupar(e){this.dashboardRoomsService.desocupar(e).subscribe(i=>{let o=i;"success"==o.code?(m().fire({title:"Exito",text:"Anulacion Exitosa.",icon:"success"}),this.openTag(this.pisoSeleccionado)):"warning"==o.code?m().fire({title:"Advertencia",text:o.error,icon:"warning"}):m().fire({title:"Error",text:"Error al anular.",icon:"error"})},i=>{console.log("Error: ",i)})}enviarAnularReserva(e){this.dashboardRoomsService.anularReserva(e).subscribe(i=>{let o=i;"success"==o.code?(m().fire({title:"Exito",text:"Anulacion Exitosa.",icon:"success"}),this.layoutService.reloadComponent(),this.openTag(this.pisoSeleccionado)):"warning"==o.code?m().fire({title:"Advertencia",text:o.error,icon:"warning"}):m().fire({title:"Error",text:"Error al anular.",icon:"error"})},i=>{console.log("Error: ",i)})}enviarAnularLimpieza(e){this.dashboardRoomsService.anularLimpieza(e).subscribe(i=>{let o=i;"success"==o.code?(m().fire({title:"Exito",text:"Anulacion Exitosa.",icon:"success"}),this.openTag(this.pisoSeleccionado)):"warning"==o.code?m().fire({title:"Advertencia",text:o.error,icon:"warning"}):m().fire({title:"Error",text:"Error al anular.",icon:"error"})},i=>{console.log("Error: ",i)})}enviarAnularMantenimiento(e){this.spinner.show(),this.dashboardRoomsService.anularMantenimiento(e).subscribe(i=>{this.spinner.hide();let o=i;"success"==o.code?(m().fire({title:"Exito",text:"Anulacion Exitosa.",icon:"success"}),this.openTag(this.pisoSeleccionado)):"warning"==o.code?m().fire({title:"Advertencia",text:o.error,icon:"warning"}):m().fire({title:"Error",text:"Error al anular.",icon:"error"})},i=>{console.log("Error: ",i)})}enviarMantenimiento(e){this.spinner.show(),this.dashboardRoomsService.mantenimiento(e).subscribe(i=>{this.spinner.hide(),this.visibleModalMantenimiento=!1;let o=i;"success"==o.code?(m().fire({title:"Exito",text:"Registro exitoso.",icon:"success"}),this.openTag(this.pisoSeleccionado)):"warning"==o.code?m().fire({title:"Advertencia",text:o.error,icon:"warning"}):m().fire({title:"Error",text:"Error al registrar.",icon:"error"})},i=>{console.log("Error: ",i)})}enviarOcuparReserva(e){this.spinner.show(),this.dashboardRoomsService.ocuparReserva(e).subscribe(i=>{this.spinner.hide();let o=i;this.ocuparModalVisible=!1,"success"==o.code?(m().fire({title:"Exito",text:"Ingreso exitoso.",icon:"success"}),this.openTag(this.pisoSeleccionado)):"warning"==o.code?m().fire({title:"Advertencia",text:o.error,icon:"warning"}):m().fire({title:"Error",text:"Error al generar el ingreso.",icon:"error"})},i=>{console.log("Error: ",i)})}enviarLimpieza(e){this.spinner.show(),this.dashboardRoomsService.limpieza(e).subscribe(i=>{this.spinner.hide();let o=i;this.visibleModalLimpieza=!1,"success"==o.code?(m().fire({title:"Exito",text:"Registro exitoso.",icon:"success"}),this.openTag(this.pisoSeleccionado)):"warning"==o.code?m().fire({title:"Advertencia",text:o.error,icon:"warning"}):m().fire({title:"Error",text:"Error al registrar.",icon:"error"})},i=>{console.log("Error: ",i)})}getDataEmpleado(e){this.spinner.show(),this.dashboardRoomsService.getEmpleadoHabitacion(e).subscribe(i=>{this.spinner.hide(),this.empleadosData=[],i.empleados.forEach(o=>{this.empleadosData.push({name:o.nombres+" "+o.apellidos,code:o.id})}),4==e.estado?(this.formLimpieza.reset(),this.visibleModalLimpieza=!0):6==e.estado&&(this.formMantenimiento.reset(),this.visibleModalMantenimiento=!0)},i=>{this.spinner.hide(),console.log("Error: ",i)})}submitAsignarMantenimiento(){if(this.formMantenimiento.valid){let e={empleado_id:this.formMantenimiento.value.empleado[0].code,descripcion:this.formMantenimiento.value.descripcion,fecha_final:this.datePipe.transform(this.formMantenimiento.value.fechaFinal,"yyyy-MM-dd HH:mm:ss"),fecha_inicio:this.datePipe.transform(this.formMantenimiento.value.fechaInicio,"yyyy-MM-dd HH:mm:ss"),habitacion_id:this.habitacionId};this.enviarMantenimiento(e)}}changeFechaMantenimiento(){let e=this.formMantenimiento.get("fechaInicio").value,i=this.formMantenimiento.get("fechaFinal").value;this.disableButtonMantenimiento=e>i}changeFechaLimpieza(e){let i=this.formLimpieza.get("fechaInicio").value,o=this.formLimpieza.get("fechaFinal").value;this.disableButtonLimpieza=i>o}validarEstado(e,i){return e.filter(n=>n.estado_id==i).length}orderar(e){this.selectedFilter=e,this.dataRoom=[],this.getRoomsDashboardPisos(e)}busquedaCliente(e){this.getReserva(e.filter)}submitAsignarLimpieza(){if(this.formLimpieza.valid){let e={empleado_id:this.formLimpieza.value.empleado[0].code,descripcion:this.formLimpieza.value.descripcion,fecha_final:this.datePipe.transform(this.formLimpieza.value.fechaFinal,"yyyy-MM-dd HH:mm:ss"),fecha_inicio:this.datePipe.transform(this.formLimpieza.value.fechaInicio,"yyyy-MM-dd HH:mm:ss"),habitacion_id:this.habitacionId};this.enviarLimpieza(e)}}opcionesHabitacion(e){}getReserva(e=""){this.spinner.show(),this.dashboardRoomsService.getReserva({hotel_id:this.hotelId,cliente_busqueda:e,tipo_habitacion:this.tipoHabitacionId}).subscribe(o=>{this.spinner.hide();let n=o.cliente,s=o.metodos_pago,c=o.tarifa;this.clienteData=[],this.selectMedioPago=[],this.tarifaData=[],n.forEach(l=>{this.clienteData.push({nombre:l.numero_documento+" "+l.nombres+" "+(l.apellidos?l.apellidos:""),code:l.numero_documento,id:l.id})}),s.forEach(l=>{this.selectMedioPago.push({nombre:l.nombre,id:l.id})}),c.forEach(l=>{l.tipo_habitacion_id==this.tipoHabitacionId&&this.tarifaData.push({nombre:l.nombre,id:l.id,tipo:l.tipo,valor:l.valor,tipo_habitacion_id:l.tipo_habitacion_id,icon:1!=l.tipo?"pi pi-hourglass":"pi pi-moon"})})},o=>{this.spinner.hide(),console.log("Error: ",o)})}checkTarifaReserva(e){this.tarifasTotal=0,this.reservaForm.get("tarifa_id").value.forEach(i=>{this.tarifasTotal=this.tarifasTotal+parseInt(i.valor)}),this.totalPagarReserva=0,this.totalPagarReserva=this.tarifasTotal}checkAbonos(){this.abonosTotal=0,this.formAbonosArray.value.forEach(e=>{this.abonosTotal=this.abonosTotal+parseFloat(e.monto)})}agregarAbono(){let e=this.FB.group({monto:["",[d.kI.required,d.kI.min(0)]],medio_pago:[this.selectMedioPago[0],[d.kI.required,d.kI.min(0)]]});this.formAbonosArray.push(e)}eliminarAbono(e){this.formAbonosArray.removeAt(e),this.checkAbonos()}enviarReservar(){this.spinner.show();let e={hotel_id:this.hotelId,habitacion_id:this.habitacionId,cliente_id:this.reservaForm.get("cliente_id").value[0].id,tarifas:this.reservaForm.get("tarifa_id").value,abonos:this.formAbonosArray.value,descripcion:this.reservaForm.get("descripcion").value,fecha_inicio:this.datePipe.transform(this.reservaForm.get("fechaInicio").value,"yyyy-MM-dd HH:mm:ss"),fecha_final:this.datePipe.transform(this.reservaForm.get("fechaFinal").value,"yyyy-MM-dd HH:mm:ss"),subtotal:this.totalPagarReserva-this.abonosTotal,total:this.totalPagarReserva,productos:[]};this.dashboardRoomsService.reservar(e).subscribe(i=>{this.spinner.hide();let o=i;this.reservacionModalVisible=!1,"success"==o.code?(this.layoutService.reloadComponent(),m().fire({title:"Exito",text:"Reservacion exitosa.",icon:"success"}),this.openTag(this.pisoSeleccionado)):"warning"==o.code?m().fire({title:"Advertencia",text:o.error,icon:"warning"}):m().fire({title:"Error",text:"Error al generar la reserva.",icon:"error"})},i=>{console.log("Error: ",i)})}checkTarifaOcupar(e){this.tarifasTotalOcupar=0,this.ocuparForm.get("tarifa_id").value.forEach(i=>{this.tarifasTotalOcupar=this.tarifasTotalOcupar+parseInt(i.valor)}),this.totalPagarOcupar=this.tarifasTotalOcupar}checkAbonoOcupar(){this.abonosTotalOcupar=0,this.formAbonoOcuparArray.value.forEach(e=>{this.abonosTotalOcupar=this.abonosTotalOcupar+parseFloat(e.monto)})}agregarAbonoOcupar(){let e=this.FB.group({monto:["",[d.kI.required,d.kI.min(0)]],medio_pago:[this.selectMedioPago[0],[d.kI.required,d.kI.min(0)]]});this.formAbonoOcuparArray.push(e)}eliminarAbonoOcupar(e){this.formAbonoOcuparArray.removeAt(e),this.checkAbonoOcupar()}enviarOcupar(){this.spinner.show();let e={cliente_id:this.ocuparForm.get("cliente_id").value[0].id,total:this.totalPagarOcupar,subtotal:this.totalPagarOcupar-this.abonosTotalOcupar,tarifas:this.ocuparForm.get("tarifa_id").value,productos:[],descripcion:this.ocuparForm.get("descripcion").value,habitacion_id:this.habitacionId,hotel_id:this.hotelId,abonos:this.formAbonoOcuparArray.value};this.dashboardRoomsService.ocupar(e).subscribe(i=>{this.spinner.hide();let o=i;this.ocuparModalVisible=!1,"success"==o.code?(m().fire({title:"Exito",text:"Ingreso exitosa.",icon:"success"}),this.layoutService.reloadComponent(),this.openTag(this.pisoSeleccionado)):"warning"==o.code?m().fire({title:"Advertencia",text:o.error,icon:"warning"}):m().fire({title:"Error",text:"Error al generar el ingreso.",icon:"error"})},i=>{console.log("Error: ",i)})}crearCliente(){this.creandoCliente=!0}handleClienteCreado(e){this.creandoCliente=!1,e&&this.getReserva(),this.collapsed=!(this.formAbonosArray.length>0||this.formAbonoOcuparArray.length>0)}hideDialog(){this.reservacionModalVisible=!1}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(q.y),t.Y36(d.qu),t.Y36(A.t2),t.Y36(h.uU),t.Y36(v.F0),t.Y36(J.P))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-dashboard-rooms"]],viewQuery:function(i,o){if(1&i&&t.Gf($t,5),2&i){let n;t.iGM(n=t.CRH())&&(o.op1=n.first)}},decls:73,vars:62,consts:[["type","ball-scale-multiple","fullScreen","true"],[1,"card"],["icon","pi pi-calendar-times","value","Reservada",1,"btn","reservada","padding","habilitarCursor",3,"click"],["class","pi pi-check",4,"ngIf"],["icon","pi pi-lock-open","value","Disponible",1,"btn","disponible","padding","habilitarCursor",3,"click"],["icon","pi pi-exclamation-triangle","value","Limpieza",1,"btn","limpieza","padding","habilitarCursor",3,"click"],["icon","pi pi-wrench","value","Mantenimiento",1,"btn","mantenimiento","padding","habilitarCursor",3,"click"],["icon","pi pi-lock","value","Ocupada",1,"btn","ocupada","padding","habilitarCursor",3,"click"],["icon","pi pi-dollar","value","Facturar",1,"btn","facturar","padding","habilitarCursor",3,"click"],["value","Ninguna",1,"btn","ninguna","padding","habilitarCursor",3,"click"],[4,"ngFor","ngForOf"],["header","Reservar",3,"showHeader","visible","modal","style","draggable","resizable","visibleChange",4,"ngIf"],["header","Asignar Limpieza","dateFormat","dd/mm/yy",3,"visible","modal","draggable","resizable","visibleChange"],[1,"col-12"],[3,"formGroup","ngSubmit"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-12"],["formControlName","empleado","selectionLimit","1","optionLabel","name","placeholder","Buscar Empleados","optionLabel","name","display","chip","emptyMessage","Empleado no encontrado",1,"multiselect-custom",3,"options"],["pTemplate","item"],["style","color: red;",4,"ngIf"],[1,"field","col-12","md:col-6"],["locale","localeSettingsSpanish","inputId","fechaInicioLimpieza","formControlName","fechaInicio","showTime","true",1,"ng-dirty",3,"showIcon","onSelect"],["locale","localeSettingsSpanish","inputId","fechaFinalLimpieza","formControlName","fechaFinal","showTime","true",1,"ng-dirty",3,"showIcon","onSelect"],["formControlName","descripcion","pInputTextarea","","rows","3","cols","20"],["severity","error","class","padding","text","La fecha final es mayor a la fecha inicial",4,"ngIf"],["pButton","","pRipple","","label","Asignar limpieza","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl",3,"disabled"],["header","Asignar Mantenimiento",3,"visible","modal","draggable","resizable","visibleChange"],["locale","localeSettingsSpanish","inputId","fechaInicioMantenimiento","formControlName","fechaInicio","showTime","true",1,"ng-dirty",3,"showIcon","onSelect"],["locale","localeSettingsSpanish","inputId","fechaFinalMantenimiento","formControlName","fechaFinal","showTime","true",1,"ng-dirty",3,"showIcon","onSelect"],["pButton","","pRipple","","label","Asignar Mantenimiento","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl",3,"disabled"],["header","Ingresar ",3,"visible","modal","style","draggable","resizable","visibleChange",4,"ngIf"],[3,"vieneDeHabitaciones","clienteCreado",4,"ngIf"],[1,"pi","pi-check"],[1,"line-height-3","m-0",3,"header","selected","selectedChange"],["pTemplate","listItem"],["class","pi pi-spin pi-spinner","style","font-size: 4em;",4,"ngIf"],[1,"grid","p-fluid","mt-3"],["class","field col-12 md:col-3",4,"ngFor","ngForOf"],[1,"pi","pi-spin","pi-spinner",2,"font-size","4em"],[1,"field","col-12","md:col-3"],[1,"nomeRoome"],["pButton","",3,"label"],[1,"pi","pi-ellipsis-v",2,"font-size","2rem","margin-top","4%","cursor","pointer",3,"click"],[3,"showCloseIcon"],["op1",""],[3,"model","click"],[2,"text-align","center"],["width","80%","height","80%",1,"rooms",3,"src"],[1,"flex","flex-wrap","gap-2",2,"margin-left","20%"],[4,"ngIf"],["icon","pi pi-calendar-times",3,"value"],["icon","pi pi-lock-open"],["icon","pi pi-exclamation-triangle"],["icon","pi pi-wrench"],["icon","pi pi-lock"],["icon","pi pi-dollar"],["header","Reservar",3,"showHeader","visible","modal","draggable","resizable","visibleChange"],[1,"container"],[1,"div1"],[2,"width","100%"],[1,"div2"],["icon","pi pi-times","pButton","","pRipple","","type","button",1,"p-button-rounded","p-button-text","p-button-plain",2,"text-align","left",3,"click"],["formControlName","fechaInicio","locale","localeSettingsSpanish","inputId","fechaInicio","showTime","true","dateFormat","dd/mm/yy",1,"ng-dirty",3,"minDate","showIcon"],["formControlName","fechaFinal","locale","localeSettingsSpanish","inputId","fechaFinal","showTime","true","dateFormat","dd/mm/yy",1,"ng-dirty",3,"minDate","showIcon"],["for","cliente"],["formControlName","cliente_id","selectionLimit","1","placeholder","Buscar cliente","optionLabel","nombre","display","chip","emptyMessage","Cliente no encontrado",1,"multiselect-custom",3,"options","onFilter"],["pTemplate","footer"],["formControlName","tarifa_id","optionLabel","nombre","placeholder","Buscar Tarifa","optionLabel","nombre","emptyMessage","Tarifa no encontrada","display","chip",1,"multiselect-custom",3,"options","onChange"],[3,"header","toggleable","collapsed"],["pButton","","pRipple","","type","button","icon","pi pi-plus",1,"p-button-rounded",3,"click"],["style","margin-top: 5%;","class","grid formgrid",3,"formGroup",4,"ngFor","ngForOf"],["severity","error","class","padding","text","El abono es mayor a la cantidad agregada",4,"ngIf"],[2,"width","20%"],["pButton","","pRipple","","label","Crear Reserva","showTime","true","icon","pi pi-calendar-times","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl",3,"disabled","click"],[2,"color","red"],[1,"flex","align-items-center"],[1,"ml-2"],["pButton","","pRipple","","label","Crear nuevo cliente","type","button","icon","pi pi-plus",1,"w-full","bg-blue","boder-blue","mb-5","border-round-3xl",3,"click"],[1,"padding",3,"icon","value"],[1,"grid","formgrid",2,"margin-top","5%",3,"formGroup"],[1,"col-12","mb-2","lg:col-5","lg:mb-0"],["for","monto"],["type","number","min","1","id","monto","formControlName","monto","pInputText","","placeholder","Valor",3,"input"],["htmlFor","medioPago"],["formControlName","medio_pago","id","medioPago","optionLabel","nombre","placeholder","Seleccione una opci\xf3n",3,"options"],[1,"col-12","mb-2","lg:col-2","lg:mb-0"],["htmlFor","opciones"],["id","opciones","icon","pi pi-trash","severity","danger",3,"click"],["severity","error","text","El abono es mayor a la cantidad agregada",1,"padding"],["severity","error","text","La fecha final es mayor a la fecha inicial",1,"padding"],["header","Ingresar ",3,"visible","modal","draggable","resizable","visibleChange"],["formControlName","cliente_id","selectionLimit","1","optionLabel","nombre","placeholder","Buscar cliente","display","chip","emptyMessage","Cliente no encontrado",1,"multiselect-custom",3,"options","onFilter"],[1,"col-12","md:col-12"],[1,"table-details"],["responsiveLayout","scroll",3,"value","tableStyle","rows"],["pTemplate","header"],["pTemplate","body"],["pButton","","pRipple","","label","Crear Ingreso","icon","pi pi-calendar-times","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl",3,"disabled","click"],["name",""],["colspan","1"],[3,"vieneDeHabitaciones","clienteCreado"],["clientes",""]],template:function(i,o){1&i&&(t._UZ(0,"ngx-spinner",0),t.TgZ(1,"div",1)(2,"div")(3,"p-tag",2),t.NdJ("click",function(){return o.orderar(5)}),t.YNc(4,Vt,1,0,"i",3),t.qZA(),t.TgZ(5,"p-tag",4),t.NdJ("click",function(){return o.orderar(3)}),t.YNc(6,Kt,1,0,"i",3),t.qZA(),t.TgZ(7,"p-tag",5),t.NdJ("click",function(){return o.orderar(4)}),t.YNc(8,Wt,1,0,"i",3),t.qZA(),t.TgZ(9,"p-tag",6),t.NdJ("click",function(){return o.orderar(6)}),t.YNc(10,Xt,1,0,"i",3),t.qZA(),t.TgZ(11,"p-tag",7),t.NdJ("click",function(){return o.orderar(2)}),t.YNc(12,te,1,0,"i",3),t.qZA(),t.TgZ(13,"p-tag",8),t.NdJ("click",function(){return o.orderar(7)}),t.YNc(14,ee,1,0,"i",3),t.qZA(),t.TgZ(15,"p-tag",9),t.NdJ("click",function(){return o.orderar(0)}),t.YNc(16,oe,1,0,"i",3),t.qZA()(),t.TgZ(17,"h5"),t._uU(18,"Habitaciones"),t.qZA(),t.YNc(19,ue,4,2,"p-accordion",10),t.qZA(),t.YNc(20,De,93,32,"p-dialog",11),t.TgZ(21,"p-dialog",12),t.NdJ("visibleChange",function(s){return o.visibleModalLimpieza=s}),t.TgZ(22,"div",13)(23,"form",14),t.NdJ("ngSubmit",function(){return o.submitAsignarLimpieza()}),t.TgZ(24,"div",15)(25,"div",16)(26,"p-multiSelect",17),t.YNc(27,qe,3,1,"ng-template",18),t.qZA(),t.YNc(28,we,2,0,"div",19),t.qZA(),t.TgZ(29,"div",20)(30,"label"),t._uU(31,"Fecha Inicio "),t.qZA(),t.TgZ(32,"p-calendar",21),t.NdJ("onSelect",function(s){return o.changeFechaLimpieza(s)}),t.qZA()(),t.TgZ(33,"div",20)(34,"label"),t._uU(35,"Fecha Final"),t.qZA(),t.TgZ(36,"p-calendar",22),t.NdJ("onSelect",function(s){return o.changeFechaLimpieza(s)}),t.qZA()(),t.TgZ(37,"div",16)(38,"label"),t._uU(39,"Descripci\xf3n"),t.qZA(),t._UZ(40,"textarea",23),t.YNc(41,ke,2,0,"div",19),t.qZA(),t.YNc(42,Me,1,0,"p-message",24),t.TgZ(43,"div",16),t._UZ(44,"button",25),t.qZA()(),t._UZ(45,"br"),t.qZA()()(),t.TgZ(46,"p-dialog",26),t.NdJ("visibleChange",function(s){return o.visibleModalMantenimiento=s}),t.TgZ(47,"div",13)(48,"form",14),t.NdJ("ngSubmit",function(){return o.submitAsignarMantenimiento()}),t.TgZ(49,"div",15)(50,"div",16)(51,"p-multiSelect",17),t.YNc(52,Oe,3,1,"ng-template",18),t.qZA(),t.YNc(53,Se,2,0,"div",19),t.qZA(),t.TgZ(54,"div",20)(55,"label"),t._uU(56,"Fecha Inicio "),t.qZA(),t.TgZ(57,"p-calendar",27),t.NdJ("onSelect",function(){return o.changeFechaMantenimiento()}),t.qZA()(),t.TgZ(58,"div",20)(59,"label"),t._uU(60,"Fecha Final"),t.qZA(),t.TgZ(61,"p-calendar",28),t.NdJ("onSelect",function(){return o.changeFechaMantenimiento()}),t.qZA()(),t.TgZ(62,"div",16)(63,"label"),t._uU(64,"Descripci\xf3n"),t.qZA(),t._UZ(65,"textarea",23),t.YNc(66,Ue,2,0,"div",19),t.qZA(),t.YNc(67,Fe,1,0,"p-message",24),t.TgZ(68,"div",16),t._UZ(69,"button",29),t.qZA()(),t._UZ(70,"br"),t.qZA()()(),t.YNc(71,uo,54,32,"p-dialog",30),t.YNc(72,mo,2,1,"app-clientes",31)),2&i&&(t.xp6(3),t.Akn(t.DdM(53,j)),t.xp6(1),t.Q6J("ngIf",5===o.selectedFilter),t.xp6(1),t.Akn(t.DdM(54,G)),t.xp6(1),t.Q6J("ngIf",3===o.selectedFilter),t.xp6(1),t.Akn(t.DdM(55,$)),t.xp6(1),t.Q6J("ngIf",4===o.selectedFilter),t.xp6(1),t.Akn(t.DdM(56,V)),t.xp6(1),t.Q6J("ngIf",6===o.selectedFilter),t.xp6(1),t.Akn(t.DdM(57,K)),t.xp6(1),t.Q6J("ngIf",2===o.selectedFilter),t.xp6(1),t.Akn(t.DdM(58,W)),t.xp6(1),t.Q6J("ngIf",7===o.selectedFilter),t.xp6(1),t.Akn(t.DdM(59,ho)),t.xp6(1),t.Q6J("ngIf",0===o.selectedFilter),t.xp6(3),t.Q6J("ngForOf",o.dataRoom),t.xp6(1),t.Q6J("ngIf",!o.creandoCliente),t.xp6(1),t.Akn(t.DdM(60,X)),t.Q6J("visible",o.visibleModalLimpieza)("modal",!0)("draggable",!1)("resizable",!1),t.xp6(2),t.Q6J("formGroup",o.formLimpieza),t.xp6(3),t.Q6J("options",o.empleadosData),t.xp6(2),t.Q6J("ngIf",o.formLimpieza.get("empleado").hasError("required")),t.xp6(4),t.Q6J("showIcon",!0),t.xp6(4),t.Q6J("showIcon",!0),t.xp6(5),t.Q6J("ngIf",o.formLimpieza.get("descripcion").hasError("required")),t.xp6(1),t.Q6J("ngIf",o.formLimpieza.get("fechaInicio").value>o.formLimpieza.get("fechaFinal").value),t.xp6(2),t.Q6J("disabled",o.formLimpieza.invalid||o.disableButtonLimpieza),t.xp6(2),t.Akn(t.DdM(61,X)),t.Q6J("visible",o.visibleModalMantenimiento)("modal",!0)("draggable",!1)("resizable",!1),t.xp6(2),t.Q6J("formGroup",o.formMantenimiento),t.xp6(3),t.Q6J("options",o.empleadosData),t.xp6(2),t.Q6J("ngIf",o.formMantenimiento.get("empleado").hasError("required")),t.xp6(4),t.Q6J("showIcon",!0),t.xp6(4),t.Q6J("showIcon",!0),t.xp6(5),t.Q6J("ngIf",o.formMantenimiento.get("descripcion").hasError("required")),t.xp6(1),t.Q6J("ngIf",o.formMantenimiento.get("fechaInicio").value>o.formMantenimiento.get("fechaFinal").value),t.xp6(2),t.Q6J("disabled",o.formMantenimiento.invalid||o.disableButtonMantenimiento),t.xp6(2),t.Q6J("ngIf",!o.creandoCliente),t.xp6(1),t.Q6J("ngIf",o.creandoCliente))},dependencies:[P.s,f.jx,h.sg,h.O5,I.iA,T.Hq,T.zx,d._Y,d.Fj,d.wV,d.JJ,d.JL,d.qQ,E.v2,Z.H,y.o,R.g,x.Lt,Ct,D.V,d.sg,d.u,A.Ro,z,B,k.V,N.f,M.NU,O.q,Gt.R,h.JJ],styles:['@charset "UTF-8";.rooms[_ngcontent-%COMP%]{cursor:pointer}.tag[_ngcontent-%COMP%]{padding:.5%;display:flex;text-align:center}.nomeRoome[_ngcontent-%COMP%]{text-align:center}.padding[_ngcontent-%COMP%]{padding:1%}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #dddddd;text-align:left;padding:8px}th[_ngcontent-%COMP%]{background-color:#f2f2f2}.habilitarCursor[_ngcontent-%COMP%]{cursor:pointer}.container[_ngcontent-%COMP%]{display:flex;height:0%}.div1[_ngcontent-%COMP%]{flex:1;margin:5px 5px 5px -1%;height:0%}.div2[_ngcontent-%COMP%]{flex:1;text-align:right;height:0%}']})}return a})();var go=p(4444),fo=p(6401),tt=p(3173),et=p(5609);function bo(a,r){1&a&&t._UZ(0,"p-message",65)}function vo(a,r){1&a&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Categor\xeda"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Total"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Acci\xf3n"),t.qZA()())}function To(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",69),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,n=t.oxw();return t.KtG(n.modals(o.nombre))}),t.qZA()}}function Zo(a,r){if(1&a&&(t.TgZ(0,"td"),t.YNc(1,To,1,0,"button",68),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",2==(null==e.estadoHabitacion?null:e.estadoHabitacion.estado_id))}}function Ao(a,r){1&a&&t._UZ(0,"td")}function xo(a,r){if(1&a&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"number"),t.qZA(),t.YNc(6,Zo,2,1,"td",66),t.YNc(7,Ao,1,0,"ng-template",null,67,t.W1O),t.qZA()),2&a){const e=r.$implicit,i=t.MAs(8);t.xp6(2),t.Oqu(e.nombre),t.xp6(2),t.hij("$",t.lcZ(5,4,e.total),""),t.xp6(2),t.Q6J("ngIf",e.tipo)("ngIfElse",i)}}function Co(a,r){1&a&&(t.TgZ(0,"th"),t._UZ(1,"span"),t.qZA(),t.TgZ(2,"th"),t._UZ(3,"span"),t.qZA())}function Io(a,r){1&a&&(t.TgZ(0,"th"),t._uU(1,"Acciones"),t.qZA())}function yo(a,r){if(1&a&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Nombre"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Precio"),t.qZA(),t.YNc(5,Co,4,0,"ng-template",null,70,t.W1O),t.YNc(7,Io,2,0,"th",71),t.qZA()),2&a){const e=t.oxw();t.xp6(7),t.Q6J("ngIf",2==(null==e.estadoHabitacion?null:e.estadoHabitacion.estado_id))}}function Ro(a,r){1&a&&(t.TgZ(0,"td"),t._UZ(1,"span"),t.qZA(),t.TgZ(2,"td"),t._UZ(3,"span"),t.qZA())}function Do(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"td")(1,"p-button",72),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,n=t.oxw();return t.KtG(n.confirmDeleteTarifa(o.id))}),t.qZA()()}}function qo(a,r){if(1&a&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"number"),t.qZA(),t.YNc(6,Ro,4,0,"ng-template",null,70,t.W1O),t.YNc(8,Do,2,0,"td",71),t.qZA()),2&a){const e=r.$implicit,i=t.oxw();t.xp6(2),t.Oqu(e.nombre),t.xp6(2),t.hij("$",t.lcZ(5,3,e.valor),""),t.xp6(4),t.Q6J("ngIf",2==(null==i.estadoHabitacion?null:i.estadoHabitacion.estado_id))}}function wo(a,r){1&a&&(t.TgZ(0,"th"),t._uU(1,"Acciones"),t.qZA())}function ko(a,r){if(1&a&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Nombre"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Precio"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Impuesto"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Cantidad"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Total"),t.qZA(),t.YNc(11,wo,2,0,"th",71),t.qZA()),2&a){const e=t.oxw();t.xp6(11),t.Q6J("ngIf",2==(null==e.estadoHabitacion?null:e.estadoHabitacion.estado_id))}}function Mo(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"td")(1,"p-button",72),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,n=t.oxw();return t.KtG(n.confirmDeleteProductos(o.identificador))}),t.qZA()()}}function Oo(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"number"),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"number"),t.qZA(),t.TgZ(10,"td")(11,"input",73),t.NdJ("keydown",function(){return!1})("input",function(o){const s=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.changeCantidadProducto(s,o))}),t.qZA()(),t.TgZ(12,"td"),t._uU(13),t.ALo(14,"number"),t.qZA(),t.YNc(15,Mo,2,0,"td",71),t.qZA()}if(2&a){const e=r.$implicit,i=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,7,e.nombre)),t.xp6(3),t.hij("$",t.lcZ(6,9,e.subtotal),""),t.xp6(3),t.hij("$",t.lcZ(9,11,e.impuestos),""),t.xp6(3),t.Q6J("max",i.getCantidadMaximaProducto(e))("value",e.cantidad),t.xp6(2),t.hij("$",t.lcZ(14,13,e.valorImpuesto),""),t.xp6(2),t.Q6J("ngIf",2==(null==i.estadoHabitacion?null:i.estadoHabitacion.estado_id))}}function So(a,r){if(1&a&&(t.TgZ(0,"tr")(1,"td",74),t._uU(2,"Totales"),t.qZA(),t.TgZ(3,"td",74),t._uU(4),t.ALo(5,"number"),t.qZA(),t.TgZ(6,"td",75),t._uU(7),t.ALo(8,"number"),t.qZA(),t.TgZ(9,"td",75),t._uU(10),t.ALo(11,"number"),t.qZA()()),2&a){const e=t.oxw();t.xp6(4),t.hij(" $",t.lcZ(5,3,e.totalProductos-e.totalProductosImpuestos),""),t.xp6(3),t.hij(" $",t.lcZ(8,5,e.totalProductosImpuestos),""),t.xp6(3),t.hij(" $",t.lcZ(11,7,e.totalProductos),"")}}function Uo(a,r){1&a&&(t.TgZ(0,"th"),t._uU(1,"Acciones"),t.qZA())}function Fo(a,r){if(1&a&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Nombre"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Precio"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Impuesto"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Cantidad"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Total"),t.qZA(),t.YNc(11,Uo,2,0,"th",71),t.qZA()),2&a){const e=t.oxw();t.xp6(11),t.Q6J("ngIf",2==(null==e.estadoHabitacion?null:e.estadoHabitacion.estado_id))}}function No(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"td")(1,"p-button",72),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,n=t.oxw();return t.KtG(n.confirmDeleteRecetas(o.identificador))}),t.qZA()()}}function Jo(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"number"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"number"),t.qZA(),t.TgZ(9,"td")(10,"input",76),t.NdJ("keydown",function(){return!1})("input",function(o){const s=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.changeCantidadReceta(s,o))}),t.qZA()(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"number"),t.qZA(),t.YNc(14,No,2,0,"td",71),t.qZA()}if(2&a){const e=r.$implicit,i=t.oxw();t.xp6(2),t.Oqu(e.nombre),t.xp6(2),t.hij("$",t.lcZ(5,6,e.subtotal),""),t.xp6(3),t.hij("$",e.impuestos?e.impuestos:t.lcZ(8,8,0),""),t.xp6(3),t.Q6J("value",e.cantidad),t.xp6(2),t.hij("$",t.lcZ(13,10,e.total),""),t.xp6(2),t.Q6J("ngIf",2==(null==i.estadoHabitacion?null:i.estadoHabitacion.estado_id))}}function Po(a,r){if(1&a&&(t.TgZ(0,"tr")(1,"td",74),t._uU(2,"Totales"),t.qZA(),t.TgZ(3,"td",74),t._uU(4),t.ALo(5,"number"),t.qZA(),t.TgZ(6,"td",75),t._uU(7),t.ALo(8,"number"),t.qZA(),t.TgZ(9,"td",75),t._uU(10),t.ALo(11,"number"),t.qZA()()),2&a){const e=t.oxw();t.xp6(4),t.hij(" $",t.lcZ(5,3,e.totalRecetas-e.totalRecetasImpuestos),""),t.xp6(3),t.hij(" $",t.lcZ(8,5,e.totalRecetasImpuestos),""),t.xp6(3),t.hij(" $",t.lcZ(11,7,e.totalRecetas),"")}}function Eo(a,r){1&a&&(t.TgZ(0,"th"),t._uU(1,"Acciones"),t.qZA())}function Qo(a,r){if(1&a&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Monto"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"M\xe9todo de pago"),t.qZA(),t.YNc(5,Eo,2,0,"th",71),t.qZA()),2&a){const e=t.oxw();t.xp6(5),t.Q6J("ngIf",2==(null==e.estadoHabitacion?null:e.estadoHabitacion.estado_id))}}function Ho(a,r){1&a&&t._UZ(0,"td")}function Yo(a,r){if(1&a&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"number"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.YNc(6,Ho,1,0,"td",71),t.qZA()),2&a){const e=r.$implicit,i=t.oxw();t.xp6(2),t.hij("$",t.lcZ(3,3,e.valor),""),t.xp6(3),t.Oqu(e.nombre),t.xp6(1),t.Q6J("ngIf",2==(null==i.estadoHabitacion?null:i.estadoHabitacion.estado_id))}}function Lo(a,r){1&a&&(t.TgZ(0,"div")(1,"h5"),t._uU(2,"Hora"),t.qZA()())}function Bo(a,r){1&a&&(t.TgZ(0,"div")(1,"h5"),t._uU(2,"Noche"),t.qZA()())}function zo(a,r){if(1&a&&(t.TgZ(0,"div",77)(1,"span",78),t._uU(2),t._UZ(3,"p-tag",79),t.YNc(4,Lo,3,0,"div",71),t.YNc(5,Bo,3,0,"div",71),t.qZA()()),2&a){const e=r.$implicit;t.xp6(2),t.hij(" ",e.nombre," "),t.xp6(1),t.s9C("icon",e.icon),t.s9C("value",e.valor),t.xp6(1),t.Q6J("ngIf",2==e.tipo),t.xp6(1),t.Q6J("ngIf",1==e.tipo)}}function jo(a,r){if(1&a&&(t.TgZ(0,"div",80)(1,"span",78),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"div"),t._UZ(5,"p-tag",81),t.ALo(6,"number"),t._UZ(7,"p-tag",81),t.qZA()()),2&a){const e=r.$implicit;t.xp6(2),t.Oqu(t.lcZ(3,3,e.nombre)),t.xp6(3),t.MGl("value"," $",t.lcZ(6,5,e.valor_total),""),t.xp6(2),t.MGl("value","Stock: ",1==e.sin_limite_cantidad?e.stockActual:"Ilimitado","")}}function Go(a,r){1&a&&(t.TgZ(0,"span",83),t._uU(1,"Producto es requerido."),t.qZA())}function $o(a,r){if(1&a&&(t.TgZ(0,"div",82),t.YNc(1,Go,2,0,"span",42),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.formProducto.get("producto_id").hasError("required"))}}function Vo(a,r){1&a&&(t.TgZ(0,"div",83),t._uU(1,"Campo requerido"),t.qZA())}function Ko(a,r){1&a&&(t.TgZ(0,"div",84),t._uU(1,"La cantidad excede el stock disponible."),t.qZA())}function Wo(a,r){if(1&a&&(t.TgZ(0,"div",80)(1,"span",78),t._uU(2),t.qZA(),t._UZ(3,"p-tag",81),t.ALo(4,"number"),t.qZA()),2&a){const e=r.$implicit;t.xp6(2),t.Oqu(e.nombre),t.xp6(1),t.MGl("value","$",t.lcZ(4,2,e.valor_total),"")}}function Xo(a,r){1&a&&(t.TgZ(0,"span",83),t._uU(1,"Receta es requerida."),t.qZA())}function ta(a,r){if(1&a&&(t.TgZ(0,"div",82),t.YNc(1,Xo,2,0,"span",42),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.formReceta.get("receta_id").hasError("required"))}}function ea(a,r){1&a&&(t.TgZ(0,"div",83),t._uU(1,"Campo requerido"),t.qZA())}function oa(a,r){1&a&&(t.TgZ(0,"div",85),t._uU(1,"La cantidad excede el stock disponible."),t.qZA())}function aa(a,r){if(1&a&&(t.TgZ(0,"div",77)(1,"span",78),t._uU(2),t.qZA()()),2&a){const e=r.$implicit;t.xp6(2),t.Oqu(e.nombre)}}function ia(a,r){if(1&a&&(t.TgZ(0,"div",77)(1,"span",78),t._uU(2),t.qZA()()),2&a){const e=r.$implicit;t.xp6(2),t.Oqu(e.nombre)}}function na(a,r){1&a&&(t.TgZ(0,"div",83),t._uU(1,"Campo requerido."),t.qZA())}function ra(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",93)(1,"p-button",94),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().index,n=t.oxw();return t.KtG(n.eliminarMedioPagoAbono(o))}),t.qZA()()}}function sa(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"div",86)(1,"div",87)(2,"label"),t._uU(3,"M\xe9todo de Pago"),t.qZA(),t._UZ(4,"input",88),t.qZA(),t.TgZ(5,"div",89)(6,"label",90),t._uU(7,"Valor"),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"input",91),t.NdJ("blur",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.calcularTotalMetodosPago())}),t.qZA(),t._UZ(10,"br"),t.YNc(11,na,2,0,"div",42),t.qZA(),t.YNc(12,ra,2,0,"div",92),t.qZA()}if(2&a){const e=r.$implicit,i=t.oxw();t.Q6J("formGroup",e),t.xp6(11),t.Q6J("ngIf",null==e||null==e.controls.monto||null==e.controls.monto.errors?null:e.controls.monto.errors.required),t.xp6(1),t.Q6J("ngIf",i.formFacturacionMediosPago.controls.length>1)}}function la(a,r){1&a&&(t.TgZ(0,"div",95),t._UZ(1,"p-message",96),t.qZA())}const ca=function(){return{"min-width":"20rem"}},C=function(){return{"min-width":"25rem"}},da=function(){return{width:"60vw",height:"25vw"}},ot=function(){return{width:"60vw"}},pa=function(){return{width:"95vw",height:"40vw"}},ua=function(){return{width:"50vw"}};let ma=(()=>{class a{constructor(e,i,o,n,s,c,l,u){this.dashboardRoomsService=e,this.FB=i,this.spinner=o,this.datePipe=n,this.router=s,this.route=c,this.appComponent=l,this.layoutService=u,this.dataTarifa=[],this.dataAbonos=[],this.tarifasTotal=0,this.abonosTotal=0,this.items=[],this.total=0,this.subtotaltotal=0,this.tarifaVisible=!1,this.productoVisible=!1,this.abonoVisible=!1,this.recetaVisible=!1,this.allTarifas=[],this.allTarifasDefault=[],this.totalMetodosPago=0,this.totalImpuestos=0,this.impuestosData=[],this.detalleId=0,this.hotelId=0,this.clienteId=0,this.impuestos_save=[],this.montoSinRedondear=0,this.excedente=0,this.activarRedondear=!1,this.productsData=[],this.recetasData=[],this.productosAgregados=[],this.recetasAgregadas=[],this.totalProductos=0,this.totalProductosImpuestos=0,this.totalRecetas=0,this.totalRecetasImpuestos=0,this.validacionStock=!1,this.stockProductoModificado=!1,this.totales=[{nombre:"Tarifas",total:this.tarifasTotal,tipo:1},{nombre:"Productos/Servicios",total:this.totalProductos,tipo:1},{nombre:"Recetas",total:this.totalRecetas,tipo:1},{nombre:"Abonos",total:this.abonosTotal},{nombre:"Impuestos",total:this.totalImpuestos},{nombre:"Subtotal",total:this.subtotaltotal},{nombre:"Total sin redondear",total:0},{nombre:"Excedente",total:0},{nombre:"Total",total:0}],this.formFacturacionMediosPago=this.FB.array([]),this.baseUrl=go.D.url,this.token=l.getToken()}ngOnInit(){this.spinner.hide(),this.dataRoomDetail=[],this.habitacionId=parseFloat(this.route.snapshot.paramMap.get("idHabitacion")),this.buildForm(),this.getRoomOcupar()}cargarItems(){this.items=[{label:"Facturar",icon:"pi pi-dollar",disabled:this.disableFactura,command:e=>this.opcionSelect(e,"facturar")},{label:"Salida (Check-out)",disabled:2!=this.estadoHabitacion?.estado_id,icon:"pi pi-lock-open",command:e=>this.opcionSelect(e,"desocupar")}]}buildForm(){const e=this.dataRoomDetail;this.form=this.FB.group({nombreHabitacion:[e?.detalleHabitacion?.habitacion?.nombre,[]],descripcion:[e?.detalleHabitacion?.descripcion,[]],nombreCliente:[(e?.detalleHabitacion?.cliente?.nombres?e?.detalleHabitacion?.cliente?.nombres:"")+" "+(e?.detalleHabitacion?.cliente?.apellidos?e?.detalleHabitacion?.cliente?.apellidos:""),[]],desde:[e?.detalleHabitacion?.checkin,[]],hasta:[e?.detalleHabitacion?.checkout,[]]}),this.formTarifa=this.FB.group({tarifa_id:[this.allTarifasDefault,[d.kI.required]]}),this.formProducto=this.FB.group({producto_id:[null,[d.kI.required]],cantidad:[1,[d.kI.required,d.kI.min(1)]]}),this.formMetodoPago=this.FB.group({metodo_pago_id:[null,[d.kI.required]],valor:[null,[d.kI.required,d.kI.min(1)]]}),this.formReceta=this.FB.group({receta_id:[null,[d.kI.required]],cantidad:[1,[d.kI.required,d.kI.min(1)]]});let i=this.FB.group({monto:["",[d.kI.required,d.kI.min(0)]],medio_pago:[this.dataMetodosPago?this.dataMetodosPago[0]:null,[d.kI.required,d.kI.min(1)]],nombre:[this.dataMetodosPago?this.dataMetodosPago[0].nombre:"",[]]});i.get("nombre").disable(),this.formFacturacionMediosPago=this.FB.array([]),this.formFacturacionMediosPago.push(i),this.formFacturar=this.FB.group({isFacturaElectronica:[""]}),this.form.disable()}getRoomOcupar(){let e={habitacion_id:this.habitacionId};this.spinner.show(),this.dashboardRoomsService.getOcuparHabitacion(e).subscribe(i=>{function o(n){const s=parseFloat(n.precio);let c=0;return n.impuestos.forEach(l=>{const u=s*(Number(l.impuesto.porcentaje)/100);c+=u}),s+c}this.spinner.hide(),this.dataRoomDetail=i,this.estadoHabitacion=this.dataRoomDetail.estadoHabitacion,this.impuestos=this.dataRoomDetail.impuesto,this.allTarifasDefault=[],this.dataRoomDetail.tarifasHabitacion.forEach(n=>{this.dataTarifa.push({valor:n.valor,nombre:n.tarifa?.nombre,tipo:n.tipo,id:n.item_id})}),this.dataRoomDetail.recetasHabitacion.forEach(n=>{let s="receta"+this.generarIdAleatorio(),c=0;n?.recetas?.impuestos.forEach(l=>{let u=parseInt(l?.impuesto?.porcentaje)*parseFloat(n?.recetas.precio)/100;c+=u,this.impuestos_save.push({valor:u,porcentaje:l?.impuesto?.porcentaje,cantidad:n?.cantidad,id:l?.impuesto.id,item_id:n?.item_id,tipo:"4",identificador:s})}),this.recetasAgregadas.push({nombre:n?.recetas?.nombre,subtotal:n?.recetas?.precio,impuestos:c,total:(c+parseFloat(n?.recetas?.precio))*Number(n?.cantidad),cantidad:n?.cantidad,id:n?.item_id,identificador:s,impuestosData:n.recetas?.impuestos}),this.totalRecetas=this.totalRecetas+c+parseFloat(n?.recetas?.precio)}),this.dataMetodosPago=this.dataRoomDetail.metodos_pago,this.dataRoomDetail.productosHabitacion.forEach(n=>{let s=0,c="productos"+this.generarIdAleatorio();n.productos.impuestos.forEach(l=>{let u=parseInt(l.impuesto.porcentaje)*parseFloat(n?.productos.precio)/100;s+=u,this.impuestos_save.push({valor:u,porcentaje:l.impuesto.porcentaje,cantidad:n?.cantidad,id:l.impuesto.id,item_id:n?.item_id,tipo:"1",identificador:c})}),this.productosAgregados.push({nombre:n?.productos.nombre,cantidad:parseFloat(n?.cantidad),subtotal:parseFloat(n?.productos.precio),impuestos:s,valorImpuesto:(s+parseFloat(n?.productos.precio))*parseFloat(n?.cantidad),id:n?.item_id,identificador:c,tipoProducto:n?.productos.tipo_producto,impuestosData:n.productos.impuestos})}),this.dataRoomDetail.abonoHabitacion.forEach(n=>{this.dataAbonos.push({valor:n.valor,nombre:n.metodo_pago.nombre,id:n.id,metodo_pago_id:n?.metodo_pago.id,identificador:"abonos"+this.generarIdAleatorio()})}),this.dataRoomDetail.tarifas.forEach(n=>{this.allTarifas.push({valor:n.valor,nombre:n.nombre,tipo:n.tipo,id:n.id}),this.dataRoomDetail.tarifasHabitacion.filter(s=>s?.tarifa?.id==n.id).length>0&&this.allTarifasDefault.push({valor:n.valor,nombre:n.nombre,tipo:n.tipo,id:n.id})}),this.dataRoomDetail.productos.forEach(n=>{this.productsData.push({id:n.id,nombre:n.nombre,valor:n.precio,tipo:n.tipo_producto,impuestos:n.impuestos,stockActual:Number(n?.disponibles),stockActualFijo:Number(n?.disponibles_all),valor_total:o(n),sin_limite_cantidad:n?.sin_limite_cantidad})}),this.dataRoomDetail.recetas.forEach(n=>{this.recetasData.push({id:n.id,nombre:n.nombre,valor:n.precio,impuestos:n.impuestos,stock:n.cantidad,valor_total:o(n)})}),this.detalleId=this.dataRoomDetail?.detalleHabitacion.id,this.hotelId=this.dataRoomDetail?.detalleHabitacion.hotel_id,this.clienteId=this.dataRoomDetail?.detalleHabitacion.cliente?.id,this.buildForm(),this.recalcular(),this.cargarItems()})}recalcular(){this.tarifasTotal=0,this.totalProductos=0,this.abonosTotal=0,this.total=0,this.totalImpuestos=0,this.totalRecetas=0,this.dataTarifa.forEach(i=>{this.tarifasTotal=this.tarifasTotal+parseFloat(i.valor)}),this.totalProductos=this.productosAgregados.reduce((i,o)=>i+o.valorImpuesto,0),this.totalProductosImpuestos=this.productosAgregados.reduce((i,o)=>i+o.impuestos*o.cantidad,0),this.totalRecetas=this.recetasAgregadas.reduce((i,o)=>i+o.total,0),this.totalRecetasImpuestos=this.recetasAgregadas.reduce((i,o)=>i+o.impuestos*o.cantidad,0),this.dataAbonos.forEach(i=>{this.abonosTotal=this.abonosTotal+parseFloat(i.valor)}),this.totalImpuestos=this.totalProductosImpuestos+this.totalRecetasImpuestos,this.subtotaltotal=this.tarifasTotal+(this.totalProductos-this.totalProductosImpuestos)+(this.totalRecetas-this.totalRecetasImpuestos),this.total=this.subtotaltotal+this.totalImpuestos-this.abonosTotal,this.totales=[{nombre:"Tarifas",total:this.tarifasTotal,tipo:1},{nombre:"Productos/Servicios",total:this.totalProductos-this.totalProductosImpuestos,tipo:1},{nombre:"Recetas",total:this.totalRecetas-this.totalRecetasImpuestos,tipo:1},{nombre:"Abonos",total:this.abonosTotal},{nombre:"Impuestos",total:this.totalImpuestos},{nombre:"Subtotal",total:this.subtotaltotal},{nombre:"Total",total:this.total}],this.activarRedondear?(this.montoSinRedondear=this.total,this.total=function e(i){let o=i%50,n=0;return o>0&&(n=50-o),i+n}(this.total),this.excedente=this.total-this.montoSinRedondear,this.totales[6]={nombre:"Total sin redondear",total:this.montoSinRedondear},this.totales.push({nombre:"Excedente",total:this.excedente}),this.totales.push({nombre:"Total",total:this.total})):(this.excedente=0,this.totales=this.totales.filter(i=>"Total sin redondear"!==i.nombre||"Excedente"!==i.nombre)),this.validaciones()}modals(e){switch(e){case"Tarifas":this.tarifaVisible=!0;break;case"Productos/Servicios":this.formProducto.reset(),this.productoVisible=!0,this.validacionStock=!1;break;case"Recetas":this.formReceta.reset(),this.recetaVisible=!0,this.validacionStock=!1;break;case"Abonos":this.abonoVisible=!0}}validarStock(e){if("producto"==e&&this.formProducto.valid){const i=this.formProducto.get("producto_id").value,o=this.formProducto.get("cantidad").value;this.validacionStock=i.stockActual<o&&1==i.sin_limite_cantidad}}opcionSelect(e,i){"desocupar"==i&&this.desocuparHabitacion(),"facturar"==i&&this.facturacion()}confirmDeleteAbono(e){this.dataAbonos=this.dataAbonos.filter(i=>i.identificador!=e),this.recalcular()}confirmDeleteTarifa(e){this.dataTarifa=this.dataTarifa.filter(i=>i.id!=e),this.allTarifasDefault=this.dataTarifa,this.buildForm(),this.recalcular()}confirmDeleteProductos(e){this.productosAgregados.forEach(i=>{i.identificador==e&&this.productsData.forEach(o=>{o.id==i.id&&(o.stockActual=o.stockActual+i.cantidad)})}),this.productosAgregados=this.productosAgregados.filter(i=>i.identificador!=e),this.stockProductoModificado=this.productosAgregados.some(i=>1==i.stockModificado),this.impuestos_save=this.impuestos_save.filter(i=>i.identificador!=e),this.recalcular()}confirmDeleteRecetas(e){this.recetasAgregadas=this.recetasAgregadas.filter(i=>i.identificador!=e),this.impuestos_save=this.impuestos_save.filter(i=>i.identificador!=e),this.recalcular()}submitTarifa(){this.recargarTablaTarifa(),this.tarifaVisible=!1,this.recalcular()}submitProducto(){this.recargarTablaProducto(),this.productoVisible=!1,this.recalcular()}submitReceta(){this.recetaVisible=!1,this.recargarTablaReceta(),this.recalcular()}recargarTablaReceta(e=null,i=null,o=null){let n=e;null==e&&(n=this.formReceta.get("receta_id")?.value);let s=i;null==i&&(s=this.formReceta.get("cantidad").value);let c="receta"+this.generarIdAleatorio(),l=0;if(n.impuestos.forEach(u=>{let g=parseInt(u.impuesto.porcentaje)*parseFloat(n.valor)/100;l+=g,this.impuestos_save.push({valor:g,porcentaje:u?.impuesto?.porcentaje,cantidad:s,id:u?.impuesto.id,item_id:n.id,tipo:"4",identificador:c})}),this.recetasAgregadas.find(u=>u.nombre==n.nombre)){let u=this.recetasAgregadas.findIndex(g=>g.nombre==n.nombre);this.recetasAgregadas[u].cantidad=this.recetasAgregadas[u].cantidad+s,this.recetasAgregadas[u].total=this.recetasAgregadas[u].total+(parseFloat(n.valor)+l)*s}else null!=o?this.recetasAgregadas.splice(o,0,{nombre:n.nombre,cantidad:s,subtotal:n.valor,impuestos:l,total:(l+parseFloat(n.valor))*Number(s),id:n.id,identificador:c,impuestosData:n.impuestos}):this.recetasAgregadas.push({nombre:n.nombre,cantidad:s,subtotal:n.valor,impuestos:l,total:(l+parseFloat(n.valor))*Number(s),id:n.id,identificador:c,impuestosData:n.impuestos})}recargarTablaProducto(e=null,i=null,o=null){let n=e,s=i;null==e&&(n=this.formProducto.get("producto_id")?.value),null==i&&(s=this.formProducto.get("cantidad").value);let c=0,l="productos"+this.generarIdAleatorio();if(n?.impuestos.forEach(u=>{let g=parseInt(u.impuesto.porcentaje)*parseFloat(n.valor)/100;c+=g,this.impuestos_save.push({valor:g,porcentaje:u.impuesto.porcentaje,cantidad:s,id:u.impuesto.id,item_id:n.id,tipo:"1",identificador:l})}),this.productosAgregados?.find(u=>u.nombre==n?.nombre)){let u=this.productosAgregados?.findIndex(g=>g.nombre==n.nombre);this.productosAgregados[u].cantidad+=s,this.productosAgregados[u].valorImpuesto+=(parseFloat(n?.valor)+c)*s,this.productsData.forEach(g=>{g.id==n?.id&&(g.stockActual=null!=e?g.stockActualFijo-s:g.stockActual-s)})}else null==o?this.productosAgregados.push({nombre:n?.nombre,cantidad:Number(s),subtotal:parseFloat(n?.valor),impuestos:c,valorImpuesto:(parseFloat(n?.valor)+c)*Number(s),id:n?.id,identificador:l,tipoProducto:n?.tipo,impuestosData:n.impuestos}):this.productosAgregados.splice(o,0,{nombre:n?.nombre,cantidad:Number(s),subtotal:parseFloat(n?.valor),impuestos:c,valorImpuesto:(parseFloat(n?.valor)+c)*Number(s),id:n?.id,identificador:l,tipoProducto:n?.tipo,impuestosData:n.impuestos}),this.productsData.forEach(u=>{u.id==n.id&&(u.stockActual=null!=e?u.stockActualFijo-s:u.stockActual-s)});this.stockProductoModificado=this.productosAgregados.some(u=>1==u.stockModificado),this.formProducto.reset()}recargarTablaTarifa(){let e=this.formTarifa.get("tarifa_id").value;this.dataTarifa=[],this.allTarifasDefault=[],e.forEach(i=>{this.dataTarifa.push({valor:i.valor,nombre:i.nombre,tipo:i.tipo,id:i.id}),this.allTarifasDefault.push({valor:i.valor,nombre:i.nombre,tipo:i.tipo,id:i.id})})}recargarTablaAbonos(){let e=this.formMetodoPago.get("metodo_pago_id").value[0],i=parseFloat(this.formMetodoPago.get("valor").value);this.dataAbonos.push({valor:i,nombre:e.nombre,id:e.id,metodo_pago_id:e.id,identificador:"abonos"+this.generarIdAleatorio()})}submitAbono(){this.abonoVisible=!1,this.recargarTablaAbonos(),this.recalcular()}submitAll(){2==this.estadoHabitacion?.estado_id&&this.envirRoomDetalle({tarifas:this.dataTarifa,productos:this.productosAgregados,abonos:this.dataAbonos,detalleId:this.detalleId,hotelId:this.hotelId,clienteId:this.clienteId,receta:this.recetasAgregadas,habitacion_id:this.habitacionId})}envirRoomDetalle(e){this.spinner.show(),this.dashboardRoomsService.saveDetalleHabitacion(e).subscribe(i=>{this.spinner.hide();let o=i;if("success"==o.code)m().fire({title:"Exito",text:o.msm,icon:"success"}),this.layoutService.reloadComponent(),this.router.navigate(["dashboard/dashboardRooms"]);else if("warning"==o.code){m().fire({title:"Advertencia",text:o.msm,icon:"warning"});const n=o.productos_sin_stock;let s=0;this.stockProductoModificado=!0,n?.forEach(c=>{this.productsData.forEach(l=>{l.id==c.id&&(l.stockActual=0,s=l.valor_total)}),this.productosAgregados.forEach(l=>{l.id==c.id&&(l.cantidad=c.cantidad_actual,l.valorImpuesto=c.cantidad_actual*s,l.stockModificado=!0)})}),this.recalcular()}else m().fire({title:"Error",text:"Error al anular.",icon:"error"})})}envirRoomDetalleFactura(e){this.spinner.show(),this.dashboardRoomsService.saveDetalleHabitacion(e).subscribe(i=>{if("warning"==i.code)m().fire({title:"Advertencia",text:i.msm,icon:"warning"}),this.spinner.hide(),this.facturarVisible=!1;else{let o=this.formFacturar.get("isFacturaElectronica").value;this.enviarFacturacion({detalle_id:this.detalleId,metodos_pagos:this.formFacturacionMediosPago.value,concepto:"Factura Habitacion",hotel_id:this.hotelId,cliente_id:this.clienteId,porcentaje_descuento:0,subtotal:this.subtotaltotal,total:this.total+this.abonosTotal,impuesto_total:this.totalImpuestos,detalleId:this.detalleId,hotelId:this.hotelId,clienteId:this.clienteId,receta:this.recetasAgregadas,impuesto:this.impuestos_save,habitacion_id:this.habitacionId,is_factura_electronica:o,excedente:this.excedente})}})}desocuparHabitacion(){let e={id_habitacion:this.habitacionId};m().fire({title:"\xbfEstas seguro que deseas Salir (Check-out) de esta habitacion?",text:"",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, Confirmar",cancelButtonText:"Cancelar"}).then(i=>{i.isConfirmed&&(this.spinner.show(),this.enviarDesocupar(e))})}facturacion(){this.facturarVisible=!0}enviarDesocupar(e){this.dashboardRoomsService.desocupar(e).subscribe(i=>{let o=i;this.spinner.hide(),"success"==o.code?(m().fire({title:"Exito",text:"Anulacion Exitosa.",icon:"success"}),this.router.navigate(["dashboard/dashboardRooms"])):"warning"==o.code?m().fire({title:"Advertencia",text:o.error,icon:"warning"}):m().fire({title:"Error",text:"Error al anular.",icon:"error"})},i=>{console.log("Error: ",i)})}validaciones(){this.disableFactura=!1,this.abonosTotal>this.tarifasTotal&&(this.disableFactura=!0,this.cargarItems())}eliminarMedioPagoAbono(e){this.formFacturacionMediosPago.removeAt(e),this.calcularTotalMetodosPago()}agregarAbonoOcupar(e){if(console.log("event",e),this.formFacturacionMediosPago.controls.find(o=>o.get("medio_pago").value.id==e.value.id))return;let i=this.FB.group({monto:["",[d.kI.required,d.kI.min(1)]],medio_pago:[e.value,[d.kI.required,d.kI.min(1)]],nombre:[e.value.nombre,[]]});i.get("nombre").disable(),this.formFacturacionMediosPago.push(i)}calcularTotalMetodosPago(){this.totalMetodosPago=0,this.formFacturacionMediosPago.value.forEach(e=>{let i=parseFloat(e.monto);isNaN(i)&&(i=0),this.totalMetodosPago+=i})}submitFactura(){this.envirRoomDetalleFactura({tarifas:this.dataTarifa,productos:this.productosAgregados,abonos:this.dataAbonos,detalleId:this.detalleId,hotelId:this.hotelId,clienteId:this.clienteId,receta:this.recetasAgregadas,impuesto:this.impuestos_save,habitacion_id:this.habitacionId})}enviarFacturacion(e){this.spinner.show(),this.dashboardRoomsService.facturar(e).subscribe(i=>{let o=i;this.facturarVisible=!1,this.spinner.hide(),"success"==o.code?(this.layoutService.reloadComponent(),m().fire({title:"Exito",text:o.msm,icon:"success"}),window.open(this.baseUrl+"/facturaRemisionPdf/"+o.factura.id+"?token="+this.token,"_blank"),this.router.navigate(["dashboard/dashboardRooms"])):"warning"==o.code?m().fire({title:"Advertencia",text:o.msm,icon:"warning"}):m().fire({title:"Error",text:"Error al Facturar.",icon:"error"})},i=>{console.log("Error: ",i)})}generarIdAleatorio(){let o="";for(let n=0;n<10;n++)o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return o}changeCantidadProducto(e,i){let o=parseInt(i.target.value),n=e.id,s=null;this.productsData.forEach(l=>{l.id==n&&(s=l)});let c=this.productosAgregados.findIndex(l=>l.id==n);this.productosAgregados=this.productosAgregados.filter(l=>l.id!=n),this.recargarTablaProducto(s,o,c),this.recalcular()}changeCantidadReceta(e,i){let o=parseInt(i.target.value),n=e.id,s=null;this.recetasData.forEach(l=>{l.id==n&&(s=l)});let c=this.recetasAgregadas.findIndex(l=>l.id==n);this.recetasAgregadas=this.recetasAgregadas.filter(l=>l.id!=n),this.recargarTablaReceta(s,o,c),this.recalcular()}getCantidadMaximaProducto(e){console.log("lol2",this.productsData);let i=e.id,o=1;return this.productsData.forEach(n=>{n.id==i&&(o=n.stockActualFijo)}),o}static#t=this.\u0275fac=function(i){return new(i||a)(t.Y36(q.y),t.Y36(d.qu),t.Y36(A.t2),t.Y36(h.uU),t.Y36(v.F0),t.Y36(v.gz),t.Y36(fo.y),t.Y36(J.P))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-dashboard-rooms-ocupar"]],decls:169,vars:93,consts:[["type","ball-scale-multiple","fullScreen","true"],[1,"surface-section","px-4","py-5","md:px-6","lg:px-8"],[1,"flex","align-items-center","flex-column","lg:flex-row"],["pButton","","pRipple","","label","","icon","pi pi-arrow-left",1,"p-button-outlined","mr-4",3,"routerLink"],[1,"font-medium","text-3xl","text-900"],[1,"grid","mt-2"],[1,"col-12"],[1,"card",2,"padding","30px"],[1,"grid"],[1,"col-12","md:col-5"],[2,"margin-bottom","30px"],[3,"formGroup"],[1,"p-fluid","p-formgrid","grid","p-3"],[1,"field","col-12","lg:col-6"],["type","text","formControlName","nombreHabitacion","pInputText","",1,"w-full","mb-3","border-round-3xl"],["type","text","formControlName","nombreCliente","pInputText","",1,"w-full","mb-3","border-round-3xl"],["type","text","formControlName","desde","pInputText","",1,"w-full","mb-3","border-round-3xl"],["type","text","formControlName","hasta","pInputText","",1,"w-full","mb-3","border-round-3xl"],[1,"field","col-12","lg:col-12"],["formControlName","descripcion","pInputTextarea","","rows","3","cols","20",2,"resize","none"],[1,"field","col-6","lg:col-6"],[3,"label","disabled","model","onClick"],["severity","error","class","padding","text","El total de abonos no puede ser mayor al total a pagar",4,"ngIf"],["responsiveLayout","scroll",3,"value","tableStyle","rows"],["pTemplate","header"],["pTemplate","body"],[1,"col-12","md:col-7"],[1,"table-details"],["pTemplate","footer"],["header","Agregar Tarifa",3,"visible","modal","draggable","resizable","visibleChange"],[3,"formGroup","ngSubmit"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-12"],["formControlName","tarifa_id","optionLabel","nombre","placeholder","Buscar Tarifa","optionLabel","nombre","emptyMessage","Tarifa no encontrada","display","chip",1,"multiselect-custom",3,"options"],["pTemplate","item"],["pButton","","pRipple","","label","Agregar","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl",3,"disabled"],["header","Agregar Producto",3,"visible","modal","visibleChange"],[1,"field","col-12","md:col-6"],["for","producto_id"],["formControlName","producto_id","placeholder","Buscar Producto/Servicio","optionLabel","nombre","emptyMessage","Cargando productos...",1,"dropdown-custom",3,"options","onChange"],["style","margin-top: 14px;",4,"ngIf"],["type","number","min","1","formControlName","cantidad","placeholder","Cantidad","pInputText","",1,"w-full","mb-3","border-round-3xl",3,"input"],["style","color: red;",4,"ngIf"],["style","color: orangered;",4,"ngIf"],["header","Agregar Receta",3,"visible","modal","visibleChange"],["for","cliente"],["formControlName","receta_id","placeholder","Buscar Receta","optionLabel","nombre","emptyMessage","Cargando recetas...",1,"dropdown-custom",3,"options"],["type","number","min","1","formControlName","cantidad","placeholder","Cantidad","pInputText","",1,"w-full","mb-3","border-round-3xl"],["class","field col-12","style","color: red;",4,"ngIf"],["header","Abonos ",3,"visible","modal","draggable","resizable","visibleChange"],["type","number","min","1","formControlName","valor","pInputText","",1,"w-full","mb-3","border-round-3xl"],["formControlName","metodo_pago_id","selectionLimit","1","limoptionLabel","nombre","placeholder","Metodo de pago","optionLabel","nombre","emptyMessage","Cargando m\xe9todos de pago...","display","chip",1,"multiselect-custom",3,"options"],["header","Facturar ",3,"visible","modal","draggable","resizable","visibleChange"],[1,"field","col-12"],[1,"font-medium","text-2xl","text-500","text-center"],["optionLabel","nombre","emptyMessage","Cargando m\xe9todos de pago...","placeholder","Buscar M\xe9todo de Pago",1,"dropdown-custom",3,"options","autoDisplayFirst","onChange"],["class","grid",3,"formGroup",4,"ngFor","ngForOf"],["class","col-6","style","padding: 0; margin-top: 15px;",4,"ngIf"],[1,"flex",2,"justify-content","space-between"],[1,"flex","align-items-center",2,"gap","10px"],["severity","info","text","Generar Factura electronica"],["formControlName","isFacturaElectronica"],[1,"flex","flex-column","justify-end"],[1,"font-medium","text-2xl","text-500","text-right"],["pButton","","pRipple","","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl",3,"label","disabled","click"],["severity","error","text","El total de abonos no puede ser mayor al total a pagar",1,"padding"],[4,"ngIf","ngIfElse"],["emptyTd",""],["pButton","","pRipple","","class","p-button","icon","pi pi-plus",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-plus",1,"p-button",3,"click"],["name",""],[4,"ngIf"],["icon","pi pi-trash","severity","danger",3,"click"],["type","number","min","1","id","cantidadProducto","pInputText","","placeholder","Valor",2,"width","100%",3,"max","value","keydown","input"],["colspan","1"],["colspan","2"],["type","number","min","1","id","cantidadReceta","pInputText","","placeholder","Valor",2,"width","100%",3,"value","keydown","input"],[1,"flex","align-items-center"],[1,"ml-2"],[1,"padding",3,"icon","value"],[1,"flex","align-items-center",2,"display","flex","justify-content","space-between"],[1,"padding",3,"value"],[2,"margin-top","14px"],[2,"color","red"],[2,"color","orangered"],[1,"field","col-12",2,"color","red"],[1,"grid",3,"formGroup"],[1,"col-6","md:col-5"],["type","text","min","1","formControlName","nombre","placeholder","Metodo de pago","id","medioPago","pInputText","","disabled","",1,"w-full","mb-3","border-round-3xl"],[1,"col-4","md:col-5"],["for","monto"],["type","number","min","1","id","monto","formControlName","monto","pInputText","","placeholder","Valor",1,"w-full","mb-3","border-round-3xl",3,"blur"],["class","col-2 mt-4 eliminar-metodo-pago",4,"ngIf"],[1,"col-2","mt-4","eliminar-metodo-pago"],["id","opciones","icon","pi pi-trash","severity","danger",3,"click"],[1,"col-6",2,"padding","0","margin-top","15px"],["severity","error","text","El total ingresado no es igual al total a pagar"]],template:function(i,o){1&i&&(t._UZ(0,"ngx-spinner",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div"),t._UZ(4,"button",3),t.qZA(),t.TgZ(5,"div")(6,"div",4),t._uU(7,"Detalle Ingreso"),t.qZA()()()(),t.TgZ(8,"div",5)(9,"div",6)(10,"div",7)(11,"h3"),t._uU(12,"Detalles de la reserva"),t.qZA(),t.TgZ(13,"div",8)(14,"div",9)(15,"div",10)(16,"p-toolbar")(17,"form",11)(18,"div",12)(19,"div",13)(20,"label"),t._uU(21,"Habitacion"),t.qZA(),t._UZ(22,"input",14),t.qZA(),t.TgZ(23,"div",13)(24,"label"),t._uU(25,"Hu\xe9sped"),t.qZA(),t._UZ(26,"input",15),t.qZA(),t.TgZ(27,"div",13)(28,"label"),t._uU(29,"Check-in"),t.qZA(),t._UZ(30,"input",16),t.qZA(),t.TgZ(31,"div",13)(32,"label"),t._uU(33,"Check-out"),t.qZA(),t._UZ(34,"input",17),t.qZA(),t.TgZ(35,"div",18)(36,"label"),t._uU(37,"Descripci\xf3n"),t.qZA(),t._UZ(38,"textarea",19),t.qZA(),t.TgZ(39,"div",20)(40,"p-splitButton",21),t.NdJ("onClick",function(){return o.submitAll()}),t.qZA()()()(),t.YNc(41,bo,1,0,"p-message",22),t.qZA()(),t.TgZ(42,"div")(43,"p-table",23),t.YNc(44,vo,7,0,"ng-template",24),t.YNc(45,xo,9,6,"ng-template",25),t.qZA()()(),t.TgZ(46,"div",26)(47,"div",27)(48,"h5"),t._uU(49,"Tarifas"),t.qZA(),t.TgZ(50,"p-table",23),t.YNc(51,yo,8,1,"ng-template",24),t.YNc(52,qo,9,5,"ng-template",25),t.qZA()(),t._UZ(53,"hr"),t.TgZ(54,"div",27)(55,"h5"),t._uU(56,"Productos/Servicios"),t.qZA(),t.TgZ(57,"p-table",23),t.YNc(58,ko,12,1,"ng-template",24),t.YNc(59,Oo,16,15,"ng-template",25),t.YNc(60,So,12,9,"ng-template",28),t.qZA()(),t._UZ(61,"hr"),t.TgZ(62,"div",27)(63,"h5"),t._uU(64,"Recetas"),t.qZA(),t.TgZ(65,"p-table",23),t.YNc(66,Fo,12,1,"ng-template",24),t.YNc(67,Jo,15,12,"ng-template",25),t.YNc(68,Po,12,9,"ng-template",28),t.qZA()(),t._UZ(69,"hr"),t.TgZ(70,"div",27)(71,"h5"),t._uU(72,"Abonos"),t.qZA(),t.TgZ(73,"p-table",23),t.YNc(74,Qo,6,1,"ng-template",24),t.YNc(75,Yo,7,5,"ng-template",25),t.qZA()()()()()()(),t.TgZ(76,"p-dialog",29),t.NdJ("visibleChange",function(s){return o.tarifaVisible=s}),t.TgZ(77,"div",6)(78,"form",30),t.NdJ("ngSubmit",function(){return o.submitTarifa()}),t.TgZ(79,"div",31)(80,"div",32)(81,"label"),t._uU(82,"Tarifa"),t.qZA(),t.TgZ(83,"p-multiSelect",33),t.YNc(84,zo,6,5,"ng-template",34),t.qZA()(),t.TgZ(85,"div",32),t._UZ(86,"button",35),t.qZA()()()()(),t.TgZ(87,"p-dialog",36),t.NdJ("visibleChange",function(s){return o.productoVisible=s}),t.TgZ(88,"div",6)(89,"form",30),t.NdJ("ngSubmit",function(){return o.submitProducto()}),t.TgZ(90,"div",31)(91,"div",37)(92,"label",38),t._uU(93,"Producto / Servicio"),t.qZA(),t.TgZ(94,"p-dropdown",39),t.NdJ("onChange",function(){return o.validarStock("producto")}),t.YNc(95,jo,8,7,"ng-template",34),t.qZA(),t.YNc(96,$o,2,1,"div",40),t.qZA(),t.TgZ(97,"div",37)(98,"label"),t._uU(99,"Cantidad"),t.qZA(),t.TgZ(100,"input",41),t.NdJ("input",function(){return o.validarStock("producto")}),t.qZA(),t.YNc(101,Vo,2,0,"div",42),t.YNc(102,Ko,2,0,"div",43),t.qZA(),t.TgZ(103,"div",32),t._UZ(104,"button",35),t.qZA()()()()(),t.TgZ(105,"p-dialog",44),t.NdJ("visibleChange",function(s){return o.recetaVisible=s}),t.TgZ(106,"div",6)(107,"form",30),t.NdJ("ngSubmit",function(){return o.submitReceta()}),t.TgZ(108,"div",31)(109,"div",37)(110,"label",45),t._uU(111,"Receta"),t.qZA(),t.TgZ(112,"p-dropdown",46),t.YNc(113,Wo,5,4,"ng-template",34),t.qZA(),t.YNc(114,ta,2,1,"div",40),t.qZA(),t.TgZ(115,"div",37)(116,"label"),t._uU(117,"Cantidad"),t.qZA(),t._UZ(118,"input",47),t.YNc(119,ea,2,0,"div",42),t.YNc(120,oa,2,0,"div",48),t.qZA(),t.TgZ(121,"div",32),t._UZ(122,"button",35),t.qZA()()()()(),t.TgZ(123,"p-dialog",49),t.NdJ("visibleChange",function(s){return o.abonoVisible=s}),t.TgZ(124,"div",6)(125,"form",30),t.NdJ("ngSubmit",function(){return o.submitAbono()}),t.TgZ(126,"div",31)(127,"div",37)(128,"label"),t._uU(129,"Monto"),t.qZA(),t._UZ(130,"input",50),t.qZA(),t.TgZ(131,"div",37)(132,"label",45),t._uU(133,"Metodo de pago"),t.qZA(),t.TgZ(134,"p-dropdown",51),t.YNc(135,aa,3,1,"ng-template",34),t.qZA()()(),t.TgZ(136,"div",32),t._UZ(137,"button",35),t.qZA()()()(),t.TgZ(138,"p-dialog",52),t.NdJ("visibleChange",function(s){return o.facturarVisible=s}),t.TgZ(139,"div",6)(140,"div",31)(141,"div",53)(142,"div",54),t._uU(143),t.ALo(144,"number"),t.qZA()(),t.TgZ(145,"div",53)(146,"label"),t._uU(147,"Agregar m\xe9todo de pago"),t.qZA(),t.TgZ(148,"p-dropdown",55),t.NdJ("onChange",function(s){return o.agregarAbonoOcupar(s)}),t.YNc(149,ia,3,1,"ng-template",34),t.qZA()(),t.TgZ(150,"div",53),t.YNc(151,sa,13,3,"div",56),t.YNc(152,la,2,0,"div",57),t._UZ(153,"hr"),t.TgZ(154,"div",58)(155,"div",59),t._UZ(156,"p-message",60),t.TgZ(157,"form",30),t.NdJ("ngSubmit",function(){return o.submitAbono()}),t._UZ(158,"p-inputSwitch",61),t.qZA()(),t.TgZ(159,"div",62)(160,"div",63),t._uU(161),t.ALo(162,"number"),t.qZA(),t.TgZ(163,"div",63),t._uU(164),t.ALo(165,"number"),t.ALo(166,"number"),t.qZA()()()()(),t.TgZ(167,"div",32)(168,"button",64),t.NdJ("click",function(){return o.submitFactura()}),t.qZA()()()()),2&i&&(t.xp6(4),t.Q6J("routerLink","/dashboard/dashboardRooms"),t.xp6(13),t.Q6J("formGroup",o.form),t.xp6(23),t.Q6J("label",2==(null==o.estadoHabitacion?null:o.estadoHabitacion.estado_id)?"Guardar":void 0)("disabled",o.subtotaltotal<=0)("model",o.items),t.xp6(1),t.Q6J("ngIf",o.abonosTotal>o.tarifasTotal),t.xp6(2),t.Q6J("value",o.totales)("tableStyle",t.DdM(83,ca))("rows",8),t.xp6(7),t.Q6J("value",o.dataTarifa)("tableStyle",t.DdM(84,C))("rows",5),t.xp6(7),t.Q6J("value",o.productosAgregados)("tableStyle",t.DdM(85,C))("rows",5),t.xp6(8),t.Q6J("value",o.recetasAgregadas)("tableStyle",t.DdM(86,C))("rows",5),t.xp6(8),t.Q6J("value",o.dataAbonos)("tableStyle",t.DdM(87,C))("rows",5),t.xp6(3),t.Akn(t.DdM(88,da)),t.Q6J("visible",o.tarifaVisible)("modal",!0)("draggable",!1)("resizable",!1),t.xp6(2),t.Q6J("formGroup",o.formTarifa),t.xp6(5),t.Q6J("options",o.allTarifas),t.xp6(3),t.Q6J("disabled",o.formTarifa.invalid),t.xp6(1),t.Akn(t.DdM(89,ot)),t.Q6J("visible",o.productoVisible)("modal",!0),t.xp6(2),t.Q6J("formGroup",o.formProducto),t.xp6(5),t.Q6J("options",o.productsData),t.xp6(2),t.Q6J("ngIf",o.formProducto.get("producto_id").errors&&(o.formProducto.get("producto_id").dirty||o.formProducto.get("producto_id").touched)),t.xp6(5),t.Q6J("ngIf",o.formProducto.get("cantidad").hasError("required")),t.xp6(1),t.Q6J("ngIf",o.validacionStock),t.xp6(2),t.Q6J("disabled",o.formProducto.invalid||o.validacionStock),t.xp6(1),t.Akn(t.DdM(90,ot)),t.Q6J("visible",o.recetaVisible)("modal",!0),t.xp6(2),t.Q6J("formGroup",o.formReceta),t.xp6(5),t.Q6J("options",o.recetasData),t.xp6(2),t.Q6J("ngIf",o.formReceta.get("receta_id").errors&&(o.formReceta.get("receta_id").dirty||o.formReceta.get("receta_id").touched)),t.xp6(5),t.Q6J("ngIf",o.formReceta.get("cantidad").hasError("required")),t.xp6(1),t.Q6J("ngIf",o.validacionStock),t.xp6(2),t.Q6J("disabled",o.formReceta.invalid),t.xp6(1),t.Akn(t.DdM(91,pa)),t.Q6J("visible",o.abonoVisible)("modal",!0)("draggable",!1)("resizable",!1),t.xp6(2),t.Q6J("formGroup",o.formMetodoPago),t.xp6(9),t.Q6J("options",o.dataMetodosPago),t.xp6(3),t.Q6J("disabled",o.formMetodoPago.invalid),t.xp6(1),t.Akn(t.DdM(92,ua)),t.Q6J("visible",o.facturarVisible)("modal",!0)("draggable",!1)("resizable",!1),t.xp6(5),t.hij("Total a pagar: $",t.lcZ(144,75,o.total),""),t.xp6(5),t.Q6J("options",o.dataMetodosPago)("autoDisplayFirst",!1),t.xp6(3),t.Q6J("ngForOf",o.formFacturacionMediosPago.controls),t.xp6(1),t.Q6J("ngIf",o.totalMetodosPago!=o.total),t.xp6(5),t.Q6J("formGroup",o.formFacturar),t.xp6(4),t.hij("Total ingresado: $",t.lcZ(162,77,o.totalMetodosPago),""),t.xp6(3),t.hij("Pendiente: $",o.total-o.totalMetodosPago>0?t.lcZ(165,79,o.total-o.totalMetodosPago):t.lcZ(166,81,0),""),t.xp6(4),t.Q6J("label","Pagar")("disabled",o.formFacturacionMediosPago.invalid||o.totalMetodosPago!=o.total))},dependencies:[f.jx,h.sg,h.O5,I.iA,T.Hq,T.zx,d._Y,d.Fj,d.wV,d.JJ,d.JL,d.qQ,v.rH,Z.H,F.o,y.o,R.g,x.Lt,D.V,d.sg,d.u,A.Ro,k.V,M.NU,O.q,tt.a,et.Ql,h.JJ,h.rS],styles:["table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #dddddd;text-align:left;padding:8px}th[_ngcontent-%COMP%]{background-color:#f2f2f2}.ordenAdd[_ngcontent-%COMP%]{padding:1%;text-align:right}.padding[_ngcontent-%COMP%]{padding:1%}.expandir[_ngcontent-%COMP%]{width:100%}.table-details[_ngcontent-%COMP%]{padding:10px}"]})}return a})();var at=p(2506);let ha=(()=>{class a{static#t=this.\u0275fac=function(i){return new(i||a)};static#e=this.\u0275mod=t.oAB({type:a});static#o=this.\u0275inj=t.cJS({imports:[v.Bz.forChild([{path:"",component:_o,canActivate:[at.a],data:{permissions:["dashboard.habitacion"]}},{path:":idHabitacion/ocupar",component:ma,canActivate:[at.a],data:{permissions:["dashboard.habitacion"]}}]),v.Bz]})}return a})();var _a=p(2169),ga=p(1480),fa=p(5617);let ba=(()=>{class a{static#t=this.\u0275fac=function(i){return new(i||a)};static#e=this.\u0275mod=t.oAB({type:a});static#o=this.\u0275inj=t.cJS({providers:[{provide:ct.TP,useClass:dt.n,multi:!0},q.y,h.uU],imports:[P.Q,h.ez,I.U$,it.O,d.u5,E.$9,T.hJ,Z.T,nt.EV,F.V,rt.Xt,y.j,R.A,x.kW,st.cc,It,lt.L$,D.S,pt.ii.forRoot(),d.UX,A.ef,ut.U,ha,jt,k.W,N._8,M.q4,_a.o,ga.Gg,O.O,tt.l,x.kW,et.Iu,fa.ClientesModule]})}return a})()}}]);