"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[298],{3298:(S,D,s)=>{s.r(D),s.d(D,{EmployeesModule:()=>Ye});var v=s(177),r=s(4341),b=s(3386),F=s(5493),h=s(1141),E=s(563),A=s(9998),j=s(1830),G=s(4714),C=s(2242),R=s(1305),x=s(9883),N=s(494),$=s(981),w=s(1570),T=s(1626),X=s(635),B=s(4058),g=s(6554),a=s(6627),_=s(2011),p=s(6296),c=s(4827),d=s(3091),u=s(8032),f=s.n(u),Y=s(5989),e=s(540),V=s(306);let I=(()=>{class t{constructor(i){this.httpClient=i,this.baseUrl=V.T.url,this.endpointListar="/empleadoListar",this.endpointCreateGet="/getSelectData",this.endpointEmployeeCreate="/createEmployee",this.endpointEmployeeGet="/empleadoEditar/",this.endpointEmployeeEdit="/empleadoActualizar",this.endpointDelete="/empleadoEliminar"}getAll(i,n="",o=1){const m={headers:new T.Lr({"Content-Type":"application/json"})};return this.httpClient.post(`${this.baseUrl+this.endpointListar}?per_page=${i}&page=${o}&search=${n}`,m)}getDataCreate(){return this.httpClient.get(`${this.baseUrl+this.endpointCreateGet}`)}createEmployee(i){return this.httpClient.post(`${this.baseUrl+this.endpointEmployeeCreate}`,i)}getEmployee(i){return this.httpClient.get(`${this.baseUrl+this.endpointEmployeeGet+i}`)}updateEmployee(i){return this.httpClient.post(`${this.baseUrl+this.endpointEmployeeEdit}`,i)}deleteEmployee(i){return this.httpClient.post(`${this.baseUrl+this.endpointDelete}`,i)}static{this.\u0275fac=function(n){return new(n||t)(e.KVO(T.Qq))}}static{this.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var U=s(5779);function L(t,l){if(1&t){const i=e.RV6();e.j41(0,"button",20),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.redirectToCreate())}),e.k0s()}}function M(t,l){if(1&t){const i=e.RV6();e.j41(0,"div",21),e.nrm(1,"span"),e.j41(2,"span",22)(3,"form",23)(4,"div",24)(5,"input",25),e.bIt("keyup.enter",function(o){e.eBV(i);const m=e.XpG();return e.Njj(m.buscarPorTecla(o))})("input",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.searchInput())}),e.k0s(),e.j41(6,"button",26),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.search(o.dt))}),e.k0s()()()()()}if(2&t){const i=e.XpG();e.R7$(3),e.Y8G("formGroup",i.formSearch)}}function O(t,l){1&t&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"Nombre"),e.k0s(),e.j41(3,"th"),e.EFF(4,"Tipo de documento"),e.k0s(),e.j41(5,"th"),e.EFF(6,"Numero documento"),e.k0s(),e.j41(7,"th"),e.EFF(8,"Hotel"),e.k0s(),e.j41(9,"th"),e.EFF(10,"Usuario"),e.k0s(),e.j41(11,"th"),e.EFF(12,"Acciones"),e.k0s()())}function q(t,l){if(1&t){const i=e.RV6();e.j41(0,"p-button",30),e.bIt("click",function(){e.eBV(i);const o=e.XpG().$implicit,m=e.XpG();return e.Njj(m.redirectToEdit(o.id))}),e.k0s()}}function J(t,l){if(1&t){const i=e.RV6();e.j41(0,"p-button",31),e.bIt("click",function(){e.eBV(i);const o=e.XpG().$implicit,m=e.XpG();return e.Njj(m.confirmDelete(o.id))}),e.k0s()}}function z(t,l){if(1&t&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td",27),e.DNE(12,q,1,0,"p-button",28),e.nrm(13,"p-confirmDialog"),e.DNE(14,J,1,0,"p-button",29),e.k0s()()),2&t){const i=l.$implicit,n=e.XpG();e.R7$(2),e.JRh(i.nombres+" "+i.apellidos),e.R7$(2),e.JRh(i.tipo_documento.nombre),e.R7$(2),e.JRh(i.numero_documento),e.R7$(2),e.JRh(i.hotel.nombre),e.R7$(2),e.JRh(i.usuario_create.usuario),e.R7$(2),e.Y8G("ngIf",n.permisoActualizar),e.R7$(2),e.Y8G("ngIf",n.permisoEliminar)}}function H(t,l){1&t&&(e.j41(0,"tr")(1,"td",32),e.EFF(2,"Cargando informacion porfavor espere ..."),e.k0s()())}const K=function(){return{"min-width":"50rem"}},Q=function(){return["nombre","Hotel","acciones"]};let W=(()=>{class t{constructor(i,n,o,m){this.FB=i,this.spinner=n,this.employeeService=o,this.router=m,this.permisoCrear=Y.u.hasPermission(["administracion.empleado.crear"]),this.permisoActualizar=Y.u.hasPermission(["administracion.empleado.editar"]),this.permisoEliminar=Y.u.hasPermission(["administracion.empleado.eliminar"]),this.loadingTable=!1,this.pageCount=10,this.first=0,this.rows=8,this.pageActual=1,this.ultimaPage=1,this.disablePageLeft=!1,this.disablePageRight=!1}ngOnInit(){this.buildForm(),this.getIndex()}onPage(i){this.pageCount=i.rows,this.getIndex("",this.pageCount)}redirectToCreate(){this.router.navigate(["dashboard/employees/employees-create"])}redirectToEdit(i){this.router.navigate(["dashboard/employees",i,"edit"])}buildForm(){this.formSearch=this.FB.group({search:["",[]]})}getIndex(i="",n=this.pageCount,o=1){this.spinner.show(),this.loadingTable=!0,this.employeeService.getAll(n,i,o).subscribe(m=>{this.loadingTable=!1,this.employeesData=m.data,this.countRegisters=m.total,this.ultimaPage=m.last_page,m.total>n&&(this.disablePageRight=!0),this.validatePage(),this.spinner.hide()},m=>{console.log("Error: ",m),this.spinner.hide()})}confirmDelete(i){f().fire({title:"\xbfEst\xe1s seguro de que deseas eliminar este empleado?",text:"Ten cuidado, esta acci\xf3n no se podr\xe1 revertir",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, Confirmar",cancelButtonText:"Cancelar"}).then(n=>{n.isConfirmed&&(this.spinner.show(),this.employeeService.deleteEmployee({id:i}).subscribe(o=>{this.spinner.hide(),"success"==o.code?(f().fire({title:"\xc9xito",text:"Empleado eliminado exitosamente.",icon:"success"}),this.getIndex()):f().fire({title:"Error",text:"Error al eliminar el empleado.",icon:"error"})},o=>{console.log("Error: ",o)}))})}searchInput(){let i=this.formSearch.get("search").value;this.pageActual=1,""==i&&this.getIndex(i)}search(){let i=this.formSearch.get("search").value;this.getIndex(i)}onPageChange(i){this.first=i.first,this.rows=i.rows}leftTable(){this.pageActual=this.pageActual-1,this.getIndex("",this.pageCount,this.pageActual),this.validatePage()}rightTable(){this.pageActual=this.pageActual+1,this.getIndex("",this.pageCount,this.pageActual),this.validatePage()}validatePage(){1==this.pageActual&&(this.disablePageLeft=!1),this.pageActual>1&&(this.disablePageLeft=!0),this.ultimaPage==this.pageActual&&(this.disablePageRight=!1),this.ultimaPage>this.pageActual&&(this.disablePageRight=!0)}buscarPorTecla(i){"Enter"==i.code&&this.search()}static{this.\u0275fac=function(n){return new(n||t)(e.rXU(r.ok),e.rXU(g.ex),e.rXU(I),e.rXU(d.Ix))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-employees"]],decls:23,vars:12,consts:[[1,"surface-section","px-4","py-5","md:px-6","lg:px-8"],[1,"flex","align-items-start","flex-column","lg:justify-content-between","lg:flex-row"],[1,"font-medium","text-3xl","text-900"],[1,"flex","align-items-center","text-700","flex-wrap"],[1,"mr-5","flex","align-items-center","mt-3"],[1,"mt-3","lg:mt-0"],["pButton","","pRipple","","label","Crear","class","p-button-outlined mr-2","icon","",3,"click",4,"ngIf"],[1,"grid","mt-3"],[1,"col-12"],[1,"card","px-3","py-3"],["responsiveLayout","scroll","selectionMode","multiple","dataKey","usuario",3,"value","tableStyle","loading","rows","globalFilterFields","rowHover","onPage"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","loadingbody"],[2,"text-align","center"],[1,"p-buttonset"],["pButton","","pRipple","","label","","icon","pi pi-arrow-left",3,"disabled","click"],["pButton","","pRipple","",3,"label"],["pButton","","pRipple","","label","","icon","pi pi-arrow-right",3,"disabled","click"],["pButton","","pRipple","","label","Crear","icon","",1,"p-button-outlined","mr-2",3,"click"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[3,"formGroup"],[1,"p-inputgroup"],["formControlName","search","pInputText","","type","text","placeholder","Buscar...",1,"w-full","sm:w-auto",3,"keyup.enter","input"],["type","button","pButton","","pRipple","",1,"pi","pi-search",3,"click"],[1,"flex","gap-2"],["icon","pi pi-pencil","severity","info",3,"click",4,"ngIf"],["icon","pi pi-trash","severity","danger",3,"click",4,"ngIf"],["icon","pi pi-pencil","severity","info",3,"click"],["icon","pi pi-trash","severity","danger",3,"click"],["colspan","8"]],template:function(n,o){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div")(3,"div",2),e.EFF(4,"Empleados"),e.k0s(),e.j41(5,"div",3),e.nrm(6,"div",4),e.k0s()(),e.j41(7,"div",5),e.DNE(8,L,1,0,"button",6),e.k0s()()(),e.j41(9,"div",7)(10,"div",8)(11,"div",9)(12,"p-table",10),e.bIt("onPage",function(y){return o.onPage(y)}),e.DNE(13,M,7,1,"ng-template",11),e.DNE(14,O,13,0,"ng-template",12),e.DNE(15,z,15,7,"ng-template",13),e.DNE(16,H,3,0,"ng-template",14),e.k0s(),e.nrm(17,"br"),e.j41(18,"div",15)(19,"span",16)(20,"button",17),e.bIt("click",function(){return o.leftTable()}),e.k0s(),e.nrm(21,"button",18),e.j41(22,"button",19),e.bIt("click",function(){return o.rightTable()}),e.k0s()()()()()()),2&n&&(e.R7$(8),e.Y8G("ngIf",o.permisoCrear),e.R7$(4),e.Y8G("value",o.employeesData)("tableStyle",e.lJ4(10,K))("loading",o.loadingTable)("rows",8)("globalFilterFields",e.lJ4(11,Q))("rowHover",!0),e.R7$(8),e.Y8G("disabled",!o.disablePageLeft),e.R7$(1),e.Y8G("label",o.pageActual),e.R7$(1),e.Y8G("disabled",!o.disablePageRight))},dependencies:[v.bT,b.XI,U.Ei,h._f,h.$n,r.qT,r.me,r.BC,r.cb,E.n,C.S,r.j4,r.JD]})}}return t})();var P=s(1765);function Z(t,l){1&t&&(e.j41(0,"div",22),e.EFF(1,"Campo requerido"),e.k0s())}function ee(t,l){if(1&t&&(e.j41(0,"div"),e.DNE(1,Z,2,0,"div",21),e.k0s()),2&t){const i=e.XpG();e.R7$(1),e.Y8G("ngIf",i.formAllData.get("hotel_id").hasError("required"))}}function te(t,l){1&t&&(e.j41(0,"div",22),e.EFF(1,"Campo requerido"),e.k0s())}function ie(t,l){1&t&&(e.j41(0,"div",22),e.EFF(1,"M\xe1ximo 50 caracteres"),e.k0s())}function oe(t,l){if(1&t&&(e.j41(0,"div"),e.DNE(1,te,2,0,"div",21),e.DNE(2,ie,2,0,"div",21),e.k0s()),2&t){const i=e.XpG();e.R7$(1),e.Y8G("ngIf",i.formAllData.get("nombres").hasError("required")),e.R7$(1),e.Y8G("ngIf",i.formAllData.get("nombres").hasError("maxlength"))}}function ne(t,l){1&t&&(e.j41(0,"div",22),e.EFF(1,"Campo requerido"),e.k0s())}function re(t,l){1&t&&(e.j41(0,"div",22),e.EFF(1,"M\xe1ximo 50 caracteres"),e.k0s())}function le(t,l){if(1&t&&(e.j41(0,"div"),e.DNE(1,ne,2,0,"div",21),e.DNE(2,re,2,0,"div",21),e.k0s()),2&t){const i=e.XpG();e.R7$(1),e.Y8G("ngIf",i.formAllData.get("apellidos").hasError("required")),e.R7$(1),e.Y8G("ngIf",i.formAllData.get("apellidos").hasError("maxlength"))}}function ae(t,l){1&t&&(e.j41(0,"div",22),e.EFF(1,"Campo requerido"),e.k0s())}function se(t,l){if(1&t&&(e.j41(0,"div"),e.DNE(1,ae,2,0,"div",21),e.k0s()),2&t){const i=e.XpG();e.R7$(1),e.Y8G("ngIf",i.formAllData.get("tipo_documento_id").hasError("required"))}}function pe(t,l){1&t&&(e.j41(0,"div",22),e.EFF(1,"Campo requerido"),e.k0s())}function me(t,l){1&t&&(e.j41(0,"div",22),e.EFF(1,"M\xe1ximo 20 caracteres"),e.k0s())}function de(t,l){if(1&t&&(e.j41(0,"div"),e.DNE(1,pe,2,0,"div",21),e.DNE(2,me,2,0,"div",21),e.k0s()),2&t){const i=e.XpG();e.R7$(1),e.Y8G("ngIf",i.formAllData.get("numero_documento").hasError("required")),e.R7$(1),e.Y8G("ngIf",i.formAllData.get("numero_documento").hasError("maxlength"))}}function ce(t,l){1&t&&(e.j41(0,"div",22),e.EFF(1,"Campo requerido"),e.k0s())}function ue(t,l){if(1&t&&(e.j41(0,"div"),e.DNE(1,ce,2,0,"div",21),e.k0s()),2&t){const i=e.XpG();e.R7$(1),e.Y8G("ngIf",i.formAllData.get("celular").hasError("required"))}}function _e(t,l){1&t&&(e.j41(0,"div",22),e.EFF(1,"Campo requerido"),e.k0s())}function fe(t,l){if(1&t&&(e.j41(0,"div"),e.DNE(1,_e,2,0,"div",21),e.k0s()),2&t){const i=e.XpG();e.R7$(1),e.Y8G("ngIf",i.formAllData.get("genero_id").hasError("required"))}}let ge=(()=>{class t{constructor(i,n,o,m){this.FB=i,this.spinner=n,this.employeeService=o,this.router=m}ngOnInit(){this.buildForm(),this.getSelectCreate()}buildForm(){this.formAllData=this.FB.group({nombres:["",[r.k0.required,r.k0.maxLength(50)]],apellidos:["",[r.k0.required,r.k0.maxLength(50)]],tipo_documento_id:[null,r.k0.required],numero_documento:["",[r.k0.required,r.k0.maxLength(20)]],celular:["",r.k0.required],genero_id:[null,r.k0.required],hotel_id:[null,r.k0.required]})}getSelectCreate(){this.employeeService.getDataCreate().subscribe(i=>{this.hoteles=i.hoteles,this.generos=i.generos,this.documentos=i.tiposDocumento},i=>{console.error(i)})}empleadoCreate(){this.spinner.show();let i=this.formAllData.value;i.hotel_id=i.hotel_id.id,i.genero_id=i.genero_id.id,i.tipo_documento_id=i.tipo_documento_id.id,i.estado=1,this.employeeService.createEmployee(i).subscribe(n=>{this.spinner.hide(),"success"==n.code?f().fire({title:"Exito",text:"Empleado creado exitosamente.",icon:"success"}).then(()=>{this.router.navigate(["/dashboard/employees"])}):f().fire({title:"Error",text:"Error al crear el empleado.",icon:"error"})},n=>{this.spinner.hide(),422===n.status&&n.error.tipo_documento_id?f().fire({title:"Error",text:"El documento ya se encuentra registrado.",icon:"error"}):console.log("Error: ",n)})}static{this.\u0275fac=function(n){return new(n||t)(e.rXU(r.ok),e.rXU(g.ex),e.rXU(I),e.rXU(d.Ix))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-employees-create"]],decls:48,vars:13,consts:[["type","ball-scale-multiple","size","large","bdColor","rgba(192,192,192,0.8)","template","<img src='assets/loading/cargando.gif' />"],[1,"surface-section","px-4","py-5","md:px-6","lg:px-8"],[1,"flex","align-items-center","lg:flex-row","justify-content-between"],[1,"flex","align-items-center"],["pButton","","pRipple","","label","","icon","pi pi-arrow-left",1,"p-button-outlined","mr-4",3,"routerLink"],[1,"font-medium","text-3xl","text-900"],[1,"text-right"],["pButton","","pRipple","","label","Guardar","icon","",1,"p-button-outlined",3,"disabled","click"],[1,"p-fluid","p-formgrid"],[1,"grid","mt-5"],[3,"formGroup"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-6"],["optionLabel","nombre","formControlName","hotel_id",3,"options"],[4,"ngIf"],["type","text","pInputText","","formControlName","nombres",1,"w-full","mb-3","border-round-3xl"],["type","text","pInputText","","formControlName","apellidos",1,"w-full","mb-3","border-round-3xl"],["optionLabel","nombre","formControlName","tipo_documento_id",3,"options"],["type","text","pInputText","","formControlName","numero_documento",1,"w-full","mb-3","border-round-3xl"],["type","number","pInputText","","formControlName","celular",1,"w-full","mb-3","border-round-3xl"],["optionLabel","nombre","formControlName","genero_id",3,"options"],["style","color: red;",4,"ngIf"],[2,"color","red"]],template:function(n,o){1&n&&(e.nrm(0,"ngx-spinner",0),e.j41(1,"div",1)(2,"div",2)(3,"div",3),e.nrm(4,"button",4),e.j41(5,"div",5),e.EFF(6,"Crear Empleado"),e.k0s()(),e.j41(7,"div",6)(8,"button",7),e.bIt("click",function(){return o.empleadoCreate()}),e.k0s()()(),e.j41(9,"div",8)(10,"div",9)(11,"form",10)(12,"div",11)(13,"div",12)(14,"label"),e.EFF(15,"Hotel"),e.k0s(),e.nrm(16,"p-dropdown",13),e.DNE(17,ee,2,1,"div",14),e.k0s(),e.j41(18,"div",12)(19,"label"),e.EFF(20,"Nombres"),e.k0s(),e.nrm(21,"input",15),e.DNE(22,oe,3,2,"div",14),e.k0s(),e.j41(23,"div",12)(24,"label"),e.EFF(25,"Apellidos"),e.k0s(),e.nrm(26,"input",16),e.DNE(27,le,3,2,"div",14),e.k0s(),e.j41(28,"div",12)(29,"label"),e.EFF(30,"Tipo de documento"),e.k0s(),e.nrm(31,"p-dropdown",17),e.DNE(32,se,2,1,"div",14),e.k0s(),e.j41(33,"div",12)(34,"label"),e.EFF(35,"N\xfamero documento"),e.k0s(),e.nrm(36,"input",18),e.DNE(37,de,3,2,"div",14),e.k0s(),e.j41(38,"div",12)(39,"label"),e.EFF(40,"N\xfamero contacto"),e.k0s(),e.nrm(41,"input",19),e.DNE(42,ue,2,1,"div",14),e.k0s(),e.j41(43,"div",12)(44,"label"),e.EFF(45,"Genero"),e.k0s(),e.nrm(46,"p-dropdown",20),e.DNE(47,fe,2,1,"div",14),e.k0s()()()()()()),2&n&&(e.R7$(4),e.Y8G("routerLink","/dashboard/employees"),e.R7$(4),e.Y8G("disabled",o.formAllData.invalid),e.R7$(3),e.Y8G("formGroup",o.formAllData),e.R7$(5),e.Y8G("options",o.hoteles),e.R7$(1),e.Y8G("ngIf",o.formAllData.get("hotel_id").invalid&&(o.formAllData.get("hotel_id").dirty||o.formAllData.get("hotel_id").touched)),e.R7$(5),e.Y8G("ngIf",o.formAllData.get("nombres").invalid&&(o.formAllData.get("nombres").dirty||o.formAllData.get("nombres").touched)),e.R7$(5),e.Y8G("ngIf",o.formAllData.get("apellidos").invalid&&(o.formAllData.get("apellidos").dirty||o.formAllData.get("apellidos").touched)),e.R7$(4),e.Y8G("options",o.documentos),e.R7$(1),e.Y8G("ngIf",o.formAllData.get("tipo_documento_id").invalid&&(o.formAllData.get("tipo_documento_id").dirty||o.formAllData.get("tipo_documento_id").touched)),e.R7$(5),e.Y8G("ngIf",o.formAllData.get("numero_documento").invalid&&(o.formAllData.get("numero_documento").dirty||o.formAllData.get("numero_documento").touched)),e.R7$(5),e.Y8G("ngIf",o.formAllData.get("celular").invalid&&(o.formAllData.get("celular").dirty||o.formAllData.get("celular").touched)),e.R7$(4),e.Y8G("options",o.generos),e.R7$(1),e.Y8G("ngIf",o.formAllData.get("genero_id").invalid&&(o.formAllData.get("genero_id").dirty||o.formAllData.get("genero_id").touched)))},dependencies:[v.bT,d.Wk,h._f,r.qT,r.me,r.Q0,r.BC,r.cb,E.n,C.S,x.ms,r.j4,r.JD,g.et]})}}return t})();function he(t,l){1&t&&(e.j41(0,"div",22),e.EFF(1,"Campo requerido"),e.k0s())}function ve(t,l){if(1&t&&(e.j41(0,"div"),e.DNE(1,he,2,0,"div",21),e.k0s()),2&t){const i=e.XpG();e.R7$(1),e.Y8G("ngIf",i.formAllData.get("hotel_id").hasError("required"))}}function Ee(t,l){1&t&&(e.j41(0,"div",22),e.EFF(1,"Campo requerido"),e.k0s())}function Ce(t,l){1&t&&(e.j41(0,"div",22),e.EFF(1,"M\xe1ximo 50 caracteres"),e.k0s())}function ye(t,l){if(1&t&&(e.j41(0,"div"),e.DNE(1,Ee,2,0,"div",21),e.DNE(2,Ce,2,0,"div",21),e.k0s()),2&t){const i=e.XpG();e.R7$(1),e.Y8G("ngIf",i.formAllData.get("nombres").hasError("required")),e.R7$(1),e.Y8G("ngIf",i.formAllData.get("nombres").hasError("maxlength"))}}function be(t,l){1&t&&(e.j41(0,"div",22),e.EFF(1,"Campo requerido"),e.k0s())}function xe(t,l){1&t&&(e.j41(0,"div",22),e.EFF(1,"M\xe1ximo 50 caracteres"),e.k0s())}function ke(t,l){if(1&t&&(e.j41(0,"div"),e.DNE(1,be,2,0,"div",21),e.DNE(2,xe,2,0,"div",21),e.k0s()),2&t){const i=e.XpG();e.R7$(1),e.Y8G("ngIf",i.formAllData.get("apellidos").hasError("required")),e.R7$(1),e.Y8G("ngIf",i.formAllData.get("apellidos").hasError("maxlength"))}}function De(t,l){1&t&&(e.j41(0,"div",22),e.EFF(1,"Campo requerido"),e.k0s())}function Te(t,l){if(1&t&&(e.j41(0,"div"),e.DNE(1,De,2,0,"div",21),e.k0s()),2&t){const i=e.XpG();e.R7$(1),e.Y8G("ngIf",i.formAllData.get("tipo_documento_id").hasError("required"))}}function Ie(t,l){1&t&&(e.j41(0,"div",22),e.EFF(1,"Campo requerido"),e.k0s())}function Fe(t,l){1&t&&(e.j41(0,"div",22),e.EFF(1,"M\xe1ximo 20 caracteres"),e.k0s())}function Ae(t,l){if(1&t&&(e.j41(0,"div"),e.DNE(1,Ie,2,0,"div",21),e.DNE(2,Fe,2,0,"div",21),e.k0s()),2&t){const i=e.XpG();e.R7$(1),e.Y8G("ngIf",i.formAllData.get("numero_documento").hasError("required")),e.R7$(1),e.Y8G("ngIf",i.formAllData.get("numero_documento").hasError("maxlength"))}}function je(t,l){1&t&&(e.j41(0,"div",22),e.EFF(1,"Campo requerido"),e.k0s())}function Ge(t,l){if(1&t&&(e.j41(0,"div"),e.DNE(1,je,2,0,"div",21),e.k0s()),2&t){const i=e.XpG();e.R7$(1),e.Y8G("ngIf",i.formAllData.get("celular").hasError("required"))}}function Re(t,l){1&t&&(e.j41(0,"div",22),e.EFF(1,"Campo requerido"),e.k0s())}function Ne(t,l){if(1&t&&(e.j41(0,"div"),e.DNE(1,Re,2,0,"div",21),e.k0s()),2&t){const i=e.XpG();e.R7$(1),e.Y8G("ngIf",i.formAllData.get("genero_id").hasError("required"))}}let $e=(()=>{class t{constructor(i,n,o,m,y){this.FB=i,this.spinner=n,this.employeeService=o,this.router=m,this.route=y}ngOnInit(){this.buildForm();const i=this.route.snapshot.paramMap.get("id");i&&(this.idEmpleado=+i,this.editEmployee(this.idEmpleado))}buildForm(){this.formAllData=this.FB.group({nombres:["",[r.k0.required,r.k0.maxLength(50)]],apellidos:["",[r.k0.required,r.k0.maxLength(50)]],tipo_documento_id:[null,r.k0.required],numero_documento:["",[r.k0.required,r.k0.maxLength(20)]],celular:["",r.k0.required],genero_id:[null,r.k0.required],hotel_id:[null,r.k0.required]})}editEmployee(i){this.spinner.show(),this.employeeService.getDataCreate().subscribe(n=>{this.hoteles=n.hoteles,this.generos=n.generos,this.documentos=n.tiposDocumento,this.employeeService.getEmployee(i).subscribe(o=>{this.spinner.hide();let m=this.generos.find(k=>k.id===o.genero_id),y=this.documentos.find(k=>k.id===o.tipo_documento_id),Pe=this.hoteles.find(k=>k.id===o.hotel_id);this.formAllData.patchValue({nombres:o.nombres,apellidos:o.apellidos,tipo_documento_id:y,numero_documento:o.numero_documento,celular:o.celular,genero_id:m,hotel_id:Pe})},o=>{console.log("Error: ",o)})},n=>{console.log("Error: ",n)})}updateEmployee(){this.spinner.show();let i=this.formAllData.value;i.tipo_documento_id=i.tipo_documento_id.id,i.genero_id=i.genero_id.id,i.hotel_id=i.hotel_id.id,i.id=this.idEmpleado,this.employeeService.updateEmployee(i).subscribe(n=>{this.spinner.hide(),"success"==n.code?f().fire({title:"\xc9xito",text:"Empleado actualizado exitosamente.",icon:"success"}).then(()=>{this.router.navigate(["/dashboard/employees"])}):f().fire({title:"Error",text:"Error al actualizar el empleado.",icon:"error"})},n=>{console.log("Error: ",n)})}submitUpdate(){this.formAllData.valid&&this.updateEmployee()}static{this.\u0275fac=function(n){return new(n||t)(e.rXU(r.ok),e.rXU(g.ex),e.rXU(I),e.rXU(d.Ix),e.rXU(d.nX))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-employees-edit"]],decls:48,vars:13,consts:[["type","ball-scale-multiple","size","large","bdColor","rgba(192,192,192,0.8)","template","<img src='assets/loading/cargando.gif' />"],[1,"surface-section","px-4","py-5","md:px-6","lg:px-8"],[1,"flex","align-items-center","lg:flex-row","justify-content-between"],[1,"flex","align-items-center"],["pButton","","pRipple","","label","","icon","pi pi-arrow-left",1,"p-button-outlined","mr-4",3,"routerLink"],[1,"font-medium","text-3xl","text-900"],[1,"text-right"],["pButton","","pRipple","","label","Guardar","icon","",1,"p-button-outlined",3,"disabled","click"],[1,"p-fluid","p-formgrid"],[1,"grid","mt-5"],[3,"formGroup"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-6"],["optionLabel","nombre","formControlName","hotel_id",3,"options"],[4,"ngIf"],["type","text","pInputText","","formControlName","nombres",1,"w-full","mb-3","border-round-3xl"],["type","text","pInputText","","formControlName","apellidos",1,"w-full","mb-3","border-round-3xl"],["optionLabel","nombre","formControlName","tipo_documento_id",3,"options"],["type","text","pInputText","","formControlName","numero_documento",1,"w-full","mb-3","border-round-3xl"],["type","number","pInputText","","formControlName","celular",1,"w-full","mb-3","border-round-3xl"],["optionLabel","nombre","formControlName","genero_id",3,"options"],["style","color: red;",4,"ngIf"],[2,"color","red"]],template:function(n,o){1&n&&(e.nrm(0,"ngx-spinner",0),e.j41(1,"div",1)(2,"div",2)(3,"div",3),e.nrm(4,"button",4),e.j41(5,"div",5),e.EFF(6,"Editar Empleado"),e.k0s()(),e.j41(7,"div",6)(8,"button",7),e.bIt("click",function(){return o.submitUpdate()}),e.k0s()()(),e.j41(9,"div",8)(10,"div",9)(11,"form",10)(12,"div",11)(13,"div",12)(14,"label"),e.EFF(15,"Hotel"),e.k0s(),e.nrm(16,"p-dropdown",13),e.DNE(17,ve,2,1,"div",14),e.k0s(),e.j41(18,"div",12)(19,"label"),e.EFF(20,"Nombres"),e.k0s(),e.nrm(21,"input",15),e.DNE(22,ye,3,2,"div",14),e.k0s(),e.j41(23,"div",12)(24,"label"),e.EFF(25,"Apellidos"),e.k0s(),e.nrm(26,"input",16),e.DNE(27,ke,3,2,"div",14),e.k0s(),e.j41(28,"div",12)(29,"label"),e.EFF(30,"Tipo de documento"),e.k0s(),e.nrm(31,"p-dropdown",17),e.DNE(32,Te,2,1,"div",14),e.k0s(),e.j41(33,"div",12)(34,"label"),e.EFF(35,"N\xfamero documento"),e.k0s(),e.nrm(36,"input",18),e.DNE(37,Ae,3,2,"div",14),e.k0s(),e.j41(38,"div",12)(39,"label"),e.EFF(40,"N\xfamero contacto"),e.k0s(),e.nrm(41,"input",19),e.DNE(42,Ge,2,1,"div",14),e.k0s(),e.j41(43,"div",12)(44,"label"),e.EFF(45,"Genero"),e.k0s(),e.nrm(46,"p-dropdown",20),e.DNE(47,Ne,2,1,"div",14),e.k0s()()()()()()),2&n&&(e.R7$(4),e.Y8G("routerLink","/dashboard/employees"),e.R7$(4),e.Y8G("disabled",o.formAllData.invalid),e.R7$(3),e.Y8G("formGroup",o.formAllData),e.R7$(5),e.Y8G("options",o.hoteles),e.R7$(1),e.Y8G("ngIf",o.formAllData.get("hotel_id").invalid&&(o.formAllData.get("hotel_id").dirty||o.formAllData.get("hotel_id").touched)),e.R7$(5),e.Y8G("ngIf",o.formAllData.get("nombres").invalid&&(o.formAllData.get("nombres").dirty||o.formAllData.get("nombres").touched)),e.R7$(5),e.Y8G("ngIf",o.formAllData.get("apellidos").invalid&&(o.formAllData.get("apellidos").dirty||o.formAllData.get("apellidos").touched)),e.R7$(4),e.Y8G("options",o.documentos),e.R7$(1),e.Y8G("ngIf",o.formAllData.get("tipo_documento_id").invalid&&(o.formAllData.get("tipo_documento_id").dirty||o.formAllData.get("tipo_documento_id").touched)),e.R7$(5),e.Y8G("ngIf",o.formAllData.get("numero_documento").invalid&&(o.formAllData.get("numero_documento").dirty||o.formAllData.get("numero_documento").touched)),e.R7$(5),e.Y8G("ngIf",o.formAllData.get("celular").invalid&&(o.formAllData.get("celular").dirty||o.formAllData.get("celular").touched)),e.R7$(4),e.Y8G("options",o.generos),e.R7$(1),e.Y8G("ngIf",o.formAllData.get("genero_id").invalid&&(o.formAllData.get("genero_id").dirty||o.formAllData.get("genero_id").touched)))},dependencies:[v.bT,d.Wk,h._f,r.qT,r.me,r.Q0,r.BC,r.cb,E.n,C.S,x.ms,r.j4,r.JD,g.et]})}}return t})(),we=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({imports:[d.iI.forChild([{path:"",component:W,canActivate:[P.q],data:{permissions:["administracion.facturacion"]}},{path:":id/edit",component:$e,canActivate:[P.q],data:{permissions:["administracion.facturacion"]}},{path:"employees-create",component:ge,canActivate:[P.q],data:{permissions:["administracion.facturacion"]}}]),d.iI]})}}return t})(),Ye=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({providers:[{provide:T.a7,useClass:X.R,multi:!0},I],imports:[v.MD,we,b.bG,F.e,r.YN,h.tm,E.Z,A.MB,j.m,G.wZ,C.u,R.f,x.kr,N.Ko,$.O3,w.P,B.RZ.forRoot(),r.X1,g.PO,a.I,_.dL,p.iV,c.P]})}}return t})()},4827:(S,D,s)=>{s.d(D,{P:()=>g});var v=s(177),r=s(540),b=s(5779),F=s(2816);let g=(()=>{class a{static \u0275fac=function(c){return new(c||a)};static \u0275mod=r.$C({type:a});static \u0275inj=r.G2t({imports:[v.MD,F.I,b.Gg,b.Gg]})}return a})()}}]);