"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[669],{7669:(et,f,n)=>{n.r(f),n.d(f,{TypeRoomsModule:()=>tt});var d=n(6814),s=n(95),T=n(9664),A=n(6068),u=n(707),b=n(4480),U=n(4104),E=n(6340),J=n(6022),v=n(3714),N=n(6218),y=n(2160),Z=n(1865),q=n(354),R=n(7213),c=n(9862),I=n(8712),P=n(5722),g=n(8672),w=n(1712),_=n(86),h=n(2791),H=n(3519),p=n.n(H),t=n(4946),M=n(4444);let C=(()=>{class o{constructor(e){this.httpClient=e,this.baseUrl=M.D.url,this.endpointListar="/tipoHabitacionListar",this.endpointTypeRoomGet="/tipoHabitacionEditar/",this.endpointTypeRoomUpdate="/tipoHabitacionActualizar/",this.endpointTypeRoomCreate="/tipoHabitacionCrear",this.endpointDelete="/tipoHabitacionEliminar/"}getTypeRoom(e){return this.httpClient.get(`${this.baseUrl+this.endpointTypeRoomGet+e}`)}getAll(e,a="",i=1){const r={headers:new c.WM({"Content-Type":"application/json"})};return this.httpClient.post(`${this.baseUrl+this.endpointListar}?per_page=${e}&page=${i}&search=${a}`,r)}createTypeRoom(e){return this.httpClient.post(`${this.baseUrl+this.endpointTypeRoomCreate}`,e)}updateTypeRoom(e){return this.httpClient.post(`${this.baseUrl+this.endpointTypeRoomUpdate}`,e)}deleteTypeRoom(e){return this.httpClient.post(`${this.baseUrl+this.endpointDelete}`,e)}static#t=this.\u0275fac=function(a){return new(a||o)(t.LFG(c.eN))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var B=n(5219);function F(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"button",44),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.openModal())}),t.qZA()}}function S(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"div",45),t._UZ(1,"span"),t.TgZ(2,"span",46)(3,"form",22)(4,"div",47)(5,"input",48),t.NdJ("input",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.searchInput())}),t.qZA(),t.TgZ(6,"button",49),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.search(i.dt))}),t.qZA()()()()()}if(2&o){const e=t.oxw();t.xp6(3),t.Q6J("formGroup",e.formSearch)}}function Q(o,l){1&o&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Nombre"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Hotel"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Acciones"),t.qZA()())}function j(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"p-button",53),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,r=t.oxw();return t.KtG(r.editTypeRoom(i.id))}),t.qZA()}}function k(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"p-button",54),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,r=t.oxw();return t.KtG(r.confirmDelete(i.id))}),t.qZA()}}function Y(o,l){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"titlecase"),t.qZA(),t.TgZ(7,"td",50),t.YNc(8,j,1,0,"p-button",51),t._UZ(9,"p-confirmDialog"),t.YNc(10,k,1,0,"p-button",52),t.qZA()()),2&o){const e=l.$implicit,a=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,4,e.nombre)),t.xp6(3),t.Oqu(t.lcZ(6,6,e.hotel.nombre)),t.xp6(3),t.Q6J("ngIf",a.permisoActualizar),t.xp6(2),t.Q6J("ngIf",a.permisoEliminar)}}function z(o,l){1&o&&(t.TgZ(0,"tr")(1,"td",55),t._uU(2,"Cargando informacion porfavor espere ..."),t.qZA()())}function L(o,l){1&o&&(t.TgZ(0,"div",56),t._uU(1,"Campo requerido"),t.qZA())}function $(o,l){1&o&&(t.TgZ(0,"div",56),t._uU(1,"Campo requerido"),t.qZA())}function D(o,l){1&o&&(t.TgZ(0,"div",56),t._uU(1,"Campo requerido"),t.qZA())}function G(o,l){1&o&&(t.TgZ(0,"div",56),t._uU(1,"Campo requerido"),t.qZA())}const O=function(){return{"min-width":"50rem"}},K=function(){return["nombre","Hotel","acciones"]},x=function(){return{width:"50vw"}};let V=(()=>{class o{constructor(e,a,i){this.FB=e,this.spinner=a,this.typeRoomService=i,this.permisoCrear=h.e.hasPermission(["administracion.tipoHabitacion.crear"]),this.permisoActualizar=h.e.hasPermission(["administracion.tipoHabitacion.actualizar"]),this.permisoEliminar=h.e.hasPermission(["administracion.tipoHabitacion.eliminar"]),this.loadingTable=!1,this.pageCount=10,this.visibleModalTypeRoom=!0,this.imagen=null,this.visibleModalTypeRoomEditar=!1,this.idEditando=0,this.first=0,this.rows=8,this.pageActual=1,this.ultimaPage=1,this.disablePageLeft=!1,this.disablePageRight=!1}ngOnInit(){this.buildForm(),this.getIndex(),this.visibleModalTypeRoom=!1}buildForm(){this.formSearch=this.FB.group({search:["",[]]}),this.formCreateTypeRoom=this.FB.group({nombre:["",[s.kI.required]],hotel_id:["",[s.kI.required]],puerta:["",[s.kI.required]]}),this.formEditTypeRoom=this.FB.group({nombre:["",[s.kI.required]],hotel_id:["",[s.kI.required]],puerta:["",[s.kI.required]]})}openModal(){this.onCreate()}onCreate(){this.formCreateTypeRoom.reset(),this.typeRoomService.getTypeRoom(0).subscribe(e=>{this.hotel=e.hotel,this.visibleModalTypeRoom=!0},e=>{console.log("Error: ",e)})}onRemove(e){this.imagen=null}onSelect(e){this.imagen=e.currentFiles[0]}onPage(e){this.pageCount=e.rows,this.getIndex("",this.pageCount)}submitCreate(){console.log(this.formCreateTypeRoom.valid),this.formCreateTypeRoom.valid?this.newTypeRoom():this.formCreateTypeRoom.markAllAsTouched()}newTypeRoom(){this.visibleModalTypeRoom=!0,this.spinner.show();let e={puerta:this.formCreateTypeRoom.get("puerta").value},a=this.formCreateTypeRoom.value;a.hotel_id=a.hotel_id.id,a.estado=1,a.diseno_json=JSON.stringify(e),this.typeRoomService.createTypeRoom(a).subscribe(i=>{this.spinner.hide(),this.imagen=null,this.visibleModalTypeRoom=!1,"success"==i.code?(p().fire({title:"Exito",text:"Tipo de habitaci\xf3n creado exitosamente.",icon:"success"}),this.getIndex()):p().fire({title:"Error",text:"Error al crear el tipo de habitaci\xf3n.",icon:"error"})},i=>{console.log("Error: ",i)})}editTypeRoom(e){this.idEditando=e,this.spinner.show(),this.typeRoomService.getTypeRoom(e).subscribe(a=>{this.spinner.hide(),this.hotel=a.hotel,this.dataEditarInfoTypeRoom=a.typeRoom,this.formEditTypeRoom.get("nombre").setValue(a.tiposHabitaciones.nombre),this.formEditTypeRoom.get("puerta").setValue(JSON.parse(a.tiposHabitaciones.diseno_json).puerta),setTimeout(()=>{this.visibleModalTypeRoomEditar=!0},1)},a=>{console.log("Error: ",a)})}updateTypeRoom(){this.spinner.show();let e=this.formEditTypeRoom.value;e.hotel_id=e.hotel_id.id,e.id=this.idEditando,e.estado=1;let a={puerta:this.formEditTypeRoom.get("puerta").value};e.diseno_json=JSON.stringify(a),this.typeRoomService.updateTypeRoom(e).subscribe(i=>{this.spinner.hide(),this.imagen=null,this.visibleModalTypeRoomEditar=!1,"success"==i.code?(p().fire({title:"Exito",text:"Tipo de habitaci\xf3n actualizada exitosamente.",icon:"success"}),this.getIndex()):p().fire({title:"Error",text:"Error al actualizar el tipo de habitaci\xf3n.",icon:"error"})},i=>{console.log("Error: ",i)})}submitUpdate(){this.formEditTypeRoom.valid&&this.updateTypeRoom()}confirmDelete(e){p().fire({title:"\xbfEstas seguro que deseas eliminar el tipo de habitaci\xf3n?",text:"Ten cuidado esta acci\xf3n no se prodr\xe1 reversar",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, Confirmar",cancelButtonText:"Cancelar"}).then(a=>{a.isConfirmed&&(this.spinner.show(),this.typeRoomService.deleteTypeRoom({id:e}).subscribe(i=>{this.spinner.hide(),"success"==i.code?(p().fire({title:"Exito",text:"Tipo de habitaci\xf3n eliminada exitosamente.",icon:"success"}),this.getIndex()):p().fire({title:"Error",text:"Error al eliminar el tipo de habitaci\xf3n.",icon:"error"})},i=>{console.log("Error: ",i)}))})}getIndex(e="",a=this.pageCount,i=1){this.spinner.show(),this.loadingTable=!0,this.typeRoomService.getAll(a,e,i).subscribe(r=>{this.loadingTable=!1,this.typeRoomData=r.data,this.countRegisters=r.total,this.ultimaPage=r.last_page,r.total>a&&(this.disablePageRight=!0),this.validatePage(),this.spinner.hide()},r=>{console.log("Error: ",r),this.spinner.hide()})}searchInput(){let e=this.formSearch.get("search").value;""==e&&this.getIndex(e)}search(e){let a=this.formSearch.get("search").value;this.getIndex(a)}onPageChange(e){this.first=e.first,this.rows=e.rows}leftTable(){this.pageActual=this.pageActual-1,this.getIndex("",this.pageCount,this.pageActual),this.validatePage()}rightTable(){this.pageActual=this.pageActual+1,this.getIndex("",this.pageCount,this.pageActual),this.validatePage()}validatePage(){1==this.pageActual&&(this.disablePageLeft=!1),this.pageActual>1&&(this.disablePageLeft=!0),this.ultimaPage==this.pageActual&&(this.disablePageRight=!1),this.ultimaPage>this.pageActual&&(this.disablePageRight=!0)}static#t=this.\u0275fac=function(a){return new(a||o)(t.Y36(s.qu),t.Y36(g.t2),t.Y36(C))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-type-rooms"]],decls:96,vars:36,consts:[["type","ball-scale-multiple"],[1,"surface-section","px-4","py-5","md:px-6","lg:px-8"],[1,"flex","align-items-start","flex-column","lg:justify-content-between","lg:flex-row"],[1,"font-medium","text-3xl","text-900"],[1,"flex","align-items-center","text-700","flex-wrap"],[1,"mr-5","flex","align-items-center","mt-3"],[1,"mt-3","lg:mt-0"],["pButton","","pRipple","","label","Crear","class","p-button-outlined mr-2","icon","",3,"click",4,"ngIf"],[1,"grid","mt-3"],[1,"col-12"],[1,"card","px-3","py-3"],["responsiveLayout","scroll","selectionMode","multiple","dataKey","usuario",3,"value","tableStyle","loading","rows","globalFilterFields","rowHover","onPage"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","loadingbody"],[2,"text-align","center"],[1,"p-buttonset"],["pButton","","pRipple","","label","","icon","pi pi-arrow-left",3,"disabled","click"],["pButton","","pRipple","",3,"label"],["pButton","","pRipple","","label","","icon","pi pi-arrow-right",3,"disabled","click"],["header","Nuevo Tipo de Habitaci\xf3n",3,"visible","modal","draggable","resizable","visibleChange"],[3,"formGroup"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-6"],["type","text","pInputText","","formControlName","nombre",1,"w-full","mb-3","border-round-3xl"],["style","color: red;",4,"ngIf"],["optionLabel","nombre","formControlName","hotel_id",3,"options"],[1,"grid","formgrid",2,"text-align","center"],[1,"col-12","md:col-4"],["name","puerta","value","puerta1","formControlName","puerta","id","puerta1"],["for","puerta1"],[1,"field-radiobutton"],["src","assets/puertas/puerta1.jpg","width","100%","height","80%"],["name","puerta","value","puerta2","formControlName","puerta","id","puerta2"],["for","puerta3"],["src","assets/puertas/puerta2.jpg","width","100%","height","80%"],["name","puerta","value","puerta3","formControlName","puerta","id","puerta3"],["for","puerta2"],["src","assets/puertas/puerta3.jpg","width","100%","height","80%"],[1,"field","col-12","md:col-12"],["pButton","","pRipple","","label","Crear Tipo de Habitaci\xf3n","icon","","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl",3,"disabled","click"],["header","Editar Tipo de Hotel",3,"visible","modal","draggable","resizable","visibleChange"],["pButton","","pRipple","","label","Editar Tipo de Habitaci\xf3n","icon","","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl",3,"disabled","click"],["pButton","","pRipple","","label","Crear","icon","",1,"p-button-outlined","mr-2",3,"click"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[1,"p-inputgroup"],["formControlName","search","pInputText","","type","text","placeholder","Buscar...",1,"w-full","sm:w-auto",3,"input"],["type","button","pButton","","pRipple","",1,"pi","pi-search",3,"click"],[1,"flex","gap-2"],["icon","pi pi-pencil","severity","info",3,"click",4,"ngIf"],["icon","pi pi-trash","severity","danger",3,"click",4,"ngIf"],["icon","pi pi-pencil","severity","info",3,"click"],["icon","pi pi-trash","severity","danger",3,"click"],["colspan","8"],[2,"color","red"]],template:function(a,i){1&a&&(t._UZ(0,"ngx-spinner",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div")(4,"div",3),t._uU(5,"Tipos de Habitaci\xf3n"),t.qZA(),t.TgZ(6,"div",4),t._UZ(7,"div",5),t.qZA()(),t.TgZ(8,"div",6),t.YNc(9,F,1,0,"button",7),t.qZA()()(),t.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"p-table",11),t.NdJ("onPage",function(m){return i.onPage(m)}),t.YNc(14,S,7,1,"ng-template",12),t.YNc(15,Q,7,0,"ng-template",13),t.YNc(16,Y,11,8,"ng-template",14),t.YNc(17,z,3,0,"ng-template",15),t.qZA(),t._UZ(18,"br"),t.TgZ(19,"div",16)(20,"span",17)(21,"button",18),t.NdJ("click",function(){return i.leftTable()}),t.qZA(),t._UZ(22,"button",19),t.TgZ(23,"button",20),t.NdJ("click",function(){return i.rightTable()}),t.qZA()()()()()(),t.TgZ(24,"p-dialog",21),t.NdJ("visibleChange",function(m){return i.visibleModalTypeRoom=m}),t.TgZ(25,"div",9)(26,"form",22)(27,"div",23)(28,"div",24)(29,"label"),t._uU(30,"Nombre"),t.qZA(),t._UZ(31,"input",25),t.YNc(32,L,2,0,"div",26),t.qZA(),t.TgZ(33,"div",24)(34,"label"),t._uU(35,"Hotel"),t.qZA(),t._UZ(36,"p-dropdown",27),t.YNc(37,$,2,0,"div",26),t.qZA()(),t._UZ(38,"br"),t.TgZ(39,"div",28)(40,"div",29),t._UZ(41,"p-radioButton",30),t.TgZ(42,"label",31),t._uU(43," Puerta 1 "),t.qZA(),t.TgZ(44,"div",32),t._UZ(45,"img",33),t.qZA()(),t.TgZ(46,"div",29),t._UZ(47,"p-radioButton",34),t.TgZ(48,"label",35),t._uU(49," Puerta 2 "),t.qZA(),t.TgZ(50,"div",32),t._UZ(51,"img",36),t.qZA()(),t.TgZ(52,"div",29),t._UZ(53,"p-radioButton",37),t.TgZ(54,"label",38),t._uU(55," Puerta 3 "),t.qZA(),t.TgZ(56,"div",32),t._UZ(57,"img",39),t.qZA()()(),t.TgZ(58,"div",40)(59,"button",41),t.NdJ("click",function(){return i.submitCreate()}),t.qZA()()()()(),t.TgZ(60,"p-dialog",42),t.NdJ("visibleChange",function(m){return i.visibleModalTypeRoomEditar=m}),t.TgZ(61,"div",9)(62,"form",22)(63,"div",23)(64,"div",24)(65,"label"),t._uU(66,"Nombre"),t.qZA(),t._UZ(67,"input",25),t.YNc(68,D,2,0,"div",26),t.qZA(),t.TgZ(69,"div",24)(70,"label"),t._uU(71,"Hotel"),t.qZA(),t._UZ(72,"p-dropdown",27),t.YNc(73,G,2,0,"div",26),t.qZA()(),t._UZ(74,"br"),t.TgZ(75,"div",28)(76,"div",29),t._UZ(77,"p-radioButton",30),t.TgZ(78,"label",31),t._uU(79," Puerta 1 "),t.qZA(),t.TgZ(80,"div",32),t._UZ(81,"img",33),t.qZA()(),t.TgZ(82,"div",29),t._UZ(83,"p-radioButton",34),t.TgZ(84,"label",35),t._uU(85," Puerta 2 "),t.qZA(),t.TgZ(86,"div",32),t._UZ(87,"img",36),t.qZA()(),t.TgZ(88,"div",29),t._UZ(89,"p-radioButton",37),t.TgZ(90,"label",38),t._uU(91," Puerta 3 "),t.qZA(),t.TgZ(92,"div",32),t._UZ(93,"img",39),t.qZA()()(),t.TgZ(94,"div",40)(95,"button",43),t.NdJ("click",function(){return i.submitUpdate()}),t.qZA()()()()()),2&a&&(t.xp6(9),t.Q6J("ngIf",i.permisoCrear),t.xp6(4),t.Q6J("value",i.typeRoomData)("tableStyle",t.DdM(32,O))("loading",i.loadingTable)("rows",8)("globalFilterFields",t.DdM(33,K))("rowHover",!0),t.xp6(8),t.Q6J("disabled",!i.disablePageLeft),t.xp6(1),t.Q6J("label",i.pageActual),t.xp6(1),t.Q6J("disabled",!i.disablePageRight),t.xp6(1),t.Akn(t.DdM(34,x)),t.Q6J("visible",i.visibleModalTypeRoom)("modal",!0)("draggable",!1)("resizable",!1),t.xp6(2),t.Q6J("formGroup",i.formCreateTypeRoom),t.xp6(6),t.Q6J("ngIf",i.formCreateTypeRoom.get("nombre").hasError("required")),t.xp6(4),t.Q6J("options",i.hotel),t.xp6(1),t.Q6J("ngIf",i.formCreateTypeRoom.get("hotel_id").hasError("required")),t.xp6(22),t.Q6J("disabled",i.formCreateTypeRoom.invalid),t.xp6(1),t.Akn(t.DdM(35,x)),t.Q6J("visible",i.visibleModalTypeRoomEditar)("modal",!0)("draggable",!1)("resizable",!1),t.xp6(2),t.Q6J("formGroup",i.formEditTypeRoom),t.xp6(6),t.Q6J("ngIf",i.formEditTypeRoom.get("nombre").hasError("required")),t.xp6(4),t.Q6J("options",i.hotel),t.xp6(1),t.Q6J("ngIf",i.formEditTypeRoom.get("hotel_id").hasError("required")),t.xp6(22),t.Q6J("disabled",i.formEditTypeRoom.invalid))},dependencies:[d.O5,T.iA,B.jx,u.Hq,u.zx,s._Y,s.Fj,s.JJ,s.JL,b.H,v.o,y.Lt,Z.EU,R.V,s.sg,s.u,g.Ro,d.rS],styles:["svg[_ngcontent-%COMP%]{width:45%}"]})}return o})();var X=n(2506);let W=(()=>{class o{static#t=this.\u0275fac=function(a){return new(a||o)};static#e=this.\u0275mod=t.oAB({type:o});static#i=this.\u0275inj=t.cJS({imports:[_.Bz.forChild([{path:"",component:V,canActivate:[X.a],data:{permissions:["administracion.tipoHabitacion"]}}]),_.Bz]})}return o})(),tt=(()=>{class o{static#t=this.\u0275fac=function(a){return new(a||o)};static#e=this.\u0275mod=t.oAB({type:o});static#i=this.\u0275inj=t.cJS({providers:[{provide:c.TP,useClass:I.n,multi:!0},C],imports:[d.ez,W,T.U$,A.O,s.u5,u.hJ,b.T,U.EV,E.V,J.Xt,v.j,N.A,y.kW,Z.cc,q.L$,R.S,P.ii.forRoot(),s.UX,g.ef,w.U]})}return o})()}}]);