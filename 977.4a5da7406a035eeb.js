"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[977],{9977:(pt,f,o)=>{o.r(f),o.d(f,{PermissionsModule:()=>it});var b=o(6814),r=o(95),P=o(86),p=o(5219),_=o(3519),v=o.n(_),d=o(2791),t=o(4946),N=o(5619),I=o(7398),w=o(4444),x=o(9862);let C=(()=>{class n{constructor(e){this.httpClient=e,this.dataSubject=new N.X([]),this.data=this.dataSubject.asObservable(),this.baseUrl=w.D.url,this.endpointCrear="/permisoCrear",this.endpointPListar="/permisoListar",this.endpointPMostrar="/permisoMostrar",this.endpointPActualizar="/permisoActualizar",this.endpointPEliminar="/permisoEliminar"}getPermissions(e,i="",s=1){return this.httpClient.post(`${this.baseUrl+this.endpointPListar}?per_page=${e}&page=${s}&search=${i}`,{id:"",codigo:"",nombre:"",descripcion:"",id_padre:"",estado:""})}CreatePermissions(e){return this.httpClient.post(`${this.baseUrl+this.endpointCrear}`,e)}getPermissionById(e){return this.httpClient.get(`${this.baseUrl+this.endpointPMostrar}/${e}`).pipe((0,I.U)(i=>i))}updatePermissions(e){return this.httpClient.post(`${this.baseUrl+this.endpointPActualizar}`,e)}deletePermissions(e){return this.httpClient.post(`${this.baseUrl+this.endpointPEliminar}`,{id:e})}refresPermissionData(){this.getPermissions(30).subscribe(e=>{console.log(e.data),this.dataSubject.next(e.data)},e=>{console.log("Error: ",e)})}static#t=this.\u0275fac=function(i){return new(i||n)(t.LFG(x.eN))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var U=o(8672),T=o(1455),u=o(4104),g=o(7213),y=o(5817),S=o(2656),h=o(9664),c=o(707),Z=o(4480),A=o(3714);function J(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.modalNewP())}),t.qZA()}}function E(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"div",33)(1,"h5",34),t._uU(2,"Lista de Permisos"),t.qZA(),t.TgZ(3,"span",35)(4,"form",36)(5,"div",37)(6,"input",38),t.NdJ("input",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.searchInput())}),t.qZA(),t.TgZ(7,"button",39),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.search(s.dt))}),t.qZA()()()()()}if(2&n){const e=t.oxw();t.xp6(4),t.Q6J("formGroup",e.formSearch)}}function Y(n,l){1&n&&(t.TgZ(0,"tr")(1,"th",40),t._uU(2,"Nombre"),t.qZA(),t.TgZ(3,"th",40),t._uU(4,"C\xf3digo"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Descripci\xf3n"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Acciones"),t.qZA()())}function B(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"p-button",44),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,a=t.oxw();return t.KtG(a.getPermission(s.id))}),t.qZA()}}function M(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"p-button",45),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,a=t.oxw();return t.KtG(a.confirmDelete(s.id))}),t.qZA()}}function F(n,l){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td",41),t.YNc(8,B,1,0,"p-button",42),t._UZ(9,"p-confirmDialog"),t.YNc(10,M,1,0,"p-button",43),t.qZA()()),2&n){const e=l.$implicit,i=t.oxw();t.xp6(2),t.Oqu(e.nombre),t.xp6(2),t.Oqu(e.codigo),t.xp6(2),t.Oqu(e.descripcion),t.xp6(2),t.Q6J("ngIf",i.permisoActualizar),t.xp6(2),t.Q6J("ngIf",i.permisoEliminar)}}function D(n,l){if(1&n&&t._UZ(0,"input",46),2&n){const e=t.oxw();t.Q6J("value",e.permissionData.nombre)}}function R(n,l){if(1&n&&t._UZ(0,"input",47),2&n){const e=t.oxw();t.Q6J("value",e.permissionData.codigo)}}const Q=function(){return{"min-width":"50rem"}},z=function(){return["nombre","medida","precio","cantidad","inventario","acciones"]},$=function(){return{width:"50vw"}},j=function(){return{width:"500px"}};let L=(()=>{class n{constructor(e,i,s,a,m,st,nt,ot,rt,at,lt,mt){this.permissionsService=e,this.spinner=i,this.hotelsService=s,this.confirmationService=a,this.toastModule=m,this.dialogModule=st,this.messageService=nt,this.usersService=ot,this.breadcrumbService=rt,this.tableModule=at,this.buttonModule=lt,this.cdRef=mt,this.permisoCrear=d.e.hasPermission(["administracion.permisos.crear"]),this.permisoActualizar=d.e.hasPermission(["administracion.permisos.actualizar"]),this.permisoEliminar=d.e.hasPermission(["administracion.permisos.eliminar"]),this.editarH=!1,this.crearH=!1,this.pageCount=10,this.editarPermit=!1,this.crearPermit=!1,this.pageActual=1,this.ultimaPage=1,this.disablePageLeft=!1,this.disablePageRight=!1,this.registrosContar=0,this.loadingTable=!1,this.formSearch=new r.cw({search:new r.NI("",[])}),this.formNewP=new r.cw({nombre:new r.NI("",r.kI.required),codigo:new r.NI("",r.kI.required),descripcion:new r.NI("",r.kI.required)}),this.formEditP=new r.cw({nombre:new r.NI("",r.kI.required),codigo:new r.NI("",r.kI.required),id:new r.NI("",r.kI.required)})}ngOnInit(){this.getIndex(),this.permissionsService.data.subscribe(e=>{this.permission=e})}createPermission(){const e=this.formNewP.value;this.formNewP.reset(),this.permissionsService.CreatePermissions(e).subscribe(i=>{this.messageService.add({severity:"info",summary:"Confirmaci\xf3n Exitosa",detail:"Usuario creado.",sticky:!0,life:200}),this.crearPermit=!1,this.getIndex()},i=>{console.log("Error:",i)})}getIndex(e="",i=this.pageCount,s=1){this.spinner.show(),this.loadingTable=!0,this.permissionsService.getPermissions(i,e,s).subscribe(a=>{this.loadingTable=!1,this.permission=a.data,this.totalPermission=a.total,this.ultimaPage=a.last_page,this.registrosContar=a.total,this.ultimaPage=a.last_page,a.total>i&&(this.disablePageRight=!0),this.validatePage(),this.spinner.hide()},a=>{console.log("Error: ",a)})}getPermission(e){this.permissionsService.getPermissionById(e).subscribe(i=>{this.permissionData=i,console.log(this.permissionData),this.formEditP.get("nombre").setValue(i.nombre),this.formEditP.get("codigo").setValue(i.codigo),this.formEditP.get("codigo").disable(),this.formEditP.get("id").setValue(i.id),this.editarPermit=!0})}updatePermission(){this.formEditP.get("id").setValue(this.permissionData.id);const e=this.formEditP.value;console.log(e),this.permissionsService.updatePermissions(e).subscribe(i=>{console.log(i),this.editarPermit=!1,this.permissionsService.refresPermissionData()},i=>{console.log("Error:",i)})}confirmDelete(e){console.log(e),v().fire({title:"\xbfEstas Seguro que deseas eliminar el Permiso?",text:"Ten cuidado esta acci\xf3n no se prodr\xe1 reversar",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, Confirmar",cancelButtonText:"Cancelar"}).then(i=>{i.isConfirmed&&(this.permissionsService.deletePermissions(e).subscribe(s=>{console.log(s),this.permissionsService.refresPermissionData()}),v().fire({title:"Confirmaci\xf3n",text:"El Permiso ha sido eliminado.",icon:"success"}))})}modalNewP(){this.crearPermit=!0}searchInput(){let e=this.formSearch.get("search").value;""==e&&this.getIndex(e)}search(e){let i=this.formSearch.get("search").value;this.getIndex(i)}onPage(e){this.pageCount=e.rows,this.getIndex("",this.pageCount)}leftTable(){this.pageActual=this.pageActual-1,this.getIndex("",this.pageCount,this.pageActual),this.validatePage()}rightTable(){this.pageActual=this.pageActual+1,this.getIndex("",this.pageCount,this.pageActual),this.validatePage()}validatePage(){1==this.pageActual&&(this.disablePageLeft=!1),this.pageActual>1&&(this.disablePageLeft=!0),this.ultimaPage==this.pageActual&&(this.disablePageRight=!1),this.ultimaPage>this.pageActual&&(this.disablePageRight=!0)}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(C),t.Y36(U.t2),t.Y36(T.s),t.Y36(p.YP),t.Y36(u.EV),t.Y36(g.S),t.Y36(p.ez),t.Y36(y.f),t.Y36(S.p),t.Y36(h.U$),t.Y36(c.hJ),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-permisssions"]],features:[t._Bn([p.YP,p.ez])],decls:58,vars:28,consts:[[1,"surface-section","px-4","py-5","md:px-6","lg:px-8"],[1,"flex","align-items-start","flex-column","lg:justify-content-between","lg:flex-row"],[1,"font-medium","text-3xl","text-900"],[1,"flex","align-items-center","text-700","flex-wrap"],[1,"mr-5","flex","align-items-center","mt-3"],[1,"mt-3","lg:mt-0"],["pButton","","pRipple","","label","Crear","class","p-button-outlined mr-2",3,"click",4,"ngIf"],[1,"grid","mt-3"],[1,"col-12"],[1,"card","px-3","py-3"],["responsiveLayout","scroll","selectionMode","multiple","dataKey","usuario",3,"value","tableStyle","loading","rows","globalFilterFields","rowHover","onPage"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[2,"text-align","center"],[1,"p-buttonset"],["pButton","","pRipple","","label","","icon","pi pi-arrow-left",3,"disabled","click"],["pButton","","pRipple","",3,"label"],["pButton","","pRipple","","label","","icon","pi pi-arrow-right",3,"disabled","click"],["header","Crear un Permiso",3,"visible","modal","draggable","resizable","visibleChange"],[3,"formGroup","ngSubmit"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-4"],["type","text","placeholder","Auditar","pInputText","","formControlName","nombre",1,"w-full","mb-3","border-round-3xl"],["type","text","placeholder","aut","pInputText","","formControlName","codigo",1,"w-full","mb-3","border-round-3xl"],["type","text","pInputText","","formControlName","descripcion",1,"w-full","mb-3","border-round-3xl"],[1,"field","col-12","md:col-12"],["pButton","","pRipple","","label","Crear Permiso","icon","pi pi-user","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl"],["header","Editar Rol","modal","modal",3,"visible","visibleChange","onVisibleChange"],["type","text","pInputText","","class","w-full mb-3 border-round-3xl","formControlName","nombre",3,"value",4,"ngIf"],["type","text","pInputText","","class","w-full mb-3 border-round-3xl","formControlName","codigo",3,"value",4,"ngIf"],["pButton","","pRipple","","label","Editar Permiso","icon","pi pi-user","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl"],["pButton","","pRipple","","label","Crear",1,"p-button-outlined","mr-2",3,"click"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[3,"formGroup"],[1,"p-inputgroup"],["formControlName","search","pInputText","","type","text","placeholder","Buscar...",1,"w-full","sm:w-auto",3,"input"],["type","button","pButton","","pRipple","",1,"pi","pi-search",3,"click"],[2,"width","20%"],[1,"flex","gap-2"],["icon","pi pi-user-edit","severity","info",3,"click",4,"ngIf"],["icon","pi pi-trash","severity","danger",3,"click",4,"ngIf"],["icon","pi pi-user-edit","severity","info",3,"click"],["icon","pi pi-trash","severity","danger",3,"click"],["type","text","pInputText","","formControlName","nombre",1,"w-full","mb-3","border-round-3xl",3,"value"],["type","text","pInputText","","formControlName","codigo",1,"w-full","mb-3","border-round-3xl",3,"value"]],template:function(i,s){1&i&&(t._UZ(0,"p-toast"),t.TgZ(1,"div",0)(2,"div",1)(3,"div")(4,"div",2),t._uU(5,"Permisos"),t.qZA(),t.TgZ(6,"div",3)(7,"div",4)(8,"span"),t._uU(9),t.qZA()()()(),t.TgZ(10,"div",5),t.YNc(11,J,1,0,"button",6),t.qZA()()(),t.TgZ(12,"div",7)(13,"div",8)(14,"div",9)(15,"p-table",10),t.NdJ("onPage",function(m){return s.onPage(m)}),t.YNc(16,E,8,1,"ng-template",11),t.YNc(17,Y,9,0,"ng-template",12),t.YNc(18,F,11,5,"ng-template",13),t.qZA(),t._UZ(19,"br"),t.TgZ(20,"div",14)(21,"span",15)(22,"button",16),t.NdJ("click",function(){return s.leftTable()}),t.qZA(),t._UZ(23,"button",17),t.TgZ(24,"button",18),t.NdJ("click",function(){return s.rightTable()}),t.qZA()()()()()(),t.TgZ(25,"p-dialog",19),t.NdJ("visibleChange",function(m){return s.crearPermit=m}),t.TgZ(26,"div",8)(27,"h5"),t._uU(28,"Completa el formulario"),t.qZA(),t.TgZ(29,"form",20),t.NdJ("ngSubmit",function(){return s.createPermission()}),t.TgZ(30,"div",21)(31,"div",22)(32,"label"),t._uU(33,"Nombre del Permiso"),t.qZA(),t._UZ(34,"input",23),t.qZA(),t.TgZ(35,"div",22)(36,"label"),t._uU(37,"C\xf3digo"),t.qZA(),t._UZ(38,"input",24),t.qZA(),t.TgZ(39,"div",22)(40,"label"),t._uU(41,"Descripcion"),t.qZA(),t._UZ(42,"input",25),t.qZA(),t.TgZ(43,"div",26),t._UZ(44,"button",27),t.qZA()()()()(),t.TgZ(45,"p-dialog",28),t.NdJ("visibleChange",function(m){return s.editarPermit=m})("onVisibleChange",function(){return s.editarPermit=!s.editarPermit}),t.TgZ(46,"form",20),t.NdJ("ngSubmit",function(){return s.updatePermission()}),t.TgZ(47,"div",21)(48,"div",22)(49,"label"),t._uU(50,"Nombre del Permiso"),t.qZA(),t.YNc(51,D,1,1,"input",29),t.qZA(),t.TgZ(52,"div",22)(53,"label"),t._uU(54,"C\xf3digo"),t.qZA(),t.YNc(55,R,1,1,"input",30),t.qZA(),t.TgZ(56,"div",26),t._UZ(57,"button",31),t.qZA()()()()),2&i&&(t.xp6(9),t.hij("Permisos Creados ",s.registrosContar,""),t.xp6(2),t.Q6J("ngIf",s.permisoCrear),t.xp6(4),t.Q6J("value",s.permission)("tableStyle",t.DdM(24,Q))("loading",s.loadingTable)("rows",8)("globalFilterFields",t.DdM(25,z))("rowHover",!0),t.xp6(7),t.Q6J("disabled",!s.disablePageLeft),t.xp6(1),t.Q6J("label",s.pageActual),t.xp6(1),t.Q6J("disabled",!s.disablePageRight),t.xp6(1),t.Akn(t.DdM(26,$)),t.Q6J("visible",s.crearPermit)("modal",!0)("draggable",!1)("resizable",!1),t.xp6(4),t.Q6J("formGroup",s.formNewP),t.xp6(16),t.Akn(t.DdM(27,j)),t.Q6J("visible",s.editarPermit),t.xp6(1),t.Q6J("formGroup",s.formEditP),t.xp6(5),t.Q6J("ngIf",s.editarPermit),t.xp6(4),t.Q6J("ngIf",s.editarPermit))},dependencies:[b.O5,h.iA,p.jx,c.Hq,c.zx,r._Y,r.Fj,r.JJ,r.JL,Z.H,u.FN,A.o,g.V,r.sg,r.u],encapsulation:2})}return n})();var q=o(2506);let G=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#i=this.\u0275inj=t.cJS({imports:[P.Bz.forChild([{path:"",component:L,canActivate:[q.a],data:{permissions:["administracion.permisos"]}}]),P.Bz]})}return n})();var H=o(6068),V=o(6340),O=o(6022),k=o(6218),K=o(2160),X=o(1865),W=o(354),tt=o(8712),et=o(5722);let it=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#i=this.\u0275inj=t.cJS({providers:[{provide:x.TP,useClass:tt.n,multi:!0},C,T.s],imports:[b.ez,G,h.U$,H.O,r.u5,c.hJ,Z.T,u.EV,V.V,O.Xt,A.j,k.A,K.kW,X.cc,W.L$,g.S,et.ii.forRoot(),r.UX]})}return n})()}}]);