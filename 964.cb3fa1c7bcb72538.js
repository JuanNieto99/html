"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[964],{964:(X,f,s)=>{s.r(f),s.d(f,{UsersModule:()=>V});var v=s(6814),i=s(95),b=s(4670),C=s(5861),d=s(5219),h=s(9862),A=s(3519),Z=s.n(A),e=s(4946),c=s(4104),g=s(7213),U=s(5817),w=s(2656),p=s(8027),m=s(707),x=s(4480),T=s(3714);function N(r,u){if(1&r){const t=e.EpF();e.TgZ(0,"div",39)(1,"h5",40),e._uU(2,"Lista de Usuarios"),e.qZA(),e.TgZ(3,"span",41),e._UZ(4,"i",42),e.TgZ(5,"input",43),e.NdJ("input",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.onGlobalFilter(l.dt,o))}),e.qZA()()()}}function _(r,u){1&r&&(e.TgZ(0,"tr")(1,"th",44),e._UZ(2,"p-tableHeaderCheckbox"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Usuario"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Correo"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Estado"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Rol"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Acciones"),e.qZA()())}function I(r,u){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._UZ(2,"p-tableCheckbox",45),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td",46)(12,"p-button",47),e.NdJ("click",function(){const l=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.getAUser(l.id))}),e.qZA(),e._UZ(13,"p-confirmDialog"),e.TgZ(14,"p-button",48),e.NdJ("click",function(){const l=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.confirmDelete(l.id))}),e.qZA()()()}if(2&r){const t=u.$implicit,n=e.oxw();e.xp6(2),e.Q6J("value",n.users),e.xp6(2),e.Oqu(t.usuario),e.xp6(2),e.Oqu(t.email),e.xp6(2),e.Oqu(n.getStatusName(t.estado)),e.xp6(2),e.Oqu(n.getRolName(t.rol_id))}}function S(r,u){if(1&r&&e._UZ(0,"input",49),2&r){const t=e.oxw();e.Q6J("value",t.userData.id)}}function y(r,u){if(1&r&&e._UZ(0,"input",50),2&r){const t=e.oxw();e.s9C("placeholder",t.userData.usuario)}}function q(r,u){if(1&r&&e._UZ(0,"input",51),2&r){const t=e.oxw();e.s9C("placeholder",t.userData.email)}}const D=function(){return{"min-width":"50rem"}},J=function(){return["usuario","email","superadmin","estado"]},E=function(){return[10,20,30]},M=function(){return{width:"50vw"}},F=function(){return{width:"500px"}};let Y=(()=>{class r{constructor(t,n,o,l,a,$,K,L){this.confirmationService=t,this.toastModule=n,this.dialogModule=o,this.messageService=l,this.usersService=a,this.breadcrumbService=$,this.tableModule=K,this.buttonModule=L,this.visible=!1,this.visibleDialog1=!1,this.selectedState=null,this.selectedUserIndex=-1,this.formNuser=new i.cw({usuario:new i.NI("",i.kI.required),email:new i.NI("",[i.kI.required,i.kI.email]),rol_id:new i.NI("",i.kI.required),superadmin:new i.NI("",i.kI.required),password:new i.NI("",i.kI.required)}),this.formEuser=new i.cw({usuario:new i.NI("",i.kI.required),email:new i.NI("",[i.kI.required,i.kI.email]),rol_id:new i.NI("",i.kI.required),superadmin:new i.NI("",i.kI.required),id:new i.NI("",i.kI.required)})}ngOnInit(){this.getAllUsers(),this.usersService.data.subscribe(t=>{this.users=t,console.log(this.users)}),this.breadcrumbService.currentBreadcrumbs.subscribe(t=>this.breadcrumbs=t)}onQuitItem(t){this.breadcrumbService.quitItem(t)}getAllUsers(){this.usersService.getAll(30).subscribe(t=>{this.users=t.data,this.totalUsers=t.total,console.log(this.users)},t=>{console.log("Error: ",t)})}getAUser(t){this.usersService.getById(t).subscribe(n=>{this.userData=n,this.userData.id=t,console.log(this.userData),this.visibleDialog1=!0})}getRolName(t){return 1===t?"Super Administrador":2===t?"Administrador":3===t?"Gestor":"Rol no identificado"}getStatusName(t){return 1===t?"Activo":0===t?"Inactivo":"Estado no identificado"}openNew(){this.visible=!0}newUser(){var t=this;return(0,C.Z)(function*(){t.usersService.insertData(t.formNuser.value).subscribe(o=>{console.log(o),t.messageService.add({severity:"info",summary:"Confirmaci\xf3n Exitosa",detail:"Usuario creado.",sticky:!0,life:200}),t.visible=!1,t.usersService.refreshUsersData()},o=>{console.log("Error:",o)})})()}updateUser(){this.formEuser.get("id").setValue(this.userData.id),this.usersService.updateUser(this.formEuser.value).subscribe(n=>{this.visibleDialog1=!1,this.messageService.add({severity:"info",summary:"Confirmaci\xf3n Exitosa",detail:"Hotel actualizado.",sticky:!0,life:200}),this.usersService.refreshUsersData()},n=>{console.log("Error:",n)})}deleteUser(t){const n={headers:new h.WM({"Content-Type":"application/x-www-form-urlencoded"}),body:`id=${t}`};this.usersService.deleteUser(n).subscribe(o=>{this.usersService.refreshUsersData(),console.log(o)},o=>{console.log("Error:",o)})}confirmDelete(t){console.log(t),Z().fire({title:"\xbfEstas Seguro que deseas eliminar el usuario?",text:"Ten cuidado esta acci\xf3n no se prodr\xe1 reversar",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, Confirmar",cancelButtonText:"Cancelar"}).then(n=>{n.isConfirmed&&(this.deleteUser(t),Z().fire({title:"Confirmaci\xf3n",text:"El usuario ha sido eliminado.",icon:"success"}))})}static#e=this.\u0275fac=function(n){return new(n||r)(e.Y36(d.YP),e.Y36(c.EV),e.Y36(g.S),e.Y36(d.ez),e.Y36(U.f),e.Y36(w.p),e.Y36(p.U$),e.Y36(m.hJ))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["ng-component"]],features:[e._Bn([d.YP,d.ez])],decls:92,vars:28,consts:[[1,"surface-section","px-4","py-5","md:px-6","lg:px-8"],[1,"flex","align-items-start","flex-column","lg:justify-content-between","lg:flex-row"],[1,"font-medium","text-3xl","text-900"],[1,"flex","align-items-center","text-700","flex-wrap"],[1,"mr-5","flex","align-items-center","mt-3"],[1,"pi","pi-users","mr-2"],[1,"mt-3","lg:mt-0"],["pButton","","pRipple","","label","Crear","icon","pi pi-user-plus",1,"p-button-outlined","mr-2",3,"click"],["pButton","","pRipple","","label","Exportar","icon","pi pi-check"],[1,"grid","mt-3"],[1,"col-12"],[1,"card","px-3","py-3"],["responsiveLayout","scroll","currentPageReportTemplate","Mostrando {first} de {totalRecords} usuarios","selectionMode","multiple","dataKey","usuario",3,"value","tableStyle","rows","globalFilterFields","paginator","rowsPerPageOptions","showCurrentPageReport","rowHover"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","Nuevo Usuario",3,"visible","modal","draggable","resizable","visibleChange"],[3,"formGroup","ngSubmit"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-6"],["type","text","placeholder","Usuario","pInputText","","formControlName","usuario",1,"w-full","mb-3","border-round-3xl"],["id","email1","type","email","placeholder","Correo Electr\xf3nico","pInputText","","formControlName","email",1,"w-full","mb-3","border-round-3xl"],[1,"field","col-12","md:col-3"],["htmlFor","state"],["formControlName","rol_id",1,"w-full","mb-3","border-round-3xl","selects-main"],["value",""],["value","2"],["value","3    "],["formControlName","superadmin",1,"w-full","mb-3","border-round-3xl","selects-main"],["value","1"],["id","password","type","password","placeholder","Contrase\xf1a","pInputText","","formControlName","password",1,"w-full","mb-3","border-round-3xl"],[1,"field","col-12","md:col-12"],["pButton","","pRipple","","label","Crear Usuario","icon","pi pi-user","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl"],["id","editU","header","Editar Usuario","modal","modal",3,"visible","visibleChange","onVisibleChange"],["type","text","hidden","hidden","pInputText","","class","w-full mb-3 border-round-3xl","formControlName","id",3,"value",4,"ngIf"],["type","text","pInputText","","class","w-full mb-3 border-round-3xl","formControlName","usuario",3,"placeholder",4,"ngIf"],["id","email1","type","email","pInputText","","class","w-full mb-3 border-round-3xl","formControlName","email",3,"placeholder",4,"ngIf"],["value","3"],["pButton","","pRipple","","label","Editar Usuario","icon","pi pi-user","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar...",1,"w-full","sm:w-auto",3,"input"],[2,"width","3rem"],[3,"value"],[1,"flex","gap-2"],["icon","pi pi-user-edit","severity","info",3,"click"],["icon","pi pi-trash","severity","danger",3,"click"],["type","text","hidden","hidden","pInputText","","formControlName","id",1,"w-full","mb-3","border-round-3xl",3,"value"],["type","text","pInputText","","formControlName","usuario",1,"w-full","mb-3","border-round-3xl",3,"placeholder"],["id","email1","type","email","pInputText","","formControlName","email",1,"w-full","mb-3","border-round-3xl",3,"placeholder"]],template:function(n,o){1&n&&(e._UZ(0,"p-toast"),e.TgZ(1,"div",0)(2,"div",1)(3,"div")(4,"div",2),e._uU(5,"Usuarios"),e.qZA(),e.TgZ(6,"div",3)(7,"div",4),e._UZ(8,"i",5),e.TgZ(9,"span"),e._uU(10),e.qZA()()()(),e.TgZ(11,"div",6)(12,"button",7),e.NdJ("click",function(){return o.openNew()}),e.qZA(),e._UZ(13,"button",8),e.qZA()()(),e.TgZ(14,"div",9)(15,"div",10)(16,"div",11)(17,"p-table",12),e.YNc(18,N,6,0,"ng-template",13),e.YNc(19,_,13,0,"ng-template",14),e.YNc(20,I,15,5,"ng-template",15),e.qZA()()()(),e.TgZ(21,"p-dialog",16),e.NdJ("visibleChange",function(a){return o.visible=a}),e.TgZ(22,"div",10)(23,"h5"),e._uU(24,"Completa el formulario"),e.qZA(),e.TgZ(25,"form",17),e.NdJ("ngSubmit",function(){return o.newUser()}),e.TgZ(26,"div",18)(27,"div",19)(28,"label"),e._uU(29,"Usuario"),e.qZA(),e._UZ(30,"input",20),e.qZA(),e.TgZ(31,"div",19)(32,"label"),e._uU(33,"Email"),e.qZA(),e._UZ(34,"input",21),e.qZA(),e.TgZ(35,"div",22)(36,"label",23),e._uU(37,"Rol"),e.qZA(),e.TgZ(38,"select",24)(39,"option",25),e._uU(40,"Seleccione una opci\xf3n"),e.qZA(),e.TgZ(41,"option",26),e._uU(42,"Administrador"),e.qZA(),e.TgZ(43,"option",27),e._uU(44,"Gestor"),e.qZA()()(),e.TgZ(45,"div",22)(46,"label",23),e._uU(47,"Super Admin"),e.qZA(),e.TgZ(48,"select",28)(49,"option",25),e._uU(50,"Seleccione una opci\xf3n"),e.qZA(),e.TgZ(51,"option",29),e._uU(52,"Si"),e.qZA(),e.TgZ(53,"option",26),e._uU(54,"No"),e.qZA()()(),e.TgZ(55,"div",19)(56,"label"),e._uU(57,"Contrase\xf1a"),e.qZA(),e._UZ(58,"input",30),e.qZA(),e.TgZ(59,"div",31),e._UZ(60,"button",32),e.qZA()()()()(),e.TgZ(61,"p-dialog",33),e.NdJ("visibleChange",function(a){return o.visibleDialog1=a})("onVisibleChange",function(){return o.visibleDialog1=!o.visibleDialog1}),e.TgZ(62,"form",17),e.NdJ("ngSubmit",function(){return o.updateUser()}),e.TgZ(63,"div",18)(64,"div",31),e.YNc(65,S,1,1,"input",34),e.qZA(),e.TgZ(66,"div",19)(67,"label"),e._uU(68,"Usuario"),e.qZA(),e.YNc(69,y,1,1,"input",35),e.qZA(),e.TgZ(70,"div",19)(71,"label"),e._uU(72,"Email"),e.qZA(),e.YNc(73,q,1,1,"input",36),e.qZA(),e.TgZ(74,"div",19)(75,"label",23),e._uU(76,"Rol"),e.qZA(),e.TgZ(77,"select",24)(78,"option",26),e._uU(79,"Administrador"),e.qZA(),e.TgZ(80,"option",37),e._uU(81,"Gestor"),e.qZA()()(),e.TgZ(82,"div",19)(83,"label",23),e._uU(84,"Super Admin"),e.qZA(),e.TgZ(85,"select",28)(86,"option",29),e._uU(87,"Si"),e.qZA(),e.TgZ(88,"option",26),e._uU(89,"No"),e.qZA()()(),e.TgZ(90,"div",31),e._UZ(91,"button",38),e.qZA()()()()),2&n&&(e.xp6(10),e.hij("",o.totalUsers," Usuarios Creados"),e.xp6(7),e.Q6J("value",o.users)("tableStyle",e.DdM(23,D))("rows",10)("globalFilterFields",e.DdM(24,J))("paginator",!0)("rowsPerPageOptions",e.DdM(25,E))("showCurrentPageReport",!0)("rowHover",!0),e.xp6(4),e.Akn(e.DdM(26,M)),e.Q6J("visible",o.visible)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(4),e.Q6J("formGroup",o.formNuser),e.xp6(36),e.Akn(e.DdM(27,F)),e.Q6J("visible",o.visibleDialog1),e.xp6(1),e.Q6J("formGroup",o.formEuser),e.xp6(3),e.Q6J("ngIf",o.visibleDialog1),e.xp6(4),e.Q6J("ngIf",o.visibleDialog1),e.xp6(4),e.Q6J("ngIf",o.visibleDialog1))},dependencies:[v.O5,p.iA,d.jx,p.UA,p.Mo,m.Hq,m.zx,i._Y,i.YN,i.Kr,i.Fj,i.EJ,i.JJ,i.JL,x.H,c.FN,T.o,g.V,i.sg,i.u],encapsulation:2})}return r})(),R=(()=>{class r{static#e=this.\u0275fac=function(n){return new(n||r)};static#t=this.\u0275mod=e.oAB({type:r});static#i=this.\u0275inj=e.cJS({imports:[b.Bz.forChild([{path:"",component:Y}]),b.Bz]})}return r})();var B=s(6068),G=s(6340),Q=s(6022),P=s(6218),k=s(2352),z=s(1865),H=s(354),O=s(8712),j=s(5722);let V=(()=>{class r{static#e=this.\u0275fac=function(n){return new(n||r)};static#t=this.\u0275mod=e.oAB({type:r});static#i=this.\u0275inj=e.cJS({providers:[{provide:h.TP,useClass:O.n,multi:!0},U.f],imports:[v.ez,R,p.U$,B.O,i.u5,m.hJ,x.T,c.EV,G.V,Q.Xt,T.j,P.A,k.kW,z.cc,H.L$,g.S,j.ii.forRoot(),i.UX]})}return r})()}}]);