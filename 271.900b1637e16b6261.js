"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[271],{1271:(ee,x,s)=>{s.r(x),s.d(x,{ProductsModule:()=>te});var h=s(6814),d=s(95),v=s(9664),E=s(6068),m=s(707),b=s(4480),Q=s(4104),y=s(6340),S=s(6022),q=s(3714),A=s(6218),P=s(2160),Y=s(1865),V=s(354),C=s(7213),I=s(9862),k=s(8712),F=s(5722),_=s(86),M=s(3519),c=s.n(M),Z=s(2791),t=s(4946),R=s(5619),D=s(4444);let T=(()=>{class i{constructor(e){this.httpClient=e,this.dataSubject=new R.X([]),this.endpointListar="/productoListar",this.endpointProductGet="/productoEditar/",this.endpointProductCreate="/productoCrear",this.endpointProductUpdate="/productoActualizar",this.endpointEliminar="/productoEliminar",this.endpointProductImpuesto="/productoImpuestoGet",this.endpointProductImpuestoCrear="/productoImpuestoCrear",this.endpointGetProductImpuesto="/getProductoImpuesto",this.data=this.dataSubject.asObservable(),this.baseUrl=D.D.url}getAll(e,r="",o=1){return this.httpClient.post(`${this.baseUrl+this.endpointListar}?per_page=${e}&page=${o}&search=${r}`,{})}getProducto(e){return this.httpClient.get(`${this.baseUrl+this.endpointProductGet+e}`)}refreshUsersData(){this.getAll(30).subscribe(e=>{this.dataSubject.next(e.data)},e=>{console.log("Error: ",e)})}createProduct(e){return this.httpClient.post(`${this.baseUrl+this.endpointProductCreate}`,e)}eliminarProduct(e){return this.httpClient.post(`${this.baseUrl+this.endpointEliminar}`,e)}updateProducto(e){return this.httpClient.post(`${this.baseUrl+this.endpointProductUpdate}`,e)}getImpuesto(e){return this.httpClient.get(`${this.baseUrl+this.endpointProductImpuesto}/`+e)}createImpuesto(e){return this.httpClient.post(`${this.baseUrl+this.endpointProductImpuestoCrear}`,e)}getImpuestoCrear(){return this.httpClient.get(`${this.baseUrl+this.endpointGetProductImpuesto}`)}static#t=this.\u0275fac=function(r){return new(r||i)(t.LFG(I.eN))};static#e=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var f=s(8672),U=s(5219);const B=["fileUpload"],L=["fileUploadCreate"];function j(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.openModal())}),t.qZA()}}function G(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",41)(1,"h5",42),t._uU(2,"Lista de Productos"),t.qZA(),t.TgZ(3,"span",43)(4,"form",44)(5,"div",45)(6,"input",46),t.NdJ("input",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.searchInput())}),t.qZA(),t.TgZ(7,"button",47),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.search(o.dt))}),t.qZA()()()()()}if(2&i){const e=t.oxw();t.xp6(4),t.Q6J("formGroup",e.formSearch)}}function $(i,a){1&i&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Nombre"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Medida"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Precio"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Tipo"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Inventario"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Visible Venta"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Acciones"),t.qZA()())}function z(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"p-button",52),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,n=t.oxw();return t.KtG(n.editProduct(o.id))}),t.qZA()}}function O(i,a){if(1&i&&t._UZ(0,"p-button",53),2&i){const e=t.oxw().$implicit;t.Q6J("routerLink",e.id+"/impuesto")}}function H(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"p-button",54),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,n=t.oxw();return t.KtG(n.confirmDelete(o.id))}),t.qZA()}}function K(i,a){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td",48),t.YNc(14,z,1,0,"p-button",49),t.YNc(15,O,1,1,"p-button",50),t.YNc(16,H,1,0,"p-button",51),t.qZA()()),2&i){const e=a.$implicit,r=t.oxw();t.xp6(2),t.Oqu(e.nombre),t.xp6(2),t.Oqu(e.medida.nombre),t.xp6(2),t.Oqu(e.precio),t.xp6(2),t.Oqu("1"==e.tipo_producto?"Producto":"Servicio"),t.xp6(2),t.Oqu(e.inventario.nombre),t.xp6(2),t.Oqu(e.visible_venta?"si":"No"),t.xp6(2),t.Q6J("ngIf",r.permisoActualizar),t.xp6(1),t.Q6J("ngIf","1"==e.tipo_producto),t.xp6(1),t.Q6J("ngIf",r.permisoEliminar)}}function X(i,a){1&i&&(t.TgZ(0,"tr")(1,"td",55),t._uU(2,"Cargando informacion porfavor espere ..."),t.qZA()())}function W(i,a){1&i&&(t.TgZ(0,"div",56),t._uU(1,"Campo requerido"),t.qZA())}function tt(i,a){1&i&&(t.TgZ(0,"div",56),t._uU(1,"Campo requerido"),t.qZA())}function et(i,a){1&i&&(t.TgZ(0,"div",56),t._uU(1,"Campo requerido"),t.qZA())}function it(i,a){if(1&i&&(t.TgZ(0,"div",24)(1,"label"),t._uU(2,"Medida"),t.qZA(),t._UZ(3,"p-dropdown",57),t.YNc(4,et,2,0,"div",26),t.qZA()),2&i){const e=t.oxw();t.xp6(3),t.Q6J("options",e.medida),t.xp6(1),t.Q6J("ngIf",e.formCreateProduct.get("medida_id").hasError("required"))}}function ot(i,a){1&i&&(t.TgZ(0,"div",56),t._uU(1,"Campo requerido"),t.qZA())}function rt(i,a){if(1&i&&(t.TgZ(0,"div",56),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij("El n\xfamero debe ser mayor o igua a ",null==e.formCreateProduct||null==e.formCreateProduct.controls.cantidad?null:e.formCreateProduct.controls.cantidad.errors.min.min,"")}}function nt(i,a){if(1&i&&(t.TgZ(0,"div",24)(1,"label"),t._uU(2,"Cantidad"),t.qZA(),t._UZ(3,"input",58),t.YNc(4,ot,2,0,"div",26),t.YNc(5,rt,2,1,"div",26),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",e.formCreateProduct.get("cantidad").hasError("required")),t.xp6(1),t.Q6J("ngIf",e.formCreateProduct.get("cantidad").hasError("min"))}}function at(i,a){if(1&i&&(t.TgZ(0,"div",24)(1,"label"),t._uU(2,"Cantidad Limitada"),t.qZA(),t._UZ(3,"p-dropdown",59),t.qZA()),2&i){const e=t.oxw();t.xp6(3),t.Q6J("options",e.limiteCantidad)}}function dt(i,a){1&i&&(t.TgZ(0,"div",56),t._uU(1,"Campo requerido"),t.qZA())}function st(i,a){1&i&&(t.TgZ(0,"div",56),t._uU(1,"Campo requerido"),t.qZA())}function lt(i,a){if(1&i&&(t.TgZ(0,"div",56),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij("El n\xfamero debe ser mayor o igual a ",null==e.formCreateProduct||null==e.formCreateProduct.controls.precio?null:e.formCreateProduct.controls.precio.errors.min.min,"")}}function ut(i,a){1&i&&(t.TgZ(0,"div",56),t._uU(1,"Campo requerido"),t.qZA())}function ct(i,a){if(1&i&&(t.TgZ(0,"div",56),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij("El n\xfamero debe ser mayor o igual a ",null==e.formCreateProduct||null==e.formCreateProduct.controls.precio?null:e.formCreateProduct.controls.precio.errors.min.min,"")}}function pt(i,a){if(1&i&&(t.TgZ(0,"div",24)(1,"label"),t._uU(2,"Stop minimo"),t.qZA(),t._UZ(3,"input",60),t.YNc(4,ut,2,0,"div",26),t.YNc(5,ct,2,1,"div",26),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",e.formCreateProduct.get("stop_minimo").hasError("required")),t.xp6(1),t.Q6J("ngIf",e.formCreateProduct.get("stop_minimo").hasError("min"))}}function mt(i,a){1&i&&(t.TgZ(0,"div",56),t._uU(1,"Campo requerido"),t.qZA())}function _t(i,a){if(1&i&&(t.TgZ(0,"div",56),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij("El n\xfamero debe ser mayor o igua a ",null==e.formCreateProduct||null==e.formCreateProduct.controls.precio_base?null:e.formCreateProduct.controls.precio_base.errors.min.min,"")}}function ft(i,a){if(1&i&&(t.TgZ(0,"div",24)(1,"label"),t._uU(2,"Precio base"),t.qZA(),t._UZ(3,"input",61),t.YNc(4,mt,2,0,"div",26),t.YNc(5,_t,2,1,"div",26),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",e.formCreateProduct.get("precio_base").hasError("required")),t.xp6(1),t.Q6J("ngIf",e.formCreateProduct.get("precio_base").hasError("min"))}}function gt(i,a){1&i&&(t.TgZ(0,"div",56),t._uU(1,"Campo requerido"),t.qZA())}function ht(i,a){1&i&&(t.TgZ(0,"div",56),t._uU(1,"Campo requerido"),t.qZA())}function vt(i,a){if(1&i&&(t.TgZ(0,"div",24)(1,"label"),t._uU(2,"Visible Receta"),t.qZA(),t._UZ(3,"p-dropdown",62),t.YNc(4,ht,2,0,"div",26),t.qZA()),2&i){const e=t.oxw();t.xp6(3),t.Q6J("options",e.visibleReceta),t.xp6(1),t.Q6J("ngIf",e.formCreateProduct.get("visible_receta").hasError("required"))}}function bt(i,a){1&i&&(t.TgZ(0,"div",56),t._uU(1,"Campo requerido"),t.qZA())}function Pt(i,a){1&i&&(t.TgZ(0,"div",56),t._uU(1,"Campo requerido"),t.qZA())}function Ct(i,a){1&i&&(t.TgZ(0,"div",56),t._uU(1,"Campo requerido"),t.qZA())}function Zt(i,a){1&i&&(t.TgZ(0,"div",56),t._uU(1,"Campo requerido"),t.qZA())}function Tt(i,a){if(1&i&&(t.TgZ(0,"div",24)(1,"label"),t._uU(2,"Medida"),t.qZA(),t._UZ(3,"p-dropdown",57),t.YNc(4,Zt,2,0,"div",26),t.qZA()),2&i){const e=t.oxw();t.xp6(3),t.Q6J("options",e.medida),t.xp6(1),t.Q6J("ngIf",e.formEditProduct.get("medida_id").hasError("required"))}}function xt(i,a){1&i&&(t.TgZ(0,"div",56),t._uU(1,"Campo requerido"),t.qZA())}function Et(i,a){if(1&i&&(t.TgZ(0,"div",56),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij("El n\xfamero debe ser mayor o igua a ",null==e.formCreateProduct||null==e.formCreateProduct.controls.cantidad?null:e.formCreateProduct.controls.cantidad.errors.min.min,"")}}function qt(i,a){if(1&i&&(t.TgZ(0,"div",24)(1,"label"),t._uU(2,"Cantidad"),t.qZA(),t._UZ(3,"input",58),t.YNc(4,xt,2,0,"div",26),t.YNc(5,Et,2,1,"div",26),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",e.formEditProduct.get("cantidad").hasError("required")),t.xp6(1),t.Q6J("ngIf",e.formEditProduct.get("cantidad").hasError("min"))}}function At(i,a){if(1&i&&(t.TgZ(0,"div",24)(1,"label"),t._uU(2,"Cantidad Limitada"),t.qZA(),t._UZ(3,"p-dropdown",59),t.qZA()),2&i){const e=t.oxw();t.xp6(3),t.Q6J("options",e.limiteCantidad)}}function It(i,a){1&i&&(t.TgZ(0,"div",56),t._uU(1,"Campo requerido"),t.qZA())}function Ut(i,a){1&i&&(t.TgZ(0,"div",56),t._uU(1,"Campo requerido"),t.qZA())}function Jt(i,a){if(1&i&&(t.TgZ(0,"div",56),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij("El n\xfamero debe ser mayor o igual a ",null==e.formCreateProduct||null==e.formCreateProduct.controls.precio?null:e.formCreateProduct.controls.precio.errors.min.min,"")}}function wt(i,a){1&i&&(t.TgZ(0,"div",56),t._uU(1,"Campo requerido"),t.qZA())}function Nt(i,a){if(1&i&&(t.TgZ(0,"div",56),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij("El n\xfamero debe ser mayor o igual a ",null==e.formCreateProduct||null==e.formCreateProduct.controls.precio?null:e.formCreateProduct.controls.precio.errors.min.min,"")}}function Qt(i,a){if(1&i&&(t.TgZ(0,"div",24)(1,"label"),t._uU(2,"Stop minimo"),t.qZA(),t._UZ(3,"input",60),t.YNc(4,wt,2,0,"div",26),t.YNc(5,Nt,2,1,"div",26),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",e.formEditProduct.get("stop_minimo").hasError("required")),t.xp6(1),t.Q6J("ngIf",e.formEditProduct.get("stop_minimo").hasError("min"))}}function yt(i,a){1&i&&(t.TgZ(0,"div",56),t._uU(1,"Campo requerido"),t.qZA())}function St(i,a){if(1&i&&(t.TgZ(0,"div",56),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij("El n\xfamero debe ser mayor o igua a ",null==e.formCreateProduct||null==e.formCreateProduct.controls.precio_base?null:e.formCreateProduct.controls.precio_base.errors.min.min,"")}}function Yt(i,a){if(1&i&&(t.TgZ(0,"div",24)(1,"label"),t._uU(2,"Precio base"),t.qZA(),t._UZ(3,"input",61),t.YNc(4,yt,2,0,"div",26),t.YNc(5,St,2,1,"div",26),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",e.formEditProduct.get("precio_base").hasError("required")),t.xp6(1),t.Q6J("ngIf",e.formEditProduct.get("precio_base").hasError("min"))}}function Vt(i,a){1&i&&(t.TgZ(0,"div",56),t._uU(1,"Campo requerido"),t.qZA())}function kt(i,a){1&i&&(t.TgZ(0,"div",56),t._uU(1,"Campo requerido"),t.qZA())}function Ft(i,a){if(1&i&&(t.TgZ(0,"div",24)(1,"label"),t._uU(2,"Visible Receta"),t.qZA(),t._UZ(3,"p-dropdown",62),t.YNc(4,kt,2,0,"div",26),t.qZA()),2&i){const e=t.oxw();t.xp6(3),t.Q6J("options",e.visibleReceta),t.xp6(1),t.Q6J("ngIf",e.formCreateProduct.get("visible_receta").hasError("required"))}}function Mt(i,a){1&i&&(t.TgZ(0,"div",56),t._uU(1,"Campo requerido"),t.qZA())}const Rt=function(){return{"min-width":"50rem"}},Dt=function(){return["nombre","medida","precio","cantidad","inventario","acciones"]},J=function(){return{width:"50vw"}};let Bt=(()=>{class i{ngOnInit(){this.buildForm(),this.getIndex(),this.visibleModalProducto=!1}constructor(e,r,o){this.productsService=e,this.FB=r,this.spinner=o,this.permisoCrear=Z.e.hasPermission(["gestionInventario.productos.crear"]),this.permisoActualizar=Z.e.hasPermission(["gestionInventario.productos.actualizar"]),this.permisoEliminar=Z.e.hasPermission(["gestionInventario.productos.eliminar"]),this.visibleModalProducto=!0,this.ventaVisible=!1,this.pageCount=10,this.imagen=null,this.loadingTable=!1,this.visibleModalProductoEditar=!1,this.idEditando=0,this.first=0,this.rows=8,this.data=Array(18).fill(0),this.pageActual=1,this.ultimaPage=1,this.disablePageLeft=!1,this.disablePageRight=!1,this.registrosContar=0,this.visibleServicio=!0,this.visibleServicioEditar=!0}openModal(){this.onCreate()}getIndex(e="",r=this.pageCount,o=1){this.spinner.show(),this.loadingTable=!0,this.productsService.getAll(r,e,o).subscribe(n=>{this.loadingTable=!1,this.productsData=n.data,this.ultimaPage=n.last_page,this.registrosContar=n.total,this.ultimaPage=n.last_page,n.total>r&&(this.disablePageRight=!0),this.validatePage(),this.spinner.hide()},n=>{console.log("Error: ",n)})}newProduct(){this.spinner.show();let e=this.formCreateProduct.value;e.inventario_id=e.inventario_id.id,e.visible_venta=e.visible_venta.id,e.tipo_producto=e.tipo_producto.id,e.visible_receta=e.visible_receta?e?.visible_receta.id:0,e.estado=1,2!=e.tipo_producto?(e.medida_id=e.medida_id.id,e.limite_cantidad=e.limite_cantidad.id):(e.cantidad=0,e.limite_cantidad=0,e.medida_id=0,e.precio_base=0,e.stop_minimo=0);const r=new FormData;for(const o in e)e.hasOwnProperty(o)&&r.append(o,e[o]);if(null!=this.imagen){const o=new Blob([this.imagen],{type:"image/png"}),n=new File([o],"nombre_archivo.png",{type:"image/png"});r.append("imagen",n)}this.productsService.createProduct(r).subscribe(o=>{this.spinner.hide(),this.imagen=null,this.visibleModalProducto=!1,"success"==o.code?(this.formCreateProduct.reset(),c().fire({title:"Exito",text:"Producto creado exitosamente.",icon:"success"}),this.getIndex()):c().fire({title:"Error",text:"Error al crear el producto.",icon:"error"})},o=>{console.log("Error: ",o)})}buildForm(){this.formSearch=this.FB.group({search:["",[]]}),this.formCreateProduct=this.FB.group({nombre:["",[d.kI.required]],medida_id:["",[d.kI.required]],descripcion:["",[d.kI.required]],precio:["",[d.kI.required,d.kI.min(1)]],cantidad:["",[d.kI.required,d.kI.pattern("^[0-9]*$"),d.kI.min(0)]],inventario_id:["",[d.kI.required]],visible_venta:["",[d.kI.required]],visible_receta:["",[d.kI.required]],precio_base:["",[d.kI.required,d.kI.min(0)]],limite_cantidad:["",[d.kI.required]],stop_minimo:["",[d.kI.required,d.kI.min(0)]],tipo_producto:["",[d.kI.required]]}),this.formEditProduct=this.FB.group({nombre:["",[d.kI.required]],medida_id:["",[d.kI.required]],descripcion:["",[d.kI.required]],precio:["",[d.kI.required,d.kI.min(1)]],cantidad:["",[d.kI.required,d.kI.pattern("^[0-9]*$"),d.kI.min(0)]],inventario_id:["",[d.kI.required]],visible_venta:["",[d.kI.required]],visible_receta:["",[d.kI.required]],precio_base:["",[d.kI.required,d.kI.min(0)]],limite_cantidad:["",[d.kI.required]],stop_minimo:["",[d.kI.required,d.kI.min(0)]],tipo_producto:["",[d.kI.required]]})}searchInput(){let e=this.formSearch.get("search").value;""==e&&this.getIndex(e)}search(e){let r=this.formSearch.get("search").value;this.getIndex(r)}onPage(e){this.pageCount=e.rows,this.getIndex("",this.pageCount)}onCreate(){this.fileUploadCreate.clear(),this.imagen=null,this.formCreateProduct.reset(),this.productsService.getProducto(0).subscribe(e=>{this.medida=e.medida,this.inventario=e.inventario,this.visibleVenta=e.visible_venta,this.visibleReceta=e.visible_receta,this.limiteCantidad=e.sin_limite,this.tipo=e.tipo,this.visibleModalProducto=!0,this.registrosContar=e.total,this.onChangeTipoProductoCrear()},e=>{console.log("Error: ",e)})}editProduct(e){this.imagen=null,this.fileUpload.clear(),this.idEditando=e,this.spinner.show(),this.productsService.getProducto(e).subscribe(r=>{this.spinner.hide(),this.medida=r.medida,this.inventario=r.inventario,this.visibleVenta=r.visible_venta,this.visibleReceta=r.visible_receta,this.limiteCantidad=r.sin_limite,this.tipo=r.tipo,this.dataEditarInfoProductos=r.producto;let o=null,n=null,l=null,g=null,p=null,N=null;this.medida.forEach(u=>{u.id==this.dataEditarInfoProductos.medida_id&&(o=u)}),this.inventario.forEach(u=>{u.id==this.dataEditarInfoProductos.inventario_id&&(n=u)}),this.limiteCantidad.forEach(u=>{u.id==this.dataEditarInfoProductos.sin_limite_cantidad&&(l=u)}),this.tipo.forEach(u=>{u.id==this.dataEditarInfoProductos.tipo_producto&&(g=u)}),this.visibleVenta.forEach(u=>{u.id==this.dataEditarInfoProductos.visible_venta&&(p=u)}),this.visibleReceta.forEach(u=>{u.id==this.dataEditarInfoProductos.visible_receta&&(N=u)}),setTimeout(()=>{this.onChangeTipoProductoEditarIncio(g),this.formEditProduct.get("nombre").setValue(this.dataEditarInfoProductos.nombre),this.formEditProduct.get("medida_id").setValue(o),this.formEditProduct.get("descripcion").setValue(this.dataEditarInfoProductos.descripcion),this.formEditProduct.get("precio").setValue(this.dataEditarInfoProductos.precio),this.formEditProduct.get("cantidad").setValue(this.dataEditarInfoProductos.cantidad),this.formEditProduct.get("inventario_id").setValue(n),this.formEditProduct.get("visible_venta").setValue(p),this.formEditProduct.get("limite_cantidad").setValue(l),this.formEditProduct.get("stop_minimo").setValue(this.dataEditarInfoProductos.stop_minimo),this.formEditProduct.get("tipo_producto").setValue(g),this.formEditProduct.get("precio_base").setValue(this.dataEditarInfoProductos.precio_base),this.formEditProduct.get("visible_receta").setValue(N),this.visibleModalProductoEditar=!0,this.cargarImagen(r.imagen)},1)},r=>{console.log("Error: ",r)})}cargarImagen(e){const r=atob(e),o=new Array(r.length);for(let p=0;p<r.length;p++)o[p]=r.charCodeAt(p);const n=new Uint8Array(o),l=new Blob([n],{type:"image/jpeg"}),g=new File([l],"nombre_archivo.jpg",{type:"image/jpeg"});this.fileUpload.clear(),this.fileUpload.files=[g]}submitCreate(){this.formCreateProduct.valid?this.newProduct():this.formCreateProduct.markAllAsTouched()}onSelect(e){this.imagen=e.currentFiles[0]}blobToBase64(e){return new Promise((r,o)=>{const n=new FileReader;n.onloadend=()=>{n.result&&"string"==typeof n.result?r(n.result):o(new Error("Error al convertir Blob a Base64"))},n.onerror=()=>{o(new Error("Error al leer el Blob"))},n.readAsDataURL(e)})}confirmDelete(e){c().fire({title:"\xbfEstas Seguro que deseas eliminar el producto?",text:"Ten cuidado esta acci\xf3n no se prodr\xe1 reversar",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, Confirmar",cancelButtonText:"Cancelar"}).then(r=>{r.isConfirmed&&(this.spinner.show(),this.productsService.eliminarProduct({id:e}).subscribe(o=>{this.spinner.hide(),"success"==o.code?(c().fire({title:"Exito",text:"Producto eliminado exitosamente.",icon:"success"}),this.getIndex()):c().fire({title:"Error",text:"Error al eliminar el producto.",icon:"error"})},o=>{console.log("Error: ",o)}))})}onRemove(e){this.imagen=null}updateProducto(){this.spinner.show();let e=this.formEditProduct.value;e.inventario_id=e.inventario_id.id,e.visible_venta=e.visible_venta.id,e.tipo_producto=e.tipo_producto.id,e.visible_receta=e?.visible_receta.id,e.id=this.idEditando,e.estado=1,2!=e.tipo_producto?(e.medida_id=e.medida_id.id,e.limite_cantidad=e.limite_cantidad.id):(e.cantidad=0,e.limite_cantidad=0,e.medida_id=0,e.precio_base=0,e.stop_minimo=0);const r=new FormData;for(const o in e)e.hasOwnProperty(o)&&r.append(o,e[o]);if(null!=this.imagen){const o=new Blob([this.imagen],{type:"image/png"}),n=new File([o],"nombre_archivo.png",{type:"image/png"});r.append("imagen",n)}this.productsService.updateProducto(r).subscribe(o=>{this.spinner.hide(),this.imagen=null,this.visibleModalProductoEditar=!1,"success"==o.code?(c().fire({title:"Exito",text:"Producto editado exitosamente.",icon:"success"}),this.getIndex()):c().fire({title:"Error",text:"Error al editar el producto.",icon:"error"})},o=>{console.log("Error: ",o)})}submitUpdate(){this.formEditProduct.valid&&this.updateProducto()}onPageChange(e){this.first=e.first,this.rows=e.rows}leftTable(){this.pageActual=this.pageActual-1,this.getIndex("",this.pageCount,this.pageActual),this.validatePage()}rightTable(){this.pageActual=this.pageActual+1,this.getIndex("",this.pageCount,this.pageActual),this.validatePage()}validatePage(){1==this.pageActual&&(this.disablePageLeft=!1),this.pageActual>1&&(this.disablePageLeft=!0),this.ultimaPage==this.pageActual&&(this.disablePageRight=!1),this.ultimaPage>this.pageActual&&(this.disablePageRight=!0)}onChangeTipoProductoCrear(){let e=this.formCreateProduct.get("tipo_producto").value;1==e?.id&&(this.visibleServicio=!0,this.formCreateProduct.get("medida_id").enable(),this.formCreateProduct.get("cantidad").enable(),this.formCreateProduct.get("limite_cantidad").enable(),this.formCreateProduct.get("stop_minimo").enable(),this.formCreateProduct.get("precio_base").enable(),this.formCreateProduct.get("visible_receta").enable(),this.formCreateProduct.get("cantidad").setValue(null),this.formCreateProduct.get("medida_id").setValue(null),this.formCreateProduct.get("limite_cantidad").setValue(null),this.formCreateProduct.get("stop_minimo").setValue(null),this.formCreateProduct.get("precio_base").setValue(null),this.formCreateProduct.get("visible_receta").setValue(null)),2==e?.id&&(this.visibleServicio=!1,this.formCreateProduct.get("medida_id").disable(),this.formCreateProduct.get("cantidad").disable(),this.formCreateProduct.get("limite_cantidad").disable(),this.formCreateProduct.get("stop_minimo").disable(),this.formCreateProduct.get("precio_base").disable(),this.formCreateProduct.get("visible_receta").disable(),this.formCreateProduct.get("cantidad").setValue(0),this.formCreateProduct.get("medida_id").setValue(0),this.formCreateProduct.get("limite_cantidad").setValue(0),this.formCreateProduct.get("stop_minimo").setValue(0),this.formCreateProduct.get("precio_base").setValue(0),this.formCreateProduct.get("visible_receta").setValue(0))}onChangeTipoProductoEditar(){let e=this.formEditProduct.get("tipo_producto").value;1==e?.id&&(this.visibleServicioEditar=!0,this.formEditProduct.get("medida_id").enable(),this.formEditProduct.get("cantidad").enable(),this.formEditProduct.get("limite_cantidad").enable(),this.formEditProduct.get("stop_minimo").enable(),this.formEditProduct.get("precio_base").enable(),this.formEditProduct.get("cantidad").setValue(this.editarData.cantidad),this.formEditProduct.get("medida_id").setValue(this.editarData.medida_id),this.formEditProduct.get("limite_cantidad").setValue(this.editarData.limite_cantidad),this.formEditProduct.get("stop_minimo").setValue(this.editarData.stop_minimo),this.formEditProduct.get("precio_base").setValue(this.editarData.precio_base)),2==e?.id&&(this.editarData=this.formEditProduct.value,this.visibleServicioEditar=!1,this.formEditProduct.get("cantidad").disable(),this.formEditProduct.get("limite_cantidad").disable(),this.formEditProduct.get("stop_minimo").disable(),this.formEditProduct.get("precio_base").disable(),this.formEditProduct.get("cantidad").setValue(0),this.formEditProduct.get("medida_id").setValue(0),this.formEditProduct.get("limite_cantidad").setValue(0),this.formEditProduct.get("stop_minimo").setValue(0),this.formEditProduct.get("precio_base").setValue(0))}onChangeTipoProductoEditarIncio(e){console.log(e),1==e.id&&(this.visibleServicioEditar=!0,this.formEditProduct.get("medida_id").enable(),this.formEditProduct.get("cantidad").enable(),this.formEditProduct.get("limite_cantidad").enable(),this.formEditProduct.get("stop_minimo").enable(),this.formEditProduct.get("precio_base").enable()),2==e.id&&(this.editarData=this.formEditProduct.value,this.visibleServicioEditar=!1,this.formEditProduct.get("cantidad").disable(),this.formEditProduct.get("limite_cantidad").disable(),this.formEditProduct.get("stop_minimo").disable(),this.formEditProduct.get("precio_base").disable(),this.formEditProduct.get("cantidad").setValue(0),this.formEditProduct.get("medida_id").setValue(0),this.formEditProduct.get("limite_cantidad").setValue(0),this.formEditProduct.get("stop_minimo").setValue(0),this.formEditProduct.get("precio_base").setValue(0))}static#t=this.\u0275fac=function(r){return new(r||i)(t.Y36(T),t.Y36(d.qu),t.Y36(f.t2))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-products"]],viewQuery:function(r,o){if(1&r&&(t.Gf(B,5),t.Gf(L,5)),2&r){let n;t.iGM(n=t.CRH())&&(o.fileUpload=n.first),t.iGM(n=t.CRH())&&(o.fileUploadCreate=n.first)}},decls:118,vars:64,consts:[["type","ball-scale-multiple"],[1,"surface-section","px-4","py-5","md:px-6","lg:px-8"],[1,"flex","align-items-start","flex-column","lg:justify-content-between","lg:flex-row"],[1,"font-medium","text-3xl","text-900"],[1,"flex","align-items-center","text-700","flex-wrap"],[1,"mr-5","flex","align-items-center","mt-3"],[1,"mt-3","lg:mt-0"],["pButton","","pRipple","","label","Crear","class","p-button-outlined mr-2","icon","",3,"click",4,"ngIf"],[1,"grid","mt-3"],[1,"col-12"],[1,"card","px-3","py-3"],["responsiveLayout","scroll","selectionMode","multiple","dataKey","usuario",3,"value","tableStyle","loading","rows","globalFilterFields","rowHover","onPage"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","loadingbody"],[2,"text-align","center"],[1,"p-buttonset"],["pButton","","pRipple","","label","","icon","pi pi-arrow-left",3,"disabled","click"],["pButton","","pRipple","",3,"label"],["pButton","","pRipple","","label","","icon","pi pi-arrow-right",3,"disabled","click"],["header","Nuevo Producto",3,"visible","modal","draggable","resizable","visibleChange"],[3,"formGroup","ngSubmit"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-6"],["type","text","pInputText","","formControlName","nombre",1,"w-full","mb-3","border-round-3xl"],["style","color: red;",4,"ngIf"],["formControlName","tipo_producto","optionLabel","nombre",3,"options","onChange"],["class","field col-12 md:col-6",4,"ngIf"],["formControlName","inventario_id","optionLabel","nombre",3,"options"],["type","number","pInputText","","formControlName","precio",1,"w-full","mb-3","border-round-3xl"],["formControlName","visible_venta","optionLabel","nombre",3,"options"],[1,"field","col-12","md:col-12"],["name","imsgenes[]","chooseLabel","Seleccionar","cancelLabel","Cancelar","accept","image/*",3,"showUploadButton","maxFileSize","onRemove","onClear","onSelect"],["fileUploadCreate",""],["formControlName","descripcion","pInputTextarea","","required","","rows","3","cols","20"],["pButton","","pRipple","","label","Crear Producto","icon","pi pi-fw","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl"],["header","Editar Producto",3,"visible","modal","draggable","resizable","visibleChange"],["fileUpload",""],["pButton","","pRipple","","label","Editar Producto","icon","pi pi-fw pi-star","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl"],["pButton","","pRipple","","label","Crear","icon","",1,"p-button-outlined","mr-2",3,"click"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[3,"formGroup"],[1,"p-inputgroup"],["formControlName","search","pInputText","","type","text","placeholder","Buscar...",1,"w-full","sm:w-auto",3,"input"],["type","button","pButton","","pRipple","",1,"pi","pi-search",3,"click"],[1,"flex","gap-2"],["icon","pi pi-pencil","severity","info",3,"click",4,"ngIf"],["icon","pi pi-cog","severity","danger",3,"routerLink",4,"ngIf"],["icon","pi pi-trash","severity","danger",3,"click",4,"ngIf"],["icon","pi pi-pencil","severity","info",3,"click"],["icon","pi pi-cog","severity","danger",3,"routerLink"],["icon","pi pi-trash","severity","danger",3,"click"],["colspan","8"],[2,"color","red"],["optionLabel","nombre","formControlName","medida_id",3,"options"],["type","number","formControlName","cantidad","pInputText","",1,"w-full","mb-3","border-round-3xl"],["formControlName","limite_cantidad","optionLabel","nombre",3,"options"],["type","number","pInputText","","formControlName","stop_minimo",1,"w-full","mb-3","border-round-3xl"],["type","number","pInputText","","formControlName","precio_base",1,"w-full","mb-3","border-round-3xl"],["formControlName","visible_receta","optionLabel","nombre",3,"options"]],template:function(r,o){1&r&&(t._UZ(0,"ngx-spinner",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div")(4,"div",3),t._uU(5,"Productos / Servicios"),t.qZA(),t.TgZ(6,"div",4),t._UZ(7,"div",5),t.qZA()(),t.TgZ(8,"div",6),t.YNc(9,j,1,0,"button",7),t.qZA()()(),t.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"p-table",11),t.NdJ("onPage",function(l){return o.onPage(l)}),t.YNc(14,G,8,1,"ng-template",12),t.YNc(15,$,15,0,"ng-template",13),t.YNc(16,K,17,9,"ng-template",14),t.YNc(17,X,3,0,"ng-template",15),t.qZA(),t._UZ(18,"br"),t.TgZ(19,"div",16)(20,"span",17)(21,"button",18),t.NdJ("click",function(){return o.leftTable()}),t.qZA(),t._UZ(22,"button",19),t.TgZ(23,"button",20),t.NdJ("click",function(){return o.rightTable()}),t.qZA()()()()()(),t.TgZ(24,"p-dialog",21),t.NdJ("visibleChange",function(l){return o.visibleModalProducto=l}),t.TgZ(25,"div",9)(26,"form",22),t.NdJ("ngSubmit",function(){return o.submitCreate()}),t.TgZ(27,"div",23)(28,"div",24)(29,"label"),t._uU(30,"Nombre"),t.qZA(),t._UZ(31,"input",25),t.YNc(32,W,2,0,"div",26),t.qZA(),t.TgZ(33,"div",24)(34,"label"),t._uU(35,"Tipo"),t.qZA(),t.TgZ(36,"p-dropdown",27),t.NdJ("onChange",function(){return o.onChangeTipoProductoCrear()}),t.qZA(),t.YNc(37,tt,2,0,"div",26),t.qZA(),t.YNc(38,it,5,2,"div",28),t.YNc(39,nt,6,2,"div",28),t.YNc(40,at,4,1,"div",28),t.TgZ(41,"div",24)(42,"label"),t._uU(43,"Inventario"),t.qZA(),t._UZ(44,"p-dropdown",29),t.YNc(45,dt,2,0,"div",26),t.qZA(),t.TgZ(46,"div",24)(47,"label"),t._uU(48,"Precio"),t.qZA(),t._UZ(49,"input",30),t.YNc(50,st,2,0,"div",26),t.YNc(51,lt,2,1,"div",26),t.qZA(),t.YNc(52,pt,6,2,"div",28),t.YNc(53,ft,6,2,"div",28),t.TgZ(54,"div",24)(55,"label"),t._uU(56,"Visible Venta"),t.qZA(),t._UZ(57,"p-dropdown",31),t.YNc(58,gt,2,0,"div",26),t.qZA(),t.YNc(59,vt,5,2,"div",28),t.TgZ(60,"div",32)(61,"p-fileUpload",33,34),t.NdJ("onRemove",function(l){return o.onRemove(l)})("onClear",function(l){return o.onRemove(l)})("onSelect",function(l){return o.onSelect(l)}),t.qZA()(),t.TgZ(63,"div",32)(64,"label"),t._uU(65,"Descripcion"),t.qZA(),t._UZ(66,"textarea",35),t.YNc(67,bt,2,0,"div",26),t.qZA(),t.TgZ(68,"div",32),t._UZ(69,"button",36),t.qZA()(),t._UZ(70,"br"),t.qZA()()(),t.TgZ(71,"p-dialog",37),t.NdJ("visibleChange",function(l){return o.visibleModalProductoEditar=l}),t.TgZ(72,"div",9)(73,"form",22),t.NdJ("ngSubmit",function(){return o.submitUpdate()}),t.TgZ(74,"div",23)(75,"div",24)(76,"label"),t._uU(77,"Nombre"),t.qZA(),t._UZ(78,"input",25),t.YNc(79,Pt,2,0,"div",26),t.qZA(),t.TgZ(80,"div",24)(81,"label"),t._uU(82,"Tipo"),t.qZA(),t.TgZ(83,"p-dropdown",27),t.NdJ("onChange",function(){return o.onChangeTipoProductoEditar()}),t.qZA(),t.YNc(84,Ct,2,0,"div",26),t.qZA(),t.YNc(85,Tt,5,2,"div",28),t.YNc(86,qt,6,2,"div",28),t.YNc(87,At,4,1,"div",28),t.TgZ(88,"div",24)(89,"label"),t._uU(90,"Inventario"),t.qZA(),t._UZ(91,"p-dropdown",29),t.YNc(92,It,2,0,"div",26),t.qZA(),t.TgZ(93,"div",24)(94,"label"),t._uU(95,"Precio"),t.qZA(),t._UZ(96,"input",30),t.YNc(97,Ut,2,0,"div",26),t.YNc(98,Jt,2,1,"div",26),t.qZA(),t.YNc(99,Qt,6,2,"div",28),t.YNc(100,Yt,6,2,"div",28),t.TgZ(101,"div",24)(102,"label"),t._uU(103,"Visible Venta"),t.qZA(),t._UZ(104,"p-dropdown",31),t.YNc(105,Vt,2,0,"div",26),t.qZA(),t.YNc(106,Ft,5,2,"div",28),t.TgZ(107,"div",32)(108,"p-fileUpload",33,38),t.NdJ("onRemove",function(l){return o.onRemove(l)})("onClear",function(l){return o.onRemove(l)})("onSelect",function(l){return o.onSelect(l)}),t.qZA()(),t.TgZ(110,"div",32)(111,"label"),t._uU(112,"Descripcion"),t.qZA(),t._UZ(113,"textarea",35),t.YNc(114,Mt,2,0,"div",26),t.qZA(),t.TgZ(115,"div",32),t._UZ(116,"button",39),t.qZA()(),t._UZ(117,"br"),t.qZA()()()),2&r&&(t.xp6(9),t.Q6J("ngIf",o.permisoCrear),t.xp6(4),t.Q6J("value",o.productsData)("tableStyle",t.DdM(60,Rt))("loading",o.loadingTable)("rows",8)("globalFilterFields",t.DdM(61,Dt))("rowHover",!0),t.xp6(8),t.Q6J("disabled",!o.disablePageLeft),t.xp6(1),t.Q6J("label",o.pageActual),t.xp6(1),t.Q6J("disabled",!o.disablePageRight),t.xp6(1),t.Akn(t.DdM(62,J)),t.Q6J("visible",o.visibleModalProducto)("modal",!0)("draggable",!1)("resizable",!1),t.xp6(2),t.Q6J("formGroup",o.formCreateProduct),t.xp6(6),t.Q6J("ngIf",o.formCreateProduct.get("nombre").hasError("required")),t.xp6(4),t.Q6J("options",o.tipo),t.xp6(1),t.Q6J("ngIf",o.formCreateProduct.get("tipo_producto").hasError("required")),t.xp6(1),t.Q6J("ngIf",o.visibleServicio),t.xp6(1),t.Q6J("ngIf",o.visibleServicio),t.xp6(1),t.Q6J("ngIf",o.visibleServicio),t.xp6(4),t.Q6J("options",o.inventario),t.xp6(1),t.Q6J("ngIf",o.formCreateProduct.get("inventario_id").hasError("required")),t.xp6(5),t.Q6J("ngIf",o.formCreateProduct.get("precio").hasError("required")),t.xp6(1),t.Q6J("ngIf",o.formCreateProduct.get("precio").hasError("min")),t.xp6(1),t.Q6J("ngIf",o.visibleServicio),t.xp6(1),t.Q6J("ngIf",o.visibleServicio),t.xp6(4),t.Q6J("options",o.visibleVenta),t.xp6(1),t.Q6J("ngIf",o.formCreateProduct.get("visible_venta").hasError("required")),t.xp6(1),t.Q6J("ngIf",o.visibleServicio),t.xp6(2),t.Q6J("showUploadButton",!1)("maxFileSize",1e6),t.xp6(6),t.Q6J("ngIf",o.formCreateProduct.get("descripcion").hasError("required")),t.xp6(4),t.Akn(t.DdM(63,J)),t.Q6J("visible",o.visibleModalProductoEditar)("modal",!0)("draggable",!1)("resizable",!1),t.xp6(2),t.Q6J("formGroup",o.formEditProduct),t.xp6(6),t.Q6J("ngIf",o.formEditProduct.get("nombre").hasError("required")),t.xp6(4),t.Q6J("options",o.tipo),t.xp6(1),t.Q6J("ngIf",o.formEditProduct.get("tipo_producto").hasError("required")),t.xp6(1),t.Q6J("ngIf",o.visibleServicioEditar),t.xp6(1),t.Q6J("ngIf",o.visibleServicioEditar),t.xp6(1),t.Q6J("ngIf",o.visibleServicioEditar),t.xp6(4),t.Q6J("options",o.inventario),t.xp6(1),t.Q6J("ngIf",o.formEditProduct.get("inventario_id").hasError("required")),t.xp6(5),t.Q6J("ngIf",o.formEditProduct.get("precio").hasError("required")),t.xp6(1),t.Q6J("ngIf",o.formEditProduct.get("precio").hasError("min")),t.xp6(1),t.Q6J("ngIf",o.visibleServicioEditar),t.xp6(1),t.Q6J("ngIf",o.visibleServicioEditar),t.xp6(4),t.Q6J("options",o.visibleVenta),t.xp6(1),t.Q6J("ngIf",o.formEditProduct.get("visible_venta").hasError("required")),t.xp6(1),t.Q6J("ngIf",o.visibleServicioEditar),t.xp6(2),t.Q6J("showUploadButton",!1)("maxFileSize",1e6),t.xp6(6),t.Q6J("ngIf",o.formEditProduct.get("descripcion").hasError("required")))},dependencies:[h.O5,_.rH,v.iA,U.jx,E.p,m.Hq,m.zx,d._Y,d.Fj,d.wV,d.JJ,d.JL,d.Q7,b.H,q.o,A.g,P.Lt,C.V,d.sg,d.u,f.Ro],styles:["svg[_ngcontent-%COMP%]{width:45%}"]})}return i})();function Lt(i,a){1&i&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Nombre"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Porcentaje"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Acciones"),t.qZA()())}function jt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",23)(6,"p-button",24),t.NdJ("click",function(){const n=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.confirmDelete(n.id))}),t.qZA()()()}if(2&i){const e=a.$implicit;t.xp6(2),t.Oqu(e.nombre),t.xp6(2),t.Oqu(e.porcentaje)}}function Gt(i,a){1&i&&(t.TgZ(0,"tr")(1,"td",25),t._uU(2,"Cargando informacion porfavor espere ..."),t.qZA()())}function $t(i,a){1&i&&(t.TgZ(0,"div",26),t._uU(1,"Campo requerido"),t.qZA())}const zt=function(){return{"min-width":"50rem"}},Ot=function(){return{width:"50vw"}};let Ht=(()=>{class i{constructor(e,r,o,n,l){this.FB=e,this.productsService=r,this.spinner=o,this.route=n,this.router=l,this.cols=[],this.impuestosData=[],this.files3=[],this.loadingTable=!0,this.impuestoModalCrear=!1}ngOnInit(){this.impuestosData=[],this.route.params.subscribe(e=>{this.id=e.id}),this.loadingTable=!1,this.formCreate=this.FB.group({impuesto:["",d.kI.required]}),setTimeout(()=>{this.loadImpuesto()})}submitCreate(){this.impuestoModalCrear=!1,0==this.impuestosData.filter(r=>r?.id==this.formCreate.get("impuesto").value.id).length?this.impuestosData.push({nombre:this.formCreate.get("impuesto").value.nombre,porcentaje:this.formCreate.get("impuesto").value.porcentaje,id:this.formCreate.get("impuesto").value.id}):c().fire({title:"Advertecia",text:"El Impuesto ya fue agregado.",icon:"warning"})}openModalCrear(){this.impuestoModalCrear=!0,this.getImpuestoCrear()}onChangeCreateImpuesto(){}confirmDelete(e){this.impuestosData=this.impuestosData.filter(r=>r.id!=e)}loadImpuesto(){this.productsService.getImpuesto(this.id).subscribe(e=>{e.impuestoProducto.forEach(o=>{this.impuestosData.push({nombre:o.impuesto.nombre,porcentaje:o.impuesto.porcentaje,id:o.impuesto_id})})})}getImpuestoCrear(){this.spinner.show(),this.productsService.getImpuestoCrear().subscribe(e=>{this.spinner.hide(),this.impuestos=e.impuestos})}saveImpuesto(e){this.productsService.createImpuesto(e).subscribe(r=>{r.val?(c().fire({title:"Exito",text:r.msm,icon:"success"}),this.router.navigate(["/dashboard/products"])):c().fire({title:"Error",text:r.msm,icon:"error"})})}enviarImpuesto(){this.saveImpuesto({impuestos:this.impuestosData,id:this.id})}static#t=this.\u0275fac=function(r){return new(r||i)(t.Y36(d.qu),t.Y36(T),t.Y36(f.t2),t.Y36(_.gz),t.Y36(_.F0))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-products-tribute"]],decls:30,vars:16,consts:[["type","ball-scale-multiple",3,"fullScreen"],[1,"surface-section","px-4","py-5","md:px-6","lg:px-8"],[1,"flex","align-items-start","flex-column","lg:justify-content-between","lg:flex-row"],[1,"font-medium","text-3xl","text-900"],["pButton","","pRipple","","type","button","icon","pi pi-plus",1,"p-button-rounded","p-button-text",3,"click"],[1,"flex","align-items-center","text-700","flex-wrap"],[1,"mr-5","flex","align-items-center","mt-3"],[1,"mt-3","lg:mt-0"],["pButton","","pRipple","","label","Guardar","icon","",1,"p-button-outlined","mr-2",3,"click"],[1,"grid","mt-3"],[1,"col-12"],[1,"card","px-3","py-3"],["responsiveLayout","scroll",3,"value","tableStyle","loading","rows"],["pTemplate","header"],["pTemplate","body"],["pTemplate","loadingbody"],["header","Agregar Impuesto",3,"visible","modal","draggable","resizable","visibleChange"],[3,"formGroup","ngSubmit"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-12"],["formControlName","impuesto","optionLabel","nombre",3,"options","onChange"],["style","color: red;",4,"ngIf"],["pButton","","pRipple","","label","Agregar Impuesto","icon","pi pi-fw","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl"],[1,"flex","gap-2"],["icon","pi pi-trash","severity","danger",3,"click"],["colspan","8"],[2,"color","red"]],template:function(r,o){1&r&&(t._UZ(0,"ngx-spinner",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"button",4),t.NdJ("click",function(){return o.openModalCrear()}),t.qZA(),t._uU(6," Impuesto Producto "),t.qZA(),t.TgZ(7,"div",5),t._UZ(8,"div",6),t.qZA()(),t.TgZ(9,"div",7)(10,"button",8),t.NdJ("click",function(){return o.enviarImpuesto()}),t.qZA()()()(),t.TgZ(11,"div",9)(12,"div",10)(13,"div",11)(14,"p-table",12),t.YNc(15,Lt,7,0,"ng-template",13),t.YNc(16,jt,7,2,"ng-template",14),t.YNc(17,Gt,3,0,"ng-template",15),t.qZA()()()(),t.TgZ(18,"p-dialog",16),t.NdJ("visibleChange",function(l){return o.impuestoModalCrear=l}),t.TgZ(19,"div",10)(20,"form",17),t.NdJ("ngSubmit",function(){return o.submitCreate()}),t.TgZ(21,"div",18)(22,"div",19)(23,"label"),t._uU(24,"Impuesto"),t.qZA(),t.TgZ(25,"p-dropdown",20),t.NdJ("onChange",function(){return o.onChangeCreateImpuesto()}),t.qZA(),t.YNc(26,$t,2,0,"div",21),t.qZA(),t.TgZ(27,"div",19),t._UZ(28,"button",22),t.qZA()(),t._UZ(29,"br"),t.qZA()()()),2&r&&(t.Q6J("fullScreen",!0),t.xp6(14),t.Q6J("value",o.impuestosData)("tableStyle",t.DdM(14,zt))("loading",o.loadingTable)("rows",8),t.xp6(4),t.Akn(t.DdM(15,Ot)),t.Q6J("visible",o.impuestoModalCrear)("modal",!0)("draggable",!1)("resizable",!1),t.xp6(2),t.Q6J("formGroup",o.formCreate),t.xp6(5),t.Q6J("options",o.impuestos),t.xp6(1),t.Q6J("ngIf",o.formCreate.get("impuesto").hasError("required")))},dependencies:[h.O5,v.iA,U.jx,m.Hq,m.zx,d._Y,d.JJ,d.JL,b.H,P.Lt,C.V,d.sg,d.u,f.Ro]})}return i})();var w=s(2506);let Kt=(()=>{class i{static#t=this.\u0275fac=function(r){return new(r||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[_.Bz.forChild([{path:"",component:Bt,canActivate:[w.a],data:{permissions:["gestionInventario.productos"]}},{path:":id/impuesto",component:Ht,canActivate:[w.a],data:{permissions:["gestionInventario.productos"]}}]),_.Bz]})}return i})();var Xt=s(1712),Wt=s(3514);let te=(()=>{class i{static#t=this.\u0275fac=function(r){return new(r||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({providers:[{provide:I.TP,useClass:k.n,multi:!0},T],imports:[h.ez,Kt,v.U$,E.O,d.u5,m.hJ,b.T,Q.EV,y.V,S.Xt,q.j,A.A,P.kW,Y.cc,V.L$,C.S,F.ii.forRoot(),d.UX,f.ef,Xt.U,Wt.dp]})}return i})()}}]);