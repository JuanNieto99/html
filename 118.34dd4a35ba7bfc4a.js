"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[118],{1118:(le,g,a)=>{a.r(g),a.d(g,{ExternalSequenceModule:()=>oe});var p=a(6814),x=a(4670),o=a(95),b=a(3519),s=a.n(b),e=a(4946),m=a(8672),T=a(4444),f=a(9862);let q=(()=>{class n{constructor(t){this.httpClient=t,this.baseUrl=T.D.url,this.endpointListar="/secuenciaExternaListar",this.endpointExternalSequenceGet="/secuenciaExternaEditar/",this.endpointExternalSequenceUpdate="/secuenciaExternaActualizar",this.endpointExternalSequenceCreate="/secuenciaExternaCrear",this.endpointDelete="/secuenciaExternaEliminar/"}getAll(t,r=""){return new f.WM({"Content-Type":"application/json"}),this.httpClient.post(`${this.baseUrl+this.endpointListar}?per_page=${t}&search=${r}`,{})}getExternalSequence(t){return this.httpClient.get(`${this.baseUrl+this.endpointExternalSequenceGet+t}`)}createExternalSequence(t){return this.httpClient.post(`${this.baseUrl+this.endpointExternalSequenceCreate}`,t)}updateExternalSequence(t){return this.httpClient.post(`${this.baseUrl+this.endpointExternalSequenceUpdate}`,t)}deleteExternalSequence(t){return this.httpClient.post(`${this.baseUrl+this.endpointDelete}`,t)}static#e=this.\u0275fac=function(r){return new(r||n)(e.LFG(f.eN))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var d=a(8027),C=a(5219),h=a(707),E=a(4480),Z=a(3714),_=a(2352),v=a(7213);function A(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",33)(1,"h5",34),e._uU(2,"Secuencia Externa"),e.qZA(),e.TgZ(3,"span",35)(4,"form",36)(5,"input",37),e.NdJ("input",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.search(i.dt))}),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("formGroup",t.formSearch)}}function U(n,l){1&n&&(e.TgZ(0,"tr")(1,"th",38),e._UZ(2,"p-tableHeaderCheckbox"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Hotel"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Prefijo"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Fecha Inicial"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Fecha Final"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Secuencia Inicial"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Secuencia Actual"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Secuencia Final"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Acciones"),e.qZA()())}function I(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._UZ(2,"p-tableCheckbox",39),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"date"),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.ALo(12,"date"),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td",40)(20,"p-button",41),e.NdJ("click",function(){const c=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.editExternalSequence(c.id))}),e.qZA(),e._UZ(21,"p-confirmDialog"),e.TgZ(22,"p-button",42),e.NdJ("click",function(){const c=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.confirmDelete(c.id))}),e.qZA()()()}if(2&n){const t=l.$implicit,r=e.oxw();e.xp6(2),e.Q6J("value",r.externalSequenceData),e.xp6(2),e.Oqu(t.hotel.nombre),e.xp6(2),e.Oqu(t.prefijo),e.xp6(2),e.Oqu(e.xi3(9,8,t.fecha_inicio,"dd/MM/yyyy")),e.xp6(3),e.Oqu(e.xi3(12,11,t.fecha_final,"dd/MM/yyyy")),e.xp6(3),e.Oqu(t.secuensia_incial),e.xp6(2),e.Oqu(t.secuensia_actual),e.xp6(2),e.Oqu(t.secuencia_final)}}function y(n,l){1&n&&(e.TgZ(0,"tr")(1,"td",43),e._uU(2,"Cargando informacion porfavor espere ..."),e.qZA()())}function J(n,l){1&n&&(e.TgZ(0,"div",44),e._uU(1," Campo requerido "),e.qZA())}function w(n,l){1&n&&(e.TgZ(0,"div",44),e._uU(1,"Campo requerido"),e.qZA())}function F(n,l){1&n&&(e.TgZ(0,"div",44),e._uU(1,"Campo requerido"),e.qZA())}function N(n,l){1&n&&(e.TgZ(0,"div",44),e._uU(1,"Campo requerido"),e.qZA())}function M(n,l){1&n&&(e.TgZ(0,"div",44),e._uU(1,"Campo requerido"),e.qZA())}function j(n,l){1&n&&(e.TgZ(0,"div",44),e._uU(1,"Campo requerido"),e.qZA())}function Q(n,l){1&n&&(e.TgZ(0,"div",44),e._uU(1,"Campo requerido"),e.qZA())}function Y(n,l){1&n&&(e.TgZ(0,"div",44),e._uU(1,"Campo requerido"),e.qZA())}function P(n,l){1&n&&(e.TgZ(0,"div",44),e._uU(1,"Campo requerido"),e.qZA())}function D(n,l){1&n&&(e.TgZ(0,"div",44),e._uU(1,"Campo requerido"),e.qZA())}function O(n,l){1&n&&(e.TgZ(0,"div",44),e._uU(1,"Campo requerido"),e.qZA())}function B(n,l){1&n&&(e.TgZ(0,"div",44),e._uU(1,"Campo requerido"),e.qZA())}function L(n,l){1&n&&(e.TgZ(0,"div",44),e._uU(1,"Campo requerido"),e.qZA())}function R(n,l){1&n&&(e.TgZ(0,"div",44),e._uU(1,"Campo requerido"),e.qZA())}const k=function(){return{"min-width":"50rem"}},z=function(){return["nombre","medida","precio","cantidad","inventario","acciones"]},$=function(){return[10,20,30]},S=function(){return{width:"50vw"}};let G=(()=>{class n{constructor(t,r,i){this.FB=t,this.spinner=r,this.ExternalSequenceService=i,this.loadingTable=!1,this.pageCount=10,this.visibleModalExternalSequence=!0,this.visibleModalExternalSequenceEditar=!1,this.imagen=null,this.idEditando=0}ngOnInit(){this.buildForm(),this.getIndex(),this.visibleModalExternalSequence=!1}openModal(){this.onCreate()}onCreate(){this.formCreateExternalSequence.reset(),this.ExternalSequenceService.getExternalSequence(0).subscribe(t=>{this.hotel=t.hotel,this.prefijo=t.prefijo,this.fechaInicial=t.fecha_inicio,this.fechaFinal=t.fecha_final,this.secuenciaInicial=t.secuensia_incial,this.secuenciaActual=t.secuensia_actual,this.secuenciaFinal=t.secuencia_final,this.visibleModalExternalSequence=!0},t=>{console.log("Error: ",t)})}onRemove(t){this.imagen=null}onSelect(t){this.imagen=t.currentFiles[0]}onPage(t){this.pageCount=t.rows,this.getIndex("",this.pageCount)}submitCreate(){this.formCreateExternalSequence.valid?this.newExternalSequence():this.formCreateExternalSequence.markAllAsTouched()}newExternalSequence(){this.visibleModalExternalSequence=!0,this.spinner.show();let t=this.formCreateExternalSequence.value;t.hotel_id=t.hotel_id.id,t.estado=1,this.ExternalSequenceService.createExternalSequence(t).subscribe(r=>{this.spinner.hide(),this.imagen=null,this.visibleModalExternalSequence=!1,"success"==r.code?(s().fire({title:"Exito",text:"Secuencia creada exitosamente.",icon:"success"}),this.getIndex()):s().fire({title:"Error",text:"Error al crear la secuencia.",icon:"error"})},r=>{console.log("Error: ",r)})}editExternalSequence(t){this.idEditando=t,this.spinner.show(),this.ExternalSequenceService.getExternalSequence(t).subscribe(r=>{console.log(r),this.spinner.hide(),this.hotel=r.hotel;const i=r.secuencia_externa;i&&"prefijo"in i&&(this.secuenciaInicial=i.secuensia_incial,this.secuenciaActual=i.secuensia_actual,this.secuenciaFinal=i.secuencia_final,this.fechaInicial=new Date(i.fecha_inicio).toISOString().split("T")[0],this.fechaFinal=new Date(i.fecha_final).toISOString().split("T")[0],this.prefijo=i.prefijo,this.formEditExternalSequence.setValue({hotel_id:this.hotel,prefijo:this.prefijo,fecha_inicio:this.fechaInicial,fecha_final:this.fechaFinal,secuensia_incial:this.secuenciaInicial,secuensia_actual:this.secuenciaActual,secuencia_final:this.secuenciaFinal})),setTimeout(()=>{this.visibleModalExternalSequenceEditar=!0},1)},r=>{console.log("Error: ",r)})}updateExternalSequence(){this.spinner.show();let t=this.formEditExternalSequence.value;t.hotel_id=t.hotel_id.id,t.id=this.idEditando,t.estado=1,this.ExternalSequenceService.updateExternalSequence(t).subscribe(r=>{this.spinner.hide(),this.imagen=null,this.visibleModalExternalSequenceEditar=!1,"success"==r.code?(s().fire({title:"\xc9xito",text:"Producto actualizado exitosamente.",icon:"success"}),this.getIndex()):s().fire({title:"Error",text:"Error al actualizar el producto.",icon:"error"})},r=>{console.log("Error: ",r)})}submitUpdate(){this.formEditExternalSequence.valid&&this.updateExternalSequence()}confirmDelete(t){s().fire({title:"\xbfEstas seguro que deseas eliminar esta secuencia?",text:"Ten cuidado esta acci\xf3n no se prodr\xe1 reversar",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, Confirmar",cancelButtonText:"Cancelar"}).then(r=>{r.isConfirmed&&(this.spinner.show(),this.ExternalSequenceService.deleteExternalSequence({id:t}).subscribe(i=>{this.spinner.hide(),"success"==i.code?(s().fire({title:"Exito",text:"Secuencia eliminada exitosamente.",icon:"success"}),this.getIndex()):s().fire({title:"Error",text:"Error al eliminar la secuencia.",icon:"error"})},i=>{console.log("Error: ",i)}))})}buildForm(){this.formSearch=this.FB.group({search:["",[]]}),this.formCreateExternalSequence=this.FB.group({hotel_id:["",[o.kI.required]],prefijo:["",[o.kI.required]],fecha_inicio:["",[o.kI.required]],fecha_final:["",[o.kI.required]],secuensia_incial:["",[o.kI.required]],secuensia_actual:["",[o.kI.required]],secuencia_final:["",[o.kI.required]]}),this.formEditExternalSequence=this.FB.group({hotel_id:["",[o.kI.required]],prefijo:["",[o.kI.required]],fecha_inicio:["",[o.kI.required]],fecha_final:["",[o.kI.required]],secuensia_incial:["",[o.kI.required]],secuensia_actual:["",[o.kI.required]],secuencia_final:["",[o.kI.required]]})}getIndex(t="",r=this.pageCount){this.spinner.show(),this.loadingTable=!0,this.ExternalSequenceService.getAll(r,t).subscribe(i=>{this.loadingTable=!1,console.log("Response: ",i),this.externalSequenceData=i.data,this.countRegisters=i.total,this.spinner.hide()},i=>{console.log("Error: ",i),this.spinner.hide()})}static#e=this.\u0275fac=function(r){return new(r||n)(e.Y36(o.qu),e.Y36(m.t2),e.Y36(q))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-external-sequence"]],decls:108,vars:47,consts:[["type","ball-scale-multiple"],[1,"surface-section","px-4","py-5","md:px-6","lg:px-8"],[1,"flex","align-items-start","flex-column","lg:justify-content-between","lg:flex-row"],[1,"font-medium","text-3xl","text-900"],[1,"flex","align-items-center","text-700","flex-wrap"],[1,"mr-5","flex","align-items-center","mt-3"],[1,"pi","pi-users","mr-2"],[1,"mt-3","lg:mt-0"],["pButton","","pRipple","","label","Crear","icon","pi pi-star",1,"p-button-outlined","mr-2",3,"click"],[1,"grid","mt-3"],[1,"col-12"],[1,"card","px-3","py-3"],["responsiveLayout","scroll","selectionMode","multiple","dataKey","usuario",3,"value","showPageLinks","first","totalRecords","tableStyle","loading","rows","globalFilterFields","paginator","rowsPerPageOptions","showCurrentPageReport","rowHover","onPage"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","loadingbody"],["header","Secuencia Externa",3,"visible","modal","draggable","resizable","visibleChange"],[3,"formGroup","ngSubmit"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-6"],["optionLabel","nombre","formControlName","hotel_id",3,"options"],["style","color: red;",4,"ngIf"],["type","text","pInputText","","formControlName","prefijo",1,"w-full","mb-3","border-round-3xl"],["type","date","pInputText","","formControlName","fecha_inicio",1,"w-full","mb-3","border-round-3xl"],["type","date","pInputText","","formControlName","fecha_final",1,"w-full","mb-3","border-round-3xl"],["type","number","pInputText","","formControlName","secuensia_incial",1,"w-full","mb-3","border-round-3xl"],["type","number","pInputText","","formControlName","secuensia_actual",1,"w-full","mb-3","border-round-3xl"],["type","number","pInputText","","formControlName","secuencia_final",1,"w-full","mb-3","border-round-3xl"],[1,"field","col-12","md:col-12"],["pButton","","pRipple","","label","Crear Secuencia Externa","icon","pi pi-fw pi-star","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl"],["header","Editar Secuencia Externa",3,"visible","modal","draggable","resizable","visibleChange"],["pButton","","pRipple","","label","Editar Secuencia Externa","icon","pi pi-fw pi-star","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[3,"formGroup"],["formControlName","search","pInputText","","type","text","placeholder","Buscar...",1,"w-full","sm:w-auto",3,"input"],[2,"width","3rem"],[3,"value"],[1,"flex","gap-2"],["icon","pi pi-user-edit","severity","info",3,"click"],["icon","pi pi-trash","severity","danger",3,"click"],["colspan","8"],[2,"color","red"]],template:function(r,i){1&r&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div")(4,"div",3),e._uU(5,"Secuencia Externa"),e.qZA(),e.TgZ(6,"div",4)(7,"div",5),e._UZ(8,"i",6),e.qZA()()(),e.TgZ(9,"div",7)(10,"button",8),e.NdJ("click",function(){return i.openModal()}),e.qZA()()()(),e.TgZ(11,"div",9)(12,"div",10)(13,"div",11)(14,"p-table",12),e.NdJ("onPage",function(u){return i.onPage(u)}),e.YNc(15,A,6,1,"ng-template",13),e.YNc(16,U,19,0,"ng-template",14),e.YNc(17,I,23,14,"ng-template",15),e.YNc(18,y,3,0,"ng-template",16),e.qZA()()()(),e._uU(19,"\n<"),e.TgZ(20,"p-dialog",17),e.NdJ("visibleChange",function(u){return i.visibleModalExternalSequence=u}),e.TgZ(21,"div",10)(22,"h5"),e._uU(23,"Completa el formulario"),e.qZA(),e.TgZ(24,"form",18),e.NdJ("ngSubmit",function(){return i.submitCreate()}),e.TgZ(25,"div",19)(26,"div",20)(27,"label"),e._uU(28,"Hotel"),e.qZA(),e._UZ(29,"p-dropdown",21),e.YNc(30,J,2,0,"div",22),e.qZA(),e.TgZ(31,"div",20)(32,"label"),e._uU(33,"Prefijo"),e.qZA(),e._UZ(34,"input",23),e.YNc(35,w,2,0,"div",22),e.qZA(),e.TgZ(36,"div",20)(37,"label"),e._uU(38,"Fecha Inicio"),e.qZA(),e._UZ(39,"input",24),e.YNc(40,F,2,0,"div",22),e.qZA(),e.TgZ(41,"div",20)(42,"label"),e._uU(43,"Fecha Final"),e.qZA(),e._UZ(44,"input",25),e.YNc(45,N,2,0,"div",22),e.qZA(),e.TgZ(46,"div",20)(47,"label"),e._uU(48,"Secuencia Inicial"),e.qZA(),e._UZ(49,"input",26),e.YNc(50,M,2,0,"div",22),e.qZA(),e.TgZ(51,"div",20)(52,"label"),e._uU(53,"Secuencia Actual"),e.qZA(),e._UZ(54,"input",27),e.YNc(55,j,2,0,"div",22),e.qZA(),e.TgZ(56,"div",20)(57,"label"),e._uU(58,"Secuencia Final"),e.qZA(),e._UZ(59,"input",28),e.YNc(60,Q,2,0,"div",22),e.qZA(),e.TgZ(61,"div",29),e._UZ(62,"button",30),e.qZA()(),e._UZ(63,"br"),e.qZA()()(),e.TgZ(64,"p-dialog",31),e.NdJ("visibleChange",function(u){return i.visibleModalExternalSequenceEditar=u}),e.TgZ(65,"div",10)(66,"h5"),e._uU(67,"Completa el formulario"),e.qZA(),e.TgZ(68,"form",18),e.NdJ("ngSubmit",function(){return i.submitUpdate()}),e.TgZ(69,"div",19)(70,"div",20)(71,"label"),e._uU(72,"Hotel"),e.qZA(),e._UZ(73,"p-dropdown",21),e.YNc(74,Y,2,0,"div",22),e.qZA(),e.TgZ(75,"div",20)(76,"label"),e._uU(77,"Prefijo"),e.qZA(),e._UZ(78,"input",23),e.YNc(79,P,2,0,"div",22),e.qZA(),e.TgZ(80,"div",20)(81,"label"),e._uU(82,"Fecha Inicio"),e.qZA(),e._UZ(83,"input",24),e.YNc(84,D,2,0,"div",22),e.qZA(),e.TgZ(85,"div",20)(86,"label"),e._uU(87,"Fecha Final"),e.qZA(),e._UZ(88,"input",25),e.YNc(89,O,2,0,"div",22),e.qZA(),e.TgZ(90,"div",20)(91,"label"),e._uU(92,"Secuencia Inicial"),e.qZA(),e._UZ(93,"input",26),e.YNc(94,B,2,0,"div",22),e.qZA(),e.TgZ(95,"div",20)(96,"label"),e._uU(97,"Secuencia Actual"),e.qZA(),e._UZ(98,"input",27),e.YNc(99,L,2,0,"div",22),e.qZA(),e.TgZ(100,"div",20)(101,"label"),e._uU(102,"Secuencia Final"),e.qZA(),e._UZ(103,"input",28),e.YNc(104,R,2,0,"div",22),e.qZA(),e.TgZ(105,"div",29),e._UZ(106,"button",32),e.qZA()(),e._UZ(107,"br"),e.qZA()()()),2&r&&(e.xp6(14),e.Q6J("value",i.externalSequenceData)("showPageLinks",!0)("first",1)("totalRecords",17)("tableStyle",e.DdM(42,k))("loading",i.loadingTable)("rows",8)("globalFilterFields",e.DdM(43,z))("paginator",!0)("rowsPerPageOptions",e.DdM(44,$))("showCurrentPageReport",!0)("rowHover",!0),e.xp6(6),e.Akn(e.DdM(45,S)),e.Q6J("visible",i.visibleModalExternalSequence)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(4),e.Q6J("formGroup",i.formCreateExternalSequence),e.xp6(5),e.Q6J("options",i.hotel),e.xp6(1),e.Q6J("ngIf",i.formCreateExternalSequence.get("hotel_id").hasError("required")&&i.formCreateExternalSequence.get("hotel_id").touched),e.xp6(5),e.Q6J("ngIf",i.formCreateExternalSequence.get("prefijo").hasError("required")),e.xp6(5),e.Q6J("ngIf",i.formCreateExternalSequence.get("fecha_inicio").hasError("required")),e.xp6(5),e.Q6J("ngIf",i.formCreateExternalSequence.get("fecha_final").hasError("required")),e.xp6(5),e.Q6J("ngIf",i.formCreateExternalSequence.get("secuensia_incial").hasError("required")),e.xp6(5),e.Q6J("ngIf",i.formCreateExternalSequence.get("secuensia_actual").hasError("required")),e.xp6(5),e.Q6J("ngIf",i.formCreateExternalSequence.get("secuencia_final").hasError("required")),e.xp6(4),e.Akn(e.DdM(46,S)),e.Q6J("visible",i.visibleModalExternalSequenceEditar)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(4),e.Q6J("formGroup",i.formEditExternalSequence),e.xp6(5),e.Q6J("options",i.hotel),e.xp6(1),e.Q6J("ngIf",i.formEditExternalSequence.get("hotel_id").hasError("required")),e.xp6(5),e.Q6J("ngIf",i.formEditExternalSequence.get("prefijo").hasError("required")),e.xp6(5),e.Q6J("ngIf",i.formEditExternalSequence.get("fecha_inicio").hasError("required")),e.xp6(5),e.Q6J("ngIf",i.formEditExternalSequence.get("fecha_final").hasError("required")),e.xp6(5),e.Q6J("ngIf",i.formEditExternalSequence.get("secuensia_incial").hasError("required")),e.xp6(5),e.Q6J("ngIf",i.formEditExternalSequence.get("secuensia_actual").hasError("required")),e.xp6(5),e.Q6J("ngIf",i.formEditExternalSequence.get("secuencia_final").hasError("required")))},dependencies:[p.O5,d.iA,C.jx,d.UA,d.Mo,h.Hq,h.zx,o._Y,o.Fj,o.wV,o.JJ,o.JL,E.H,Z.o,_.Lt,v.V,o.sg,o.u,m.Ro,p.uU],styles:["svg[_ngcontent-%COMP%]{width:45%}"]})}return n})(),H=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[x.Bz.forChild([{path:"",component:G}]),x.Bz]})}return n})();var V=a(5722),K=a(6068),X=a(354),W=a(6218),ee=a(1712),te=a(1865),ne=a(6022),ie=a(4104),re=a(6340),ae=a(8712);let oe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({providers:[{provide:f.TP,useClass:ae.n,multi:!0},q],imports:[p.ez,H,d.U$,K.O,o.u5,h.hJ,E.T,ie.EV,re.V,ne.Xt,Z.j,W.A,_.kW,te.cc,X.L$,v.S,V.ii.forRoot(),o.UX,m.ef,ee.U]})}return n})()}}]);