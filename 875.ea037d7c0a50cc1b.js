"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[875],{875:(te,f,s)=>{s.r(f),s.d(f,{PermissionsModule:()=>G});var h=s(6814),l=s(95),b=s(4670),m=s(5219),C=s(3519),v=s.n(C),e=s(4946),P=s(5379),Z=s(1455),u=s(4104),c=s(7213),A=s(5817),N=s(2656),g=s(8027),d=s(707),x=s(4480),T=s(3714);function w(r,p){if(1&r){const t=e.EpF();e.TgZ(0,"div",33)(1,"h5",34),e._uU(2,"Lista de Permisos"),e.qZA(),e.TgZ(3,"span",35),e._UZ(4,"i",36),e.TgZ(5,"input",37),e.NdJ("input",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.onGlobalFilter(n.dt,i))}),e.qZA()()()}}function U(r,p){1&r&&(e.TgZ(0,"tr")(1,"th",38),e._uU(2,"Nombre"),e.qZA(),e.TgZ(3,"th",38),e._uU(4,"C\xf3digo"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Descripci\xf3n"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Acciones"),e.qZA()())}function y(r,p){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td",39)(8,"p-button",40),e.NdJ("click",function(){const n=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.getPermission(n.id))}),e.qZA(),e._UZ(9,"p-confirmDialog"),e.TgZ(10,"p-button",41),e.NdJ("click",function(){const n=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.confirmDelete(n.id))}),e.qZA()()()}if(2&r){const t=p.$implicit;e.xp6(2),e.Oqu(t.nombre),e.xp6(2),e.Oqu(t.codigo),e.xp6(2),e.Oqu(t.descripcion)}}function I(r,p){if(1&r&&e._UZ(0,"input",42),2&r){const t=e.oxw();e.Q6J("value",t.permissionData.nombre)}}function J(r,p){if(1&r&&e._UZ(0,"input",43),2&r){const t=e.oxw();e.Q6J("value",t.permissionData.codigo)}}const S=function(){return{"min-width":"50rem"}},_=function(){return["usuario","email","superadmin","estado"]},E=function(){return[10,20,30]},Y=function(){return{width:"50vw"}},R=function(){return{width:"500px"}};let B=(()=>{class r{constructor(t,o,i,n,a,$,k,K,X,W,ee){this.permissionsService=t,this.hotelsService=o,this.confirmationService=i,this.toastModule=n,this.dialogModule=a,this.messageService=$,this.usersService=k,this.breadcrumbService=K,this.tableModule=X,this.buttonModule=W,this.cdRef=ee,this.editarH=!1,this.crearH=!1,this.pageCount=10,this.editarPermit=!1,this.crearPermit=!1,this.pageActual=1,this.ultimaPage=1,this.disablePageLeft=!1,this.disablePageRight=!0,this.registrosContar=0,this.formNewP=new l.cw({nombre:new l.NI("",l.kI.required),codigo:new l.NI("",l.kI.required),descripcion:new l.NI("",l.kI.required)}),this.formEditP=new l.cw({nombre:new l.NI("",l.kI.required),codigo:new l.NI("",l.kI.required),id:new l.NI("",l.kI.required)})}ngOnInit(){this.getIndex(),this.permissionsService.data.subscribe(t=>{this.permission=t})}createPermission(){const t=this.formNewP.value;this.formNewP.reset(),this.permissionsService.CreatePermissions(t).subscribe(o=>{this.messageService.add({severity:"info",summary:"Confirmaci\xf3n Exitosa",detail:"Usuario creado.",sticky:!0,life:200}),this.crearPermit=!1,this.getIndex()},o=>{console.log("Error:",o)})}getIndex(t="",o=this.pageCount,i=1){this.permissionsService.getPermissions(o,t,i).subscribe(n=>{this.permission=n.data,this.totalPermission=n.total,this.ultimaPage=n.last_page,this.registrosContar=n.total},n=>{console.log("Error: ",n)})}getPermission(t){this.permissionsService.getPermissionById(t).subscribe(o=>{this.permissionData=o,console.log(this.permissionData),this.formEditP.get("nombre").setValue(o.nombre),this.formEditP.get("codigo").setValue(o.codigo),this.formEditP.get("codigo").disable(),this.formEditP.get("id").setValue(o.id),this.editarPermit=!0})}updatePermission(){this.formEditP.get("id").setValue(this.permissionData.id);const t=this.formEditP.value;console.log(t),this.permissionsService.updatePermissions(t).subscribe(o=>{console.log(o),this.editarPermit=!1,this.permissionsService.refresPermissionData()},o=>{console.log("Error:",o)})}confirmDelete(t){console.log(t),v().fire({title:"\xbfEstas Seguro que deseas eliminar el Permiso?",text:"Ten cuidado esta acci\xf3n no se prodr\xe1 reversar",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, Confirmar",cancelButtonText:"Cancelar"}).then(o=>{o.isConfirmed&&(this.permissionsService.deletePermissions(t).subscribe(i=>{console.log(i),this.permissionsService.refresPermissionData()}),v().fire({title:"Confirmaci\xf3n",text:"El Permiso ha sido eliminado.",icon:"success"}))})}modalNewP(){this.crearPermit=!0}leftTable(){this.pageActual=this.pageActual-1,this.getIndex("",this.pageCount,this.pageActual),this.validatePage()}rightTable(){this.pageActual=this.pageActual+1,this.getIndex("",this.pageCount,this.pageActual),this.validatePage()}validatePage(){1==this.pageActual&&(this.disablePageLeft=!1),this.pageActual>1&&(this.disablePageLeft=!0),this.ultimaPage==this.pageActual&&(this.disablePageRight=!1),this.ultimaPage>this.pageActual&&(this.disablePageRight=!0)}static#e=this.\u0275fac=function(o){return new(o||r)(e.Y36(P.q),e.Y36(Z.s),e.Y36(m.YP),e.Y36(u.EV),e.Y36(c.S),e.Y36(m.ez),e.Y36(A.f),e.Y36(N.p),e.Y36(g.U$),e.Y36(d.hJ),e.Y36(e.sBO))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-permisssions"]],features:[e._Bn([m.YP,m.ez])],decls:59,vars:29,consts:[[1,"surface-section","px-4","py-5","md:px-6","lg:px-8"],[1,"flex","align-items-start","flex-column","lg:justify-content-between","lg:flex-row"],[1,"font-medium","text-3xl","text-900"],[1,"flex","align-items-center","text-700","flex-wrap"],[1,"mr-5","flex","align-items-center","mt-3"],[1,"pi","pi-users","mr-2"],[1,"mt-3","lg:mt-0"],["pButton","","pRipple","","icon","pi pi-plus",1,"p-button-outlined","mr-2",3,"click"],[1,"grid","mt-3"],[1,"col-12"],[1,"card","px-3","py-3"],["responsiveLayout","scroll","currentPageReportTemplate","Mostrando {first} de {totalRecords} Permisos","selectionMode","multiple","dataKey","hotel",3,"value","tableStyle","rows","globalFilterFields","rowsPerPageOptions","showCurrentPageReport","rowHover"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[2,"text-align","center"],[1,"p-buttonset"],["pButton","","pRipple","","label","","icon","pi pi-arrow-left",3,"disabled","click"],["pButton","","pRipple","",3,"label"],["pButton","","pRipple","","label","","icon","pi pi-arrow-right",3,"disabled","click"],["header","Crear un Permiso",3,"visible","modal","draggable","resizable","visibleChange"],[3,"formGroup","ngSubmit"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-4"],["type","text","placeholder","Auditar","pInputText","","formControlName","nombre",1,"w-full","mb-3","border-round-3xl"],["type","text","placeholder","aut","pInputText","","formControlName","codigo",1,"w-full","mb-3","border-round-3xl"],["type","text","pInputText","","formControlName","descripcion",1,"w-full","mb-3","border-round-3xl"],[1,"field","col-12","md:col-12"],["pButton","","pRipple","","label","Crear Permiso","icon","pi pi-user","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl"],["header","Editar Rol","modal","modal",3,"visible","visibleChange","onVisibleChange"],["type","text","pInputText","","class","w-full mb-3 border-round-3xl","formControlName","nombre",3,"value",4,"ngIf"],["type","text","pInputText","","class","w-full mb-3 border-round-3xl","formControlName","codigo",3,"value",4,"ngIf"],["pButton","","pRipple","","label","Editar Permiso","icon","pi pi-user","type","submit",1,"w-full","bg-admin","boder-admin","mb-5","border-round-3xl"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar...",1,"w-full","sm:w-auto",3,"input"],[2,"width","20%"],[1,"flex","gap-2"],["icon","pi pi-user-edit","severity","info",3,"click"],["icon","pi pi-trash","severity","danger",3,"click"],["type","text","pInputText","","formControlName","nombre",1,"w-full","mb-3","border-round-3xl",3,"value"],["type","text","pInputText","","formControlName","codigo",1,"w-full","mb-3","border-round-3xl",3,"value"]],template:function(o,i){1&o&&(e._UZ(0,"p-toast"),e.TgZ(1,"div",0)(2,"div",1)(3,"div")(4,"div",2),e._uU(5,"Permisos"),e.qZA(),e.TgZ(6,"div",3)(7,"div",4),e._UZ(8,"i",5),e.TgZ(9,"span"),e._uU(10),e.qZA()()()(),e.TgZ(11,"div",6)(12,"button",7),e.NdJ("click",function(){return i.modalNewP()}),e.qZA()()()(),e.TgZ(13,"div",8)(14,"div",9)(15,"div",10)(16,"p-table",11),e.YNc(17,w,6,0,"ng-template",12),e.YNc(18,U,9,0,"ng-template",13),e.YNc(19,y,11,3,"ng-template",14),e.qZA(),e._UZ(20,"br"),e.TgZ(21,"div",15)(22,"span",16)(23,"button",17),e.NdJ("click",function(){return i.leftTable()}),e.qZA(),e._UZ(24,"button",18),e.TgZ(25,"button",19),e.NdJ("click",function(){return i.rightTable()}),e.qZA()()()()()(),e.TgZ(26,"p-dialog",20),e.NdJ("visibleChange",function(a){return i.crearPermit=a}),e.TgZ(27,"div",9)(28,"h5"),e._uU(29,"Completa el formulario"),e.qZA(),e.TgZ(30,"form",21),e.NdJ("ngSubmit",function(){return i.createPermission()}),e.TgZ(31,"div",22)(32,"div",23)(33,"label"),e._uU(34,"Nombre del Permiso"),e.qZA(),e._UZ(35,"input",24),e.qZA(),e.TgZ(36,"div",23)(37,"label"),e._uU(38,"C\xf3digo"),e.qZA(),e._UZ(39,"input",25),e.qZA(),e.TgZ(40,"div",23)(41,"label"),e._uU(42,"Descripcion"),e.qZA(),e._UZ(43,"input",26),e.qZA(),e.TgZ(44,"div",27),e._UZ(45,"button",28),e.qZA()()()()(),e.TgZ(46,"p-dialog",29),e.NdJ("visibleChange",function(a){return i.editarPermit=a})("onVisibleChange",function(){return i.editarPermit=!i.editarPermit}),e.TgZ(47,"form",21),e.NdJ("ngSubmit",function(){return i.updatePermission()}),e.TgZ(48,"div",22)(49,"div",23)(50,"label"),e._uU(51,"Nombre del Permiso"),e.qZA(),e.YNc(52,I,1,1,"input",30),e.qZA(),e.TgZ(53,"div",23)(54,"label"),e._uU(55,"C\xf3digo"),e.qZA(),e.YNc(56,J,1,1,"input",31),e.qZA(),e.TgZ(57,"div",27),e._UZ(58,"button",32),e.qZA()()()()),2&o&&(e.xp6(10),e.hij("Permisos Creados ",i.registrosContar,""),e.xp6(6),e.Q6J("value",i.permission)("tableStyle",e.DdM(24,S))("rows",10)("globalFilterFields",e.DdM(25,_))("rowsPerPageOptions",e.DdM(26,E))("showCurrentPageReport",!0)("rowHover",!0),e.xp6(7),e.Q6J("disabled",!i.disablePageLeft),e.xp6(1),e.Q6J("label",i.pageActual),e.xp6(1),e.Q6J("disabled",!i.disablePageRight),e.xp6(1),e.Akn(e.DdM(27,Y)),e.Q6J("visible",i.crearPermit)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(4),e.Q6J("formGroup",i.formNewP),e.xp6(16),e.Akn(e.DdM(28,R)),e.Q6J("visible",i.editarPermit),e.xp6(1),e.Q6J("formGroup",i.formEditP),e.xp6(5),e.Q6J("ngIf",i.editarPermit),e.xp6(4),e.Q6J("ngIf",i.editarPermit))},dependencies:[h.O5,g.iA,m.jx,d.Hq,d.zx,l._Y,l.Fj,l.JJ,l.JL,x.H,u.FN,T.o,c.V,l.sg,l.u],encapsulation:2})}return r})(),D=(()=>{class r{static#e=this.\u0275fac=function(o){return new(o||r)};static#t=this.\u0275mod=e.oAB({type:r});static#i=this.\u0275inj=e.cJS({imports:[b.Bz.forChild([{path:"",component:B}]),b.Bz]})}return r})();var M=s(6068),F=s(6340),q=s(6022),Q=s(6218),V=s(2352),H=s(1865),O=s(354),j=s(9862),z=s(8712),L=s(5722);let G=(()=>{class r{static#e=this.\u0275fac=function(o){return new(o||r)};static#t=this.\u0275mod=e.oAB({type:r});static#i=this.\u0275inj=e.cJS({providers:[{provide:j.TP,useClass:z.n,multi:!0},P.q,Z.s],imports:[h.ez,D,g.U$,M.O,l.u5,d.hJ,x.T,u.EV,F.V,q.Xt,T.j,Q.A,V.kW,H.cc,O.L$,c.S,L.ii.forRoot(),l.UX]})}return r})()}}]);